const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PostDetailPage-Z5QPt3E8.js","assets/index-BMSQkwth.js","assets/NewPostPage-DEF2-MUX.js","assets/upload-UyIAgWlm.js","assets/EditPostPage-CZzqY9Hq.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function yu(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Oe={},Is=[],yn=()=>{},mm=()=>!1,Ja=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Eu=t=>t.startsWith("onUpdate:"),at=Object.assign,vu=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},zE=Object.prototype.hasOwnProperty,Se=(t,e)=>zE.call(t,e),ae=Array.isArray,As=t=>po(t)==="[object Map]",Xa=t=>po(t)==="[object Set]",xf=t=>po(t)==="[object Date]",de=t=>typeof t=="function",We=t=>typeof t=="string",An=t=>typeof t=="symbol",xe=t=>t!==null&&typeof t=="object",gm=t=>(xe(t)||de(t))&&de(t.then)&&de(t.catch),_m=Object.prototype.toString,po=t=>_m.call(t),KE=t=>po(t).slice(8,-1),ym=t=>po(t)==="[object Object]",Tu=t=>We(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Si=yu(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Za=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},QE=/-\w/g,vr=Za(t=>t.replace(QE,e=>e.slice(1).toUpperCase())),YE=/\B([A-Z])/g,Cr=Za(t=>t.replace(YE,"-$1").toLowerCase()),Em=Za(t=>t.charAt(0).toUpperCase()+t.slice(1)),el=Za(t=>t?`on${Em(t)}`:""),ur=(t,e)=>!Object.is(t,e),na=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},vm=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},ec=t=>{const e=parseFloat(t);return isNaN(e)?t:e},JE=t=>{const e=We(t)?Number(t):NaN;return isNaN(e)?t:e};let Vf;const tc=()=>Vf||(Vf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function wu(t){if(ae(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=We(r)?tv(r):wu(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(We(t)||xe(t))return t}const XE=/;(?![^(]*\))/g,ZE=/:([^]+)/,ev=/\/\*[^]*?\*\//g;function tv(t){const e={};return t.replace(ev,"").split(XE).forEach(n=>{if(n){const r=n.split(ZE);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function mo(t){let e="";if(We(t))e=t;else if(ae(t))for(let n=0;n<t.length;n++){const r=mo(t[n]);r&&(e+=r+" ")}else if(xe(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const nv="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",rv=yu(nv);function Tm(t){return!!t||t===""}function sv(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=nc(t[r],e[r]);return n}function nc(t,e){if(t===e)return!0;let n=xf(t),r=xf(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=An(t),r=An(e),n||r)return t===e;if(n=ae(t),r=ae(e),n||r)return n&&r?sv(t,e):!1;if(n=xe(t),r=xe(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const o in t){const c=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(c&&!l||!c&&l||!nc(t[o],e[o]))return!1}}return String(t)===String(e)}function iv(t,e){return t.findIndex(n=>nc(n,e))}const wm=t=>!!(t&&t.__v_isRef===!0),tt=t=>We(t)?t:t==null?"":ae(t)||xe(t)&&(t.toString===_m||!de(t.toString))?wm(t)?tt(t.value):JSON.stringify(t,Im,2):String(t),Im=(t,e)=>wm(e)?Im(t,e.value):As(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[tl(r,i)+" =>"]=s,n),{})}:Xa(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>tl(n))}:An(e)?tl(e):xe(e)&&!ae(e)&&!ym(e)?String(e):e,tl=(t,e="")=>{var n;return An(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let vt;class Am{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=vt,!e&&vt&&(this.index=(vt.scopes||(vt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=vt;try{return vt=this,e()}finally{vt=n}}}on(){++this._on===1&&(this.prevScope=vt,vt=this)}off(){this._on>0&&--this._on===0&&(vt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function bm(t){return new Am(t)}function Rm(){return vt}function ov(t,e=!1){vt&&vt.cleanups.push(t)}let Me;const nl=new WeakSet;class Sm{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,vt&&vt.active&&vt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,nl.has(this)&&(nl.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Cm(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Df(this),km(this);const e=Me,n=rn;Me=this,rn=!0;try{return this.fn()}finally{Nm(this),Me=e,rn=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)bu(e);this.deps=this.depsTail=void 0,Df(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?nl.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Cl(this)&&this.run()}get dirty(){return Cl(this)}}let Pm=0,Pi,Ci;function Cm(t,e=!1){if(t.flags|=8,e){t.next=Ci,Ci=t;return}t.next=Pi,Pi=t}function Iu(){Pm++}function Au(){if(--Pm>0)return;if(Ci){let e=Ci;for(Ci=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Pi;){let e=Pi;for(Pi=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function km(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Nm(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),bu(r),av(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function Cl(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(xm(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function xm(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Hi)||(t.globalVersion=Hi,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Cl(t))))return;t.flags|=2;const e=t.dep,n=Me,r=rn;Me=t,rn=!0;try{km(t);const s=t.fn(t._value);(e.version===0||ur(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{Me=n,rn=r,Nm(t),t.flags&=-3}}function bu(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)bu(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function av(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let rn=!0;const Vm=[];function Fn(){Vm.push(rn),rn=!1}function Un(){const t=Vm.pop();rn=t===void 0?!0:t}function Df(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Me;Me=void 0;try{e()}finally{Me=n}}}let Hi=0;class cv{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ru{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Me||!rn||Me===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Me)n=this.activeLink=new cv(Me,this),Me.deps?(n.prevDep=Me.depsTail,Me.depsTail.nextDep=n,Me.depsTail=n):Me.deps=Me.depsTail=n,Dm(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=Me.depsTail,n.nextDep=void 0,Me.depsTail.nextDep=n,Me.depsTail=n,Me.deps===n&&(Me.deps=r)}return n}trigger(e){this.version++,Hi++,this.notify(e)}notify(e){Iu();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Au()}}}function Dm(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)Dm(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const ya=new WeakMap,Jr=Symbol(""),kl=Symbol(""),Gi=Symbol("");function wt(t,e,n){if(rn&&Me){let r=ya.get(t);r||ya.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new Ru),s.map=r,s.key=n),s.track()}}function Vn(t,e,n,r,s,i){const o=ya.get(t);if(!o){Hi++;return}const c=l=>{l&&l.trigger()};if(Iu(),e==="clear")o.forEach(c);else{const l=ae(t),u=l&&Tu(n);if(l&&n==="length"){const f=Number(r);o.forEach((d,m)=>{(m==="length"||m===Gi||!An(m)&&m>=f)&&c(d)})}else switch((n!==void 0||o.has(void 0))&&c(o.get(n)),u&&c(o.get(Gi)),e){case"add":l?u&&c(o.get("length")):(c(o.get(Jr)),As(t)&&c(o.get(kl)));break;case"delete":l||(c(o.get(Jr)),As(t)&&c(o.get(kl)));break;case"set":As(t)&&c(o.get(Jr));break}}Au()}function lv(t,e){const n=ya.get(t);return n&&n.get(e)}function ps(t){const e=be(t);return e===t?e:(wt(e,"iterate",Gi),zt(t)?e:e.map(ht))}function rc(t){return wt(t=be(t),"iterate",Gi),t}const uv={__proto__:null,[Symbol.iterator](){return rl(this,Symbol.iterator,ht)},concat(...t){return ps(this).concat(...t.map(e=>ae(e)?ps(e):e))},entries(){return rl(this,"entries",t=>(t[1]=ht(t[1]),t))},every(t,e){return Pn(this,"every",t,e,void 0,arguments)},filter(t,e){return Pn(this,"filter",t,e,n=>n.map(ht),arguments)},find(t,e){return Pn(this,"find",t,e,ht,arguments)},findIndex(t,e){return Pn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Pn(this,"findLast",t,e,ht,arguments)},findLastIndex(t,e){return Pn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Pn(this,"forEach",t,e,void 0,arguments)},includes(...t){return sl(this,"includes",t)},indexOf(...t){return sl(this,"indexOf",t)},join(t){return ps(this).join(t)},lastIndexOf(...t){return sl(this,"lastIndexOf",t)},map(t,e){return Pn(this,"map",t,e,void 0,arguments)},pop(){return gi(this,"pop")},push(...t){return gi(this,"push",t)},reduce(t,...e){return Of(this,"reduce",t,e)},reduceRight(t,...e){return Of(this,"reduceRight",t,e)},shift(){return gi(this,"shift")},some(t,e){return Pn(this,"some",t,e,void 0,arguments)},splice(...t){return gi(this,"splice",t)},toReversed(){return ps(this).toReversed()},toSorted(t){return ps(this).toSorted(t)},toSpliced(...t){return ps(this).toSpliced(...t)},unshift(...t){return gi(this,"unshift",t)},values(){return rl(this,"values",ht)}};function rl(t,e,n){const r=rc(t),s=r[e]();return r!==t&&!zt(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.done||(i.value=n(i.value)),i}),s}const hv=Array.prototype;function Pn(t,e,n,r,s,i){const o=rc(t),c=o!==t&&!zt(t),l=o[e];if(l!==hv[e]){const d=l.apply(t,i);return c?ht(d):d}let u=n;o!==t&&(c?u=function(d,m){return n.call(this,ht(d),m,t)}:n.length>2&&(u=function(d,m){return n.call(this,d,m,t)}));const f=l.call(o,u,r);return c&&s?s(f):f}function Of(t,e,n,r){const s=rc(t);let i=n;return s!==t&&(zt(t)?n.length>3&&(i=function(o,c,l){return n.call(this,o,c,l,t)}):i=function(o,c,l){return n.call(this,o,ht(c),l,t)}),s[e](i,...r)}function sl(t,e,n){const r=be(t);wt(r,"iterate",Gi);const s=r[e](...n);return(s===-1||s===!1)&&Cu(n[0])?(n[0]=be(n[0]),r[e](...n)):s}function gi(t,e,n=[]){Fn(),Iu();const r=be(t)[e].apply(t,n);return Au(),Un(),r}const fv=yu("__proto__,__v_isRef,__isVue"),Om=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(An));function dv(t){An(t)||(t=String(t));const e=be(this);return wt(e,"has",t),e.hasOwnProperty(t)}class Mm{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?Iv:Bm:i?Um:Fm).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=ae(e);if(!s){let l;if(o&&(l=uv[n]))return l;if(n==="hasOwnProperty")return dv}const c=Reflect.get(e,n,Ke(e)?e:r);if((An(n)?Om.has(n):fv(n))||(s||wt(e,"get",n),i))return c;if(Ke(c)){const l=o&&Tu(n)?c:c.value;return s&&xe(l)?xl(l):l}return xe(c)?s?xl(c):go(c):c}}class Lm extends Mm{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];if(!this._isShallow){const l=Tr(i);if(!zt(r)&&!Tr(r)&&(i=be(i),r=be(r)),!ae(e)&&Ke(i)&&!Ke(r))return l||(i.value=r),!0}const o=ae(e)&&Tu(n)?Number(n)<e.length:Se(e,n),c=Reflect.set(e,n,r,Ke(e)?e:s);return e===be(s)&&(o?ur(r,i)&&Vn(e,"set",n,r):Vn(e,"add",n,r)),c}deleteProperty(e,n){const r=Se(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&Vn(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!An(n)||!Om.has(n))&&wt(e,"has",n),r}ownKeys(e){return wt(e,"iterate",ae(e)?"length":Jr),Reflect.ownKeys(e)}}class pv extends Mm{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const mv=new Lm,gv=new pv,_v=new Lm(!0);const Nl=t=>t,Ho=t=>Reflect.getPrototypeOf(t);function yv(t,e,n){return function(...r){const s=this.__v_raw,i=be(s),o=As(i),c=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=s[t](...r),f=n?Nl:e?Ea:ht;return!e&&wt(i,"iterate",l?kl:Jr),{next(){const{value:d,done:m}=u.next();return m?{value:d,done:m}:{value:c?[f(d[0]),f(d[1])]:f(d),done:m}},[Symbol.iterator](){return this}}}}function Go(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Ev(t,e){const n={get(s){const i=this.__v_raw,o=be(i),c=be(s);t||(ur(s,c)&&wt(o,"get",s),wt(o,"get",c));const{has:l}=Ho(o),u=e?Nl:t?Ea:ht;if(l.call(o,s))return u(i.get(s));if(l.call(o,c))return u(i.get(c));i!==o&&i.get(s)},get size(){const s=this.__v_raw;return!t&&wt(be(s),"iterate",Jr),s.size},has(s){const i=this.__v_raw,o=be(i),c=be(s);return t||(ur(s,c)&&wt(o,"has",s),wt(o,"has",c)),s===c?i.has(s):i.has(s)||i.has(c)},forEach(s,i){const o=this,c=o.__v_raw,l=be(c),u=e?Nl:t?Ea:ht;return!t&&wt(l,"iterate",Jr),c.forEach((f,d)=>s.call(i,u(f),u(d),o))}};return at(n,t?{add:Go("add"),set:Go("set"),delete:Go("delete"),clear:Go("clear")}:{add(s){!e&&!zt(s)&&!Tr(s)&&(s=be(s));const i=be(this);return Ho(i).has.call(i,s)||(i.add(s),Vn(i,"add",s,s)),this},set(s,i){!e&&!zt(i)&&!Tr(i)&&(i=be(i));const o=be(this),{has:c,get:l}=Ho(o);let u=c.call(o,s);u||(s=be(s),u=c.call(o,s));const f=l.call(o,s);return o.set(s,i),u?ur(i,f)&&Vn(o,"set",s,i):Vn(o,"add",s,i),this},delete(s){const i=be(this),{has:o,get:c}=Ho(i);let l=o.call(i,s);l||(s=be(s),l=o.call(i,s)),c&&c.call(i,s);const u=i.delete(s);return l&&Vn(i,"delete",s,void 0),u},clear(){const s=be(this),i=s.size!==0,o=s.clear();return i&&Vn(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=yv(s,t,e)}),n}function Su(t,e){const n=Ev(t,e);return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(Se(n,s)&&s in r?n:r,s,i)}const vv={get:Su(!1,!1)},Tv={get:Su(!1,!0)},wv={get:Su(!0,!1)};const Fm=new WeakMap,Um=new WeakMap,Bm=new WeakMap,Iv=new WeakMap;function Av(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function bv(t){return t.__v_skip||!Object.isExtensible(t)?0:Av(KE(t))}function go(t){return Tr(t)?t:Pu(t,!1,mv,vv,Fm)}function jm(t){return Pu(t,!1,_v,Tv,Um)}function xl(t){return Pu(t,!0,gv,wv,Bm)}function Pu(t,e,n,r,s){if(!xe(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=bv(t);if(i===0)return t;const o=s.get(t);if(o)return o;const c=new Proxy(t,i===2?r:n);return s.set(t,c),c}function hr(t){return Tr(t)?hr(t.__v_raw):!!(t&&t.__v_isReactive)}function Tr(t){return!!(t&&t.__v_isReadonly)}function zt(t){return!!(t&&t.__v_isShallow)}function Cu(t){return t?!!t.__v_raw:!1}function be(t){const e=t&&t.__v_raw;return e?be(e):t}function ku(t){return!Se(t,"__v_skip")&&Object.isExtensible(t)&&vm(t,"__v_skip",!0),t}const ht=t=>xe(t)?go(t):t,Ea=t=>xe(t)?xl(t):t;function Ke(t){return t?t.__v_isRef===!0:!1}function tn(t){return qm(t,!1)}function Rv(t){return qm(t,!0)}function qm(t,e){return Ke(t)?t:new Sv(t,e)}class Sv{constructor(e,n){this.dep=new Ru,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:be(e),this._value=n?e:ht(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||zt(e)||Tr(e);e=r?e:be(e),ur(e,n)&&(this._rawValue=e,this._value=r?e:ht(e),this.dep.trigger())}}function De(t){return Ke(t)?t.value:t}const Pv={get:(t,e,n)=>e==="__v_raw"?t:De(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return Ke(s)&&!Ke(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function $m(t){return hr(t)?t:new Proxy(t,Pv)}function Cv(t){const e=ae(t)?new Array(t.length):{};for(const n in t)e[n]=Nv(t,n);return e}class kv{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return lv(be(this._object),this._key)}}function Nv(t,e,n){const r=t[e];return Ke(r)?r:new kv(t,e,n)}class xv{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Ru(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Hi-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Me!==this)return Cm(this,!0),!0}get value(){const e=this.dep.track();return xm(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Vv(t,e,n=!1){let r,s;return de(t)?r=t:(r=t.get,s=t.set),new xv(r,s,n)}const Wo={},va=new WeakMap;let Hr;function Dv(t,e=!1,n=Hr){if(n){let r=va.get(n);r||va.set(n,r=[]),r.push(t)}}function Ov(t,e,n=Oe){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:c,call:l}=n,u=W=>s?W:zt(W)||s===!1||s===0?Dn(W,1):Dn(W);let f,d,m,_,S=!1,N=!1;if(Ke(t)?(d=()=>t.value,S=zt(t)):hr(t)?(d=()=>u(t),S=!0):ae(t)?(N=!0,S=t.some(W=>hr(W)||zt(W)),d=()=>t.map(W=>{if(Ke(W))return W.value;if(hr(W))return u(W);if(de(W))return l?l(W,2):W()})):de(t)?e?d=l?()=>l(t,2):t:d=()=>{if(m){Fn();try{m()}finally{Un()}}const W=Hr;Hr=f;try{return l?l(t,3,[_]):t(_)}finally{Hr=W}}:d=yn,e&&s){const W=d,Z=s===!0?1/0:s;d=()=>Dn(W(),Z)}const C=Rm(),x=()=>{f.stop(),C&&C.active&&vu(C.effects,f)};if(i&&e){const W=e;e=(...Z)=>{W(...Z),x()}}let O=N?new Array(t.length).fill(Wo):Wo;const H=W=>{if(!(!(f.flags&1)||!f.dirty&&!W))if(e){const Z=f.run();if(s||S||(N?Z.some((te,b)=>ur(te,O[b])):ur(Z,O))){m&&m();const te=Hr;Hr=f;try{const b=[Z,O===Wo?void 0:N&&O[0]===Wo?[]:O,_];O=Z,l?l(e,3,b):e(...b)}finally{Hr=te}}}else f.run()};return c&&c(H),f=new Sm(d),f.scheduler=o?()=>o(H,!1):H,_=W=>Dv(W,!1,f),m=f.onStop=()=>{const W=va.get(f);if(W){if(l)l(W,4);else for(const Z of W)Z();va.delete(f)}},e?r?H(!0):O=f.run():o?o(H.bind(null,!0),!0):f.run(),x.pause=f.pause.bind(f),x.resume=f.resume.bind(f),x.stop=x,x}function Dn(t,e=1/0,n){if(e<=0||!xe(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,Ke(t))Dn(t.value,e,n);else if(ae(t))for(let r=0;r<t.length;r++)Dn(t[r],e,n);else if(Xa(t)||As(t))t.forEach(r=>{Dn(r,e,n)});else if(ym(t)){for(const r in t)Dn(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Dn(t[r],e,n)}return t}function _o(t,e,n,r){try{return r?t(...r):t()}catch(s){sc(s,e,n)}}function an(t,e,n,r){if(de(t)){const s=_o(t,e,n,r);return s&&gm(s)&&s.catch(i=>{sc(i,e,n)}),s}if(ae(t)){const s=[];for(let i=0;i<t.length;i++)s.push(an(t[i],e,n,r));return s}}function sc(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Oe;if(e){let c=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;c;){const f=c.ec;if(f){for(let d=0;d<f.length;d++)if(f[d](t,l,u)===!1)return}c=c.parent}if(i){Fn(),_o(i,null,10,[t,l,u]),Un();return}}Mv(t,n,s,r,o)}function Mv(t,e,n,r=!0,s=!1){if(s)throw t;console.error(t)}const Pt=[];let mn=-1;const bs=[];let rr=null,gs=0;const Hm=Promise.resolve();let Ta=null;function yo(t){const e=Ta||Hm;return t?e.then(this?t.bind(this):t):e}function Lv(t){let e=mn+1,n=Pt.length;for(;e<n;){const r=e+n>>>1,s=Pt[r],i=Wi(s);i<t||i===t&&s.flags&2?e=r+1:n=r}return e}function Nu(t){if(!(t.flags&1)){const e=Wi(t),n=Pt[Pt.length-1];!n||!(t.flags&2)&&e>=Wi(n)?Pt.push(t):Pt.splice(Lv(e),0,t),t.flags|=1,Gm()}}function Gm(){Ta||(Ta=Hm.then(zm))}function Fv(t){ae(t)?bs.push(...t):rr&&t.id===-1?rr.splice(gs+1,0,t):t.flags&1||(bs.push(t),t.flags|=1),Gm()}function Mf(t,e,n=mn+1){for(;n<Pt.length;n++){const r=Pt[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;Pt.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Wm(t){if(bs.length){const e=[...new Set(bs)].sort((n,r)=>Wi(n)-Wi(r));if(bs.length=0,rr){rr.push(...e);return}for(rr=e,gs=0;gs<rr.length;gs++){const n=rr[gs];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}rr=null,gs=0}}const Wi=t=>t.id==null?t.flags&2?-1:1/0:t.id;function zm(t){try{for(mn=0;mn<Pt.length;mn++){const e=Pt[mn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),_o(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;mn<Pt.length;mn++){const e=Pt[mn];e&&(e.flags&=-2)}mn=-1,Pt.length=0,Wm(),Ta=null,(Pt.length||bs.length)&&zm()}}let Wt=null,Km=null;function wa(t){const e=Wt;return Wt=t,Km=t&&t.type.__scopeId||null,e}function en(t,e=Wt,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&ba(-1);const i=wa(e);let o;try{o=t(...s)}finally{wa(i),r._d&&ba(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Uv(t,e){if(Wt===null)return t;const n=lc(Wt),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,c,l=Oe]=e[s];i&&(de(i)&&(i={mounted:i,updated:i}),i.deep&&Dn(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:c,modifiers:l}))}return t}function Br(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const c=s[o];i&&(c.oldValue=i[o].value);let l=c.dir[r];l&&(Fn(),an(l,n,8,[t.el,c,t,e]),Un())}}const Qm=Symbol("_vte"),Ym=t=>t.__isTeleport,ki=t=>t&&(t.disabled||t.disabled===""),Lf=t=>t&&(t.defer||t.defer===""),Ff=t=>typeof SVGElement<"u"&&t instanceof SVGElement,Uf=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,Vl=(t,e)=>{const n=t&&t.to;return We(n)?e?e(n):null:n},Jm={name:"Teleport",__isTeleport:!0,process(t,e,n,r,s,i,o,c,l,u){const{mc:f,pc:d,pbc:m,o:{insert:_,querySelector:S,createText:N,createComment:C}}=u,x=ki(e.props);let{shapeFlag:O,children:H,dynamicChildren:W}=e;if(t==null){const Z=e.el=N(""),te=e.anchor=N("");_(Z,n,r),_(te,n,r);const b=(y,w)=>{O&16&&f(H,y,w,s,i,o,c,l)},E=()=>{const y=e.target=Vl(e.props,S),w=Xm(y,e,N,_);y&&(o!=="svg"&&Ff(y)?o="svg":o!=="mathml"&&Uf(y)&&(o="mathml"),s&&s.isCE&&(s.ce._teleportTargets||(s.ce._teleportTargets=new Set)).add(y),x||(b(y,w),ra(e,!1)))};x&&(b(n,te),ra(e,!0)),Lf(e.props)?(e.el.__isMounted=!1,Rt(()=>{E(),delete e.el.__isMounted},i)):E()}else{if(Lf(e.props)&&t.el.__isMounted===!1){Rt(()=>{Jm.process(t,e,n,r,s,i,o,c,l,u)},i);return}e.el=t.el,e.targetStart=t.targetStart;const Z=e.anchor=t.anchor,te=e.target=t.target,b=e.targetAnchor=t.targetAnchor,E=ki(t.props),y=E?n:te,w=E?Z:b;if(o==="svg"||Ff(te)?o="svg":(o==="mathml"||Uf(te))&&(o="mathml"),W?(m(t.dynamicChildren,W,y,s,i,o,c),Mu(t,e,!0)):l||d(t,e,y,w,s,i,o,c,!1),x)E?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):zo(e,n,Z,u,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const A=e.target=Vl(e.props,S);A&&zo(e,A,null,u,0)}else E&&zo(e,te,b,u,1);ra(e,x)}},remove(t,e,n,{um:r,o:{remove:s}},i){const{shapeFlag:o,children:c,anchor:l,targetStart:u,targetAnchor:f,target:d,props:m}=t;if(d&&(s(u),s(f)),i&&s(l),o&16){const _=i||!ki(m);for(let S=0;S<c.length;S++){const N=c[S];r(N,e,n,_,!!N.dynamicChildren)}}},move:zo,hydrate:Bv};function zo(t,e,n,{o:{insert:r},m:s},i=2){i===0&&r(t.targetAnchor,e,n);const{el:o,anchor:c,shapeFlag:l,children:u,props:f}=t,d=i===2;if(d&&r(o,e,n),(!d||ki(f))&&l&16)for(let m=0;m<u.length;m++)s(u[m],e,n,2);d&&r(c,e,n)}function Bv(t,e,n,r,s,i,{o:{nextSibling:o,parentNode:c,querySelector:l,insert:u,createText:f}},d){function m(N,C,x,O){C.anchor=d(o(N),C,c(N),n,r,s,i),C.targetStart=x,C.targetAnchor=O}const _=e.target=Vl(e.props,l),S=ki(e.props);if(_){const N=_._lpa||_.firstChild;if(e.shapeFlag&16)if(S)m(t,e,N,N&&o(N));else{e.anchor=o(t);let C=N;for(;C;){if(C&&C.nodeType===8){if(C.data==="teleport start anchor")e.targetStart=C;else if(C.data==="teleport anchor"){e.targetAnchor=C,_._lpa=e.targetAnchor&&o(e.targetAnchor);break}}C=o(C)}e.targetAnchor||Xm(_,e,f,u),d(N&&o(N),e,_,n,r,s,i)}ra(e,S)}else S&&e.shapeFlag&16&&m(t,e,t,o(t));return e.anchor&&o(e.anchor)}const jv=Jm;function ra(t,e){const n=t.ctx;if(n&&n.ut){let r,s;for(e?(r=t.el,s=t.anchor):(r=t.targetStart,s=t.targetAnchor);r&&r!==s;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function Xm(t,e,n,r){const s=e.targetStart=n(""),i=e.targetAnchor=n("");return s[Qm]=i,t&&(r(s,t),r(i,t)),i}const xn=Symbol("_leaveCb"),Ko=Symbol("_enterCb");function qv(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return xu(()=>{t.isMounted=!0}),og(()=>{t.isUnmounting=!0}),t}const $t=[Function,Array],Zm={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:$t,onEnter:$t,onAfterEnter:$t,onEnterCancelled:$t,onBeforeLeave:$t,onLeave:$t,onAfterLeave:$t,onLeaveCancelled:$t,onBeforeAppear:$t,onAppear:$t,onAfterAppear:$t,onAppearCancelled:$t},eg=t=>{const e=t.subTree;return e.component?eg(e.component):e},$v={name:"BaseTransition",props:Zm,setup(t,{slots:e}){const n=Fu(),r=qv();return()=>{const s=e.default&&rg(e.default(),!0);if(!s||!s.length)return;const i=tg(s),o=be(t),{mode:c}=o;if(r.isLeaving)return il(i);const l=Bf(i);if(!l)return il(i);let u=Dl(l,o,r,n,d=>u=d);l.type!==Ct&&zi(l,u);let f=n.subTree&&Bf(n.subTree);if(f&&f.type!==Ct&&!Wr(f,l)&&eg(n).type!==Ct){let d=Dl(f,o,r,n);if(zi(f,d),c==="out-in"&&l.type!==Ct)return r.isLeaving=!0,d.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete d.afterLeave,f=void 0},il(i);c==="in-out"&&l.type!==Ct?d.delayLeave=(m,_,S)=>{const N=ng(r,f);N[String(f.key)]=f,m[xn]=()=>{_(),m[xn]=void 0,delete u.delayedLeave,f=void 0},u.delayedLeave=()=>{S(),delete u.delayedLeave,f=void 0}}:f=void 0}else f&&(f=void 0);return i}}};function tg(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==Ct){e=n;break}}return e}const Hv=$v;function ng(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Dl(t,e,n,r,s){const{appear:i,mode:o,persisted:c=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:f,onEnterCancelled:d,onBeforeLeave:m,onLeave:_,onAfterLeave:S,onLeaveCancelled:N,onBeforeAppear:C,onAppear:x,onAfterAppear:O,onAppearCancelled:H}=e,W=String(t.key),Z=ng(n,t),te=(y,w)=>{y&&an(y,r,9,w)},b=(y,w)=>{const A=w[1];te(y,w),ae(y)?y.every(I=>I.length<=1)&&A():y.length<=1&&A()},E={mode:o,persisted:c,beforeEnter(y){let w=l;if(!n.isMounted)if(i)w=C||l;else return;y[xn]&&y[xn](!0);const A=Z[W];A&&Wr(t,A)&&A.el[xn]&&A.el[xn](),te(w,[y])},enter(y){let w=u,A=f,I=d;if(!n.isMounted)if(i)w=x||u,A=O||f,I=H||d;else return;let v=!1;const ve=y[Ko]=je=>{v||(v=!0,je?te(I,[y]):te(A,[y]),E.delayedLeave&&E.delayedLeave(),y[Ko]=void 0)};w?b(w,[y,ve]):ve()},leave(y,w){const A=String(t.key);if(y[Ko]&&y[Ko](!0),n.isUnmounting)return w();te(m,[y]);let I=!1;const v=y[xn]=ve=>{I||(I=!0,w(),ve?te(N,[y]):te(S,[y]),y[xn]=void 0,Z[A]===t&&delete Z[A])};Z[A]=t,_?b(_,[y,v]):v()},clone(y){const w=Dl(y,e,n,r,s);return s&&s(w),w}};return E}function il(t){if(ic(t))return t=wr(t),t.children=null,t}function Bf(t){if(!ic(t))return Ym(t.type)&&t.children?tg(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&de(n.default))return n.default()}}function zi(t,e){t.shapeFlag&6&&t.component?(t.transition=e,zi(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function rg(t,e=!1,n){let r=[],s=0;for(let i=0;i<t.length;i++){let o=t[i];const c=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===Dt?(o.patchFlag&128&&s++,r=r.concat(rg(o.children,e,c))):(e||o.type!==Ct)&&r.push(c!=null?wr(o,{key:c}):o)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}function Ws(t,e){return de(t)?at({name:t.name},e,{setup:t}):t}function sg(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const Ia=new WeakMap;function Ni(t,e,n,r,s=!1){if(ae(t)){t.forEach((S,N)=>Ni(S,e&&(ae(e)?e[N]:e),n,r,s));return}if(xi(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Ni(t,e,n,r.component.subTree);return}const i=r.shapeFlag&4?lc(r.component):r.el,o=s?null:i,{i:c,r:l}=t,u=e&&e.r,f=c.refs===Oe?c.refs={}:c.refs,d=c.setupState,m=be(d),_=d===Oe?mm:S=>Se(m,S);if(u!=null&&u!==l){if(jf(e),We(u))f[u]=null,_(u)&&(d[u]=null);else if(Ke(u)){u.value=null;const S=e;S.k&&(f[S.k]=null)}}if(de(l))_o(l,c,12,[o,f]);else{const S=We(l),N=Ke(l);if(S||N){const C=()=>{if(t.f){const x=S?_(l)?d[l]:f[l]:l.value;if(s)ae(x)&&vu(x,i);else if(ae(x))x.includes(i)||x.push(i);else if(S)f[l]=[i],_(l)&&(d[l]=f[l]);else{const O=[i];l.value=O,t.k&&(f[t.k]=O)}}else S?(f[l]=o,_(l)&&(d[l]=o)):N&&(l.value=o,t.k&&(f[t.k]=o))};if(o){const x=()=>{C(),Ia.delete(t)};x.id=-1,Ia.set(t,x),Rt(x,n)}else jf(t),C()}}}function jf(t){const e=Ia.get(t);e&&(e.flags|=8,Ia.delete(t))}tc().requestIdleCallback;tc().cancelIdleCallback;const xi=t=>!!t.type.__asyncLoader,ic=t=>t.type.__isKeepAlive;function Gv(t,e){ig(t,"a",e)}function Wv(t,e){ig(t,"da",e)}function ig(t,e,n=kt){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(oc(e,r,n),n){let s=n.parent;for(;s&&s.parent;)ic(s.parent.vnode)&&zv(r,e,n,s),s=s.parent}}function zv(t,e,n,r){const s=oc(e,t,r,!0);Vu(()=>{vu(r[e],s)},n)}function oc(t,e,n=kt,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Fn();const c=Eo(n),l=an(e,n,t,o);return c(),Un(),l});return r?s.unshift(i):s.push(i),i}}const Hn=t=>(e,n=kt)=>{(!Yi||t==="sp")&&oc(t,(...r)=>e(...r),n)},Kv=Hn("bm"),xu=Hn("m"),Qv=Hn("bu"),Yv=Hn("u"),og=Hn("bum"),Vu=Hn("um"),Jv=Hn("sp"),Xv=Hn("rtg"),Zv=Hn("rtc");function eT(t,e=kt){oc("ec",t,e)}const tT=Symbol.for("v-ndc");function Ol(t,e,n,r){let s;const i=n,o=ae(t);if(o||We(t)){const c=o&&hr(t);let l=!1,u=!1;c&&(l=!zt(t),u=Tr(t),t=rc(t)),s=new Array(t.length);for(let f=0,d=t.length;f<d;f++)s[f]=e(l?u?Ea(ht(t[f])):ht(t[f]):t[f],f,void 0,i)}else if(typeof t=="number"){s=new Array(t);for(let c=0;c<t;c++)s[c]=e(c+1,c,void 0,i)}else if(xe(t))if(t[Symbol.iterator])s=Array.from(t,(c,l)=>e(c,l,void 0,i));else{const c=Object.keys(t);s=new Array(c.length);for(let l=0,u=c.length;l<u;l++){const f=c[l];s[l]=e(t[f],f,l,i)}}else s=[];return s}const Ml=t=>t?bg(t)?lc(t):Ml(t.parent):null,Vi=at(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Ml(t.parent),$root:t=>Ml(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>cg(t),$forceUpdate:t=>t.f||(t.f=()=>{Nu(t.update)}),$nextTick:t=>t.n||(t.n=yo.bind(t.proxy)),$watch:t=>IT.bind(t)}),ol=(t,e)=>t!==Oe&&!t.__isScriptSetup&&Se(t,e),nT={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:c,appContext:l}=t;let u;if(e[0]!=="$"){const _=o[e];if(_!==void 0)switch(_){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(ol(r,e))return o[e]=1,r[e];if(s!==Oe&&Se(s,e))return o[e]=2,s[e];if((u=t.propsOptions[0])&&Se(u,e))return o[e]=3,i[e];if(n!==Oe&&Se(n,e))return o[e]=4,n[e];Ll&&(o[e]=0)}}const f=Vi[e];let d,m;if(f)return e==="$attrs"&&wt(t.attrs,"get",""),f(t);if((d=c.__cssModules)&&(d=d[e]))return d;if(n!==Oe&&Se(n,e))return o[e]=4,n[e];if(m=l.config.globalProperties,Se(m,e))return m[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return ol(s,e)?(s[e]=n,!0):r!==Oe&&Se(r,e)?(r[e]=n,!0):Se(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:i,type:o}},c){let l,u;return!!(n[c]||t!==Oe&&c[0]!=="$"&&Se(t,c)||ol(e,c)||(l=i[0])&&Se(l,c)||Se(r,c)||Se(Vi,c)||Se(s.config.globalProperties,c)||(u=o.__cssModules)&&u[c])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Se(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function qf(t){return ae(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Ll=!0;function rT(t){const e=cg(t),n=t.proxy,r=t.ctx;Ll=!1,e.beforeCreate&&$f(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:c,provide:l,inject:u,created:f,beforeMount:d,mounted:m,beforeUpdate:_,updated:S,activated:N,deactivated:C,beforeDestroy:x,beforeUnmount:O,destroyed:H,unmounted:W,render:Z,renderTracked:te,renderTriggered:b,errorCaptured:E,serverPrefetch:y,expose:w,inheritAttrs:A,components:I,directives:v,filters:ve}=e;if(u&&sT(u,r,null),o)for(const fe in o){const Te=o[fe];de(Te)&&(r[fe]=Te.bind(n))}if(s){const fe=s.call(n,n);xe(fe)&&(t.data=go(fe))}if(Ll=!0,i)for(const fe in i){const Te=i[fe],xt=de(Te)?Te.bind(n,n):de(Te.get)?Te.get.bind(n,n):yn,un=!de(Te)&&de(Te.set)?Te.set.bind(n):yn,Ot=ft({get:xt,set:un});Object.defineProperty(r,fe,{enumerable:!0,configurable:!0,get:()=>Ot.value,set:ct=>Ot.value=ct})}if(c)for(const fe in c)ag(c[fe],r,n,fe);if(l){const fe=de(l)?l.call(n):l;Reflect.ownKeys(fe).forEach(Te=>{sa(Te,fe[Te])})}f&&$f(f,t,"c");function Pe(fe,Te){ae(Te)?Te.forEach(xt=>fe(xt.bind(n))):Te&&fe(Te.bind(n))}if(Pe(Kv,d),Pe(xu,m),Pe(Qv,_),Pe(Yv,S),Pe(Gv,N),Pe(Wv,C),Pe(eT,E),Pe(Zv,te),Pe(Xv,b),Pe(og,O),Pe(Vu,W),Pe(Jv,y),ae(w))if(w.length){const fe=t.exposed||(t.exposed={});w.forEach(Te=>{Object.defineProperty(fe,Te,{get:()=>n[Te],set:xt=>n[Te]=xt,enumerable:!0})})}else t.exposed||(t.exposed={});Z&&t.render===yn&&(t.render=Z),A!=null&&(t.inheritAttrs=A),I&&(t.components=I),v&&(t.directives=v),y&&sg(t)}function sT(t,e,n=yn){ae(t)&&(t=Fl(t));for(const r in t){const s=t[r];let i;xe(s)?"default"in s?i=Kt(s.from||r,s.default,!0):i=Kt(s.from||r):i=Kt(s),Ke(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function $f(t,e,n){an(ae(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function ag(t,e,n,r){let s=r.includes(".")?vg(n,r):()=>n[r];if(We(t)){const i=e[t];de(i)&&fr(s,i)}else if(de(t))fr(s,t.bind(n));else if(xe(t))if(ae(t))t.forEach(i=>ag(i,e,n,r));else{const i=de(t.handler)?t.handler.bind(n):e[t.handler];de(i)&&fr(s,i,t)}}function cg(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,c=i.get(e);let l;return c?l=c:!s.length&&!n&&!r?l=e:(l={},s.length&&s.forEach(u=>Aa(l,u,o,!0)),Aa(l,e,o)),xe(e)&&i.set(e,l),l}function Aa(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&Aa(t,i,n,!0),s&&s.forEach(o=>Aa(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const c=iT[o]||n&&n[o];t[o]=c?c(t[o],e[o]):e[o]}return t}const iT={data:Hf,props:Gf,emits:Gf,methods:vi,computed:vi,beforeCreate:bt,created:bt,beforeMount:bt,mounted:bt,beforeUpdate:bt,updated:bt,beforeDestroy:bt,beforeUnmount:bt,destroyed:bt,unmounted:bt,activated:bt,deactivated:bt,errorCaptured:bt,serverPrefetch:bt,components:vi,directives:vi,watch:aT,provide:Hf,inject:oT};function Hf(t,e){return e?t?function(){return at(de(t)?t.call(this,this):t,de(e)?e.call(this,this):e)}:e:t}function oT(t,e){return vi(Fl(t),Fl(e))}function Fl(t){if(ae(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function bt(t,e){return t?[...new Set([].concat(t,e))]:e}function vi(t,e){return t?at(Object.create(null),t,e):e}function Gf(t,e){return t?ae(t)&&ae(e)?[...new Set([...t,...e])]:at(Object.create(null),qf(t),qf(e??{})):e}function aT(t,e){if(!t)return e;if(!e)return t;const n=at(Object.create(null),t);for(const r in e)n[r]=bt(t[r],e[r]);return n}function lg(){return{app:null,config:{isNativeTag:mm,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let cT=0;function lT(t,e){return function(r,s=null){de(r)||(r=at({},r)),s!=null&&!xe(s)&&(s=null);const i=lg(),o=new WeakSet,c=[];let l=!1;const u=i.app={_uid:cT++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:GT,get config(){return i.config},set config(f){},use(f,...d){return o.has(f)||(f&&de(f.install)?(o.add(f),f.install(u,...d)):de(f)&&(o.add(f),f(u,...d))),u},mixin(f){return i.mixins.includes(f)||i.mixins.push(f),u},component(f,d){return d?(i.components[f]=d,u):i.components[f]},directive(f,d){return d?(i.directives[f]=d,u):i.directives[f]},mount(f,d,m){if(!l){const _=u._ceVNode||Fe(r,s);return _.appContext=i,m===!0?m="svg":m===!1&&(m=void 0),t(_,f,m),l=!0,u._container=f,f.__vue_app__=u,lc(_.component)}},onUnmount(f){c.push(f)},unmount(){l&&(an(c,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(f,d){return i.provides[f]=d,u},runWithContext(f){const d=Xr;Xr=u;try{return f()}finally{Xr=d}}};return u}}let Xr=null;function sa(t,e){if(kt){let n=kt.provides;const r=kt.parent&&kt.parent.provides;r===n&&(n=kt.provides=Object.create(r)),n[t]=e}}function Kt(t,e,n=!1){const r=Fu();if(r||Xr){let s=Xr?Xr._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&de(e)?e.call(r&&r.proxy):e}}function uT(){return!!(Fu()||Xr)}const ug={},hg=()=>Object.create(ug),fg=t=>Object.getPrototypeOf(t)===ug;function hT(t,e,n,r=!1){const s={},i=hg();t.propsDefaults=Object.create(null),dg(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:jm(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function fT(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,c=be(s),[l]=t.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const f=t.vnode.dynamicProps;for(let d=0;d<f.length;d++){let m=f[d];if(ac(t.emitsOptions,m))continue;const _=e[m];if(l)if(Se(i,m))_!==i[m]&&(i[m]=_,u=!0);else{const S=vr(m);s[S]=Ul(l,c,S,_,t,!1)}else _!==i[m]&&(i[m]=_,u=!0)}}}else{dg(t,e,s,i)&&(u=!0);let f;for(const d in c)(!e||!Se(e,d)&&((f=Cr(d))===d||!Se(e,f)))&&(l?n&&(n[d]!==void 0||n[f]!==void 0)&&(s[d]=Ul(l,c,d,void 0,t,!0)):delete s[d]);if(i!==c)for(const d in i)(!e||!Se(e,d))&&(delete i[d],u=!0)}u&&Vn(t.attrs,"set","")}function dg(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,c;if(e)for(let l in e){if(Si(l))continue;const u=e[l];let f;s&&Se(s,f=vr(l))?!i||!i.includes(f)?n[f]=u:(c||(c={}))[f]=u:ac(t.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,o=!0)}if(i){const l=be(n),u=c||Oe;for(let f=0;f<i.length;f++){const d=i[f];n[d]=Ul(s,l,d,u[d],t,!Se(u,d))}}return o}function Ul(t,e,n,r,s,i){const o=t[n];if(o!=null){const c=Se(o,"default");if(c&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&de(l)){const{propsDefaults:u}=s;if(n in u)r=u[n];else{const f=Eo(s);r=u[n]=l.call(null,e),f()}}else r=l;s.ce&&s.ce._setProp(n,r)}o[0]&&(i&&!c?r=!1:o[1]&&(r===""||r===Cr(n))&&(r=!0))}return r}const dT=new WeakMap;function pg(t,e,n=!1){const r=n?dT:e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},c=[];let l=!1;if(!de(t)){const f=d=>{l=!0;const[m,_]=pg(d,e,!0);at(o,m),_&&c.push(..._)};!n&&e.mixins.length&&e.mixins.forEach(f),t.extends&&f(t.extends),t.mixins&&t.mixins.forEach(f)}if(!i&&!l)return xe(t)&&r.set(t,Is),Is;if(ae(i))for(let f=0;f<i.length;f++){const d=vr(i[f]);Wf(d)&&(o[d]=Oe)}else if(i)for(const f in i){const d=vr(f);if(Wf(d)){const m=i[f],_=o[d]=ae(m)||de(m)?{type:m}:at({},m),S=_.type;let N=!1,C=!0;if(ae(S))for(let x=0;x<S.length;++x){const O=S[x],H=de(O)&&O.name;if(H==="Boolean"){N=!0;break}else H==="String"&&(C=!1)}else N=de(S)&&S.name==="Boolean";_[0]=N,_[1]=C,(N||Se(_,"default"))&&c.push(d)}}const u=[o,c];return xe(t)&&r.set(t,u),u}function Wf(t){return t[0]!=="$"&&!Si(t)}const Du=t=>t==="_"||t==="_ctx"||t==="$stable",Ou=t=>ae(t)?t.map(_n):[_n(t)],pT=(t,e,n)=>{if(e._n)return e;const r=en((...s)=>Ou(e(...s)),n);return r._c=!1,r},mg=(t,e,n)=>{const r=t._ctx;for(const s in t){if(Du(s))continue;const i=t[s];if(de(i))e[s]=pT(s,i,r);else if(i!=null){const o=Ou(i);e[s]=()=>o}}},gg=(t,e)=>{const n=Ou(e);t.slots.default=()=>n},_g=(t,e,n)=>{for(const r in e)(n||!Du(r))&&(t[r]=e[r])},mT=(t,e,n)=>{const r=t.slots=hg();if(t.vnode.shapeFlag&32){const s=e._;s?(_g(r,e,n),n&&vm(r,"_",s,!0)):mg(e,r)}else e&&gg(t,e)},gT=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=Oe;if(r.shapeFlag&32){const c=e._;c?n&&c===1?i=!1:_g(s,e,n):(i=!e.$stable,mg(e,s)),o=e}else e&&(gg(t,e),o={default:1});if(i)for(const c in s)!Du(c)&&o[c]==null&&delete s[c]},Rt=NT;function _T(t){return yT(t)}function yT(t,e){const n=tc();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:c,createComment:l,setText:u,setElementText:f,parentNode:d,nextSibling:m,setScopeId:_=yn,insertStaticContent:S}=t,N=(T,R,P,F=null,B=null,M=null,K=void 0,$=null,q=!!R.dynamicChildren)=>{if(T===R)return;T&&!Wr(T,R)&&(F=L(T),ct(T,B,M,!0),T=null),R.patchFlag===-2&&(q=!1,R.dynamicChildren=null);const{type:j,ref:oe,shapeFlag:Y}=R;switch(j){case cc:C(T,R,P,F);break;case Ct:x(T,R,P,F);break;case ia:T==null&&O(R,P,F,K);break;case Dt:I(T,R,P,F,B,M,K,$,q);break;default:Y&1?Z(T,R,P,F,B,M,K,$,q):Y&6?v(T,R,P,F,B,M,K,$,q):(Y&64||Y&128)&&j.process(T,R,P,F,B,M,K,$,q,ne)}oe!=null&&B?Ni(oe,T&&T.ref,M,R||T,!R):oe==null&&T&&T.ref!=null&&Ni(T.ref,null,M,T,!0)},C=(T,R,P,F)=>{if(T==null)r(R.el=c(R.children),P,F);else{const B=R.el=T.el;R.children!==T.children&&u(B,R.children)}},x=(T,R,P,F)=>{T==null?r(R.el=l(R.children||""),P,F):R.el=T.el},O=(T,R,P,F)=>{[T.el,T.anchor]=S(T.children,R,P,F,T.el,T.anchor)},H=({el:T,anchor:R},P,F)=>{let B;for(;T&&T!==R;)B=m(T),r(T,P,F),T=B;r(R,P,F)},W=({el:T,anchor:R})=>{let P;for(;T&&T!==R;)P=m(T),s(T),T=P;s(R)},Z=(T,R,P,F,B,M,K,$,q)=>{if(R.type==="svg"?K="svg":R.type==="math"&&(K="mathml"),T==null)te(R,P,F,B,M,K,$,q);else{const j=T.el&&T.el._isVueCE?T.el:null;try{j&&j._beginPatch(),y(T,R,B,M,K,$,q)}finally{j&&j._endPatch()}}},te=(T,R,P,F,B,M,K,$)=>{let q,j;const{props:oe,shapeFlag:Y,transition:re,dirs:ce}=T;if(q=T.el=o(T.type,M,oe&&oe.is,oe),Y&8?f(q,T.children):Y&16&&E(T.children,q,null,F,B,al(T,M),K,$),ce&&Br(T,null,F,"created"),b(q,T,T.scopeId,K,F),oe){for(const Ce in oe)Ce!=="value"&&!Si(Ce)&&i(q,Ce,null,oe[Ce],M,F);"value"in oe&&i(q,"value",null,oe.value,M),(j=oe.onVnodeBeforeMount)&&dn(j,F,T)}ce&&Br(T,null,F,"beforeMount");const me=ET(B,re);me&&re.beforeEnter(q),r(q,R,P),((j=oe&&oe.onVnodeMounted)||me||ce)&&Rt(()=>{j&&dn(j,F,T),me&&re.enter(q),ce&&Br(T,null,F,"mounted")},B)},b=(T,R,P,F,B)=>{if(P&&_(T,P),F)for(let M=0;M<F.length;M++)_(T,F[M]);if(B){let M=B.subTree;if(R===M||wg(M.type)&&(M.ssContent===R||M.ssFallback===R)){const K=B.vnode;b(T,K,K.scopeId,K.slotScopeIds,B.parent)}}},E=(T,R,P,F,B,M,K,$,q=0)=>{for(let j=q;j<T.length;j++){const oe=T[j]=$?sr(T[j]):_n(T[j]);N(null,oe,R,P,F,B,M,K,$)}},y=(T,R,P,F,B,M,K)=>{const $=R.el=T.el;let{patchFlag:q,dynamicChildren:j,dirs:oe}=R;q|=T.patchFlag&16;const Y=T.props||Oe,re=R.props||Oe;let ce;if(P&&jr(P,!1),(ce=re.onVnodeBeforeUpdate)&&dn(ce,P,R,T),oe&&Br(R,T,P,"beforeUpdate"),P&&jr(P,!0),(Y.innerHTML&&re.innerHTML==null||Y.textContent&&re.textContent==null)&&f($,""),j?w(T.dynamicChildren,j,$,P,F,al(R,B),M):K||Te(T,R,$,null,P,F,al(R,B),M,!1),q>0){if(q&16)A($,Y,re,P,B);else if(q&2&&Y.class!==re.class&&i($,"class",null,re.class,B),q&4&&i($,"style",Y.style,re.style,B),q&8){const me=R.dynamicProps;for(let Ce=0;Ce<me.length;Ce++){const Ae=me[Ce],_t=Y[Ae],yt=re[Ae];(yt!==_t||Ae==="value")&&i($,Ae,_t,yt,B,P)}}q&1&&T.children!==R.children&&f($,R.children)}else!K&&j==null&&A($,Y,re,P,B);((ce=re.onVnodeUpdated)||oe)&&Rt(()=>{ce&&dn(ce,P,R,T),oe&&Br(R,T,P,"updated")},F)},w=(T,R,P,F,B,M,K)=>{for(let $=0;$<R.length;$++){const q=T[$],j=R[$],oe=q.el&&(q.type===Dt||!Wr(q,j)||q.shapeFlag&198)?d(q.el):P;N(q,j,oe,null,F,B,M,K,!0)}},A=(T,R,P,F,B)=>{if(R!==P){if(R!==Oe)for(const M in R)!Si(M)&&!(M in P)&&i(T,M,R[M],null,B,F);for(const M in P){if(Si(M))continue;const K=P[M],$=R[M];K!==$&&M!=="value"&&i(T,M,$,K,B,F)}"value"in P&&i(T,"value",R.value,P.value,B)}},I=(T,R,P,F,B,M,K,$,q)=>{const j=R.el=T?T.el:c(""),oe=R.anchor=T?T.anchor:c("");let{patchFlag:Y,dynamicChildren:re,slotScopeIds:ce}=R;ce&&($=$?$.concat(ce):ce),T==null?(r(j,P,F),r(oe,P,F),E(R.children||[],P,oe,B,M,K,$,q)):Y>0&&Y&64&&re&&T.dynamicChildren?(w(T.dynamicChildren,re,P,B,M,K,$),(R.key!=null||B&&R===B.subTree)&&Mu(T,R,!0)):Te(T,R,P,oe,B,M,K,$,q)},v=(T,R,P,F,B,M,K,$,q)=>{R.slotScopeIds=$,T==null?R.shapeFlag&512?B.ctx.activate(R,P,F,K,q):ve(R,P,F,B,M,K,q):je(T,R,q)},ve=(T,R,P,F,B,M,K)=>{const $=T.component=UT(T,F,B);if(ic(T)&&($.ctx.renderer=ne),BT($,!1,K),$.asyncDep){if(B&&B.registerDep($,Pe,K),!T.el){const q=$.subTree=Fe(Ct);x(null,q,R,P),T.placeholder=q.el}}else Pe($,T,R,P,B,M,K)},je=(T,R,P)=>{const F=R.component=T.component;if(CT(T,R,P))if(F.asyncDep&&!F.asyncResolved){fe(F,R,P);return}else F.next=R,F.update();else R.el=T.el,F.vnode=R},Pe=(T,R,P,F,B,M,K)=>{const $=()=>{if(T.isMounted){let{next:Y,bu:re,u:ce,parent:me,vnode:Ce}=T;{const Lt=yg(T);if(Lt){Y&&(Y.el=Ce.el,fe(T,Y,K)),Lt.asyncDep.then(()=>{T.isUnmounted||$()});return}}let Ae=Y,_t;jr(T,!1),Y?(Y.el=Ce.el,fe(T,Y,K)):Y=Ce,re&&na(re),(_t=Y.props&&Y.props.onVnodeBeforeUpdate)&&dn(_t,me,Y,Ce),jr(T,!0);const yt=Kf(T),Mt=T.subTree;T.subTree=yt,N(Mt,yt,d(Mt.el),L(Mt),T,B,M),Y.el=yt.el,Ae===null&&kT(T,yt.el),ce&&Rt(ce,B),(_t=Y.props&&Y.props.onVnodeUpdated)&&Rt(()=>dn(_t,me,Y,Ce),B)}else{let Y;const{el:re,props:ce}=R,{bm:me,m:Ce,parent:Ae,root:_t,type:yt}=T,Mt=xi(R);jr(T,!1),me&&na(me),!Mt&&(Y=ce&&ce.onVnodeBeforeMount)&&dn(Y,Ae,R),jr(T,!0);{_t.ce&&_t.ce._def.shadowRoot!==!1&&_t.ce._injectChildStyle(yt);const Lt=T.subTree=Kf(T);N(null,Lt,P,F,T,B,M),R.el=Lt.el}if(Ce&&Rt(Ce,B),!Mt&&(Y=ce&&ce.onVnodeMounted)){const Lt=R;Rt(()=>dn(Y,Ae,Lt),B)}(R.shapeFlag&256||Ae&&xi(Ae.vnode)&&Ae.vnode.shapeFlag&256)&&T.a&&Rt(T.a,B),T.isMounted=!0,R=P=F=null}};T.scope.on();const q=T.effect=new Sm($);T.scope.off();const j=T.update=q.run.bind(q),oe=T.job=q.runIfDirty.bind(q);oe.i=T,oe.id=T.uid,q.scheduler=()=>Nu(oe),jr(T,!0),j()},fe=(T,R,P)=>{R.component=T;const F=T.vnode.props;T.vnode=R,T.next=null,fT(T,R.props,F,P),gT(T,R.children,P),Fn(),Mf(T),Un()},Te=(T,R,P,F,B,M,K,$,q=!1)=>{const j=T&&T.children,oe=T?T.shapeFlag:0,Y=R.children,{patchFlag:re,shapeFlag:ce}=R;if(re>0){if(re&128){un(j,Y,P,F,B,M,K,$,q);return}else if(re&256){xt(j,Y,P,F,B,M,K,$,q);return}}ce&8?(oe&16&&gt(j,B,M),Y!==j&&f(P,Y)):oe&16?ce&16?un(j,Y,P,F,B,M,K,$,q):gt(j,B,M,!0):(oe&8&&f(P,""),ce&16&&E(Y,P,F,B,M,K,$,q))},xt=(T,R,P,F,B,M,K,$,q)=>{T=T||Is,R=R||Is;const j=T.length,oe=R.length,Y=Math.min(j,oe);let re;for(re=0;re<Y;re++){const ce=R[re]=q?sr(R[re]):_n(R[re]);N(T[re],ce,P,null,B,M,K,$,q)}j>oe?gt(T,B,M,!0,!1,Y):E(R,P,F,B,M,K,$,q,Y)},un=(T,R,P,F,B,M,K,$,q)=>{let j=0;const oe=R.length;let Y=T.length-1,re=oe-1;for(;j<=Y&&j<=re;){const ce=T[j],me=R[j]=q?sr(R[j]):_n(R[j]);if(Wr(ce,me))N(ce,me,P,null,B,M,K,$,q);else break;j++}for(;j<=Y&&j<=re;){const ce=T[Y],me=R[re]=q?sr(R[re]):_n(R[re]);if(Wr(ce,me))N(ce,me,P,null,B,M,K,$,q);else break;Y--,re--}if(j>Y){if(j<=re){const ce=re+1,me=ce<oe?R[ce].el:F;for(;j<=re;)N(null,R[j]=q?sr(R[j]):_n(R[j]),P,me,B,M,K,$,q),j++}}else if(j>re)for(;j<=Y;)ct(T[j],B,M,!0),j++;else{const ce=j,me=j,Ce=new Map;for(j=me;j<=re;j++){const lt=R[j]=q?sr(R[j]):_n(R[j]);lt.key!=null&&Ce.set(lt.key,j)}let Ae,_t=0;const yt=re-me+1;let Mt=!1,Lt=0;const Zt=new Array(yt);for(j=0;j<yt;j++)Zt[j]=0;for(j=ce;j<=Y;j++){const lt=T[j];if(_t>=yt){ct(lt,B,M,!0);continue}let rt;if(lt.key!=null)rt=Ce.get(lt.key);else for(Ae=me;Ae<=re;Ae++)if(Zt[Ae-me]===0&&Wr(lt,R[Ae])){rt=Ae;break}rt===void 0?ct(lt,B,M,!0):(Zt[rt-me]=j+1,rt>=Lt?Lt=rt:Mt=!0,N(lt,R[rt],P,null,B,M,K,$,q),_t++)}const us=Mt?vT(Zt):Is;for(Ae=us.length-1,j=yt-1;j>=0;j--){const lt=me+j,rt=R[lt],ti=R[lt+1],Or=lt+1<oe?ti.el||ti.placeholder:F;Zt[j]===0?N(null,rt,P,Or,B,M,K,$,q):Mt&&(Ae<0||j!==us[Ae]?Ot(rt,P,Or,2):Ae--)}}},Ot=(T,R,P,F,B=null)=>{const{el:M,type:K,transition:$,children:q,shapeFlag:j}=T;if(j&6){Ot(T.component.subTree,R,P,F);return}if(j&128){T.suspense.move(R,P,F);return}if(j&64){K.move(T,R,P,ne);return}if(K===Dt){r(M,R,P);for(let Y=0;Y<q.length;Y++)Ot(q[Y],R,P,F);r(T.anchor,R,P);return}if(K===ia){H(T,R,P);return}if(F!==2&&j&1&&$)if(F===0)$.beforeEnter(M),r(M,R,P),Rt(()=>$.enter(M),B);else{const{leave:Y,delayLeave:re,afterLeave:ce}=$,me=()=>{T.ctx.isUnmounted?s(M):r(M,R,P)},Ce=()=>{M._isLeaving&&M[xn](!0),Y(M,()=>{me(),ce&&ce()})};re?re(M,me,Ce):Ce()}else r(M,R,P)},ct=(T,R,P,F=!1,B=!1)=>{const{type:M,props:K,ref:$,children:q,dynamicChildren:j,shapeFlag:oe,patchFlag:Y,dirs:re,cacheIndex:ce}=T;if(Y===-2&&(B=!1),$!=null&&(Fn(),Ni($,null,P,T,!0),Un()),ce!=null&&(R.renderCache[ce]=void 0),oe&256){R.ctx.deactivate(T);return}const me=oe&1&&re,Ce=!xi(T);let Ae;if(Ce&&(Ae=K&&K.onVnodeBeforeUnmount)&&dn(Ae,R,T),oe&6)Xt(T.component,P,F);else{if(oe&128){T.suspense.unmount(P,F);return}me&&Br(T,null,R,"beforeUnmount"),oe&64?T.type.remove(T,R,P,ne,F):j&&!j.hasOnce&&(M!==Dt||Y>0&&Y&64)?gt(j,R,P,!1,!0):(M===Dt&&Y&384||!B&&oe&16)&&gt(q,R,P),F&&Sn(T)}(Ce&&(Ae=K&&K.onVnodeUnmounted)||me)&&Rt(()=>{Ae&&dn(Ae,R,T),me&&Br(T,null,R,"unmounted")},P)},Sn=T=>{const{type:R,el:P,anchor:F,transition:B}=T;if(R===Dt){Jt(P,F);return}if(R===ia){W(T);return}const M=()=>{s(P),B&&!B.persisted&&B.afterLeave&&B.afterLeave()};if(T.shapeFlag&1&&B&&!B.persisted){const{leave:K,delayLeave:$}=B,q=()=>K(P,M);$?$(T.el,M,q):q()}else M()},Jt=(T,R)=>{let P;for(;T!==R;)P=m(T),s(T),T=P;s(R)},Xt=(T,R,P)=>{const{bum:F,scope:B,job:M,subTree:K,um:$,m:q,a:j}=T;zf(q),zf(j),F&&na(F),B.stop(),M&&(M.flags|=8,ct(K,T,R,P)),$&&Rt($,R),Rt(()=>{T.isUnmounted=!0},R)},gt=(T,R,P,F=!1,B=!1,M=0)=>{for(let K=M;K<T.length;K++)ct(T[K],R,P,F,B)},L=T=>{if(T.shapeFlag&6)return L(T.component.subTree);if(T.shapeFlag&128)return T.suspense.next();const R=m(T.anchor||T.el),P=R&&R[Qm];return P?m(P):R};let J=!1;const Q=(T,R,P)=>{T==null?R._vnode&&ct(R._vnode,null,null,!0):N(R._vnode||null,T,R,null,null,null,P),R._vnode=T,J||(J=!0,Mf(),Wm(),J=!1)},ne={p:N,um:ct,m:Ot,r:Sn,mt:ve,mc:E,pc:Te,pbc:w,n:L,o:t};return{render:Q,hydrate:void 0,createApp:lT(Q)}}function al({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function jr({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function ET(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Mu(t,e,n=!1){const r=t.children,s=e.children;if(ae(r)&&ae(s))for(let i=0;i<r.length;i++){const o=r[i];let c=s[i];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=s[i]=sr(s[i]),c.el=o.el),!n&&c.patchFlag!==-2&&Mu(o,c)),c.type===cc&&c.patchFlag!==-1&&(c.el=o.el),c.type===Ct&&!c.el&&(c.el=o.el)}}function vT(t){const e=t.slice(),n=[0];let r,s,i,o,c;const l=t.length;for(r=0;r<l;r++){const u=t[r];if(u!==0){if(s=n[n.length-1],t[s]<u){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)c=i+o>>1,t[n[c]]<u?i=c+1:o=c;u<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function yg(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:yg(e)}function zf(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const TT=Symbol.for("v-scx"),wT=()=>Kt(TT);function fr(t,e,n){return Eg(t,e,n)}function Eg(t,e,n=Oe){const{immediate:r,deep:s,flush:i,once:o}=n,c=at({},n),l=e&&r||!e&&i!=="post";let u;if(Yi){if(i==="sync"){const _=wT();u=_.__watcherHandles||(_.__watcherHandles=[])}else if(!l){const _=()=>{};return _.stop=yn,_.resume=yn,_.pause=yn,_}}const f=kt;c.call=(_,S,N)=>an(_,f,S,N);let d=!1;i==="post"?c.scheduler=_=>{Rt(_,f&&f.suspense)}:i!=="sync"&&(d=!0,c.scheduler=(_,S)=>{S?_():Nu(_)}),c.augmentJob=_=>{e&&(_.flags|=4),d&&(_.flags|=2,f&&(_.id=f.uid,_.i=f))};const m=Ov(t,e,c);return Yi&&(u?u.push(m):l&&m()),m}function IT(t,e,n){const r=this.proxy,s=We(t)?t.includes(".")?vg(r,t):()=>r[t]:t.bind(r,r);let i;de(e)?i=e:(i=e.handler,n=e);const o=Eo(this),c=Eg(s,i.bind(r),n);return o(),c}function vg(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const AT=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${vr(e)}Modifiers`]||t[`${Cr(e)}Modifiers`];function bT(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Oe;let s=n;const i=e.startsWith("update:"),o=i&&AT(r,e.slice(7));o&&(o.trim&&(s=n.map(f=>We(f)?f.trim():f)),o.number&&(s=n.map(ec)));let c,l=r[c=el(e)]||r[c=el(vr(e))];!l&&i&&(l=r[c=el(Cr(e))]),l&&an(l,t,6,s);const u=r[c+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[c])return;t.emitted[c]=!0,an(u,t,6,s)}}const RT=new WeakMap;function Tg(t,e,n=!1){const r=n?RT:e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},c=!1;if(!de(t)){const l=u=>{const f=Tg(u,e,!0);f&&(c=!0,at(o,f))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!c?(xe(t)&&r.set(t,null),null):(ae(i)?i.forEach(l=>o[l]=null):at(o,i),xe(t)&&r.set(t,o),o)}function ac(t,e){return!t||!Ja(e)?!1:(e=e.slice(2).replace(/Once$/,""),Se(t,e[0].toLowerCase()+e.slice(1))||Se(t,Cr(e))||Se(t,e))}function Kf(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:c,emit:l,render:u,renderCache:f,props:d,data:m,setupState:_,ctx:S,inheritAttrs:N}=t,C=wa(t);let x,O;try{if(n.shapeFlag&4){const W=s||r,Z=W;x=_n(u.call(Z,W,f,d,_,m,S)),O=c}else{const W=e;x=_n(W.length>1?W(d,{attrs:c,slots:o,emit:l}):W(d,null)),O=e.props?c:ST(c)}}catch(W){Di.length=0,sc(W,t,1),x=Fe(Ct)}let H=x;if(O&&N!==!1){const W=Object.keys(O),{shapeFlag:Z}=H;W.length&&Z&7&&(i&&W.some(Eu)&&(O=PT(O,i)),H=wr(H,O,!1,!0))}return n.dirs&&(H=wr(H,null,!1,!0),H.dirs=H.dirs?H.dirs.concat(n.dirs):n.dirs),n.transition&&zi(H,n.transition),x=H,wa(C),x}const ST=t=>{let e;for(const n in t)(n==="class"||n==="style"||Ja(n))&&((e||(e={}))[n]=t[n]);return e},PT=(t,e)=>{const n={};for(const r in t)(!Eu(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function CT(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:c,patchFlag:l}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?Qf(r,o,u):!!o;if(l&8){const f=e.dynamicProps;for(let d=0;d<f.length;d++){const m=f[d];if(o[m]!==r[m]&&!ac(u,m))return!0}}}else return(s||c)&&(!c||!c.$stable)?!0:r===o?!1:r?o?Qf(r,o,u):!0:!!o;return!1}function Qf(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!ac(n,i))return!0}return!1}function kT({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const wg=t=>t.__isSuspense;function NT(t,e){e&&e.pendingBranch?ae(t)?e.effects.push(...t):e.effects.push(t):Fv(t)}const Dt=Symbol.for("v-fgt"),cc=Symbol.for("v-txt"),Ct=Symbol.for("v-cmt"),ia=Symbol.for("v-stc"),Di=[];let Bt=null;function ke(t=!1){Di.push(Bt=t?null:[])}function xT(){Di.pop(),Bt=Di[Di.length-1]||null}let Ki=1;function ba(t,e=!1){Ki+=t,t<0&&Bt&&e&&(Bt.hasOnce=!0)}function Ig(t){return t.dynamicChildren=Ki>0?Bt||Is:null,xT(),Ki>0&&Bt&&Bt.push(t),t}function Be(t,e,n,r,s,i){return Ig(se(t,e,n,r,s,i,!0))}function Qi(t,e,n,r,s){return Ig(Fe(t,e,n,r,s,!0))}function Ra(t){return t?t.__v_isVNode===!0:!1}function Wr(t,e){return t.type===e.type&&t.key===e.key}const Ag=({key:t})=>t??null,oa=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?We(t)||Ke(t)||de(t)?{i:Wt,r:t,k:e,f:!!n}:t:null);function se(t,e=null,n=null,r=0,s=null,i=t===Dt?0:1,o=!1,c=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Ag(e),ref:e&&oa(e),scopeId:Km,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Wt};return c?(Lu(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=We(n)?8:16),Ki>0&&!o&&Bt&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Bt.push(l),l}const Fe=VT;function VT(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===tT)&&(t=Ct),Ra(t)){const c=wr(t,e,!0);return n&&Lu(c,n),Ki>0&&!i&&Bt&&(c.shapeFlag&6?Bt[Bt.indexOf(t)]=c:Bt.push(c)),c.patchFlag=-2,c}if(HT(t)&&(t=t.__vccOpts),e){e=DT(e);let{class:c,style:l}=e;c&&!We(c)&&(e.class=mo(c)),xe(l)&&(Cu(l)&&!ae(l)&&(l=at({},l)),e.style=wu(l))}const o=We(t)?1:wg(t)?128:Ym(t)?64:xe(t)?4:de(t)?2:0;return se(t,e,n,r,s,o,i,!0)}function DT(t){return t?Cu(t)||fg(t)?at({},t):t:null}function wr(t,e,n=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:c,transition:l}=t,u=e?MT(s||{},e):s,f={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&Ag(u),ref:e&&e.ref?n&&i?ae(i)?i.concat(oa(e)):[i,oa(e)]:oa(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:c,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Dt?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&wr(t.ssContent),ssFallback:t.ssFallback&&wr(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&zi(f,l.clone(f)),f}function Ht(t=" ",e=0){return Fe(cc,null,t,e)}function OT(t,e){const n=Fe(ia,null,t);return n.staticCount=e,n}function Oi(t="",e=!1){return e?(ke(),Qi(Ct,null,t)):Fe(Ct,null,t)}function _n(t){return t==null||typeof t=="boolean"?Fe(Ct):ae(t)?Fe(Dt,null,t.slice()):Ra(t)?sr(t):Fe(cc,null,String(t))}function sr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:wr(t)}function Lu(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(ae(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),Lu(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!fg(e)?e._ctx=Wt:s===3&&Wt&&(Wt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else de(e)?(e={default:e,_ctx:Wt},n=32):(e=String(e),r&64?(n=16,e=[Ht(e)]):n=8);t.children=e,t.shapeFlag|=n}function MT(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=mo([e.class,r.class]));else if(s==="style")e.style=wu([e.style,r.style]);else if(Ja(s)){const i=e[s],o=r[s];o&&i!==o&&!(ae(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function dn(t,e,n,r=null){an(t,e,7,[n,r])}const LT=lg();let FT=0;function UT(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||LT,i={uid:FT++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Am(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:pg(r,s),emitsOptions:Tg(r,s),emit:null,emitted:null,propsDefaults:Oe,inheritAttrs:r.inheritAttrs,ctx:Oe,data:Oe,props:Oe,attrs:Oe,slots:Oe,refs:Oe,setupState:Oe,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=bT.bind(null,i),t.ce&&t.ce(i),i}let kt=null;const Fu=()=>kt||Wt;let Sa,Bl;{const t=tc(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};Sa=e("__VUE_INSTANCE_SETTERS__",n=>kt=n),Bl=e("__VUE_SSR_SETTERS__",n=>Yi=n)}const Eo=t=>{const e=kt;return Sa(t),t.scope.on(),()=>{t.scope.off(),Sa(e)}},Yf=()=>{kt&&kt.scope.off(),Sa(null)};function bg(t){return t.vnode.shapeFlag&4}let Yi=!1;function BT(t,e=!1,n=!1){e&&Bl(e);const{props:r,children:s}=t.vnode,i=bg(t);hT(t,r,i,e),mT(t,s,n||e);const o=i?jT(t,e):void 0;return e&&Bl(!1),o}function jT(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,nT);const{setup:r}=n;if(r){Fn();const s=t.setupContext=r.length>1?$T(t):null,i=Eo(t),o=_o(r,t,0,[t.props,s]),c=gm(o);if(Un(),i(),(c||t.sp)&&!xi(t)&&sg(t),c){if(o.then(Yf,Yf),e)return o.then(l=>{Jf(t,l)}).catch(l=>{sc(l,t,0)});t.asyncDep=o}else Jf(t,o)}else Rg(t)}function Jf(t,e,n){de(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:xe(e)&&(t.setupState=$m(e)),Rg(t)}function Rg(t,e,n){const r=t.type;t.render||(t.render=r.render||yn);{const s=Eo(t);Fn();try{rT(t)}finally{Un(),s()}}}const qT={get(t,e){return wt(t,"get",""),t[e]}};function $T(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,qT),slots:t.slots,emit:t.emit,expose:e}}function lc(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy($m(ku(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Vi)return Vi[n](t)},has(e,n){return n in e||n in Vi}})):t.proxy}function HT(t){return de(t)&&"__vccOpts"in t}const ft=(t,e)=>Vv(t,e,Yi);function Uu(t,e,n){try{ba(-1);const r=arguments.length;return r===2?xe(e)&&!ae(e)?Ra(e)?Fe(t,null,[e]):Fe(t,e):Fe(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Ra(n)&&(n=[n]),Fe(t,e,n))}finally{ba(1)}}const GT="3.5.24";let jl;const Xf=typeof window<"u"&&window.trustedTypes;if(Xf)try{jl=Xf.createPolicy("vue",{createHTML:t=>t})}catch{}const Sg=jl?t=>jl.createHTML(t):t=>t,WT="http://www.w3.org/2000/svg",zT="http://www.w3.org/1998/Math/MathML",Nn=typeof document<"u"?document:null,Zf=Nn&&Nn.createElement("template"),KT={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?Nn.createElementNS(WT,t):e==="mathml"?Nn.createElementNS(zT,t):n?Nn.createElement(t,{is:n}):Nn.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>Nn.createTextNode(t),createComment:t=>Nn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Nn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{Zf.innerHTML=Sg(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const c=Zf.content;if(r==="svg"||r==="mathml"){const l=c.firstChild;for(;l.firstChild;)c.appendChild(l.firstChild);c.removeChild(l)}e.insertBefore(c,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Zn="transition",_i="animation",Ji=Symbol("_vtc"),Pg={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},QT=at({},Zm,Pg),YT=t=>(t.displayName="Transition",t.props=QT,t),JT=YT((t,{slots:e})=>Uu(Hv,XT(t),e)),qr=(t,e=[])=>{ae(t)?t.forEach(n=>n(...e)):t&&t(...e)},ed=t=>t?ae(t)?t.some(e=>e.length>1):t.length>1:!1;function XT(t){const e={};for(const I in t)I in Pg||(e[I]=t[I]);if(t.css===!1)return e;const{name:n="v",type:r,duration:s,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:c=`${n}-enter-to`,appearFromClass:l=i,appearActiveClass:u=o,appearToClass:f=c,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:m=`${n}-leave-active`,leaveToClass:_=`${n}-leave-to`}=t,S=ZT(s),N=S&&S[0],C=S&&S[1],{onBeforeEnter:x,onEnter:O,onEnterCancelled:H,onLeave:W,onLeaveCancelled:Z,onBeforeAppear:te=x,onAppear:b=O,onAppearCancelled:E=H}=e,y=(I,v,ve,je)=>{I._enterCancelled=je,$r(I,v?f:c),$r(I,v?u:o),ve&&ve()},w=(I,v)=>{I._isLeaving=!1,$r(I,d),$r(I,_),$r(I,m),v&&v()},A=I=>(v,ve)=>{const je=I?b:O,Pe=()=>y(v,I,ve);qr(je,[v,Pe]),td(()=>{$r(v,I?l:i),Cn(v,I?f:c),ed(je)||nd(v,r,N,Pe)})};return at(e,{onBeforeEnter(I){qr(x,[I]),Cn(I,i),Cn(I,o)},onBeforeAppear(I){qr(te,[I]),Cn(I,l),Cn(I,u)},onEnter:A(!1),onAppear:A(!0),onLeave(I,v){I._isLeaving=!0;const ve=()=>w(I,v);Cn(I,d),I._enterCancelled?(Cn(I,m),id(I)):(id(I),Cn(I,m)),td(()=>{I._isLeaving&&($r(I,d),Cn(I,_),ed(W)||nd(I,r,C,ve))}),qr(W,[I,ve])},onEnterCancelled(I){y(I,!1,void 0,!0),qr(H,[I])},onAppearCancelled(I){y(I,!0,void 0,!0),qr(E,[I])},onLeaveCancelled(I){w(I),qr(Z,[I])}})}function ZT(t){if(t==null)return null;if(xe(t))return[cl(t.enter),cl(t.leave)];{const e=cl(t);return[e,e]}}function cl(t){return JE(t)}function Cn(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Ji]||(t[Ji]=new Set)).add(e)}function $r(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[Ji];n&&(n.delete(e),n.size||(t[Ji]=void 0))}function td(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let ew=0;function nd(t,e,n,r){const s=t._endId=++ew,i=()=>{s===t._endId&&r()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:c,propCount:l}=tw(t,e);if(!o)return r();const u=o+"end";let f=0;const d=()=>{t.removeEventListener(u,m),i()},m=_=>{_.target===t&&++f>=l&&d()};setTimeout(()=>{f<l&&d()},c+1),t.addEventListener(u,m)}function tw(t,e){const n=window.getComputedStyle(t),r=S=>(n[S]||"").split(", "),s=r(`${Zn}Delay`),i=r(`${Zn}Duration`),o=rd(s,i),c=r(`${_i}Delay`),l=r(`${_i}Duration`),u=rd(c,l);let f=null,d=0,m=0;e===Zn?o>0&&(f=Zn,d=o,m=i.length):e===_i?u>0&&(f=_i,d=u,m=l.length):(d=Math.max(o,u),f=d>0?o>u?Zn:_i:null,m=f?f===Zn?i.length:l.length:0);const _=f===Zn&&/\b(?:transform|all)(?:,|$)/.test(r(`${Zn}Property`).toString());return{type:f,timeout:d,propCount:m,hasTransform:_}}function rd(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>sd(n)+sd(t[r])))}function sd(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function id(t){return(t?t.ownerDocument:document).body.offsetHeight}function nw(t,e,n){const r=t[Ji];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Pa=Symbol("_vod"),Cg=Symbol("_vsh"),rw={name:"show",beforeMount(t,{value:e},{transition:n}){t[Pa]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):yi(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),yi(t,!0),r.enter(t)):r.leave(t,()=>{yi(t,!1)}):yi(t,e))},beforeUnmount(t,{value:e}){yi(t,e)}};function yi(t,e){t.style.display=e?t[Pa]:"none",t[Cg]=!e}const sw=Symbol(""),iw=/(?:^|;)\s*display\s*:/;function ow(t,e,n){const r=t.style,s=We(n);let i=!1;if(n&&!s){if(e)if(We(e))for(const o of e.split(";")){const c=o.slice(0,o.indexOf(":")).trim();n[c]==null&&aa(r,c,"")}else for(const o in e)n[o]==null&&aa(r,o,"");for(const o in n)o==="display"&&(i=!0),aa(r,o,n[o])}else if(s){if(e!==n){const o=r[sw];o&&(n+=";"+o),r.cssText=n,i=iw.test(n)}}else e&&t.removeAttribute("style");Pa in t&&(t[Pa]=i?r.display:"",t[Cg]&&(r.display="none"))}const od=/\s*!important$/;function aa(t,e,n){if(ae(n))n.forEach(r=>aa(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=aw(t,e);od.test(n)?t.setProperty(Cr(r),n.replace(od,""),"important"):t[r]=n}}const ad=["Webkit","Moz","ms"],ll={};function aw(t,e){const n=ll[e];if(n)return n;let r=vr(e);if(r!=="filter"&&r in t)return ll[e]=r;r=Em(r);for(let s=0;s<ad.length;s++){const i=ad[s]+r;if(i in t)return ll[e]=i}return e}const cd="http://www.w3.org/1999/xlink";function ld(t,e,n,r,s,i=rv(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(cd,e.slice(6,e.length)):t.setAttributeNS(cd,e,n):n==null||i&&!Tm(n)?t.removeAttribute(e):t.setAttribute(e,i?"":An(n)?String(n):n)}function ud(t,e,n,r,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?Sg(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const c=i==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(c!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const c=typeof t[e];c==="boolean"?n=Tm(n):n==null&&c==="string"?(n="",o=!0):c==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(s||e)}function zr(t,e,n,r){t.addEventListener(e,n,r)}function cw(t,e,n,r){t.removeEventListener(e,n,r)}const hd=Symbol("_vei");function lw(t,e,n,r,s=null){const i=t[hd]||(t[hd]={}),o=i[e];if(r&&o)o.value=r;else{const[c,l]=uw(e);if(r){const u=i[e]=dw(r,s);zr(t,c,u,l)}else o&&(cw(t,c,o,l),i[e]=void 0)}}const fd=/(?:Once|Passive|Capture)$/;function uw(t){let e;if(fd.test(t)){e={};let r;for(;r=t.match(fd);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Cr(t.slice(2)),e]}let ul=0;const hw=Promise.resolve(),fw=()=>ul||(hw.then(()=>ul=0),ul=Date.now());function dw(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;an(pw(r,n.value),e,5,[r])};return n.value=t,n.attached=fw(),n}function pw(t,e){if(ae(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const dd=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,mw=(t,e,n,r,s,i)=>{const o=s==="svg";e==="class"?nw(t,r,o):e==="style"?ow(t,n,r):Ja(e)?Eu(e)||lw(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):gw(t,e,r,o))?(ud(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&ld(t,e,r,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!We(r))?ud(t,vr(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),ld(t,e,r,o))};function gw(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&dd(e)&&de(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return dd(e)&&We(n)?!1:e in t}const Ca=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ae(e)?n=>na(e,n):e};function _w(t){t.target.composing=!0}function pd(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Rs=Symbol("_assign");function md(t,e,n){return e&&(t=t.trim()),n&&(t=ec(t)),t}const yk={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[Rs]=Ca(s);const i=r||s.props&&s.props.type==="number";zr(t,e?"change":"input",o=>{o.target.composing||t[Rs](md(t.value,n,i))}),(n||i)&&zr(t,"change",()=>{t.value=md(t.value,n,i)}),e||(zr(t,"compositionstart",_w),zr(t,"compositionend",pd),zr(t,"change",pd))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},o){if(t[Rs]=Ca(o),t.composing)return;const c=(i||t.type==="number")&&!/^0\d/.test(t.value)?ec(t.value):t.value,l=e??"";c!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||s&&t.value.trim()===l)||(t.value=l))}},Ek={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const s=Xa(e);zr(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?ec(ka(o)):ka(o));t[Rs](t.multiple?s?new Set(i):i:i[0]),t._assigning=!0,yo(()=>{t._assigning=!1})}),t[Rs]=Ca(r)},mounted(t,{value:e}){gd(t,e)},beforeUpdate(t,e,n){t[Rs]=Ca(n)},updated(t,{value:e}){t._assigning||gd(t,e)}};function gd(t,e){const n=t.multiple,r=ae(e);if(!(n&&!r&&!Xa(e))){for(let s=0,i=t.options.length;s<i;s++){const o=t.options[s],c=ka(o);if(n)if(r){const l=typeof c;l==="string"||l==="number"?o.selected=e.some(u=>String(u)===String(c)):o.selected=iv(e,c)>-1}else o.selected=e.has(c);else if(nc(ka(o),e)){t.selectedIndex!==s&&(t.selectedIndex=s);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function ka(t){return"_value"in t?t._value:t.value}const yw=["ctrl","shift","alt","meta"],Ew={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>yw.some(n=>t[`${n}Key`]&&!e.includes(n))},vw=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=((s,...i)=>{for(let o=0;o<e.length;o++){const c=Ew[e[o]];if(c&&c(s,e))return}return t(s,...i)}))},Tw={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},vk=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=(s=>{if(!("key"in s))return;const i=Cr(s.key);if(e.some(o=>o===i||Tw[o]===i))return t(s)}))},ww=at({patchProp:mw},KT);let _d;function Iw(){return _d||(_d=_T(ww))}const Aw=((...t)=>{const e=Iw().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=Rw(r);if(!s)return;const i=e._component;!de(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,bw(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e});function bw(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Rw(t){return We(t)?document.querySelector(t):t}let kg;const uc=t=>kg=t,Ng=Symbol();function ql(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Mi;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Mi||(Mi={}));function Sw(){const t=bm(!0),e=t.run(()=>tn({}));let n=[],r=[];const s=ku({install(i){uc(s),s._a=i,i.provide(Ng,s),i.config.globalProperties.$pinia=s,r.forEach(o=>n.push(o)),r=[]},use(i){return this._a?n.push(i):r.push(i),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return s}const xg=()=>{};function yd(t,e,n,r=xg){t.add(e);const s=()=>{t.delete(e)&&r()};return!n&&Rm()&&ov(s),s}function ms(t,...e){t.forEach(n=>{n(...e)})}const Pw=t=>t(),Ed=Symbol(),hl=Symbol();function $l(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,r)=>t.set(r,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],s=t[n];ql(s)&&ql(r)&&t.hasOwnProperty(n)&&!Ke(r)&&!hr(r)?t[n]=$l(s,r):t[n]=r}return t}const Cw=Symbol();function kw(t){return!ql(t)||!Object.prototype.hasOwnProperty.call(t,Cw)}const{assign:nr}=Object;function Nw(t){return!!(Ke(t)&&t.effect)}function xw(t,e,n,r){const{state:s,actions:i,getters:o}=e,c=n.state.value[t];let l;function u(){c||(n.state.value[t]=s?s():{});const f=Cv(n.state.value[t]);return nr(f,i,Object.keys(o||{}).reduce((d,m)=>(d[m]=ku(ft(()=>{uc(n);const _=n._s.get(t);return o[m].call(_,_)})),d),{}))}return l=Vg(t,u,e,n,r,!0),l}function Vg(t,e,n={},r,s,i){let o;const c=nr({actions:{}},n),l={deep:!0};let u,f,d=new Set,m=new Set,_;const S=r.state.value[t];!i&&!S&&(r.state.value[t]={}),tn({});let N;function C(E){let y;u=f=!1,typeof E=="function"?(E(r.state.value[t]),y={type:Mi.patchFunction,storeId:t,events:_}):($l(r.state.value[t],E),y={type:Mi.patchObject,payload:E,storeId:t,events:_});const w=N=Symbol();yo().then(()=>{N===w&&(u=!0)}),f=!0,ms(d,y,r.state.value[t])}const x=i?function(){const{state:y}=n,w=y?y():{};this.$patch(A=>{nr(A,w)})}:xg;function O(){o.stop(),d.clear(),m.clear(),r._s.delete(t)}const H=(E,y="")=>{if(Ed in E)return E[hl]=y,E;const w=function(){uc(r);const A=Array.from(arguments),I=new Set,v=new Set;function ve(fe){I.add(fe)}function je(fe){v.add(fe)}ms(m,{args:A,name:w[hl],store:Z,after:ve,onError:je});let Pe;try{Pe=E.apply(this&&this.$id===t?this:Z,A)}catch(fe){throw ms(v,fe),fe}return Pe instanceof Promise?Pe.then(fe=>(ms(I,fe),fe)).catch(fe=>(ms(v,fe),Promise.reject(fe))):(ms(I,Pe),Pe)};return w[Ed]=!0,w[hl]=y,w},W={_p:r,$id:t,$onAction:yd.bind(null,m),$patch:C,$reset:x,$subscribe(E,y={}){const w=yd(d,E,y.detached,()=>A()),A=o.run(()=>fr(()=>r.state.value[t],I=>{(y.flush==="sync"?f:u)&&E({storeId:t,type:Mi.direct,events:_},I)},nr({},l,y)));return w},$dispose:O},Z=go(W);r._s.set(t,Z);const b=(r._a&&r._a.runWithContext||Pw)(()=>r._e.run(()=>(o=bm()).run(()=>e({action:H}))));for(const E in b){const y=b[E];if(Ke(y)&&!Nw(y)||hr(y))i||(S&&kw(y)&&(Ke(y)?y.value=S[E]:$l(y,S[E])),r.state.value[t][E]=y);else if(typeof y=="function"){const w=H(y,E);b[E]=w,c.actions[E]=y}}return nr(Z,b),nr(be(Z),b),Object.defineProperty(Z,"$state",{get:()=>r.state.value[t],set:E=>{C(y=>{nr(y,E)})}}),r._p.forEach(E=>{nr(Z,o.run(()=>E({store:Z,app:r._a,pinia:r,options:c})))}),S&&i&&n.hydrate&&n.hydrate(Z.$state,S),u=!0,f=!0,Z}function Dg(t,e,n){let r;const s=typeof e=="function";r=s?n:e;function i(o,c){const l=uT();return o=o||(l?Kt(Ng,null):null),o&&uc(o),o=kg,o._s.has(t)||(s?Vg(t,e,r,o):xw(t,r,o)),o._s.get(t)}return i.$id=t,i}const Vw="/logo.png";const _s=typeof document<"u";function Og(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Dw(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&Og(t.default)}const Re=Object.assign;function fl(t,e){const n={};for(const r in e){const s=e[r];n[r]=cn(s)?s.map(t):t(s)}return n}const Li=()=>{},cn=Array.isArray;function vd(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}const Mg=/#/g,Ow=/&/g,Mw=/\//g,Lw=/=/g,Fw=/\?/g,Lg=/\+/g,Uw=/%5B/g,Bw=/%5D/g,Fg=/%5E/g,jw=/%60/g,Ug=/%7B/g,qw=/%7C/g,Bg=/%7D/g,$w=/%20/g;function Bu(t){return t==null?"":encodeURI(""+t).replace(qw,"|").replace(Uw,"[").replace(Bw,"]")}function Hw(t){return Bu(t).replace(Ug,"{").replace(Bg,"}").replace(Fg,"^")}function Hl(t){return Bu(t).replace(Lg,"%2B").replace($w,"+").replace(Mg,"%23").replace(Ow,"%26").replace(jw,"`").replace(Ug,"{").replace(Bg,"}").replace(Fg,"^")}function Gw(t){return Hl(t).replace(Lw,"%3D")}function Ww(t){return Bu(t).replace(Mg,"%23").replace(Fw,"%3F")}function zw(t){return Ww(t).replace(Mw,"%2F")}function Xi(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const Kw=/\/$/,Qw=t=>t.replace(Kw,"");function dl(t,e,n="/"){let r,s={},i="",o="";const c=e.indexOf("#");let l=e.indexOf("?");return l=c>=0&&l>c?-1:l,l>=0&&(r=e.slice(0,l),i=e.slice(l,c>0?c:e.length),s=t(i.slice(1))),c>=0&&(r=r||e.slice(0,c),o=e.slice(c,e.length)),r=Zw(r??e,n),{fullPath:r+i+o,path:r,query:s,hash:Xi(o)}}function Yw(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Td(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function Jw(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&Ds(e.matched[r],n.matched[s])&&jg(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Ds(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function jg(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!Xw(t[n],e[n]))return!1;return!0}function Xw(t,e){return cn(t)?wd(t,e):cn(e)?wd(e,t):t===e}function wd(t,e){return cn(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function Zw(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,c;for(o=0;o<r.length;o++)if(c=r[o],c!==".")if(c==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const er={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Gl=(function(t){return t.pop="pop",t.push="push",t})({}),pl=(function(t){return t.back="back",t.forward="forward",t.unknown="",t})({});function eI(t){if(!t)if(_s){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),Qw(t)}const tI=/^[^#]+#/;function nI(t,e){return t.replace(tI,"#")+e}function rI(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const hc=()=>({left:window.scrollX,top:window.scrollY});function sI(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=rI(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Id(t,e){return(history.state?history.state.position-e:-1)+t}const Wl=new Map;function iI(t,e){Wl.set(t,e)}function oI(t){const e=Wl.get(t);return Wl.delete(t),e}function aI(t){return typeof t=="string"||t&&typeof t=="object"}function qg(t){return typeof t=="string"||typeof t=="symbol"}let He=(function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t})({});const $g=Symbol("");He.MATCHER_NOT_FOUND+"",He.NAVIGATION_GUARD_REDIRECT+"",He.NAVIGATION_ABORTED+"",He.NAVIGATION_CANCELLED+"",He.NAVIGATION_DUPLICATED+"";function Os(t,e){return Re(new Error,{type:t,[$g]:!0},e)}function kn(t,e){return t instanceof Error&&$g in t&&(e==null||!!(t.type&e))}const cI=["params","query","hash"];function lI(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of cI)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function uI(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<n.length;++r){const s=n[r].replace(Lg," "),i=s.indexOf("="),o=Xi(i<0?s:s.slice(0,i)),c=i<0?null:Xi(s.slice(i+1));if(o in e){let l=e[o];cn(l)||(l=e[o]=[l]),l.push(c)}else e[o]=c}return e}function Ad(t){let e="";for(let n in t){const r=t[n];if(n=Gw(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(cn(r)?r.map(s=>s&&Hl(s)):[r&&Hl(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function hI(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=cn(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const fI=Symbol(""),bd=Symbol(""),fc=Symbol(""),ju=Symbol(""),zl=Symbol("");function Ei(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function ir(t,e,n,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((c,l)=>{const u=m=>{m===!1?l(Os(He.NAVIGATION_ABORTED,{from:n,to:e})):m instanceof Error?l(m):aI(m)?l(Os(He.NAVIGATION_GUARD_REDIRECT,{from:e,to:m})):(o&&r.enterCallbacks[s]===o&&typeof m=="function"&&o.push(m),c())},f=i(()=>t.call(r&&r.instances[s],e,n,u));let d=Promise.resolve(f);t.length<3&&(d=d.then(u)),d.catch(m=>l(m))})}function ml(t,e,n,r,s=i=>i()){const i=[];for(const o of t)for(const c in o.components){let l=o.components[c];if(!(e!=="beforeRouteEnter"&&!o.instances[c]))if(Og(l)){const u=(l.__vccOpts||l)[e];u&&i.push(ir(u,n,r,o,c,s))}else{let u=l();i.push(()=>u.then(f=>{if(!f)throw new Error(`Couldn't resolve component "${c}" at "${o.path}"`);const d=Dw(f)?f.default:f;o.mods[c]=f,o.components[c]=d;const m=(d.__vccOpts||d)[e];return m&&ir(m,n,r,o,c,s)()}))}}return i}function dI(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const c=e.matched[o];c&&(t.matched.find(u=>Ds(u,c))?r.push(c):n.push(c));const l=t.matched[o];l&&(e.matched.find(u=>Ds(u,l))||s.push(l))}return[n,r,s]}let pI=()=>location.protocol+"//"+location.host;function Hg(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let o=s.includes(t.slice(i))?t.slice(i).length:1,c=s.slice(o);return c[0]!=="/"&&(c="/"+c),Td(c,"")}return Td(n,t)+r+s}function mI(t,e,n,r){let s=[],i=[],o=null;const c=({state:m})=>{const _=Hg(t,location),S=n.value,N=e.value;let C=0;if(m){if(n.value=_,e.value=m,o&&o===S){o=null;return}C=N?m.position-N.position:0}else r(_);s.forEach(x=>{x(n.value,S,{delta:C,type:Gl.pop,direction:C?C>0?pl.forward:pl.back:pl.unknown})})};function l(){o=n.value}function u(m){s.push(m);const _=()=>{const S=s.indexOf(m);S>-1&&s.splice(S,1)};return i.push(_),_}function f(){if(document.visibilityState==="hidden"){const{history:m}=window;if(!m.state)return;m.replaceState(Re({},m.state,{scroll:hc()}),"")}}function d(){for(const m of i)m();i=[],window.removeEventListener("popstate",c),window.removeEventListener("pagehide",f),document.removeEventListener("visibilitychange",f)}return window.addEventListener("popstate",c),window.addEventListener("pagehide",f),document.addEventListener("visibilitychange",f),{pauseListeners:l,listen:u,destroy:d}}function Rd(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?hc():null}}function gI(t){const{history:e,location:n}=window,r={value:Hg(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,u,f){const d=t.indexOf("#"),m=d>-1?(n.host&&document.querySelector("base")?t:t.slice(d))+l:pI()+t+l;try{e[f?"replaceState":"pushState"](u,"",m),s.value=u}catch(_){console.error(_),n[f?"replace":"assign"](m)}}function o(l,u){i(l,Re({},e.state,Rd(s.value.back,l,s.value.forward,!0),u,{position:s.value.position}),!0),r.value=l}function c(l,u){const f=Re({},s.value,e.state,{forward:l,scroll:hc()});i(f.current,f,!0),i(l,Re({},Rd(r.value,l,null),{position:f.position+1},u),!1),r.value=l}return{location:r,state:s,push:c,replace:o}}function _I(t){t=eI(t);const e=gI(t),n=mI(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=Re({location:"",base:t,go:r,createHref:nI.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}let Kr=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t})({});var et=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t})(et||{});const yI={type:Kr.Static,value:""},EI=/[a-zA-Z0-9_]/;function vI(t){if(!t)return[[]];if(t==="/")return[[yI]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(_){throw new Error(`ERR (${n})/"${u}": ${_}`)}let n=et.Static,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let c=0,l,u="",f="";function d(){u&&(n===et.Static?i.push({type:Kr.Static,value:u}):n===et.Param||n===et.ParamRegExp||n===et.ParamRegExpEnd?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:Kr.Param,value:u,regexp:f,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function m(){u+=l}for(;c<t.length;){if(l=t[c++],l==="\\"&&n!==et.ParamRegExp){r=n,n=et.EscapeNext;continue}switch(n){case et.Static:l==="/"?(u&&d(),o()):l===":"?(d(),n=et.Param):m();break;case et.EscapeNext:m(),n=r;break;case et.Param:l==="("?n=et.ParamRegExp:EI.test(l)?m():(d(),n=et.Static,l!=="*"&&l!=="?"&&l!=="+"&&c--);break;case et.ParamRegExp:l===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+l:n=et.ParamRegExpEnd:f+=l;break;case et.ParamRegExpEnd:d(),n=et.Static,l!=="*"&&l!=="?"&&l!=="+"&&c--,f="";break;default:e("Unknown state");break}}return n===et.ParamRegExp&&e(`Unfinished custom RegExp for param "${u}"`),d(),o(),s}const Sd="[^/]+?",TI={sensitive:!1,strict:!1,start:!0,end:!0};var St=(function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t})(St||{});const wI=/[.+*?^${}()[\]/\\]/g;function II(t,e){const n=Re({},TI,e),r=[];let s=n.start?"^":"";const i=[];for(const u of t){const f=u.length?[]:[St.Root];n.strict&&!u.length&&(s+="/");for(let d=0;d<u.length;d++){const m=u[d];let _=St.Segment+(n.sensitive?St.BonusCaseSensitive:0);if(m.type===Kr.Static)d||(s+="/"),s+=m.value.replace(wI,"\\$&"),_+=St.Static;else if(m.type===Kr.Param){const{value:S,repeatable:N,optional:C,regexp:x}=m;i.push({name:S,repeatable:N,optional:C});const O=x||Sd;if(O!==Sd){_+=St.BonusCustomRegExp;try{`${O}`}catch(W){throw new Error(`Invalid custom RegExp for param "${S}" (${O}): `+W.message)}}let H=N?`((?:${O})(?:/(?:${O}))*)`:`(${O})`;d||(H=C&&u.length<2?`(?:/${H})`:"/"+H),C&&(H+="?"),s+=H,_+=St.Dynamic,C&&(_+=St.BonusOptional),N&&(_+=St.BonusRepeatable),O===".*"&&(_+=St.BonusWildcard)}f.push(_)}r.push(f)}if(n.strict&&n.end){const u=r.length-1;r[u][r[u].length-1]+=St.BonusStrict}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function c(u){const f=u.match(o),d={};if(!f)return null;for(let m=1;m<f.length;m++){const _=f[m]||"",S=i[m-1];d[S.name]=_&&S.repeatable?_.split("/"):_}return d}function l(u){let f="",d=!1;for(const m of t){(!d||!f.endsWith("/"))&&(f+="/"),d=!1;for(const _ of m)if(_.type===Kr.Static)f+=_.value;else if(_.type===Kr.Param){const{value:S,repeatable:N,optional:C}=_,x=S in u?u[S]:"";if(cn(x)&&!N)throw new Error(`Provided param "${S}" is an array but it is not repeatable (* or + modifiers)`);const O=cn(x)?x.join("/"):x;if(!O)if(C)m.length<2&&(f.endsWith("/")?f=f.slice(0,-1):d=!0);else throw new Error(`Missing required param "${S}"`);f+=O}}return f||"/"}return{re:o,score:r,keys:i,parse:c,stringify:l}}function AI(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===St.Static+St.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===St.Static+St.Segment?1:-1:0}function Gg(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=AI(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(Pd(r))return 1;if(Pd(s))return-1}return s.length-r.length}function Pd(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const bI={strict:!1,end:!0,sensitive:!1};function RI(t,e,n){const r=II(vI(t.path),n),s=Re(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function SI(t,e){const n=[],r=new Map;e=vd(bI,e);function s(d){return r.get(d)}function i(d,m,_){const S=!_,N=kd(d);N.aliasOf=_&&_.record;const C=vd(e,d),x=[N];if("alias"in d){const W=typeof d.alias=="string"?[d.alias]:d.alias;for(const Z of W)x.push(kd(Re({},N,{components:_?_.record.components:N.components,path:Z,aliasOf:_?_.record:N})))}let O,H;for(const W of x){const{path:Z}=W;if(m&&Z[0]!=="/"){const te=m.record.path,b=te[te.length-1]==="/"?"":"/";W.path=m.record.path+(Z&&b+Z)}if(O=RI(W,m,C),_?_.alias.push(O):(H=H||O,H!==O&&H.alias.push(O),S&&d.name&&!Nd(O)&&o(d.name)),Wg(O)&&l(O),N.children){const te=N.children;for(let b=0;b<te.length;b++)i(te[b],O,_&&_.children[b])}_=_||O}return H?()=>{o(H)}:Li}function o(d){if(qg(d)){const m=r.get(d);m&&(r.delete(d),n.splice(n.indexOf(m),1),m.children.forEach(o),m.alias.forEach(o))}else{const m=n.indexOf(d);m>-1&&(n.splice(m,1),d.record.name&&r.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function c(){return n}function l(d){const m=kI(d,n);n.splice(m,0,d),d.record.name&&!Nd(d)&&r.set(d.record.name,d)}function u(d,m){let _,S={},N,C;if("name"in d&&d.name){if(_=r.get(d.name),!_)throw Os(He.MATCHER_NOT_FOUND,{location:d});C=_.record.name,S=Re(Cd(m.params,_.keys.filter(H=>!H.optional).concat(_.parent?_.parent.keys.filter(H=>H.optional):[]).map(H=>H.name)),d.params&&Cd(d.params,_.keys.map(H=>H.name))),N=_.stringify(S)}else if(d.path!=null)N=d.path,_=n.find(H=>H.re.test(N)),_&&(S=_.parse(N),C=_.record.name);else{if(_=m.name?r.get(m.name):n.find(H=>H.re.test(m.path)),!_)throw Os(He.MATCHER_NOT_FOUND,{location:d,currentLocation:m});C=_.record.name,S=Re({},m.params,d.params),N=_.stringify(S)}const x=[];let O=_;for(;O;)x.unshift(O.record),O=O.parent;return{name:C,path:N,params:S,matched:x,meta:CI(x)}}t.forEach(d=>i(d));function f(){n.length=0,r.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:f,getRoutes:c,getRecordMatcher:s}}function Cd(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function kd(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:PI(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function PI(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function Nd(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function CI(t){return t.reduce((e,n)=>Re(e,n.meta),{})}function kI(t,e){let n=0,r=e.length;for(;n!==r;){const i=n+r>>1;Gg(t,e[i])<0?r=i:n=i+1}const s=NI(t);return s&&(r=e.lastIndexOf(s,r-1)),r}function NI(t){let e=t;for(;e=e.parent;)if(Wg(e)&&Gg(t,e)===0)return e}function Wg({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function xd(t){const e=Kt(fc),n=Kt(ju),r=ft(()=>{const l=De(t.to);return e.resolve(l)}),s=ft(()=>{const{matched:l}=r.value,{length:u}=l,f=l[u-1],d=n.matched;if(!f||!d.length)return-1;const m=d.findIndex(Ds.bind(null,f));if(m>-1)return m;const _=Vd(l[u-2]);return u>1&&Vd(f)===_&&d[d.length-1].path!==_?d.findIndex(Ds.bind(null,l[u-2])):m}),i=ft(()=>s.value>-1&&OI(n.params,r.value.params)),o=ft(()=>s.value>-1&&s.value===n.matched.length-1&&jg(n.params,r.value.params));function c(l={}){if(DI(l)){const u=e[De(t.replace)?"replace":"push"](De(t.to)).catch(Li);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:r,href:ft(()=>r.value.href),isActive:i,isExactActive:o,navigate:c}}function xI(t){return t.length===1?t[0]:t}const VI=Ws({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:xd,setup(t,{slots:e}){const n=go(xd(t)),{options:r}=Kt(fc),s=ft(()=>({[Dd(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Dd(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&xI(e.default(n));return t.custom?i:Uu("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),pn=VI;function DI(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function OI(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!cn(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function Vd(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Dd=(t,e,n)=>t??e??n,MI=Ws({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Kt(zl),s=ft(()=>t.route||r.value),i=Kt(bd,0),o=ft(()=>{let u=De(i);const{matched:f}=s.value;let d;for(;(d=f[u])&&!d.components;)u++;return u}),c=ft(()=>s.value.matched[o.value]);sa(bd,ft(()=>o.value+1)),sa(fI,c),sa(zl,s);const l=tn();return fr(()=>[l.value,c.value,t.name],([u,f,d],[m,_,S])=>{f&&(f.instances[d]=u,_&&_!==f&&u&&u===m&&(f.leaveGuards.size||(f.leaveGuards=_.leaveGuards),f.updateGuards.size||(f.updateGuards=_.updateGuards))),u&&f&&(!_||!Ds(f,_)||!m)&&(f.enterCallbacks[d]||[]).forEach(N=>N(u))},{flush:"post"}),()=>{const u=s.value,f=t.name,d=c.value,m=d&&d.components[f];if(!m)return Od(n.default,{Component:m,route:u});const _=d.props[f],S=_?_===!0?u.params:typeof _=="function"?_(u):_:null,C=Uu(m,Re({},S,e,{onVnodeUnmounted:x=>{x.component.isUnmounted&&(d.instances[f]=null)},ref:l}));return Od(n.default,{Component:C,route:u})||C}}});function Od(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const zg=MI;function LI(t){const e=SI(t.routes,t),n=t.parseQuery||uI,r=t.stringifyQuery||Ad,s=t.history,i=Ei(),o=Ei(),c=Ei(),l=Rv(er);let u=er;_s&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=fl.bind(null,L=>""+L),d=fl.bind(null,zw),m=fl.bind(null,Xi);function _(L,J){let Q,ne;return qg(L)?(Q=e.getRecordMatcher(L),ne=J):ne=L,e.addRoute(ne,Q)}function S(L){const J=e.getRecordMatcher(L);J&&e.removeRoute(J)}function N(){return e.getRoutes().map(L=>L.record)}function C(L){return!!e.getRecordMatcher(L)}function x(L,J){if(J=Re({},J||l.value),typeof L=="string"){const P=dl(n,L,J.path),F=e.resolve({path:P.path},J),B=s.createHref(P.fullPath);return Re(P,F,{params:m(F.params),hash:Xi(P.hash),redirectedFrom:void 0,href:B})}let Q;if(L.path!=null)Q=Re({},L,{path:dl(n,L.path,J.path).path});else{const P=Re({},L.params);for(const F in P)P[F]==null&&delete P[F];Q=Re({},L,{params:d(P)}),J.params=d(J.params)}const ne=e.resolve(Q,J),ge=L.hash||"";ne.params=f(m(ne.params));const T=Yw(r,Re({},L,{hash:Hw(ge),path:ne.path})),R=s.createHref(T);return Re({fullPath:T,hash:ge,query:r===Ad?hI(L.query):L.query||{}},ne,{redirectedFrom:void 0,href:R})}function O(L){return typeof L=="string"?dl(n,L,l.value.path):Re({},L)}function H(L,J){if(u!==L)return Os(He.NAVIGATION_CANCELLED,{from:J,to:L})}function W(L){return b(L)}function Z(L){return W(Re(O(L),{replace:!0}))}function te(L,J){const Q=L.matched[L.matched.length-1];if(Q&&Q.redirect){const{redirect:ne}=Q;let ge=typeof ne=="function"?ne(L,J):ne;return typeof ge=="string"&&(ge=ge.includes("?")||ge.includes("#")?ge=O(ge):{path:ge},ge.params={}),Re({query:L.query,hash:L.hash,params:ge.path!=null?{}:L.params},ge)}}function b(L,J){const Q=u=x(L),ne=l.value,ge=L.state,T=L.force,R=L.replace===!0,P=te(Q,ne);if(P)return b(Re(O(P),{state:typeof P=="object"?Re({},ge,P.state):ge,force:T,replace:R}),J||Q);const F=Q;F.redirectedFrom=J;let B;return!T&&Jw(r,ne,Q)&&(B=Os(He.NAVIGATION_DUPLICATED,{to:F,from:ne}),Ot(ne,ne,!0,!1)),(B?Promise.resolve(B):w(F,ne)).catch(M=>kn(M)?kn(M,He.NAVIGATION_GUARD_REDIRECT)?M:un(M):Te(M,F,ne)).then(M=>{if(M){if(kn(M,He.NAVIGATION_GUARD_REDIRECT))return b(Re({replace:R},O(M.to),{state:typeof M.to=="object"?Re({},ge,M.to.state):ge,force:T}),J||F)}else M=I(F,ne,!0,R,ge);return A(F,ne,M),M})}function E(L,J){const Q=H(L,J);return Q?Promise.reject(Q):Promise.resolve()}function y(L){const J=Jt.values().next().value;return J&&typeof J.runWithContext=="function"?J.runWithContext(L):L()}function w(L,J){let Q;const[ne,ge,T]=dI(L,J);Q=ml(ne.reverse(),"beforeRouteLeave",L,J);for(const P of ne)P.leaveGuards.forEach(F=>{Q.push(ir(F,L,J))});const R=E.bind(null,L,J);return Q.push(R),gt(Q).then(()=>{Q=[];for(const P of i.list())Q.push(ir(P,L,J));return Q.push(R),gt(Q)}).then(()=>{Q=ml(ge,"beforeRouteUpdate",L,J);for(const P of ge)P.updateGuards.forEach(F=>{Q.push(ir(F,L,J))});return Q.push(R),gt(Q)}).then(()=>{Q=[];for(const P of T)if(P.beforeEnter)if(cn(P.beforeEnter))for(const F of P.beforeEnter)Q.push(ir(F,L,J));else Q.push(ir(P.beforeEnter,L,J));return Q.push(R),gt(Q)}).then(()=>(L.matched.forEach(P=>P.enterCallbacks={}),Q=ml(T,"beforeRouteEnter",L,J,y),Q.push(R),gt(Q))).then(()=>{Q=[];for(const P of o.list())Q.push(ir(P,L,J));return Q.push(R),gt(Q)}).catch(P=>kn(P,He.NAVIGATION_CANCELLED)?P:Promise.reject(P))}function A(L,J,Q){c.list().forEach(ne=>y(()=>ne(L,J,Q)))}function I(L,J,Q,ne,ge){const T=H(L,J);if(T)return T;const R=J===er,P=_s?history.state:{};Q&&(ne||R?s.replace(L.fullPath,Re({scroll:R&&P&&P.scroll},ge)):s.push(L.fullPath,ge)),l.value=L,Ot(L,J,Q,R),un()}let v;function ve(){v||(v=s.listen((L,J,Q)=>{if(!Xt.listening)return;const ne=x(L),ge=te(ne,Xt.currentRoute.value);if(ge){b(Re(ge,{replace:!0,force:!0}),ne).catch(Li);return}u=ne;const T=l.value;_s&&iI(Id(T.fullPath,Q.delta),hc()),w(ne,T).catch(R=>kn(R,He.NAVIGATION_ABORTED|He.NAVIGATION_CANCELLED)?R:kn(R,He.NAVIGATION_GUARD_REDIRECT)?(b(Re(O(R.to),{force:!0}),ne).then(P=>{kn(P,He.NAVIGATION_ABORTED|He.NAVIGATION_DUPLICATED)&&!Q.delta&&Q.type===Gl.pop&&s.go(-1,!1)}).catch(Li),Promise.reject()):(Q.delta&&s.go(-Q.delta,!1),Te(R,ne,T))).then(R=>{R=R||I(ne,T,!1),R&&(Q.delta&&!kn(R,He.NAVIGATION_CANCELLED)?s.go(-Q.delta,!1):Q.type===Gl.pop&&kn(R,He.NAVIGATION_ABORTED|He.NAVIGATION_DUPLICATED)&&s.go(-1,!1)),A(ne,T,R)}).catch(Li)}))}let je=Ei(),Pe=Ei(),fe;function Te(L,J,Q){un(L);const ne=Pe.list();return ne.length?ne.forEach(ge=>ge(L,J,Q)):console.error(L),Promise.reject(L)}function xt(){return fe&&l.value!==er?Promise.resolve():new Promise((L,J)=>{je.add([L,J])})}function un(L){return fe||(fe=!L,ve(),je.list().forEach(([J,Q])=>L?Q(L):J()),je.reset()),L}function Ot(L,J,Q,ne){const{scrollBehavior:ge}=t;if(!_s||!ge)return Promise.resolve();const T=!Q&&oI(Id(L.fullPath,0))||(ne||!Q)&&history.state&&history.state.scroll||null;return yo().then(()=>ge(L,J,T)).then(R=>R&&sI(R)).catch(R=>Te(R,L,J))}const ct=L=>s.go(L);let Sn;const Jt=new Set,Xt={currentRoute:l,listening:!0,addRoute:_,removeRoute:S,clearRoutes:e.clearRoutes,hasRoute:C,getRoutes:N,resolve:x,options:t,push:W,replace:Z,go:ct,back:()=>ct(-1),forward:()=>ct(1),beforeEach:i.add,beforeResolve:o.add,afterEach:c.add,onError:Pe.add,isReady:xt,install(L){L.component("RouterLink",pn),L.component("RouterView",zg),L.config.globalProperties.$router=Xt,Object.defineProperty(L.config.globalProperties,"$route",{enumerable:!0,get:()=>De(l)}),_s&&!Sn&&l.value===er&&(Sn=!0,W(s.location).catch(ne=>{}));const J={};for(const ne in er)Object.defineProperty(J,ne,{get:()=>l.value[ne],enumerable:!0});L.provide(fc,Xt),L.provide(ju,jm(J)),L.provide(zl,l);const Q=L.unmount;Jt.add(L),L.unmount=function(){Jt.delete(L),Jt.size<1&&(u=er,v&&v(),v=null,l.value=er,Sn=!1,fe=!1),Q()}}};function gt(L){return L.reduce((J,Q)=>J.then(()=>y(Q)),Promise.resolve())}return Xt}function FI(){return Kt(fc)}function UI(t){return Kt(ju)}const BI=()=>{};var Md={};const Kg=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},jI=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],c=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Qg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,c=o?t[s+1]:0,l=s+2<t.length,u=l?t[s+2]:0,f=i>>2,d=(i&3)<<4|c>>4;let m=(c&15)<<2|u>>6,_=u&63;l||(_=64,o||(m=64)),r.push(n[f],n[d],n[m],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Kg(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):jI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||u==null||d==null)throw new qI;const m=i<<2|c>>4;if(r.push(m),u!==64){const _=c<<4&240|u>>2;if(r.push(_),d!==64){const S=u<<6&192|d;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class qI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $I=function(t){const e=Kg(t);return Qg.encodeByteArray(e,!0)},Na=function(t){return $I(t).replace(/\./g,"")},Yg=function(t){try{return Qg.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function HI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const GI=()=>HI().__FIREBASE_DEFAULTS__,WI=()=>{if(typeof process>"u"||typeof Md>"u")return;const t=Md.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},zI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Yg(t[1]);return e&&JSON.parse(e)},dc=()=>{try{return BI()||GI()||WI()||zI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Jg=t=>dc()?.emulatorHosts?.[t],KI=t=>{const e=Jg(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Xg=()=>dc()?.config,Zg=t=>dc()?.[`_${t}`];class QI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function zs(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function e_(t){return(await fetch(t,{credentials:"include"})).ok}function YI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Na(JSON.stringify(n)),Na(JSON.stringify(o)),""].join(".")}const Fi={};function JI(){const t={prod:[],emulator:[]};for(const e of Object.keys(Fi))Fi[e]?t.emulator.push(e):t.prod.push(e);return t}function XI(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Ld=!1;function t_(t,e){if(typeof window>"u"||typeof document>"u"||!zs(window.location.host)||Fi[t]===e||Fi[t]||Ld)return;Fi[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",i=JI().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function c(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function l(m,_){m.setAttribute("width","24"),m.setAttribute("id",_),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{Ld=!0,o()},m}function f(m,_){m.setAttribute("id",_),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function d(){const m=XI(r),_=n("text"),S=document.getElementById(_)||document.createElement("span"),N=n("learnmore"),C=document.getElementById(N)||document.createElement("a"),x=n("preprendIcon"),O=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const H=m.element;c(H),f(C,N);const W=u();l(O,x),H.append(O,S,C,W),document.body.appendChild(H)}i?(S.innerText="Preview backend disconnected.",O.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(O.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}function It(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ZI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(It())}function eA(){const t=dc()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function tA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function nA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function rA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function sA(){const t=It();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function iA(){return!eA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function oA(){try{return typeof indexedDB=="object"}catch{return!1}}function aA(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(n){e(n)}})}const cA="FirebaseError";class Gn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=cA,Object.setPrototypeOf(this,Gn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vo.prototype.create)}}class vo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?lA(i,r):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new Gn(s,c,r)}}function lA(t,e){return t.replace(uA,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const uA=/\{\$([^}]+)}/g;function hA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function es(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Fd(i)&&Fd(o)){if(!es(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Fd(t){return t!==null&&typeof t=="object"}function To(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ti(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function wi(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function fA(t,e){const n=new dA(t,e);return n.subscribe.bind(n)}class dA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");pA(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=gl),s.error===void 0&&(s.error=gl),s.complete===void 0&&(s.complete=gl);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pA(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function gl(){}function Qe(t){return t&&t._delegate?t._delegate:t}class ts{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Gr="[DEFAULT]";class mA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new QI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_A(e))try{this.getOrInitializeService({instanceIdentifier:Gr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Gr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Gr){return this.instances.has(e)}getOptions(e=Gr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:gA(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Gr){return this.component?this.component.multipleInstances?e:Gr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function gA(t){return t===Gr?void 0:t}function _A(t){return t.instantiationMode==="EAGER"}class yA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new mA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var _e;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(_e||(_e={}));const EA={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},vA=_e.INFO,TA={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},wA=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=TA[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qu{constructor(e){this.name=e,this._logLevel=vA,this._logHandler=wA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?EA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...e),this._logHandler(this,_e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...e),this._logHandler(this,_e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...e),this._logHandler(this,_e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...e),this._logHandler(this,_e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...e),this._logHandler(this,_e.ERROR,...e)}}const IA=(t,e)=>e.some(n=>t instanceof n);let Ud,Bd;function AA(){return Ud||(Ud=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bA(){return Bd||(Bd=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const n_=new WeakMap,Kl=new WeakMap,r_=new WeakMap,_l=new WeakMap,$u=new WeakMap;function RA(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(dr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&n_.set(n,t)}).catch(()=>{}),$u.set(e,t),e}function SA(t){if(Kl.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Kl.set(t,e)}let Ql={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Kl.get(t);if(e==="objectStoreNames")return t.objectStoreNames||r_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return dr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function PA(t){Ql=t(Ql)}function CA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(yl(this),e,...n);return r_.set(r,e.sort?e.sort():[e]),dr(r)}:bA().includes(t)?function(...e){return t.apply(yl(this),e),dr(n_.get(this))}:function(...e){return dr(t.apply(yl(this),e))}}function kA(t){return typeof t=="function"?CA(t):(t instanceof IDBTransaction&&SA(t),IA(t,AA())?new Proxy(t,Ql):t)}function dr(t){if(t instanceof IDBRequest)return RA(t);if(_l.has(t))return _l.get(t);const e=kA(t);return e!==t&&(_l.set(t,e),$u.set(e,t)),e}const yl=t=>$u.get(t);function NA(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),c=dr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(dr(o.result),l.oldVersion,l.newVersion,dr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),c.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),c}const xA=["get","getKey","getAll","getAllKeys","count"],VA=["put","add","delete","clear"],El=new Map;function jd(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(El.get(e))return El.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=VA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||xA.includes(n)))return;const i=async function(o,...c){const l=this.transaction(o,s?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(c.shift())),(await Promise.all([u[n](...c),s&&l.done]))[0]};return El.set(e,i),i}PA(t=>({...t,get:(e,n,r)=>jd(e,n)||t.get(e,n,r),has:(e,n)=>!!jd(e,n)||t.has(e,n)}));class DA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(OA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function OA(t){return t.getComponent()?.type==="VERSION"}const Yl="@firebase/app",qd="0.14.5";const Bn=new qu("@firebase/app"),MA="@firebase/app-compat",LA="@firebase/analytics-compat",FA="@firebase/analytics",UA="@firebase/app-check-compat",BA="@firebase/app-check",jA="@firebase/auth",qA="@firebase/auth-compat",$A="@firebase/database",HA="@firebase/data-connect",GA="@firebase/database-compat",WA="@firebase/functions",zA="@firebase/functions-compat",KA="@firebase/installations",QA="@firebase/installations-compat",YA="@firebase/messaging",JA="@firebase/messaging-compat",XA="@firebase/performance",ZA="@firebase/performance-compat",eb="@firebase/remote-config",tb="@firebase/remote-config-compat",nb="@firebase/storage",rb="@firebase/storage-compat",sb="@firebase/firestore",ib="@firebase/ai",ob="@firebase/firestore-compat",ab="firebase",cb="12.5.0";const Jl="[DEFAULT]",lb={[Yl]:"fire-core",[MA]:"fire-core-compat",[FA]:"fire-analytics",[LA]:"fire-analytics-compat",[BA]:"fire-app-check",[UA]:"fire-app-check-compat",[jA]:"fire-auth",[qA]:"fire-auth-compat",[$A]:"fire-rtdb",[HA]:"fire-data-connect",[GA]:"fire-rtdb-compat",[WA]:"fire-fn",[zA]:"fire-fn-compat",[KA]:"fire-iid",[QA]:"fire-iid-compat",[YA]:"fire-fcm",[JA]:"fire-fcm-compat",[XA]:"fire-perf",[ZA]:"fire-perf-compat",[eb]:"fire-rc",[tb]:"fire-rc-compat",[nb]:"fire-gcs",[rb]:"fire-gcs-compat",[sb]:"fire-fst",[ob]:"fire-fst-compat",[ib]:"fire-vertex","fire-js":"fire-js",[ab]:"fire-js-all"};const xa=new Map,ub=new Map,Xl=new Map;function $d(t,e){try{t.container.addComponent(e)}catch(n){Bn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ms(t){const e=t.name;if(Xl.has(e))return Bn.debug(`There were multiple attempts to register component ${e}.`),!1;Xl.set(e,t);for(const n of xa.values())$d(n,t);for(const n of ub.values())$d(n,t);return!0}function Hu(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Gt(t){return t==null?!1:t.settings!==void 0}const hb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},pr=new vo("app","Firebase",hb);class fb{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ts("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw pr.create("app-deleted",{appName:this._name})}}const Ks=cb;function s_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Jl,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw pr.create("bad-app-name",{appName:String(s)});if(n||(n=Xg()),!n)throw pr.create("no-options");const i=xa.get(s);if(i){if(es(n,i.options)&&es(r,i.config))return i;throw pr.create("duplicate-app",{appName:s})}const o=new yA(s);for(const l of Xl.values())o.addComponent(l);const c=new fb(n,r,o);return xa.set(s,c),c}function i_(t=Jl){const e=xa.get(t);if(!e&&t===Jl&&Xg())return s_();if(!e)throw pr.create("no-app",{appName:t});return e}function mr(t,e,n){let r=lb[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Bn.warn(o.join(" "));return}Ms(new ts(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const db="firebase-heartbeat-database",pb=1,Zi="firebase-heartbeat-store";let vl=null;function o_(){return vl||(vl=NA(db,pb,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Zi)}catch(n){console.warn(n)}}}}).catch(t=>{throw pr.create("idb-open",{originalErrorMessage:t.message})})),vl}async function mb(t){try{const n=(await o_()).transaction(Zi),r=await n.objectStore(Zi).get(a_(t));return await n.done,r}catch(e){if(e instanceof Gn)Bn.warn(e.message);else{const n=pr.create("idb-get",{originalErrorMessage:e?.message});Bn.warn(n.message)}}}async function Hd(t,e){try{const r=(await o_()).transaction(Zi,"readwrite");await r.objectStore(Zi).put(e,a_(t)),await r.done}catch(n){if(n instanceof Gn)Bn.warn(n.message);else{const r=pr.create("idb-set",{originalErrorMessage:n?.message});Bn.warn(r.message)}}}function a_(t){return`${t.name}!${t.options.appId}`}const gb=1024,_b=30;class yb{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new vb(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Gd();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>_b){const s=Tb(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Bn.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Gd(),{heartbeatsToSend:n,unsentEntries:r}=Eb(this._heartbeatsCache.heartbeats),s=Na(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return Bn.warn(e),""}}}function Gd(){return new Date().toISOString().substring(0,10)}function Eb(t,e=gb){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Wd(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Wd(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class vb{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return oA()?aA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await mb(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Hd(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Hd(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Wd(t){return Na(JSON.stringify({version:2,heartbeats:t})).length}function Tb(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function wb(t){Ms(new ts("platform-logger",e=>new DA(e),"PRIVATE")),Ms(new ts("heartbeat",e=>new yb(e),"PRIVATE")),mr(Yl,qd,t),mr(Yl,qd,"esm2020"),mr("fire-js","")}wb("");function c_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Ib=c_,l_=new vo("auth","Firebase",c_());const Va=new qu("@firebase/auth");function Ab(t,...e){Va.logLevel<=_e.WARN&&Va.warn(`Auth (${Ks}): ${t}`,...e)}function ca(t,...e){Va.logLevel<=_e.ERROR&&Va.error(`Auth (${Ks}): ${t}`,...e)}function Qt(t,...e){throw Wu(t,...e)}function sn(t,...e){return Wu(t,...e)}function Gu(t,e,n){const r={...Ib(),[e]:n};return new vo("auth","Firebase",r).create(e,{appName:t.name})}function gr(t){return Gu(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function bb(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Qt(t,"argument-error"),Gu(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Wu(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return l_.create(t,...e)}function ue(t,e,...n){if(!t)throw Wu(e,...n)}function Mn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ca(e),new Error(e)}function jn(t,e){t||Mn(e)}function Zl(){return typeof self<"u"&&self.location?.href||""}function Rb(){return zd()==="http:"||zd()==="https:"}function zd(){return typeof self<"u"&&self.location?.protocol||null}function Sb(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Rb()||nA()||"connection"in navigator)?navigator.onLine:!0}function Pb(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class wo{constructor(e,n){this.shortDelay=e,this.longDelay=n,jn(n>e,"Short delay should be less than long delay!"),this.isMobile=ZI()||rA()}get(){return Sb()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function zu(t,e){jn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class u_{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Mn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Mn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Mn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Cb={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const kb=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Nb=new wo(3e4,6e4);function is(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function kr(t,e,n,r,s={}){return h_(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const c=To({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...i};return tA()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&zs(t.emulatorConfig.host)&&(u.credentials="include"),u_.fetch()(await f_(t,t.config.apiHost,n,c),u)})}async function h_(t,e,n){t._canInitEmulator=!1;const r={...Cb,...e};try{const s=new Vb(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Qo(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const c=i.ok?o.errorMessage:o.error.message,[l,u]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Qo(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Qo(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Qo(t,"user-disabled",o);const f=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Gu(t,f,u);Qt(t,f)}}catch(s){if(s instanceof Gn)throw s;Qt(t,"network-request-failed",{message:String(s)})}}async function pc(t,e,n,r,s={}){const i=await kr(t,e,n,r,s);return"mfaPendingCredential"in i&&Qt(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function f_(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?zu(t.config,s):`${t.config.apiScheme}://${s}`;return kb.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function xb(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Vb{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(sn(this.auth,"network-request-failed")),Nb.get())})}}function Qo(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=sn(t,e,r);return s.customData._tokenResponse=n,s}function Kd(t){return t!==void 0&&t.enterprise!==void 0}class Db{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return xb(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Ob(t,e){return kr(t,"GET","/v2/recaptchaConfig",is(t,e))}async function Mb(t,e){return kr(t,"POST","/v1/accounts:delete",e)}async function Da(t,e){return kr(t,"POST","/v1/accounts:lookup",e)}function Ui(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Lb(t,e=!1){const n=Qe(t),r=await n.getIdToken(e),s=Ku(r);ue(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i?.sign_in_provider;return{claims:s,token:r,authTime:Ui(Tl(s.auth_time)),issuedAtTime:Ui(Tl(s.iat)),expirationTime:Ui(Tl(s.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function Tl(t){return Number(t)*1e3}function Ku(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ca("JWT malformed, contained fewer than 3 sections"),null;try{const s=Yg(n);return s?JSON.parse(s):(ca("Failed to decode base64 JWT payload"),null)}catch(s){return ca("Caught error parsing JWT payload as JSON",s?.toString()),null}}function Qd(t){const e=Ku(t);return ue(e,"internal-error"),ue(typeof e.exp<"u","internal-error"),ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function eo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Gn&&Fb(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Fb({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class Ub{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class eu{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ui(this.lastLoginAt),this.creationTime=Ui(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Oa(t){const e=t.auth,n=await t.getIdToken(),r=await eo(t,Da(e,{idToken:n}));ue(r?.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=s.providerUserInfo?.length?d_(s.providerUserInfo):[],o=jb(t.providerData,i),c=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!o?.length,u=c?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new eu(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,f)}async function Bb(t){const e=Qe(t);await Oa(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function jb(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function d_(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function qb(t,e){const n=await h_(t,{},async()=>{const r=To({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await f_(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:c,body:r};return t.emulatorConfig&&zs(t.emulatorConfig.host)&&(l.credentials="include"),u_.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function $b(t,e){return kr(t,"POST","/v2/accounts:revokeToken",is(t,e))}class Ss{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ue(e.idToken,"internal-error"),ue(typeof e.idToken<"u","internal-error"),ue(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Qd(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ue(e.length!==0,"internal-error");const n=Qd(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await qb(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Ss;return r&&(ue(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ue(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ue(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ss,this.toJSON())}_performRefresh(){return Mn("not implemented")}}function tr(t,e){ue(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class nn{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new Ub(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new eu(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await eo(this,this.stsTokenManager.getToken(this.auth,e));return ue(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Lb(this,e)}reload(){return Bb(this)}_assign(e){this!==e&&(ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new nn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Oa(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Gt(this.auth.app))return Promise.reject(gr(this.auth));const e=await this.getIdToken();return await eo(this,Mb(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,c=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:d,emailVerified:m,isAnonymous:_,providerData:S,stsTokenManager:N}=n;ue(d&&N,e,"internal-error");const C=Ss.fromJSON(this.name,N);ue(typeof d=="string",e,"internal-error"),tr(r,e.name),tr(s,e.name),ue(typeof m=="boolean",e,"internal-error"),ue(typeof _=="boolean",e,"internal-error"),tr(i,e.name),tr(o,e.name),tr(c,e.name),tr(l,e.name),tr(u,e.name),tr(f,e.name);const x=new nn({uid:d,auth:e,email:s,emailVerified:m,displayName:r,isAnonymous:_,photoURL:o,phoneNumber:i,tenantId:c,stsTokenManager:C,createdAt:u,lastLoginAt:f});return S&&Array.isArray(S)&&(x.providerData=S.map(O=>({...O}))),l&&(x._redirectEventId=l),x}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ss;s.updateFromServerResponse(n);const i=new nn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Oa(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ue(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?d_(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!i?.length,c=new Ss;c.updateFromIdToken(r);const l=new nn({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new eu(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!i?.length};return Object.assign(l,u),l}}const Yd=new Map;function Ln(t){jn(t instanceof Function,"Expected a class definition");let e=Yd.get(t);return e?(jn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Yd.set(t,e),e)}class p_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}p_.type="NONE";const Jd=p_;function la(t,e,n){return`firebase:${t}:${e}:${n}`}class Ps{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=la(this.userKey,s.apiKey,i),this.fullPersistenceKey=la("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Da(this.auth,{idToken:e}).catch(()=>{});return n?nn._fromGetAccountInfoResponse(this.auth,n,e):null}return nn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ps(Ln(Jd),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||Ln(Jd);const o=la(r,e.config.apiKey,e.name);let c=null;for(const u of n)try{const f=await u._get(o);if(f){let d;if(typeof f=="string"){const m=await Da(e,{idToken:f}).catch(()=>{});if(!m)break;d=await nn._fromGetAccountInfoResponse(e,m,f)}else d=nn._fromJSON(e,f);u!==i&&(c=d),i=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Ps(i,e,r):(i=l[0],c&&await i._set(o,c.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Ps(i,e,r))}}function Xd(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(y_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(m_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(v_(e))return"Blackberry";if(T_(e))return"Webos";if(g_(e))return"Safari";if((e.includes("chrome/")||__(e))&&!e.includes("edge/"))return"Chrome";if(E_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function m_(t=It()){return/firefox\//i.test(t)}function g_(t=It()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function __(t=It()){return/crios\//i.test(t)}function y_(t=It()){return/iemobile/i.test(t)}function E_(t=It()){return/android/i.test(t)}function v_(t=It()){return/blackberry/i.test(t)}function T_(t=It()){return/webos/i.test(t)}function Qu(t=It()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Hb(t=It()){return Qu(t)&&!!window.navigator?.standalone}function Gb(){return sA()&&document.documentMode===10}function w_(t=It()){return Qu(t)||E_(t)||T_(t)||v_(t)||/windows phone/i.test(t)||y_(t)}function I_(t,e=[]){let n;switch(t){case"Browser":n=Xd(It());break;case"Worker":n=`${Xd(It())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ks}/${r}`}class Wb{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,c)=>{try{const l=e(i);o(l)}catch(l){c(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function zb(t,e={}){return kr(t,"GET","/v2/passwordPolicy",is(t,e))}const Kb=6;class Qb{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Kb,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Yb{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Zd(this),this.idTokenSubscription=new Zd(this),this.beforeStateQueue=new Wb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=l_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ln(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ps.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Da(this,{idToken:e}),r=await nn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Gt(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=r?._redirectEventId,c=await this.tryRedirectSignIn(e);(!i||i===o)&&c?.user&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(i){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Oa(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Pb()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Gt(this.app))return Promise.reject(gr(this));const n=e?Qe(e):null;return n&&ue(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Gt(this.app)?Promise.reject(gr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Gt(this.app)?Promise.reject(gr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ln(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await zb(this),n=new Qb(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new vo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await $b(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ln(e)||this._popupRedirectResolver;ue(n,this,"argument-error"),this.redirectPersistenceManager=await Ps.create(this,[Ln(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ue(c,this,"internal-error"),c.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=I_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Gt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Ab(`Error while retrieving App Check token: ${e.error}`),e?.token}}function os(t){return Qe(t)}class Zd{constructor(e){this.auth=e,this.observer=null,this.addObserver=fA(n=>this.observer=n)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let mc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Jb(t){mc=t}function A_(t){return mc.loadJS(t)}function Xb(){return mc.recaptchaEnterpriseScript}function Zb(){return mc.gapiScript}function eR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class tR{constructor(){this.enterprise=new nR}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class nR{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const rR="recaptcha-enterprise",b_="NO_RECAPTCHA";class sR{constructor(e){this.type=rR,this.auth=os(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,c)=>{Ob(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const u=new Db(l);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(l=>{c(l)})})}function s(i,o,c){const l=window.grecaptcha;Kd(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(b_)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new tR().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(c=>{if(!n&&Kd(window.grecaptcha))s(c,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=Xb();l.length!==0&&(l+=c),A_(l).then(()=>{s(c,i,o)}).catch(u=>{o(u)})}}).catch(c=>{o(c)})})}}async function ep(t,e,n,r=!1,s=!1){const i=new sR(t);let o;if(s)o=b_;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const c={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const l=c.phoneEnrollmentInfo.phoneNumber,u=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const l=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function tp(t,e,n,r,s){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await ep(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await ep(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}function iR(t,e){const n=Hu(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(es(i,e??{}))return s;Qt(s,"already-initialized")}return n.initialize({options:e})}function oR(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Ln);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function aR(t,e,n){const r=os(t);ue(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=R_(e),{host:o,port:c}=cR(e),l=c===null?"":`:${c}`,u={url:`${i}//${o}${l}/`},f=Object.freeze({host:o,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ue(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ue(es(u,r.config.emulator)&&es(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,zs(o)?(e_(`${i}//${o}${l}`),t_("Auth",!0)):lR()}function R_(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function cR(t){const e=R_(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:np(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:np(o)}}}function np(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function lR(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class Yu{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Mn("not implemented")}_getIdTokenResponse(e){return Mn("not implemented")}_linkToIdToken(e,n){return Mn("not implemented")}_getReauthenticationResolver(e){return Mn("not implemented")}}async function uR(t,e){return kr(t,"POST","/v1/accounts:signUp",e)}async function hR(t,e){return pc(t,"POST","/v1/accounts:signInWithPassword",is(t,e))}async function fR(t,e){return pc(t,"POST","/v1/accounts:signInWithEmailLink",is(t,e))}async function dR(t,e){return pc(t,"POST","/v1/accounts:signInWithEmailLink",is(t,e))}class to extends Yu{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new to(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new to(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return tp(e,n,"signInWithPassword",hR);case"emailLink":return fR(e,{email:this._email,oobCode:this._password});default:Qt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return tp(e,r,"signUpPassword",uR);case"emailLink":return dR(e,{idToken:n,email:this._email,oobCode:this._password});default:Qt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Cs(t,e){return pc(t,"POST","/v1/accounts:signInWithIdp",is(t,e))}const pR="http://localhost";class ns extends Yu{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ns(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Qt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new ns(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Cs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Cs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Cs(e,n)}buildRequest(){const e={requestUri:pR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=To(n)}return e}}function mR(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function gR(t){const e=Ti(wi(t)).link,n=e?Ti(wi(e)).deep_link_id:null,r=Ti(wi(t)).deep_link_id;return(r?Ti(wi(r)).link:null)||r||n||e||t}class Ju{constructor(e){const n=Ti(wi(e)),r=n.apiKey??null,s=n.oobCode??null,i=mR(n.mode??null);ue(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=gR(e);try{return new Ju(n)}catch{return null}}}class Qs{constructor(){this.providerId=Qs.PROVIDER_ID}static credential(e,n){return to._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Ju.parseLink(n);return ue(r,"argument-error"),to._fromEmailAndCode(e,r.code,r.tenantId)}}Qs.PROVIDER_ID="password";Qs.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Qs.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Xu{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Io extends Xu{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class or extends Io{constructor(){super("facebook.com")}static credential(e){return ns._fromParams({providerId:or.PROVIDER_ID,signInMethod:or.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return or.credentialFromTaggedObject(e)}static credentialFromError(e){return or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return or.credential(e.oauthAccessToken)}catch{return null}}}or.FACEBOOK_SIGN_IN_METHOD="facebook.com";or.PROVIDER_ID="facebook.com";class On extends Io{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ns._fromParams({providerId:On.PROVIDER_ID,signInMethod:On.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return On.credentialFromTaggedObject(e)}static credentialFromError(e){return On.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return On.credential(n,r)}catch{return null}}}On.GOOGLE_SIGN_IN_METHOD="google.com";On.PROVIDER_ID="google.com";class ar extends Io{constructor(){super("github.com")}static credential(e){return ns._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ar.credentialFromTaggedObject(e)}static credentialFromError(e){return ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ar.credential(e.oauthAccessToken)}catch{return null}}}ar.GITHUB_SIGN_IN_METHOD="github.com";ar.PROVIDER_ID="github.com";class cr extends Io{constructor(){super("twitter.com")}static credential(e,n){return ns._fromParams({providerId:cr.PROVIDER_ID,signInMethod:cr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return cr.credentialFromTaggedObject(e)}static credentialFromError(e){return cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return cr.credential(n,r)}catch{return null}}}cr.TWITTER_SIGN_IN_METHOD="twitter.com";cr.PROVIDER_ID="twitter.com";class Ls{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await nn._fromIdTokenResponse(e,r,s),o=rp(r);return new Ls({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=rp(r);return new Ls({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function rp(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Ma extends Gn{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Ma.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Ma(e,n,r,s)}}function S_(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Ma._fromErrorAndOperation(t,i,e,r):i})}async function _R(t,e,n=!1){const r=await eo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ls._forOperation(t,"link",r)}async function yR(t,e,n=!1){const{auth:r}=t;if(Gt(r.app))return Promise.reject(gr(r));const s="reauthenticate";try{const i=await eo(t,S_(r,s,e,t),n);ue(i.idToken,r,"internal-error");const o=Ku(i.idToken);ue(o,r,"internal-error");const{sub:c}=o;return ue(t.uid===c,r,"user-mismatch"),Ls._forOperation(t,s,i)}catch(i){throw i?.code==="auth/user-not-found"&&Qt(r,"user-mismatch"),i}}async function P_(t,e,n=!1){if(Gt(t.app))return Promise.reject(gr(t));const r="signIn",s=await S_(t,r,e),i=await Ls._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function ER(t,e){return P_(os(t),e)}async function vR(t){const e=os(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function TR(t,e,n){return Gt(t.app)?Promise.reject(gr(t)):ER(Qe(t),Qs.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&vR(t),r})}function wR(t,e,n,r){return Qe(t).onIdTokenChanged(e,n,r)}function IR(t,e,n){return Qe(t).beforeAuthStateChanged(e,n)}function AR(t,e,n,r){return Qe(t).onAuthStateChanged(e,n,r)}function bR(t){return Qe(t).signOut()}const La="__sak";class C_{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(La,"1"),this.storage.removeItem(La),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const RR=1e3,SR=10;class k_ extends C_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=w_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);Gb()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,SR):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},RR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}k_.type="LOCAL";const PR=k_;class N_ extends C_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}N_.type="SESSION";const x_=N_;function CR(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class gc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new gc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(o).map(async u=>u(n.origin,i)),l=await CR(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}gc.receivers=[];function Zu(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class kR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((c,l)=>{const u=Zu("",20);s.port1.start();const f=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(d){const m=d;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(m.data.response);break;default:clearTimeout(f),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function En(){return window}function NR(t){En().location.href=t}function V_(){return typeof En().WorkerGlobalScope<"u"&&typeof En().importScripts=="function"}async function xR(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function VR(){return navigator?.serviceWorker?.controller||null}function DR(){return V_()?self:null}const D_="firebaseLocalStorageDb",OR=1,Fa="firebaseLocalStorage",O_="fbase_key";class Ao{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function _c(t,e){return t.transaction([Fa],e?"readwrite":"readonly").objectStore(Fa)}function MR(){const t=indexedDB.deleteDatabase(D_);return new Ao(t).toPromise()}function tu(){const t=indexedDB.open(D_,OR);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Fa,{keyPath:O_})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Fa)?e(r):(r.close(),await MR(),e(await tu()))})})}async function sp(t,e,n){const r=_c(t,!0).put({[O_]:e,value:n});return new Ao(r).toPromise()}async function LR(t,e){const n=_c(t,!1).get(e),r=await new Ao(n).toPromise();return r===void 0?null:r.value}function ip(t,e){const n=_c(t,!0).delete(e);return new Ao(n).toPromise()}const FR=800,UR=3;class M_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await tu(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>UR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return V_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=gc._getInstance(DR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await xR(),!this.activeServiceWorker)return;this.sender=new kR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||VR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await tu();return await sp(e,La,"1"),await ip(e,La),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>sp(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>LR(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>ip(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=_c(s,!1).getAll();return new Ao(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),FR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}M_.type="LOCAL";const BR=M_;new wo(3e4,6e4);function L_(t,e){return e?Ln(e):(ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class eh extends Yu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Cs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Cs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Cs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function jR(t){return P_(t.auth,new eh(t),t.bypassAuthState)}function qR(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),yR(n,new eh(t),t.bypassAuthState)}async function $R(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),_R(n,new eh(t),t.bypassAuthState)}class F_{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:c}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return jR;case"linkViaPopup":case"linkViaRedirect":return $R;case"reauthViaPopup":case"reauthViaRedirect":return qR;default:Qt(this.auth,"internal-error")}}resolve(e){jn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){jn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const HR=new wo(2e3,1e4);async function GR(t,e,n){if(Gt(t.app))return Promise.reject(sn(t,"operation-not-supported-in-this-environment"));const r=os(t);bb(t,e,Xu);const s=L_(r,n);return new Qr(r,"signInViaPopup",e,s).executeNotNull()}class Qr extends F_{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Qr.currentPopupAction&&Qr.currentPopupAction.cancel(),Qr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ue(e,this.auth,"internal-error"),e}async onExecution(){jn(this.filter.length===1,"Popup operations only handle one event");const e=Zu();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(sn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(sn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Qr.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(sn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,HR.get())};e()}}Qr.currentPopupAction=null;const WR="pendingRedirect",ua=new Map;class zR extends F_{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ua.get(this.auth._key());if(!e){try{const r=await KR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ua.set(this.auth._key(),e)}return this.bypassAuthState||ua.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function KR(t,e){const n=JR(e),r=YR(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function QR(t,e){ua.set(t._key(),e)}function YR(t){return Ln(t._redirectPersistence)}function JR(t){return la(WR,t.config.apiKey,t.name)}async function XR(t,e,n=!1){if(Gt(t.app))return Promise.reject(gr(t));const r=os(t),s=L_(r,e),o=await new zR(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}const ZR=600*1e3;class e0{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!t0(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!U_(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(sn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ZR&&this.cachedEventUids.clear(),this.cachedEventUids.has(op(e))}saveEventToCache(e){this.cachedEventUids.add(op(e)),this.lastProcessedEventTime=Date.now()}}function op(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function U_({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function t0(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return U_(t);default:return!1}}async function n0(t,e={}){return kr(t,"GET","/v1/projects",e)}const r0=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,s0=/^https?/;async function i0(t){if(t.config.emulator)return;const{authorizedDomains:e}=await n0(t);for(const n of e)try{if(o0(n))return}catch{}Qt(t,"unauthorized-domain")}function o0(t){const e=Zl(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!s0.test(n))return!1;if(r0.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const a0=new wo(3e4,6e4);function ap(){const t=En().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function c0(t){return new Promise((e,n)=>{function r(){ap(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ap(),n(sn(t,"network-request-failed"))},timeout:a0.get()})}if(En().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(En().gapi?.load)r();else{const s=eR("iframefcb");return En()[s]=()=>{gapi.load?r():n(sn(t,"network-request-failed"))},A_(`${Zb()}?onload=${s}`).catch(i=>n(i))}}).catch(e=>{throw ha=null,e})}let ha=null;function l0(t){return ha=ha||c0(t),ha}const u0=new wo(5e3,15e3),h0="__/auth/iframe",f0="emulator/auth/iframe",d0={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},p0=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function m0(t){const e=t.config;ue(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?zu(e,f0):`https://${t.config.authDomain}/${h0}`,r={apiKey:e.apiKey,appName:t.name,v:Ks},s=p0.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${To(r).slice(1)}`}async function g0(t){const e=await l0(t),n=En().gapi;return ue(n,t,"internal-error"),e.open({where:document.body,url:m0(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:d0,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=sn(t,"network-request-failed"),c=En().setTimeout(()=>{i(o)},u0.get());function l(){En().clearTimeout(c),s(r)}r.ping(l).then(l,()=>{i(o)})}))}const _0={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},y0=500,E0=600,v0="_blank",T0="http://localhost";class cp{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function w0(t,e,n,r=y0,s=E0){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const l={..._0,width:r.toString(),height:s.toString(),top:i,left:o},u=It().toLowerCase();n&&(c=__(u)?v0:n),m_(u)&&(e=e||T0,l.scrollbars="yes");const f=Object.entries(l).reduce((m,[_,S])=>`${m}${_}=${S},`,"");if(Hb(u)&&c!=="_self")return I0(e||"",c),new cp(null);const d=window.open(e||"",c,f);ue(d,t,"popup-blocked");try{d.focus()}catch{}return new cp(d)}function I0(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const A0="__/auth/handler",b0="emulator/auth/handler",R0=encodeURIComponent("fac");async function lp(t,e,n,r,s,i){ue(t.config.authDomain,t,"auth-domain-config-required"),ue(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ks,eventId:s};if(e instanceof Xu){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",hA(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,d]of Object.entries({}))o[f]=d}if(e instanceof Io){const f=e.getScopes().filter(d=>d!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const l=await t._getAppCheckToken(),u=l?`#${R0}=${encodeURIComponent(l)}`:"";return`${S0(t)}?${To(c).slice(1)}${u}`}function S0({config:t}){return t.emulator?zu(t,b0):`https://${t.authDomain}/${A0}`}const wl="webStorageSupport";class P0{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=x_,this._completeRedirectFn=XR,this._overrideRedirectResult=QR}async _openPopup(e,n,r,s){jn(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await lp(e,n,r,Zl(),s);return w0(e,i,Zu())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await lp(e,n,r,Zl(),s);return NR(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(jn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await g0(e),r=new e0(e);return n.register("authEvent",s=>(ue(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(wl,{type:wl},s=>{const i=s?.[0]?.[wl];i!==void 0&&n(!!i),Qt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=i0(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return w_()||g_()||Qu()}}const C0=P0;var up="@firebase/auth",hp="1.11.1";class k0{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function N0(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function x0(t){Ms(new ts("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;ue(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:I_(t)},u=new Yb(r,s,i,l);return oR(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ms(new ts("auth-internal",e=>{const n=os(e.getProvider("auth").getImmediate());return(r=>new k0(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),mr(up,hp,N0(t)),mr(up,hp,"esm2020")}const V0=300,D0=Zg("authIdTokenMaxAge")||V0;let fp=null;const O0=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>D0)return;const s=n?.token;fp!==s&&(fp=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function M0(t=i_()){const e=Hu(t,"auth");if(e.isInitialized())return e.getImmediate();const n=iR(t,{popupRedirectResolver:C0,persistence:[BR,PR,x_]}),r=Zg("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=O0(i.toString());IR(n,o,()=>o(n.currentUser)),wR(n,c=>o(c))}}const s=Jg("auth");return s&&aR(n,`http://${s}`),n}function L0(){return document.getElementsByTagName("head")?.[0]??document}Jb({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=sn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",L0().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});x0("Browser");var F0="firebase",U0="12.5.0";mr(F0,U0,"app");var dp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var _r,B_;(function(){var t;function e(b,E){function y(){}y.prototype=E.prototype,b.F=E.prototype,b.prototype=new y,b.prototype.constructor=b,b.D=function(w,A,I){for(var v=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)v[ve-2]=arguments[ve];return E.prototype[A].apply(w,v)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(b,E,y){y||(y=0);const w=Array(16);if(typeof E=="string")for(var A=0;A<16;++A)w[A]=E.charCodeAt(y++)|E.charCodeAt(y++)<<8|E.charCodeAt(y++)<<16|E.charCodeAt(y++)<<24;else for(A=0;A<16;++A)w[A]=E[y++]|E[y++]<<8|E[y++]<<16|E[y++]<<24;E=b.g[0],y=b.g[1],A=b.g[2];let I=b.g[3],v;v=E+(I^y&(A^I))+w[0]+3614090360&4294967295,E=y+(v<<7&4294967295|v>>>25),v=I+(A^E&(y^A))+w[1]+3905402710&4294967295,I=E+(v<<12&4294967295|v>>>20),v=A+(y^I&(E^y))+w[2]+606105819&4294967295,A=I+(v<<17&4294967295|v>>>15),v=y+(E^A&(I^E))+w[3]+3250441966&4294967295,y=A+(v<<22&4294967295|v>>>10),v=E+(I^y&(A^I))+w[4]+4118548399&4294967295,E=y+(v<<7&4294967295|v>>>25),v=I+(A^E&(y^A))+w[5]+1200080426&4294967295,I=E+(v<<12&4294967295|v>>>20),v=A+(y^I&(E^y))+w[6]+2821735955&4294967295,A=I+(v<<17&4294967295|v>>>15),v=y+(E^A&(I^E))+w[7]+4249261313&4294967295,y=A+(v<<22&4294967295|v>>>10),v=E+(I^y&(A^I))+w[8]+1770035416&4294967295,E=y+(v<<7&4294967295|v>>>25),v=I+(A^E&(y^A))+w[9]+2336552879&4294967295,I=E+(v<<12&4294967295|v>>>20),v=A+(y^I&(E^y))+w[10]+4294925233&4294967295,A=I+(v<<17&4294967295|v>>>15),v=y+(E^A&(I^E))+w[11]+2304563134&4294967295,y=A+(v<<22&4294967295|v>>>10),v=E+(I^y&(A^I))+w[12]+1804603682&4294967295,E=y+(v<<7&4294967295|v>>>25),v=I+(A^E&(y^A))+w[13]+4254626195&4294967295,I=E+(v<<12&4294967295|v>>>20),v=A+(y^I&(E^y))+w[14]+2792965006&4294967295,A=I+(v<<17&4294967295|v>>>15),v=y+(E^A&(I^E))+w[15]+1236535329&4294967295,y=A+(v<<22&4294967295|v>>>10),v=E+(A^I&(y^A))+w[1]+4129170786&4294967295,E=y+(v<<5&4294967295|v>>>27),v=I+(y^A&(E^y))+w[6]+3225465664&4294967295,I=E+(v<<9&4294967295|v>>>23),v=A+(E^y&(I^E))+w[11]+643717713&4294967295,A=I+(v<<14&4294967295|v>>>18),v=y+(I^E&(A^I))+w[0]+3921069994&4294967295,y=A+(v<<20&4294967295|v>>>12),v=E+(A^I&(y^A))+w[5]+3593408605&4294967295,E=y+(v<<5&4294967295|v>>>27),v=I+(y^A&(E^y))+w[10]+38016083&4294967295,I=E+(v<<9&4294967295|v>>>23),v=A+(E^y&(I^E))+w[15]+3634488961&4294967295,A=I+(v<<14&4294967295|v>>>18),v=y+(I^E&(A^I))+w[4]+3889429448&4294967295,y=A+(v<<20&4294967295|v>>>12),v=E+(A^I&(y^A))+w[9]+568446438&4294967295,E=y+(v<<5&4294967295|v>>>27),v=I+(y^A&(E^y))+w[14]+3275163606&4294967295,I=E+(v<<9&4294967295|v>>>23),v=A+(E^y&(I^E))+w[3]+4107603335&4294967295,A=I+(v<<14&4294967295|v>>>18),v=y+(I^E&(A^I))+w[8]+1163531501&4294967295,y=A+(v<<20&4294967295|v>>>12),v=E+(A^I&(y^A))+w[13]+2850285829&4294967295,E=y+(v<<5&4294967295|v>>>27),v=I+(y^A&(E^y))+w[2]+4243563512&4294967295,I=E+(v<<9&4294967295|v>>>23),v=A+(E^y&(I^E))+w[7]+1735328473&4294967295,A=I+(v<<14&4294967295|v>>>18),v=y+(I^E&(A^I))+w[12]+2368359562&4294967295,y=A+(v<<20&4294967295|v>>>12),v=E+(y^A^I)+w[5]+4294588738&4294967295,E=y+(v<<4&4294967295|v>>>28),v=I+(E^y^A)+w[8]+2272392833&4294967295,I=E+(v<<11&4294967295|v>>>21),v=A+(I^E^y)+w[11]+1839030562&4294967295,A=I+(v<<16&4294967295|v>>>16),v=y+(A^I^E)+w[14]+4259657740&4294967295,y=A+(v<<23&4294967295|v>>>9),v=E+(y^A^I)+w[1]+2763975236&4294967295,E=y+(v<<4&4294967295|v>>>28),v=I+(E^y^A)+w[4]+1272893353&4294967295,I=E+(v<<11&4294967295|v>>>21),v=A+(I^E^y)+w[7]+4139469664&4294967295,A=I+(v<<16&4294967295|v>>>16),v=y+(A^I^E)+w[10]+3200236656&4294967295,y=A+(v<<23&4294967295|v>>>9),v=E+(y^A^I)+w[13]+681279174&4294967295,E=y+(v<<4&4294967295|v>>>28),v=I+(E^y^A)+w[0]+3936430074&4294967295,I=E+(v<<11&4294967295|v>>>21),v=A+(I^E^y)+w[3]+3572445317&4294967295,A=I+(v<<16&4294967295|v>>>16),v=y+(A^I^E)+w[6]+76029189&4294967295,y=A+(v<<23&4294967295|v>>>9),v=E+(y^A^I)+w[9]+3654602809&4294967295,E=y+(v<<4&4294967295|v>>>28),v=I+(E^y^A)+w[12]+3873151461&4294967295,I=E+(v<<11&4294967295|v>>>21),v=A+(I^E^y)+w[15]+530742520&4294967295,A=I+(v<<16&4294967295|v>>>16),v=y+(A^I^E)+w[2]+3299628645&4294967295,y=A+(v<<23&4294967295|v>>>9),v=E+(A^(y|~I))+w[0]+4096336452&4294967295,E=y+(v<<6&4294967295|v>>>26),v=I+(y^(E|~A))+w[7]+1126891415&4294967295,I=E+(v<<10&4294967295|v>>>22),v=A+(E^(I|~y))+w[14]+2878612391&4294967295,A=I+(v<<15&4294967295|v>>>17),v=y+(I^(A|~E))+w[5]+4237533241&4294967295,y=A+(v<<21&4294967295|v>>>11),v=E+(A^(y|~I))+w[12]+1700485571&4294967295,E=y+(v<<6&4294967295|v>>>26),v=I+(y^(E|~A))+w[3]+2399980690&4294967295,I=E+(v<<10&4294967295|v>>>22),v=A+(E^(I|~y))+w[10]+4293915773&4294967295,A=I+(v<<15&4294967295|v>>>17),v=y+(I^(A|~E))+w[1]+2240044497&4294967295,y=A+(v<<21&4294967295|v>>>11),v=E+(A^(y|~I))+w[8]+1873313359&4294967295,E=y+(v<<6&4294967295|v>>>26),v=I+(y^(E|~A))+w[15]+4264355552&4294967295,I=E+(v<<10&4294967295|v>>>22),v=A+(E^(I|~y))+w[6]+2734768916&4294967295,A=I+(v<<15&4294967295|v>>>17),v=y+(I^(A|~E))+w[13]+1309151649&4294967295,y=A+(v<<21&4294967295|v>>>11),v=E+(A^(y|~I))+w[4]+4149444226&4294967295,E=y+(v<<6&4294967295|v>>>26),v=I+(y^(E|~A))+w[11]+3174756917&4294967295,I=E+(v<<10&4294967295|v>>>22),v=A+(E^(I|~y))+w[2]+718787259&4294967295,A=I+(v<<15&4294967295|v>>>17),v=y+(I^(A|~E))+w[9]+3951481745&4294967295,b.g[0]=b.g[0]+E&4294967295,b.g[1]=b.g[1]+(A+(v<<21&4294967295|v>>>11))&4294967295,b.g[2]=b.g[2]+A&4294967295,b.g[3]=b.g[3]+I&4294967295}r.prototype.v=function(b,E){E===void 0&&(E=b.length);const y=E-this.blockSize,w=this.C;let A=this.h,I=0;for(;I<E;){if(A==0)for(;I<=y;)s(this,b,I),I+=this.blockSize;if(typeof b=="string"){for(;I<E;)if(w[A++]=b.charCodeAt(I++),A==this.blockSize){s(this,w),A=0;break}}else for(;I<E;)if(w[A++]=b[I++],A==this.blockSize){s(this,w),A=0;break}}this.h=A,this.o+=E},r.prototype.A=function(){var b=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);b[0]=128;for(var E=1;E<b.length-8;++E)b[E]=0;E=this.o*8;for(var y=b.length-8;y<b.length;++y)b[y]=E&255,E/=256;for(this.v(b),b=Array(16),E=0,y=0;y<4;++y)for(let w=0;w<32;w+=8)b[E++]=this.g[y]>>>w&255;return b};function i(b,E){var y=c;return Object.prototype.hasOwnProperty.call(y,b)?y[b]:y[b]=E(b)}function o(b,E){this.h=E;const y=[];let w=!0;for(let A=b.length-1;A>=0;A--){const I=b[A]|0;w&&I==E||(y[A]=I,w=!1)}this.g=y}var c={};function l(b){return-128<=b&&b<128?i(b,function(E){return new o([E|0],E<0?-1:0)}):new o([b|0],b<0?-1:0)}function u(b){if(isNaN(b)||!isFinite(b))return d;if(b<0)return C(u(-b));const E=[];let y=1;for(let w=0;b>=y;w++)E[w]=b/y|0,y*=4294967296;return new o(E,0)}function f(b,E){if(b.length==0)throw Error("number format error: empty string");if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(b.charAt(0)=="-")return C(f(b.substring(1),E));if(b.indexOf("-")>=0)throw Error('number format error: interior "-" character');const y=u(Math.pow(E,8));let w=d;for(let I=0;I<b.length;I+=8){var A=Math.min(8,b.length-I);const v=parseInt(b.substring(I,I+A),E);A<8?(A=u(Math.pow(E,A)),w=w.j(A).add(u(v))):(w=w.j(y),w=w.add(u(v)))}return w}var d=l(0),m=l(1),_=l(16777216);t=o.prototype,t.m=function(){if(N(this))return-C(this).m();let b=0,E=1;for(let y=0;y<this.g.length;y++){const w=this.i(y);b+=(w>=0?w:4294967296+w)*E,E*=4294967296}return b},t.toString=function(b){if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(S(this))return"0";if(N(this))return"-"+C(this).toString(b);const E=u(Math.pow(b,6));var y=this;let w="";for(;;){const A=W(y,E).g;y=x(y,A.j(E));let I=((y.g.length>0?y.g[0]:y.h)>>>0).toString(b);if(y=A,S(y))return I+w;for(;I.length<6;)I="0"+I;w=I+w}},t.i=function(b){return b<0?0:b<this.g.length?this.g[b]:this.h};function S(b){if(b.h!=0)return!1;for(let E=0;E<b.g.length;E++)if(b.g[E]!=0)return!1;return!0}function N(b){return b.h==-1}t.l=function(b){return b=x(this,b),N(b)?-1:S(b)?0:1};function C(b){const E=b.g.length,y=[];for(let w=0;w<E;w++)y[w]=~b.g[w];return new o(y,~b.h).add(m)}t.abs=function(){return N(this)?C(this):this},t.add=function(b){const E=Math.max(this.g.length,b.g.length),y=[];let w=0;for(let A=0;A<=E;A++){let I=w+(this.i(A)&65535)+(b.i(A)&65535),v=(I>>>16)+(this.i(A)>>>16)+(b.i(A)>>>16);w=v>>>16,I&=65535,v&=65535,y[A]=v<<16|I}return new o(y,y[y.length-1]&-2147483648?-1:0)};function x(b,E){return b.add(C(E))}t.j=function(b){if(S(this)||S(b))return d;if(N(this))return N(b)?C(this).j(C(b)):C(C(this).j(b));if(N(b))return C(this.j(C(b)));if(this.l(_)<0&&b.l(_)<0)return u(this.m()*b.m());const E=this.g.length+b.g.length,y=[];for(var w=0;w<2*E;w++)y[w]=0;for(w=0;w<this.g.length;w++)for(let A=0;A<b.g.length;A++){const I=this.i(w)>>>16,v=this.i(w)&65535,ve=b.i(A)>>>16,je=b.i(A)&65535;y[2*w+2*A]+=v*je,O(y,2*w+2*A),y[2*w+2*A+1]+=I*je,O(y,2*w+2*A+1),y[2*w+2*A+1]+=v*ve,O(y,2*w+2*A+1),y[2*w+2*A+2]+=I*ve,O(y,2*w+2*A+2)}for(b=0;b<E;b++)y[b]=y[2*b+1]<<16|y[2*b];for(b=E;b<2*E;b++)y[b]=0;return new o(y,0)};function O(b,E){for(;(b[E]&65535)!=b[E];)b[E+1]+=b[E]>>>16,b[E]&=65535,E++}function H(b,E){this.g=b,this.h=E}function W(b,E){if(S(E))throw Error("division by zero");if(S(b))return new H(d,d);if(N(b))return E=W(C(b),E),new H(C(E.g),C(E.h));if(N(E))return E=W(b,C(E)),new H(C(E.g),E.h);if(b.g.length>30){if(N(b)||N(E))throw Error("slowDivide_ only works with positive integers.");for(var y=m,w=E;w.l(b)<=0;)y=Z(y),w=Z(w);var A=te(y,1),I=te(w,1);for(w=te(w,2),y=te(y,2);!S(w);){var v=I.add(w);v.l(b)<=0&&(A=A.add(y),I=v),w=te(w,1),y=te(y,1)}return E=x(b,A.j(E)),new H(A,E)}for(A=d;b.l(E)>=0;){for(y=Math.max(1,Math.floor(b.m()/E.m())),w=Math.ceil(Math.log(y)/Math.LN2),w=w<=48?1:Math.pow(2,w-48),I=u(y),v=I.j(E);N(v)||v.l(b)>0;)y-=w,I=u(y),v=I.j(E);S(I)&&(I=m),A=A.add(I),b=x(b,v)}return new H(A,b)}t.B=function(b){return W(this,b).h},t.and=function(b){const E=Math.max(this.g.length,b.g.length),y=[];for(let w=0;w<E;w++)y[w]=this.i(w)&b.i(w);return new o(y,this.h&b.h)},t.or=function(b){const E=Math.max(this.g.length,b.g.length),y=[];for(let w=0;w<E;w++)y[w]=this.i(w)|b.i(w);return new o(y,this.h|b.h)},t.xor=function(b){const E=Math.max(this.g.length,b.g.length),y=[];for(let w=0;w<E;w++)y[w]=this.i(w)^b.i(w);return new o(y,this.h^b.h)};function Z(b){const E=b.g.length+1,y=[];for(let w=0;w<E;w++)y[w]=b.i(w)<<1|b.i(w-1)>>>31;return new o(y,b.h)}function te(b,E){const y=E>>5;E%=32;const w=b.g.length-y,A=[];for(let I=0;I<w;I++)A[I]=E>0?b.i(I+y)>>>E|b.i(I+y+1)<<32-E:b.i(I+y);return new o(A,b.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,B_=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=f,_r=o}).apply(typeof dp<"u"?dp:typeof self<"u"?self:typeof window<"u"?window:{});var Yo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var j_,Ii,q_,fa,nu,$_,H_,G_;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Yo=="object"&&Yo];for(var h=0;h<a.length;++h){var p=a[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var p=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var k=a[g];if(!(k in p))break e;p=p[k]}a=a[a.length-1],g=p[a],h=h(g),h!=g&&h!=null&&e(p,a,{configurable:!0,writable:!0,value:h})}}s("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(a){return a||function(h){var p=[],g;for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&p.push([g,h[g]]);return p}});var i=i||{},o=this||self;function c(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function l(a,h,p){return a.call.apply(a.bind,arguments)}function u(a,h,p){return u=l,u.apply(null,arguments)}function f(a,h){var p=Array.prototype.slice.call(arguments,1);return function(){var g=p.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function d(a,h){function p(){}p.prototype=h.prototype,a.Z=h.prototype,a.prototype=new p,a.prototype.constructor=a,a.Ob=function(g,k,V){for(var z=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)z[pe-2]=arguments[pe];return h.prototype[k].apply(g,z)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function _(a){const h=a.length;if(h>0){const p=Array(h);for(let g=0;g<h;g++)p[g]=a[g];return p}return[]}function S(a,h){for(let g=1;g<arguments.length;g++){const k=arguments[g];var p=typeof k;if(p=p!="object"?p:k?Array.isArray(k)?"array":p:"null",p=="array"||p=="object"&&typeof k.length=="number"){p=a.length||0;const V=k.length||0;a.length=p+V;for(let z=0;z<V;z++)a[p+z]=k[z]}else a.push(k)}}class N{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function C(a){o.setTimeout(()=>{throw a},0)}function x(){var a=b;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class O{constructor(){this.h=this.g=null}add(h,p){const g=H.get();g.set(h,p),this.h?this.h.next=g:this.g=g,this.h=g}}var H=new N(()=>new W,a=>a.reset());class W{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,te=!1,b=new O,E=()=>{const a=Promise.resolve(void 0);Z=()=>{a.then(y)}};function y(){for(var a;a=x();){try{a.h.call(a.g)}catch(p){C(p)}var h=H;h.j(a),h.h<100&&(h.h++,a.next=h.g,h.g=a)}te=!1}function w(){this.u=this.u,this.C=this.C}w.prototype.u=!1,w.prototype.dispose=function(){this.u||(this.u=!0,this.N())},w.prototype[Symbol.dispose]=function(){this.dispose()},w.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var I=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const p=()=>{};o.addEventListener("test",p,h),o.removeEventListener("test",p,h)}catch{}return a})();function v(a){return/^[\s\xa0]*$/.test(a)}function ve(a,h){A.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,h)}d(ve,A),ve.prototype.init=function(a,h){const p=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget,h||(p=="mouseover"?h=a.fromElement:p=="mouseout"&&(h=a.toElement)),this.relatedTarget=h,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&ve.Z.h.call(this)},ve.prototype.h=function(){ve.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var je="closure_listenable_"+(Math.random()*1e6|0),Pe=0;function fe(a,h,p,g,k){this.listener=a,this.proxy=null,this.src=h,this.type=p,this.capture=!!g,this.ha=k,this.key=++Pe,this.da=this.fa=!1}function Te(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function xt(a,h,p){for(const g in a)h.call(p,a[g],g,a)}function un(a,h){for(const p in a)h.call(void 0,a[p],p,a)}function Ot(a){const h={};for(const p in a)h[p]=a[p];return h}const ct="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Sn(a,h){let p,g;for(let k=1;k<arguments.length;k++){g=arguments[k];for(p in g)a[p]=g[p];for(let V=0;V<ct.length;V++)p=ct[V],Object.prototype.hasOwnProperty.call(g,p)&&(a[p]=g[p])}}function Jt(a){this.src=a,this.g={},this.h=0}Jt.prototype.add=function(a,h,p,g,k){const V=a.toString();a=this.g[V],a||(a=this.g[V]=[],this.h++);const z=gt(a,h,g,k);return z>-1?(h=a[z],p||(h.fa=!1)):(h=new fe(h,this.src,V,!!g,k),h.fa=p,a.push(h)),h};function Xt(a,h){const p=h.type;if(p in a.g){var g=a.g[p],k=Array.prototype.indexOf.call(g,h,void 0),V;(V=k>=0)&&Array.prototype.splice.call(g,k,1),V&&(Te(h),a.g[p].length==0&&(delete a.g[p],a.h--))}}function gt(a,h,p,g){for(let k=0;k<a.length;++k){const V=a[k];if(!V.da&&V.listener==h&&V.capture==!!p&&V.ha==g)return k}return-1}var L="closure_lm_"+(Math.random()*1e6|0),J={};function Q(a,h,p,g,k){if(Array.isArray(h)){for(let V=0;V<h.length;V++)Q(a,h[V],p,g,k);return null}return p=K(p),a&&a[je]?a.J(h,p,c(g)?!!g.capture:!1,k):ne(a,h,p,!1,g,k)}function ne(a,h,p,g,k,V){if(!h)throw Error("Invalid event type");const z=c(k)?!!k.capture:!!k;let pe=B(a);if(pe||(a[L]=pe=new Jt(a)),p=pe.add(h,p,g,z,V),p.proxy)return p;if(g=ge(),p.proxy=g,g.src=a,g.listener=p,a.addEventListener)I||(k=z),k===void 0&&(k=!1),a.addEventListener(h.toString(),g,k);else if(a.attachEvent)a.attachEvent(P(h.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return p}function ge(){function a(p){return h.call(a.src,a.listener,p)}const h=F;return a}function T(a,h,p,g,k){if(Array.isArray(h))for(var V=0;V<h.length;V++)T(a,h[V],p,g,k);else g=c(g)?!!g.capture:!!g,p=K(p),a&&a[je]?(a=a.i,V=String(h).toString(),V in a.g&&(h=a.g[V],p=gt(h,p,g,k),p>-1&&(Te(h[p]),Array.prototype.splice.call(h,p,1),h.length==0&&(delete a.g[V],a.h--)))):a&&(a=B(a))&&(h=a.g[h.toString()],a=-1,h&&(a=gt(h,p,g,k)),(p=a>-1?h[a]:null)&&R(p))}function R(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[je])Xt(h.i,a);else{var p=a.type,g=a.proxy;h.removeEventListener?h.removeEventListener(p,g,a.capture):h.detachEvent?h.detachEvent(P(p),g):h.addListener&&h.removeListener&&h.removeListener(g),(p=B(h))?(Xt(p,a),p.h==0&&(p.src=null,h[L]=null)):Te(a)}}}function P(a){return a in J?J[a]:J[a]="on"+a}function F(a,h){if(a.da)a=!0;else{h=new ve(h,this);const p=a.listener,g=a.ha||a.src;a.fa&&R(a),a=p.call(g,h)}return a}function B(a){return a=a[L],a instanceof Jt?a:null}var M="__closure_events_fn_"+(Math.random()*1e9>>>0);function K(a){return typeof a=="function"?a:(a[M]||(a[M]=function(h){return a.handleEvent(h)}),a[M])}function $(){w.call(this),this.i=new Jt(this),this.M=this,this.G=null}d($,w),$.prototype[je]=!0,$.prototype.removeEventListener=function(a,h,p,g){T(this,a,h,p,g)};function q(a,h){var p,g=a.G;if(g)for(p=[];g;g=g.G)p.push(g);if(a=a.M,g=h.type||h,typeof h=="string")h=new A(h,a);else if(h instanceof A)h.target=h.target||a;else{var k=h;h=new A(g,a),Sn(h,k)}k=!0;let V,z;if(p)for(z=p.length-1;z>=0;z--)V=h.g=p[z],k=j(V,g,!0,h)&&k;if(V=h.g=a,k=j(V,g,!0,h)&&k,k=j(V,g,!1,h)&&k,p)for(z=0;z<p.length;z++)V=h.g=p[z],k=j(V,g,!1,h)&&k}$.prototype.N=function(){if($.Z.N.call(this),this.i){var a=this.i;for(const h in a.g){const p=a.g[h];for(let g=0;g<p.length;g++)Te(p[g]);delete a.g[h],a.h--}}this.G=null},$.prototype.J=function(a,h,p,g){return this.i.add(String(a),h,!1,p,g)},$.prototype.K=function(a,h,p,g){return this.i.add(String(a),h,!0,p,g)};function j(a,h,p,g){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();let k=!0;for(let V=0;V<h.length;++V){const z=h[V];if(z&&!z.da&&z.capture==p){const pe=z.listener,Ze=z.ha||z.src;z.fa&&Xt(a.i,z),k=pe.call(Ze,g)!==!1&&k}}return k&&!g.defaultPrevented}function oe(a,h){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=u(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:o.setTimeout(a,h||0)}function Y(a){a.g=oe(()=>{a.g=null,a.i&&(a.i=!1,Y(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class re extends w{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Y(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ce(a){w.call(this),this.h=a,this.g={}}d(ce,w);var me=[];function Ce(a){xt(a.g,function(h,p){this.g.hasOwnProperty(p)&&R(h)},a),a.g={}}ce.prototype.N=function(){ce.Z.N.call(this),Ce(this)},ce.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ae=o.JSON.stringify,_t=o.JSON.parse,yt=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function Mt(){}function Lt(){}var Zt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function us(){A.call(this,"d")}d(us,A);function lt(){A.call(this,"c")}d(lt,A);var rt={},ti=null;function Or(){return ti=ti||new $}rt.Ia="serverreachability";function $h(a){A.call(this,rt.Ia,a)}d($h,A);function ni(a){const h=Or();q(h,new $h(h))}rt.STAT_EVENT="statevent";function Hh(a,h){A.call(this,rt.STAT_EVENT,a),this.stat=h}d(Hh,A);function At(a){const h=Or();q(h,new Hh(h,a))}rt.Ja="timingevent";function Gh(a,h){A.call(this,rt.Ja,a),this.size=h}d(Gh,A);function ri(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},h)}function si(){this.g=!0}si.prototype.ua=function(){this.g=!1};function bE(a,h,p,g,k,V){a.info(function(){if(a.g)if(V){var z="",pe=V.split("&");for(let Ve=0;Ve<pe.length;Ve++){var Ze=pe[Ve].split("=");if(Ze.length>1){const st=Ze[0];Ze=Ze[1];const fn=st.split("_");z=fn.length>=2&&fn[1]=="type"?z+(st+"="+Ze+"&"):z+(st+"=redacted&")}}}else z=null;else z=V;return"XMLHTTP REQ ("+g+") [attempt "+k+"]: "+h+`
`+p+`
`+z})}function RE(a,h,p,g,k,V,z){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+k+"]: "+h+`
`+p+`
`+V+" "+z})}function hs(a,h,p,g){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+PE(a,p)+(g?" "+g:"")})}function SE(a,h){a.info(function(){return"TIMEOUT: "+h})}si.prototype.info=function(){};function PE(a,h){if(!a.g)return h;if(!h)return null;try{const V=JSON.parse(h);if(V){for(a=0;a<V.length;a++)if(Array.isArray(V[a])){var p=V[a];if(!(p.length<2)){var g=p[1];if(Array.isArray(g)&&!(g.length<1)){var k=g[0];if(k!="noop"&&k!="stop"&&k!="close")for(let z=1;z<g.length;z++)g[z]=""}}}}return Ae(V)}catch{return h}}var Do={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Wh={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},zh;function Bc(){}d(Bc,Mt),Bc.prototype.g=function(){return new XMLHttpRequest},zh=new Bc;function ii(a){return encodeURIComponent(String(a))}function CE(a){var h=1;a=a.split(":");const p=[];for(;h>0&&a.length;)p.push(a.shift()),h--;return a.length&&p.push(a.join(":")),p}function zn(a,h,p,g){this.j=a,this.i=h,this.l=p,this.S=g||1,this.V=new ce(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Kh}function Kh(){this.i=null,this.g="",this.h=!1}var Qh={},jc={};function qc(a,h,p){a.M=1,a.A=Mo(hn(h)),a.u=p,a.R=!0,Yh(a,null)}function Yh(a,h){a.F=Date.now(),Oo(a),a.B=hn(a.A);var p=a.B,g=a.S;Array.isArray(g)||(g=[String(g)]),uf(p.i,"t",g),a.C=0,p=a.j.L,a.h=new Kh,a.g=Pf(a.j,p?h:null,!a.u),a.P>0&&(a.O=new re(u(a.Y,a,a.g),a.P)),h=a.V,p=a.g,g=a.ba;var k="readystatechange";Array.isArray(k)||(k&&(me[0]=k.toString()),k=me);for(let V=0;V<k.length;V++){const z=Q(p,k[V],g||h.handleEvent,!1,h.h||h);if(!z)break;h.g[z.key]=z}h=a.J?Ot(a.J):{},a.u?(a.v||(a.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,h)):(a.v="GET",a.g.ea(a.B,a.v,null,h)),ni(),bE(a.i,a.v,a.B,a.l,a.S,a.u)}zn.prototype.ba=function(a){a=a.target;const h=this.O;h&&Yn(a)==3?h.j():this.Y(a)},zn.prototype.Y=function(a){try{if(a==this.g)e:{const pe=Yn(this.g),Ze=this.g.ya(),Ve=this.g.ca();if(!(pe<3)&&(pe!=3||this.g&&(this.h.h||this.g.la()||_f(this.g)))){this.K||pe!=4||Ze==7||(Ze==8||Ve<=0?ni(3):ni(2)),$c(this);var h=this.g.ca();this.X=h;var p=kE(this);if(this.o=h==200,RE(this.i,this.v,this.B,this.l,this.S,pe,h),this.o){if(this.U&&!this.L){t:{if(this.g){var g,k=this.g;if((g=k.g?k.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(g)){var V=g;break t}}V=null}if(a=V)hs(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Hc(this,a);else{this.o=!1,this.m=3,At(12),Mr(this),oi(this);break e}}if(this.R){a=!0;let st;for(;!this.K&&this.C<p.length;)if(st=NE(this,p),st==jc){pe==4&&(this.m=4,At(14),a=!1),hs(this.i,this.l,null,"[Incomplete Response]");break}else if(st==Qh){this.m=4,At(15),hs(this.i,this.l,p,"[Invalid Chunk]"),a=!1;break}else hs(this.i,this.l,st,null),Hc(this,st);if(Jh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pe!=4||p.length!=0||this.h.h||(this.m=1,At(16),a=!1),this.o=this.o&&a,!a)hs(this.i,this.l,p,"[Invalid Chunked Response]"),Mr(this),oi(this);else if(p.length>0&&!this.W){this.W=!0;var z=this.j;z.g==this&&z.aa&&!z.P&&(z.j.info("Great, no buffering proxy detected. Bytes received: "+p.length),Xc(z),z.P=!0,At(11))}}else hs(this.i,this.l,p,null),Hc(this,p);pe==4&&Mr(this),this.o&&!this.K&&(pe==4?Af(this.j,this):(this.o=!1,Oo(this)))}else GE(this.g),h==400&&p.indexOf("Unknown SID")>0?(this.m=3,At(12)):(this.m=0,At(13)),Mr(this),oi(this)}}}catch{}finally{}};function kE(a){if(!Jh(a))return a.g.la();const h=_f(a.g);if(h==="")return"";let p="";const g=h.length,k=Yn(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return Mr(a),oi(a),"";a.h.i=new o.TextDecoder}for(let V=0;V<g;V++)a.h.h=!0,p+=a.h.i.decode(h[V],{stream:!(k&&V==g-1)});return h.length=0,a.h.g+=p,a.C=0,a.h.g}function Jh(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function NE(a,h){var p=a.C,g=h.indexOf(`
`,p);return g==-1?jc:(p=Number(h.substring(p,g)),isNaN(p)?Qh:(g+=1,g+p>h.length?jc:(h=h.slice(g,g+p),a.C=g+p,h)))}zn.prototype.cancel=function(){this.K=!0,Mr(this)};function Oo(a){a.T=Date.now()+a.H,Xh(a,a.H)}function Xh(a,h){if(a.D!=null)throw Error("WatchDog timer not null");a.D=ri(u(a.aa,a),h)}function $c(a){a.D&&(o.clearTimeout(a.D),a.D=null)}zn.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(SE(this.i,this.B),this.M!=2&&(ni(),At(17)),Mr(this),this.m=2,oi(this)):Xh(this,this.T-a)};function oi(a){a.j.I==0||a.K||Af(a.j,a)}function Mr(a){$c(a);var h=a.O;h&&typeof h.dispose=="function"&&h.dispose(),a.O=null,Ce(a.V),a.g&&(h=a.g,a.g=null,h.abort(),h.dispose())}function Hc(a,h){try{var p=a.j;if(p.I!=0&&(p.g==a||Gc(p.h,a))){if(!a.L&&Gc(p.h,a)&&p.I==3){try{var g=p.Ba.g.parse(h)}catch{g=null}if(Array.isArray(g)&&g.length==3){var k=g;if(k[0]==0){e:if(!p.v){if(p.g)if(p.g.F+3e3<a.F)jo(p),Uo(p);else break e;Jc(p),At(18)}}else p.xa=k[1],0<p.xa-p.K&&k[2]<37500&&p.F&&p.A==0&&!p.C&&(p.C=ri(u(p.Va,p),6e3));tf(p.h)<=1&&p.ta&&(p.ta=void 0)}else Fr(p,11)}else if((a.L||p.g==a)&&jo(p),!v(h))for(k=p.Ba.g.parse(h),h=0;h<k.length;h++){let Ve=k[h];const st=Ve[0];if(!(st<=p.K))if(p.K=st,Ve=Ve[1],p.I==2)if(Ve[0]=="c"){p.M=Ve[1],p.ba=Ve[2];const fn=Ve[3];fn!=null&&(p.ka=fn,p.j.info("VER="+p.ka));const Ur=Ve[4];Ur!=null&&(p.za=Ur,p.j.info("SVER="+p.za));const Jn=Ve[5];Jn!=null&&typeof Jn=="number"&&Jn>0&&(g=1.5*Jn,p.O=g,p.j.info("backChannelRequestTimeoutMs_="+g)),g=p;const Xn=a.g;if(Xn){const $o=Xn.g?Xn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($o){var V=g.h;V.g||$o.indexOf("spdy")==-1&&$o.indexOf("quic")==-1&&$o.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(Wc(V,V.h),V.h=null))}if(g.G){const Zc=Xn.g?Xn.g.getResponseHeader("X-HTTP-Session-Id"):null;Zc&&(g.wa=Zc,Le(g.J,g.G,Zc))}}p.I=3,p.l&&p.l.ra(),p.aa&&(p.T=Date.now()-a.F,p.j.info("Handshake RTT: "+p.T+"ms")),g=p;var z=a;if(g.na=Sf(g,g.L?g.ba:null,g.W),z.L){nf(g.h,z);var pe=z,Ze=g.O;Ze&&(pe.H=Ze),pe.D&&($c(pe),Oo(pe)),g.g=z}else wf(g);p.i.length>0&&Bo(p)}else Ve[0]!="stop"&&Ve[0]!="close"||Fr(p,7);else p.I==3&&(Ve[0]=="stop"||Ve[0]=="close"?Ve[0]=="stop"?Fr(p,7):Yc(p):Ve[0]!="noop"&&p.l&&p.l.qa(Ve),p.A=0)}}ni(4)}catch{}}var xE=class{constructor(a,h){this.g=a,this.map=h}};function Zh(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ef(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function tf(a){return a.h?1:a.g?a.g.size:0}function Gc(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function Wc(a,h){a.g?a.g.add(h):a.h=h}function nf(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}Zh.prototype.cancel=function(){if(this.i=rf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function rf(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const p of a.g.values())h=h.concat(p.G);return h}return _(a.i)}var sf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function VE(a,h){if(a){a=a.split("&");for(let p=0;p<a.length;p++){const g=a[p].indexOf("=");let k,V=null;g>=0?(k=a[p].substring(0,g),V=a[p].substring(g+1)):k=a[p],h(k,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Kn(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;a instanceof Kn?(this.l=a.l,ai(this,a.j),this.o=a.o,this.g=a.g,ci(this,a.u),this.h=a.h,zc(this,hf(a.i)),this.m=a.m):a&&(h=String(a).match(sf))?(this.l=!1,ai(this,h[1]||"",!0),this.o=li(h[2]||""),this.g=li(h[3]||"",!0),ci(this,h[4]),this.h=li(h[5]||"",!0),zc(this,h[6]||"",!0),this.m=li(h[7]||"")):(this.l=!1,this.i=new hi(null,this.l))}Kn.prototype.toString=function(){const a=[];var h=this.j;h&&a.push(ui(h,of,!0),":");var p=this.g;return(p||h=="file")&&(a.push("//"),(h=this.o)&&a.push(ui(h,of,!0),"@"),a.push(ii(p).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.u,p!=null&&a.push(":",String(p))),(p=this.h)&&(this.g&&p.charAt(0)!="/"&&a.push("/"),a.push(ui(p,p.charAt(0)=="/"?ME:OE,!0))),(p=this.i.toString())&&a.push("?",p),(p=this.m)&&a.push("#",ui(p,FE)),a.join("")},Kn.prototype.resolve=function(a){const h=hn(this);let p=!!a.j;p?ai(h,a.j):p=!!a.o,p?h.o=a.o:p=!!a.g,p?h.g=a.g:p=a.u!=null;var g=a.h;if(p)ci(h,a.u);else if(p=!!a.h){if(g.charAt(0)!="/")if(this.g&&!this.h)g="/"+g;else{var k=h.h.lastIndexOf("/");k!=-1&&(g=h.h.slice(0,k+1)+g)}if(k=g,k==".."||k==".")g="";else if(k.indexOf("./")!=-1||k.indexOf("/.")!=-1){g=k.lastIndexOf("/",0)==0,k=k.split("/");const V=[];for(let z=0;z<k.length;){const pe=k[z++];pe=="."?g&&z==k.length&&V.push(""):pe==".."?((V.length>1||V.length==1&&V[0]!="")&&V.pop(),g&&z==k.length&&V.push("")):(V.push(pe),g=!0)}g=V.join("/")}else g=k}return p?h.h=g:p=a.i.toString()!=="",p?zc(h,hf(a.i)):p=!!a.m,p&&(h.m=a.m),h};function hn(a){return new Kn(a)}function ai(a,h,p){a.j=p?li(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function ci(a,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);a.u=h}else a.u=null}function zc(a,h,p){h instanceof hi?(a.i=h,UE(a.i,a.l)):(p||(h=ui(h,LE)),a.i=new hi(h,a.l))}function Le(a,h,p){a.i.set(h,p)}function Mo(a){return Le(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function li(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function ui(a,h,p){return typeof a=="string"?(a=encodeURI(a).replace(h,DE),p&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function DE(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var of=/[#\/\?@]/g,OE=/[#\?:]/g,ME=/[#\?]/g,LE=/[#\?@]/g,FE=/#/g;function hi(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function Lr(a){a.g||(a.g=new Map,a.h=0,a.i&&VE(a.i,function(h,p){a.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=hi.prototype,t.add=function(a,h){Lr(this),this.i=null,a=fs(this,a);let p=this.g.get(a);return p||this.g.set(a,p=[]),p.push(h),this.h+=1,this};function af(a,h){Lr(a),h=fs(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function cf(a,h){return Lr(a),h=fs(a,h),a.g.has(h)}t.forEach=function(a,h){Lr(this),this.g.forEach(function(p,g){p.forEach(function(k){a.call(h,k,g,this)},this)},this)};function lf(a,h){Lr(a);let p=[];if(typeof h=="string")cf(a,h)&&(p=p.concat(a.g.get(fs(a,h))));else for(a=Array.from(a.g.values()),h=0;h<a.length;h++)p=p.concat(a[h]);return p}t.set=function(a,h){return Lr(this),this.i=null,a=fs(this,a),cf(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=lf(this,a),a.length>0?String(a[0]):h):h};function uf(a,h,p){af(a,h),p.length>0&&(a.i=null,a.g.set(fs(a,h),_(p)),a.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(let g=0;g<h.length;g++){var p=h[g];const k=ii(p);p=lf(this,p);for(let V=0;V<p.length;V++){let z=k;p[V]!==""&&(z+="="+ii(p[V])),a.push(z)}}return this.i=a.join("&")};function hf(a){const h=new hi;return h.i=a.i,a.g&&(h.g=new Map(a.g),h.h=a.h),h}function fs(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function UE(a,h){h&&!a.j&&(Lr(a),a.i=null,a.g.forEach(function(p,g){const k=g.toLowerCase();g!=k&&(af(this,g),uf(this,k,p))},a)),a.j=h}function BE(a,h){const p=new si;if(o.Image){const g=new Image;g.onload=f(Qn,p,"TestLoadImage: loaded",!0,h,g),g.onerror=f(Qn,p,"TestLoadImage: error",!1,h,g),g.onabort=f(Qn,p,"TestLoadImage: abort",!1,h,g),g.ontimeout=f(Qn,p,"TestLoadImage: timeout",!1,h,g),o.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else h(!1)}function jE(a,h){const p=new si,g=new AbortController,k=setTimeout(()=>{g.abort(),Qn(p,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:g.signal}).then(V=>{clearTimeout(k),V.ok?Qn(p,"TestPingServer: ok",!0,h):Qn(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(k),Qn(p,"TestPingServer: error",!1,h)})}function Qn(a,h,p,g,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),g(p)}catch{}}function qE(){this.g=new yt}function Kc(a){this.i=a.Sb||null,this.h=a.ab||!1}d(Kc,Mt),Kc.prototype.g=function(){return new Lo(this.i,this.h)};function Lo(a,h){$.call(this),this.H=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(Lo,$),t=Lo.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=h,this.readyState=1,di(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(h.body=a),(this.H||o).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,fi(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,di(this)),this.g&&(this.readyState=3,di(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ff(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function ff(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?fi(this):di(this),this.readyState==3&&ff(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,fi(this))},t.Na=function(a){this.g&&(this.response=a,fi(this))},t.ga=function(){this.g&&fi(this)};function fi(a){a.readyState=4,a.l=null,a.j=null,a.B=null,di(a)}t.setRequestHeader=function(a,h){this.A.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,a.push(p[0]+": "+p[1]),p=h.next();return a.join(`\r
`)};function di(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Lo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function df(a){let h="";return xt(a,function(p,g){h+=g,h+=":",h+=p,h+=`\r
`}),h}function Qc(a,h,p){e:{for(g in p){var g=!1;break e}g=!0}g||(p=df(p),typeof a=="string"?p!=null&&ii(p):Le(a,h,p))}function $e(a){$.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d($e,$);var $E=/^https?$/i,HE=["POST","PUT"];t=$e.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,h,p,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():zh.g(),this.g.onreadystatechange=m(u(this.Ca,this));try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(V){pf(this,V);return}if(a=p||"",p=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var k in g)p.set(k,g[k]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const V of g.keys())p.set(V,g.get(V));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(p.keys()).find(V=>V.toLowerCase()=="content-type"),k=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(HE,h,void 0)>=0)||g||k||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,z]of p)this.g.setRequestHeader(V,z);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(V){pf(this,V)}};function pf(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.o=5,mf(a),Fo(a)}function mf(a){a.A||(a.A=!0,q(a,"complete"),q(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,q(this,"complete"),q(this,"abort"),Fo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fo(this,!0)),$e.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?gf(this):this.Xa())},t.Xa=function(){gf(this)};function gf(a){if(a.h&&typeof i<"u"){if(a.v&&Yn(a)==4)setTimeout(a.Ca.bind(a),0);else if(q(a,"readystatechange"),Yn(a)==4){a.h=!1;try{const V=a.ca();e:switch(V){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var g;if(g=V===0){let z=String(a.D).match(sf)[1]||null;!z&&o.self&&o.self.location&&(z=o.self.location.protocol.slice(0,-1)),g=!$E.test(z?z.toLowerCase():"")}p=g}if(p)q(a,"complete"),q(a,"success");else{a.o=6;try{var k=Yn(a)>2?a.g.statusText:""}catch{k=""}a.l=k+" ["+a.ca()+"]",mf(a)}}finally{Fo(a)}}}}function Fo(a,h){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const p=a.g;a.g=null,h||q(a,"ready");try{p.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Yn(a){return a.g?a.g.readyState:0}t.ca=function(){try{return Yn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),_t(h)}};function _f(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function GE(a){const h={};a=(a.g&&Yn(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(v(a[g]))continue;var p=CE(a[g]);const k=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const V=h[k]||[];h[k]=V,V.push(p)}un(h,function(g){return g.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function pi(a,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[a]||h}function yf(a){this.za=0,this.i=[],this.j=new si,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=pi("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=pi("baseRetryDelayMs",5e3,a),this.Za=pi("retryDelaySeedMs",1e4,a),this.Ta=pi("forwardChannelMaxRetries",2,a),this.va=pi("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new Zh(a&&a.concurrentRequestLimit),this.Ba=new qE,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=yf.prototype,t.ka=8,t.I=1,t.connect=function(a,h,p,g){At(0),this.W=a,this.H=h||{},p&&g!==void 0&&(this.H.OSID=p,this.H.OAID=g),this.F=this.X,this.J=Sf(this,null,this.W),Bo(this)};function Yc(a){if(Ef(a),a.I==3){var h=a.V++,p=hn(a.J);if(Le(p,"SID",a.M),Le(p,"RID",h),Le(p,"TYPE","terminate"),mi(a,p),h=new zn(a,a.j,h),h.M=2,h.A=Mo(hn(p)),p=!1,o.navigator&&o.navigator.sendBeacon)try{p=o.navigator.sendBeacon(h.A.toString(),"")}catch{}!p&&o.Image&&(new Image().src=h.A,p=!0),p||(h.g=Pf(h.j,null),h.g.ea(h.A)),h.F=Date.now(),Oo(h)}Rf(a)}function Uo(a){a.g&&(Xc(a),a.g.cancel(),a.g=null)}function Ef(a){Uo(a),a.v&&(o.clearTimeout(a.v),a.v=null),jo(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function Bo(a){if(!ef(a.h)&&!a.m){a.m=!0;var h=a.Ea;Z||E(),te||(Z(),te=!0),b.add(h,a),a.D=0}}function WE(a,h){return tf(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=h.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=ri(u(a.Ea,a,h),bf(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const k=new zn(this,this.j,a);let V=this.o;if(this.U&&(V?(V=Ot(V),Sn(V,this.U)):V=this.U),this.u!==null||this.R||(k.J=V,V=null),this.S)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var g=this.i[p];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(h+=g,h>4096){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=Tf(this,k,h),p=hn(this.J),Le(p,"RID",a),Le(p,"CVER",22),this.G&&Le(p,"X-HTTP-Session-Id",this.G),mi(this,p),V&&(this.R?h="headers="+ii(df(V))+"&"+h:this.u&&Qc(p,this.u,V)),Wc(this.h,k),this.Ra&&Le(p,"TYPE","init"),this.S?(Le(p,"$req",h),Le(p,"SID","null"),k.U=!0,qc(k,p,null)):qc(k,p,h),this.I=2}}else this.I==3&&(a?vf(this,a):this.i.length==0||ef(this.h)||vf(this))};function vf(a,h){var p;h?p=h.l:p=a.V++;const g=hn(a.J);Le(g,"SID",a.M),Le(g,"RID",p),Le(g,"AID",a.K),mi(a,g),a.u&&a.o&&Qc(g,a.u,a.o),p=new zn(a,a.j,p,a.D+1),a.u===null&&(p.J=a.o),h&&(a.i=h.G.concat(a.i)),h=Tf(a,p,1e3),p.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),Wc(a.h,p),qc(p,g,h)}function mi(a,h){a.H&&xt(a.H,function(p,g){Le(h,g,p)}),a.l&&xt({},function(p,g){Le(h,g,p)})}function Tf(a,h,p){p=Math.min(a.i.length,p);const g=a.l?u(a.l.Ka,a.l,a):null;e:{var k=a.i;let pe=-1;for(;;){const Ze=["count="+p];pe==-1?p>0?(pe=k[0].g,Ze.push("ofs="+pe)):pe=0:Ze.push("ofs="+pe);let Ve=!0;for(let st=0;st<p;st++){var V=k[st].g;const fn=k[st].map;if(V-=pe,V<0)pe=Math.max(0,k[st].g-100),Ve=!1;else try{V="req"+V+"_"||"";try{var z=fn instanceof Map?fn:Object.entries(fn);for(const[Ur,Jn]of z){let Xn=Jn;c(Jn)&&(Xn=Ae(Jn)),Ze.push(V+Ur+"="+encodeURIComponent(Xn))}}catch(Ur){throw Ze.push(V+"type="+encodeURIComponent("_badmap")),Ur}}catch{g&&g(fn)}}if(Ve){z=Ze.join("&");break e}}z=void 0}return a=a.i.splice(0,p),h.G=a,z}function wf(a){if(!a.g&&!a.v){a.Y=1;var h=a.Da;Z||E(),te||(Z(),te=!0),b.add(h,a),a.A=0}}function Jc(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=ri(u(a.Da,a),bf(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,If(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=ri(u(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,At(10),Uo(this),If(this))};function Xc(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function If(a){a.g=new zn(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var h=hn(a.na);Le(h,"RID","rpc"),Le(h,"SID",a.M),Le(h,"AID",a.K),Le(h,"CI",a.F?"0":"1"),!a.F&&a.ia&&Le(h,"TO",a.ia),Le(h,"TYPE","xmlhttp"),mi(a,h),a.u&&a.o&&Qc(h,a.u,a.o),a.O&&(a.g.H=a.O);var p=a.g;a=a.ba,p.M=1,p.A=Mo(hn(h)),p.u=null,p.R=!0,Yh(p,a)}t.Va=function(){this.C!=null&&(this.C=null,Uo(this),Jc(this),At(19))};function jo(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function Af(a,h){var p=null;if(a.g==h){jo(a),Xc(a),a.g=null;var g=2}else if(Gc(a.h,h))p=h.G,nf(a.h,h),g=1;else return;if(a.I!=0){if(h.o)if(g==1){p=h.u?h.u.length:0,h=Date.now()-h.F;var k=a.D;g=Or(),q(g,new Gh(g,p)),Bo(a)}else wf(a);else if(k=h.m,k==3||k==0&&h.X>0||!(g==1&&WE(a,h)||g==2&&Jc(a)))switch(p&&p.length>0&&(h=a.h,h.i=h.i.concat(p)),k){case 1:Fr(a,5);break;case 4:Fr(a,10);break;case 3:Fr(a,6);break;default:Fr(a,2)}}}function bf(a,h){let p=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(p*=2),p*h}function Fr(a,h){if(a.j.info("Error code "+h),h==2){var p=u(a.bb,a),g=a.Ua;const k=!g;g=new Kn(g||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ai(g,"https"),Mo(g),k?BE(g.toString(),p):jE(g.toString(),p)}else At(2);a.I=0,a.l&&a.l.pa(h),Rf(a),Ef(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function Rf(a){if(a.I=0,a.ja=[],a.l){const h=rf(a.h);(h.length!=0||a.i.length!=0)&&(S(a.ja,h),S(a.ja,a.i),a.h.i.length=0,_(a.i),a.i.length=0),a.l.oa()}}function Sf(a,h,p){var g=p instanceof Kn?hn(p):new Kn(p);if(g.g!="")h&&(g.g=h+"."+g.g),ci(g,g.u);else{var k=o.location;g=k.protocol,h=h?h+"."+k.hostname:k.hostname,k=+k.port;const V=new Kn(null);g&&ai(V,g),h&&(V.g=h),k&&ci(V,k),p&&(V.h=p),g=V}return p=a.G,h=a.wa,p&&h&&Le(g,p,h),Le(g,"VER",a.ka),mi(a,g),g}function Pf(a,h,p){if(h&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Aa&&!a.ma?new $e(new Kc({ab:p})):new $e(a.ma),h.Fa(a.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Cf(){}t=Cf.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function qo(){}qo.prototype.g=function(a,h){return new Ft(a,h)};function Ft(a,h){$.call(this),this.g=new yf(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(a?a["X-WebChannel-Client-Profile"]=h.sa:a={"X-WebChannel-Client-Profile":h.sa}),this.g.U=a,(a=h&&h.Qb)&&!v(a)&&(this.g.u=a),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!v(h)&&(this.g.G=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new ds(this)}d(Ft,$),Ft.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ft.prototype.close=function(){Yc(this.g)},Ft.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var p={};p.__data__=a,a=p}else this.v&&(p={},p.__data__=Ae(a),a=p);h.i.push(new xE(h.Ya++,a)),h.I==3&&Bo(h)},Ft.prototype.N=function(){this.g.l=null,delete this.j,Yc(this.g),delete this.g,Ft.Z.N.call(this)};function kf(a){us.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const p in h){a=p;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}d(kf,us);function Nf(){lt.call(this),this.status=1}d(Nf,lt);function ds(a){this.g=a}d(ds,Cf),ds.prototype.ra=function(){q(this.g,"a")},ds.prototype.qa=function(a){q(this.g,new kf(a))},ds.prototype.pa=function(a){q(this.g,new Nf)},ds.prototype.oa=function(){q(this.g,"b")},qo.prototype.createWebChannel=qo.prototype.g,Ft.prototype.send=Ft.prototype.o,Ft.prototype.open=Ft.prototype.m,Ft.prototype.close=Ft.prototype.close,G_=function(){return new qo},H_=function(){return Or()},$_=rt,nu={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Do.NO_ERROR=0,Do.TIMEOUT=8,Do.HTTP_ERROR=6,fa=Do,Wh.COMPLETE="complete",q_=Wh,Lt.EventType=Zt,Zt.OPEN="a",Zt.CLOSE="b",Zt.ERROR="c",Zt.MESSAGE="d",$.prototype.listen=$.prototype.J,Ii=Lt,$e.prototype.listenOnce=$e.prototype.K,$e.prototype.getLastError=$e.prototype.Ha,$e.prototype.getLastErrorCode=$e.prototype.ya,$e.prototype.getStatus=$e.prototype.ca,$e.prototype.getResponseJson=$e.prototype.La,$e.prototype.getResponseText=$e.prototype.la,$e.prototype.send=$e.prototype.ea,$e.prototype.setWithCredentials=$e.prototype.Fa,j_=$e}).apply(typeof Yo<"u"?Yo:typeof self<"u"?self:typeof window<"u"?window:{});const pp="@firebase/firestore",mp="4.9.2";class Tt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Tt.UNAUTHENTICATED=new Tt(null),Tt.GOOGLE_CREDENTIALS=new Tt("google-credentials-uid"),Tt.FIRST_PARTY=new Tt("first-party-uid"),Tt.MOCK_USER=new Tt("mock-user");let Ys="12.3.0";const rs=new qu("@firebase/firestore");function ys(){return rs.logLevel}function X(t,...e){if(rs.logLevel<=_e.DEBUG){const n=e.map(th);rs.debug(`Firestore (${Ys}): ${t}`,...n)}}function qn(t,...e){if(rs.logLevel<=_e.ERROR){const n=e.map(th);rs.error(`Firestore (${Ys}): ${t}`,...n)}}function Fs(t,...e){if(rs.logLevel<=_e.WARN){const n=e.map(th);rs.warn(`Firestore (${Ys}): ${t}`,...n)}}function th(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function ie(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,W_(t,r,n)}function W_(t,e,n){let r=`FIRESTORE (${Ys}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw qn(r),new Error(r)}function Ie(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||W_(e,s,r)}function he(t,e){return t}const D={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends Gn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class vn{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class z_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class B0{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Tt.UNAUTHENTICATED)))}shutdown(){}}class j0{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class q0{constructor(e){this.t=e,this.currentUser=Tt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ie(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new vn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new vn,e.enqueueRetryable((()=>s(this.currentUser)))};const o=()=>{const l=i;e.enqueueRetryable((async()=>{await l.promise,await s(this.currentUser)}))},c=l=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((l=>c(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?c(l):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new vn)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ie(typeof r.accessToken=="string",31837,{l:r}),new z_(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ie(e===null||typeof e=="string",2055,{h:e}),new Tt(e)}}class $0{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Tt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class H0{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new $0(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Tt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class gp{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class G0{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Gt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ie(this.o===void 0,3512);const r=i=>{i.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,X("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>r(i)))};const s=i=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>s(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new gp(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ie(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new gp(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function W0(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class nh{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=W0(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function ye(t,e){return t<e?-1:t>e?1:0}function ru(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Il(s)===Il(i)?ye(s,i):Il(s)?1:-1}return ye(t.length,e.length)}const z0=55296,K0=57343;function Il(t){const e=t.charCodeAt(0);return e>=z0&&e<=K0}function Us(t,e,n){return t.length===e.length&&t.every(((r,s)=>n(r,e[s])))}const _p="__name__";class gn{constructor(e,n,r){n===void 0?n=0:n>e.length&&ie(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ie(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return gn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof gn?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=gn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return ye(e.length,n.length)}static compareSegments(e,n){const r=gn.isNumericId(e),s=gn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?gn.extractNumericId(e).compare(gn.extractNumericId(n)):ru(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return _r.fromString(e.substring(4,e.length-2))}}class Ne extends gn{construct(e,n,r){return new Ne(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new G(D.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new Ne(n)}static emptyPath(){return new Ne([])}}const Q0=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dt extends gn{construct(e,n,r){return new dt(e,n,r)}static isValidIdentifier(e){return Q0.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===_p}static keyField(){return new dt([_p])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new G(D.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new G(D.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new G(D.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(r+=c,s++):(i(),s++)}if(i(),o)throw new G(D.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dt(n)}static emptyPath(){return new dt([])}}class ee{constructor(e){this.path=e}static fromPath(e){return new ee(Ne.fromString(e))}static fromName(e){return new ee(Ne.fromString(e).popFirst(5))}static empty(){return new ee(Ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ne.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ne.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ee(new Ne(e.slice()))}}function K_(t,e,n){if(!n)throw new G(D.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Y0(t,e,n,r){if(e===!0&&r===!0)throw new G(D.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function yp(t){if(!ee.isDocumentKey(t))throw new G(D.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Ep(t){if(ee.isDocumentKey(t))throw new G(D.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Q_(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function yc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ie(12329,{type:typeof t})}function Yt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new G(D.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=yc(t);throw new G(D.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function J0(t,e){if(e<=0)throw new G(D.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}function Xe(t,e){const n={typeString:t};return e&&(n.value=e),n}function bo(t,e){if(!Q_(t))throw new G(D.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new G(D.INVALID_ARGUMENT,n);return!0}const vp=-62135596800,Tp=1e6;class Ue{static now(){return Ue.fromMillis(Date.now())}static fromDate(e){return Ue.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Tp);return new Ue(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new G(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<vp)throw new G(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Tp}_compareTo(e){return this.seconds===e.seconds?ye(this.nanoseconds,e.nanoseconds):ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ue._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(bo(e,Ue._jsonSchema))return new Ue(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-vp;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ue._jsonSchemaVersion="firestore/timestamp/1.0",Ue._jsonSchema={type:Xe("string",Ue._jsonSchemaVersion),seconds:Xe("number"),nanoseconds:Xe("number")};class le{static fromTimestamp(e){return new le(e)}static min(){return new le(new Ue(0,0))}static max(){return new le(new Ue(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const no=-1;function X0(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=le.fromTimestamp(r===1e9?new Ue(n+1,0):new Ue(n,r));return new Ir(s,ee.empty(),e)}function Z0(t){return new Ir(t.readTime,t.key,no)}class Ir{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ir(le.min(),ee.empty(),no)}static max(){return new Ir(le.max(),ee.empty(),no)}}function eS(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ee.comparator(t.documentKey,e.documentKey),n!==0?n:ye(t.largestBatchId,e.largestBatchId))}const tS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Js(t){if(t.code!==D.FAILED_PRECONDITION||t.message!==tS)throw t;X("LocalStore","Unexpectedly lost primary lease")}class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U(((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):U.reject(n)}static resolve(e){return new U(((n,r)=>{n(e)}))}static reject(e){return new U(((n,r)=>{r(e)}))}static waitFor(e){return new U(((n,r)=>{let s=0,i=0,o=!1;e.forEach((c=>{++s,c.next((()=>{++i,o&&i===s&&n()}),(l=>r(l)))})),o=!0,i===s&&n()}))}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next((s=>s?U.resolve(s):r()));return n}static forEach(e,n){const r=[];return e.forEach(((s,i)=>{r.push(n.call(this,s,i))})),this.waitFor(r)}static mapArray(e,n){return new U(((r,s)=>{const i=e.length,o=new Array(i);let c=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next((f=>{o[u]=f,++c,c===i&&r(o)}),(f=>s(f)))}}))}static doWhile(e,n){return new U(((r,s)=>{const i=()=>{e()===!0?n().next((()=>{i()}),s):r()};i()}))}}function rS(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Xs(t){return t.name==="IndexedDbTransactionError"}class Ec{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ec.ce=-1;const rh=-1;function Ro(t){return t==null}function Ua(t){return t===0&&1/t==-1/0}function sS(t){return typeof t=="number"&&Number.isInteger(t)&&!Ua(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const Y_="";function iS(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=wp(e)),e=oS(t.get(n),e);return wp(e)}function oS(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case Y_:n+="";break;default:n+=i}}return n}function wp(t){return t+Y_+""}function Ip(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Nr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function J_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class qe{constructor(e,n){this.comparator=e,this.root=n||ut.EMPTY}insert(e,n){return new qe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ut.BLACK,null,null))}remove(e){return new qe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ut.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Jo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Jo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Jo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Jo(this.root,e,this.comparator,!0)}}class Jo{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ut{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??ut.RED,this.left=s??ut.EMPTY,this.right=i??ut.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new ut(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ut.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return ut.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ut.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ut.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ie(27949);return e+(this.isRed()?0:1)}}ut.EMPTY=null,ut.RED=!0,ut.BLACK=!1;ut.EMPTY=new class{constructor(){this.size=0}get key(){throw ie(57766)}get value(){throw ie(16141)}get color(){throw ie(16727)}get left(){throw ie(29726)}get right(){throw ie(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new ut(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class nt{constructor(e){this.comparator=e,this.data=new qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ap(this.data.getIterator())}getIteratorFrom(e){return new Ap(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof nt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new nt(this.comparator);return n.data=e,n}}class Ap{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class jt{constructor(e){this.fields=e,e.sort(dt.comparator)}static empty(){return new jt([])}unionWith(e){let n=new nt(dt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new jt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Us(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class X_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class mt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new X_("Invalid base64 string: "+i):i}})(e);return new mt(n)}static fromUint8Array(e){const n=(function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i})(e);return new mt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mt.EMPTY_BYTE_STRING=new mt("");const aS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ar(t){if(Ie(!!t,39018),typeof t=="string"){let e=0;const n=aS.exec(t);if(Ie(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ze(t.seconds),nanos:ze(t.nanos)}}function ze(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function br(t){return typeof t=="string"?mt.fromBase64String(t):mt.fromUint8Array(t)}const Z_="server_timestamp",ey="__type__",ty="__previous_value__",ny="__local_write_time__";function vc(t){return(t?.mapValue?.fields||{})[ey]?.stringValue===Z_}function Tc(t){const e=t.mapValue.fields[ty];return vc(e)?Tc(e):e}function ro(t){const e=Ar(t.mapValue.fields[ny].timestampValue);return new Ue(e.seconds,e.nanos)}class cS{constructor(e,n,r,s,i,o,c,l,u,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=f}}const Ba="(default)";class so{constructor(e,n){this.projectId=e,this.database=n||Ba}static empty(){return new so("","")}get isDefaultDatabase(){return this.database===Ba}isEqual(e){return e instanceof so&&e.projectId===this.projectId&&e.database===this.database}}const ry="__type__",lS="__max__",Xo={mapValue:{}},sy="__vector__",ja="value";function Rr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?vc(t)?4:hS(t)?9007199254740991:uS(t)?10:11:ie(28295,{value:t})}function bn(t,e){if(t===e)return!0;const n=Rr(t);if(n!==Rr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ro(t).isEqual(ro(e));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Ar(s.timestampValue),c=Ar(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,i){return br(s.bytesValue).isEqual(br(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,i){return ze(s.geoPointValue.latitude)===ze(i.geoPointValue.latitude)&&ze(s.geoPointValue.longitude)===ze(i.geoPointValue.longitude)})(t,e);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return ze(s.integerValue)===ze(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=ze(s.doubleValue),c=ze(i.doubleValue);return o===c?Ua(o)===Ua(c):isNaN(o)&&isNaN(c)}return!1})(t,e);case 9:return Us(t.arrayValue.values||[],e.arrayValue.values||[],bn);case 10:case 11:return(function(s,i){const o=s.mapValue.fields||{},c=i.mapValue.fields||{};if(Ip(o)!==Ip(c))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(c[l]===void 0||!bn(o[l],c[l])))return!1;return!0})(t,e);default:return ie(52216,{left:t})}}function io(t,e){return(t.values||[]).find((n=>bn(n,e)))!==void 0}function Bs(t,e){if(t===e)return 0;const n=Rr(t),r=Rr(e);if(n!==r)return ye(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ye(t.booleanValue,e.booleanValue);case 2:return(function(i,o){const c=ze(i.integerValue||i.doubleValue),l=ze(o.integerValue||o.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1})(t,e);case 3:return bp(t.timestampValue,e.timestampValue);case 4:return bp(ro(t),ro(e));case 5:return ru(t.stringValue,e.stringValue);case 6:return(function(i,o){const c=br(i),l=br(o);return c.compareTo(l)})(t.bytesValue,e.bytesValue);case 7:return(function(i,o){const c=i.split("/"),l=o.split("/");for(let u=0;u<c.length&&u<l.length;u++){const f=ye(c[u],l[u]);if(f!==0)return f}return ye(c.length,l.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,o){const c=ye(ze(i.latitude),ze(o.latitude));return c!==0?c:ye(ze(i.longitude),ze(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return Rp(t.arrayValue,e.arrayValue);case 10:return(function(i,o){const c=i.fields||{},l=o.fields||{},u=c[ja]?.arrayValue,f=l[ja]?.arrayValue,d=ye(u?.values?.length||0,f?.values?.length||0);return d!==0?d:Rp(u,f)})(t.mapValue,e.mapValue);case 11:return(function(i,o){if(i===Xo.mapValue&&o===Xo.mapValue)return 0;if(i===Xo.mapValue)return 1;if(o===Xo.mapValue)return-1;const c=i.fields||{},l=Object.keys(c),u=o.fields||{},f=Object.keys(u);l.sort(),f.sort();for(let d=0;d<l.length&&d<f.length;++d){const m=ru(l[d],f[d]);if(m!==0)return m;const _=Bs(c[l[d]],u[f[d]]);if(_!==0)return _}return ye(l.length,f.length)})(t.mapValue,e.mapValue);default:throw ie(23264,{he:n})}}function bp(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ye(t,e);const n=Ar(t),r=Ar(e),s=ye(n.seconds,r.seconds);return s!==0?s:ye(n.nanos,r.nanos)}function Rp(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Bs(n[s],r[s]);if(i)return i}return ye(n.length,r.length)}function js(t){return su(t)}function su(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=Ar(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return br(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return ee.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=su(i);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${su(n.fields[o])}`;return s+"}"})(t.mapValue):ie(61005,{value:t})}function da(t){switch(Rr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Tc(t);return e?16+da(e):16;case 5:return 2*t.stringValue.length;case 6:return br(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,i)=>s+da(i)),0)})(t.arrayValue);case 10:case 11:return(function(r){let s=0;return Nr(r.fields,((i,o)=>{s+=i.length+da(o)})),s})(t.mapValue);default:throw ie(13486,{value:t})}}function qa(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function iu(t){return!!t&&"integerValue"in t}function sh(t){return!!t&&"arrayValue"in t}function Sp(t){return!!t&&"nullValue"in t}function Pp(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function pa(t){return!!t&&"mapValue"in t}function uS(t){return(t?.mapValue?.fields||{})[ry]?.stringValue===sy}function Bi(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Nr(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Bi(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Bi(t.arrayValue.values[n]);return e}return{...t}}function hS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===lS}class Nt{constructor(e){this.value=e}static empty(){return new Nt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!pa(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bi(n)}setAll(e){let n=dt.emptyPath(),r={},s=[];e.forEach(((o,c)=>{if(!n.isImmediateParentOf(c)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=c.popLast()}o?r[c.lastSegment()]=Bi(o):s.push(c.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());pa(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return bn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];pa(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Nr(n,((s,i)=>e[s]=i));for(const s of r)delete e[s]}clone(){return new Nt(Bi(this.value))}}function iy(t){const e=[];return Nr(t.fields,((n,r)=>{const s=new dt([n]);if(pa(r)){const i=iy(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)})),new jt(e)}class ot{constructor(e,n,r,s,i,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=c}static newInvalidDocument(e){return new ot(e,0,le.min(),le.min(),le.min(),Nt.empty(),0)}static newFoundDocument(e,n,r,s){return new ot(e,1,n,le.min(),r,s,0)}static newNoDocument(e,n){return new ot(e,2,n,le.min(),le.min(),Nt.empty(),0)}static newUnknownDocument(e,n){return new ot(e,3,n,le.min(),le.min(),Nt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ot&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ot(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class qs{constructor(e,n){this.position=e,this.inclusive=n}}function Cp(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ee.comparator(ee.fromName(o.referenceValue),n.key):r=Bs(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function kp(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!bn(t.position[n],e.position[n]))return!1;return!0}class oo{constructor(e,n="asc"){this.field=e,this.dir=n}}function fS(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class oy{}class Je extends oy{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new pS(e,n,r):n==="array-contains"?new _S(e,r):n==="in"?new yS(e,r):n==="not-in"?new ES(e,r):n==="array-contains-any"?new vS(e,r):new Je(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new mS(e,r):new gS(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Bs(n,this.value)):n!==null&&Rr(this.value)===Rr(n)&&this.matchesComparison(Bs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ln extends oy{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ln(e,n)}matches(e){return ay(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ay(t){return t.op==="and"}function cy(t){return dS(t)&&ay(t)}function dS(t){for(const e of t.filters)if(e instanceof ln)return!1;return!0}function ou(t){if(t instanceof Je)return t.field.canonicalString()+t.op.toString()+js(t.value);if(cy(t))return t.filters.map((e=>ou(e))).join(",");{const e=t.filters.map((n=>ou(n))).join(",");return`${t.op}(${e})`}}function ly(t,e){return t instanceof Je?(function(r,s){return s instanceof Je&&r.op===s.op&&r.field.isEqual(s.field)&&bn(r.value,s.value)})(t,e):t instanceof ln?(function(r,s){return s instanceof ln&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((i,o,c)=>i&&ly(o,s.filters[c])),!0):!1})(t,e):void ie(19439)}function uy(t){return t instanceof Je?(function(n){return`${n.field.canonicalString()} ${n.op} ${js(n.value)}`})(t):t instanceof ln?(function(n){return n.op.toString()+" {"+n.getFilters().map(uy).join(" ,")+"}"})(t):"Filter"}class pS extends Je{constructor(e,n,r){super(e,n,r),this.key=ee.fromName(r.referenceValue)}matches(e){const n=ee.comparator(e.key,this.key);return this.matchesComparison(n)}}class mS extends Je{constructor(e,n){super(e,"in",n),this.keys=hy("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class gS extends Je{constructor(e,n){super(e,"not-in",n),this.keys=hy("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function hy(t,e){return(e.arrayValue?.values||[]).map((n=>ee.fromName(n.referenceValue)))}class _S extends Je{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return sh(n)&&io(n.arrayValue,this.value)}}class yS extends Je{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&io(this.value.arrayValue,n)}}class ES extends Je{constructor(e,n){super(e,"not-in",n)}matches(e){if(io(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!io(this.value.arrayValue,n)}}class vS extends Je{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!sh(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>io(this.value.arrayValue,r)))}}class TS{constructor(e,n=null,r=[],s=[],i=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=c,this.Te=null}}function Np(t,e=null,n=[],r=[],s=null,i=null,o=null){return new TS(t,e,n,r,s,i,o)}function ih(t){const e=he(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>ou(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(i){return i.field.canonicalString()+i.dir})(r))).join(","),Ro(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>js(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>js(r))).join(",")),e.Te=n}return e.Te}function oh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!fS(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!ly(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!kp(t.startAt,e.startAt)&&kp(t.endAt,e.endAt)}function au(t){return ee.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class as{constructor(e,n=null,r=[],s=[],i=null,o="F",c=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function wS(t,e,n,r,s,i,o,c){return new as(t,e,n,r,s,i,o,c)}function ah(t){return new as(t)}function xp(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ch(t){return t.collectionGroup!==null}function ks(t){const e=he(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new nt(dt.comparator);return o.filters.forEach((l=>{l.getFlattenedFilters().forEach((u=>{u.isInequality()&&(c=c.add(u.field))}))})),c})(e).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new oo(i,r))})),n.has(dt.keyField().canonicalString())||e.Ie.push(new oo(dt.keyField(),r))}return e.Ie}function Tn(t){const e=he(t);return e.Ee||(e.Ee=IS(e,ks(t))),e.Ee}function IS(t,e){if(t.limitType==="F")return Np(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const i=s.dir==="desc"?"asc":"desc";return new oo(s.field,i)}));const n=t.endAt?new qs(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new qs(t.startAt.position,t.startAt.inclusive):null;return Np(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function cu(t,e){const n=t.filters.concat([e]);return new as(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function $a(t,e,n){return new as(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function wc(t,e){return oh(Tn(t),Tn(e))&&t.limitType===e.limitType}function fy(t){return`${ih(Tn(t))}|lt:${t.limitType}`}function Es(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>uy(s))).join(", ")}]`),Ro(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>js(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>js(s))).join(",")),`Target(${r})`})(Tn(t))}; limitType=${t.limitType})`}function Ic(t,e){return e.isFoundDocument()&&(function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ee.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)})(t,e)&&(function(r,s){for(const i of ks(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0})(t,e)&&(function(r,s){return!(r.startAt&&!(function(o,c,l){const u=Cp(o,c,l);return o.inclusive?u<=0:u<0})(r.startAt,ks(r),s)||r.endAt&&!(function(o,c,l){const u=Cp(o,c,l);return o.inclusive?u>=0:u>0})(r.endAt,ks(r),s))})(t,e)}function AS(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function dy(t){return(e,n)=>{let r=!1;for(const s of ks(t)){const i=bS(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function bS(t,e,n){const r=t.field.isKeyField()?ee.comparator(e.key,n.key):(function(i,o,c){const l=o.data.field(i),u=c.data.field(i);return l!==null&&u!==null?Bs(l,u):ie(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ie(19790,{direction:t.dir})}}class cs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Nr(this.inner,((n,r)=>{for(const[s,i]of r)e(s,i)}))}isEmpty(){return J_(this.inner)}size(){return this.innerSize}}const RS=new qe(ee.comparator);function $n(){return RS}const py=new qe(ee.comparator);function Ai(...t){let e=py;for(const n of t)e=e.insert(n.key,n);return e}function my(t){let e=py;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Yr(){return ji()}function gy(){return ji()}function ji(){return new cs((t=>t.toString()),((t,e)=>t.isEqual(e)))}const SS=new qe(ee.comparator),PS=new nt(ee.comparator);function Ee(...t){let e=PS;for(const n of t)e=e.add(n);return e}const CS=new nt(ye);function kS(){return CS}function lh(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ua(e)?"-0":e}}function _y(t){return{integerValue:""+t}}function yy(t,e){return sS(e)?_y(e):lh(t,e)}class Ac{constructor(){this._=void 0}}function NS(t,e,n){return t instanceof ao?(function(s,i){const o={fields:{[ey]:{stringValue:Z_},[ny]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&vc(i)&&(i=Tc(i)),i&&(o.fields[ty]=i),{mapValue:o}})(n,e):t instanceof co?vy(t,e):t instanceof lo?Ty(t,e):(function(s,i){const o=Ey(s,i),c=Vp(o)+Vp(s.Ae);return iu(o)&&iu(s.Ae)?_y(c):lh(s.serializer,c)})(t,e)}function xS(t,e,n){return t instanceof co?vy(t,e):t instanceof lo?Ty(t,e):n}function Ey(t,e){return t instanceof uo?(function(r){return iu(r)||(function(i){return!!i&&"doubleValue"in i})(r)})(e)?e:{integerValue:0}:null}class ao extends Ac{}class co extends Ac{constructor(e){super(),this.elements=e}}function vy(t,e){const n=wy(e);for(const r of t.elements)n.some((s=>bn(s,r)))||n.push(r);return{arrayValue:{values:n}}}class lo extends Ac{constructor(e){super(),this.elements=e}}function Ty(t,e){let n=wy(e);for(const r of t.elements)n=n.filter((s=>!bn(s,r)));return{arrayValue:{values:n}}}class uo extends Ac{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Vp(t){return ze(t.integerValue||t.doubleValue)}function wy(t){return sh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Iy{constructor(e,n){this.field=e,this.transform=n}}function VS(t,e){return t.field.isEqual(e.field)&&(function(r,s){return r instanceof co&&s instanceof co||r instanceof lo&&s instanceof lo?Us(r.elements,s.elements,bn):r instanceof uo&&s instanceof uo?bn(r.Ae,s.Ae):r instanceof ao&&s instanceof ao})(t.transform,e.transform)}class DS{constructor(e,n){this.version=e,this.transformResults=n}}class pt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new pt}static exists(e){return new pt(void 0,e)}static updateTime(e){return new pt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ma(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class bc{}function Ay(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Rc(t.key,pt.none()):new So(t.key,t.data,pt.none());{const n=t.data,r=Nt.empty();let s=new nt(dt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new xr(t.key,r,new jt(s.toArray()),pt.none())}}function OS(t,e,n){t instanceof So?(function(s,i,o){const c=s.value.clone(),l=Op(s.fieldTransforms,i,o.transformResults);c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,n):t instanceof xr?(function(s,i,o){if(!ma(s.precondition,i))return void i.convertToUnknownDocument(o.version);const c=Op(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(by(s)),l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(t,e,n):(function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function qi(t,e,n,r){return t instanceof So?(function(i,o,c,l){if(!ma(i.precondition,o))return c;const u=i.value.clone(),f=Mp(i.fieldTransforms,l,o);return u.setAll(f),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null})(t,e,n,r):t instanceof xr?(function(i,o,c,l){if(!ma(i.precondition,o))return c;const u=Mp(i.fieldTransforms,l,o),f=o.data;return f.setAll(by(i)),f.setAll(u),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((d=>d.field)))})(t,e,n,r):(function(i,o,c){return ma(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c})(t,e,n)}function MS(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Ey(r.transform,s||null);i!=null&&(n===null&&(n=Nt.empty()),n.set(r.field,i))}return n||null}function Dp(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Us(r,s,((i,o)=>VS(i,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class So extends bc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class xr extends bc{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function by(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function Op(t,e,n){const r=new Map;Ie(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,c=e.data.field(i.field);r.set(i.field,xS(o,c,n[s]))}return r}function Mp(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,NS(i,o,e))}return r}class Rc extends bc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ry extends bc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class LS{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&OS(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=qi(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=qi(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=gy();return this.mutations.forEach((s=>{const i=e.get(s.key),o=i.overlayedDocument;let c=this.applyToLocalView(o,i.mutatedFields);c=n.has(s.key)?null:c;const l=Ay(o,c);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(le.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ee())}isEqual(e){return this.batchId===e.batchId&&Us(this.mutations,e.mutations,((n,r)=>Dp(n,r)))&&Us(this.baseMutations,e.baseMutations,((n,r)=>Dp(n,r)))}}class uh{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ie(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return SS})();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new uh(e,n,r,s)}}class FS{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class US{constructor(e,n){this.count=e,this.unchangedNames=n}}var Ye,we;function Sy(t){switch(t){case D.OK:return ie(64938);case D.CANCELLED:case D.UNKNOWN:case D.DEADLINE_EXCEEDED:case D.RESOURCE_EXHAUSTED:case D.INTERNAL:case D.UNAVAILABLE:case D.UNAUTHENTICATED:return!1;case D.INVALID_ARGUMENT:case D.NOT_FOUND:case D.ALREADY_EXISTS:case D.PERMISSION_DENIED:case D.FAILED_PRECONDITION:case D.ABORTED:case D.OUT_OF_RANGE:case D.UNIMPLEMENTED:case D.DATA_LOSS:return!0;default:return ie(15467,{code:t})}}function Py(t){if(t===void 0)return qn("GRPC error has no .code"),D.UNKNOWN;switch(t){case Ye.OK:return D.OK;case Ye.CANCELLED:return D.CANCELLED;case Ye.UNKNOWN:return D.UNKNOWN;case Ye.DEADLINE_EXCEEDED:return D.DEADLINE_EXCEEDED;case Ye.RESOURCE_EXHAUSTED:return D.RESOURCE_EXHAUSTED;case Ye.INTERNAL:return D.INTERNAL;case Ye.UNAVAILABLE:return D.UNAVAILABLE;case Ye.UNAUTHENTICATED:return D.UNAUTHENTICATED;case Ye.INVALID_ARGUMENT:return D.INVALID_ARGUMENT;case Ye.NOT_FOUND:return D.NOT_FOUND;case Ye.ALREADY_EXISTS:return D.ALREADY_EXISTS;case Ye.PERMISSION_DENIED:return D.PERMISSION_DENIED;case Ye.FAILED_PRECONDITION:return D.FAILED_PRECONDITION;case Ye.ABORTED:return D.ABORTED;case Ye.OUT_OF_RANGE:return D.OUT_OF_RANGE;case Ye.UNIMPLEMENTED:return D.UNIMPLEMENTED;case Ye.DATA_LOSS:return D.DATA_LOSS;default:return ie(39323,{code:t})}}(we=Ye||(Ye={}))[we.OK=0]="OK",we[we.CANCELLED=1]="CANCELLED",we[we.UNKNOWN=2]="UNKNOWN",we[we.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",we[we.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",we[we.NOT_FOUND=5]="NOT_FOUND",we[we.ALREADY_EXISTS=6]="ALREADY_EXISTS",we[we.PERMISSION_DENIED=7]="PERMISSION_DENIED",we[we.UNAUTHENTICATED=16]="UNAUTHENTICATED",we[we.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",we[we.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",we[we.ABORTED=10]="ABORTED",we[we.OUT_OF_RANGE=11]="OUT_OF_RANGE",we[we.UNIMPLEMENTED=12]="UNIMPLEMENTED",we[we.INTERNAL=13]="INTERNAL",we[we.UNAVAILABLE=14]="UNAVAILABLE",we[we.DATA_LOSS=15]="DATA_LOSS";function BS(){return new TextEncoder}const jS=new _r([4294967295,4294967295],0);function Lp(t){const e=BS().encode(t),n=new B_;return n.update(e),new Uint8Array(n.digest())}function Fp(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new _r([n,r],0),new _r([s,i],0)]}class hh{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new bi(`Invalid padding: ${n}`);if(r<0)throw new bi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new bi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new bi(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=_r.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(_r.fromNumber(r)));return s.compare(jS)===1&&(s=new _r([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Lp(e),[r,s]=Fp(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new hh(i,s,n);return r.forEach((c=>o.insert(c))),o}insert(e){if(this.ge===0)return;const n=Lp(e),[r,s]=Fp(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class bi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Sc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Po.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Sc(le.min(),s,new qe(ye),$n(),Ee())}}class Po{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Po(r,n,Ee(),Ee(),Ee())}}class ga{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class Cy{constructor(e,n){this.targetId=e,this.Ce=n}}class ky{constructor(e,n,r=mt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Up{constructor(){this.ve=0,this.Fe=Bp(),this.Me=mt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ee(),n=Ee(),r=Ee();return this.Fe.forEach(((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ie(38017,{changeType:i})}})),new Po(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Bp()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ie(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class qS{constructor(e){this.Ge=e,this.ze=new Map,this.je=$n(),this.Je=Zo(),this.He=Zo(),this.Ye=new qe(ye)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ie(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,s)=>{this.rt(s)&&n(s)}))}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(au(i))if(r===0){const o=new ee(i.path);this.et(n,o,ot.newNoDocument(o,le.min()))}else Ie(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const c=this.ut(e),l=c?this.ct(c,e,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,c;try{o=br(r).toUint8Array()}catch(l){if(l instanceof X_)return Fs("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new hh(o,s,i)}catch(l){return Fs(l instanceof bi?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach((i=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.et(n,i,null),s++)})),s}Tt(e){const n=new Map;this.ze.forEach(((i,o)=>{const c=this.ot(o);if(c){if(i.current&&au(c.target)){const l=new ee(c.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,ot.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}}));let r=Ee();this.He.forEach(((i,o)=>{let c=!0;o.forEachWhile((l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(r=r.add(i))})),this.je.forEach(((i,o)=>o.setReadTime(e)));const s=new Sc(e,n,this.Ye,this.je,r);return this.je=$n(),this.Je=Zo(),this.He=Zo(),this.Ye=new qe(ye),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Up,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new nt(ye),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new nt(ye),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||X("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Up),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Zo(){return new qe(ee.comparator)}function Bp(){return new qe(ee.comparator)}const $S={asc:"ASCENDING",desc:"DESCENDING"},HS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},GS={and:"AND",or:"OR"};class WS{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function lu(t,e){return t.useProto3Json||Ro(e)?e:{value:e}}function Ha(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ny(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function zS(t,e){return Ha(t,e.toTimestamp())}function qt(t){return Ie(!!t,49232),le.fromTimestamp((function(n){const r=Ar(n);return new Ue(r.seconds,r.nanos)})(t))}function fh(t,e){return uu(t,e).canonicalString()}function uu(t,e){const n=(function(s){return new Ne(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function xy(t){const e=Ne.fromString(t);return Ie(Fy(e),10190,{key:e.toString()}),e}function Ga(t,e){return fh(t.databaseId,e.path)}function $i(t,e){const n=xy(e);if(n.get(1)!==t.databaseId.projectId)throw new G(D.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new G(D.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ee(Dy(n))}function Vy(t,e){return fh(t.databaseId,e)}function KS(t){const e=xy(t);return e.length===4?Ne.emptyPath():Dy(e)}function hu(t){return new Ne(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Dy(t){return Ie(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function jp(t,e,n){return{name:Ga(t,e),fields:n.value.mapValue.fields}}function QS(t,e){return"found"in e?(function(r,s){Ie(!!s.found,43571),s.found.name,s.found.updateTime;const i=$i(r,s.found.name),o=qt(s.found.updateTime),c=s.found.createTime?qt(s.found.createTime):le.min(),l=new Nt({mapValue:{fields:s.found.fields}});return ot.newFoundDocument(i,o,c,l)})(t,e):"missing"in e?(function(r,s){Ie(!!s.missing,3894),Ie(!!s.readTime,22933);const i=$i(r,s.missing),o=qt(s.readTime);return ot.newNoDocument(i,o)})(t,e):ie(7234,{result:e})}function YS(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ie(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=(function(u,f){return u.useProto3Json?(Ie(f===void 0||typeof f=="string",58123),mt.fromBase64String(f||"")):(Ie(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),mt.fromUint8Array(f||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&(function(u){const f=u.code===void 0?D.UNKNOWN:Py(u.code);return new G(f,u.message||"")})(o);n=new ky(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=$i(t,r.document.name),i=qt(r.document.updateTime),o=r.document.createTime?qt(r.document.createTime):le.min(),c=new Nt({mapValue:{fields:r.document.fields}}),l=ot.newFoundDocument(s,i,o,c),u=r.targetIds||[],f=r.removedTargetIds||[];n=new ga(u,f,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=$i(t,r.document),i=r.readTime?qt(r.readTime):le.min(),o=ot.newNoDocument(s,i),c=r.removedTargetIds||[];n=new ga([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=$i(t,r.document),i=r.removedTargetIds||[];n=new ga([],i,s,null)}else{if(!("filter"in e))return ie(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new US(s,i),c=r.targetId;n=new Cy(c,o)}}return n}function Oy(t,e){let n;if(e instanceof So)n={update:jp(t,e.key,e.value)};else if(e instanceof Rc)n={delete:Ga(t,e.key)};else if(e instanceof xr)n={update:jp(t,e.key,e.data),updateMask:iP(e.fieldMask)};else{if(!(e instanceof Ry))return ie(16599,{Vt:e.type});n={verify:Ga(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(i,o){const c=o.transform;if(c instanceof ao)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof co)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof lo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof uo)return{fieldPath:o.field.canonicalString(),increment:c.Ae};throw ie(20930,{transform:o.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:zS(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ie(27497)})(t,e.precondition)),n}function JS(t,e){return t&&t.length>0?(Ie(e!==void 0,14353),t.map((n=>(function(s,i){let o=s.updateTime?qt(s.updateTime):qt(i);return o.isEqual(le.min())&&(o=qt(i)),new DS(o,s.transformResults||[])})(n,e)))):[]}function XS(t,e){return{documents:[Vy(t,e.path)]}}function ZS(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Vy(t,s);const i=(function(u){if(u.length!==0)return Ly(ln.create(u,"and"))})(e.filters);i&&(n.structuredQuery.where=i);const o=(function(u){if(u.length!==0)return u.map((f=>(function(m){return{field:vs(m.field),direction:nP(m.dir)}})(f)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=lu(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:n,parent:s}}function eP(t){let e=KS(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ie(r===1,65062);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=(function(d){const m=My(d);return m instanceof ln&&cy(m)?m.getFilters():[m]})(n.where));let o=[];n.orderBy&&(o=(function(d){return d.map((m=>(function(S){return new oo(Ts(S.field),(function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(m)))})(n.orderBy));let c=null;n.limit&&(c=(function(d){let m;return m=typeof d=="object"?d.value:d,Ro(m)?null:m})(n.limit));let l=null;n.startAt&&(l=(function(d){const m=!!d.before,_=d.values||[];return new qs(_,m)})(n.startAt));let u=null;return n.endAt&&(u=(function(d){const m=!d.before,_=d.values||[];return new qs(_,m)})(n.endAt)),wS(e,s,o,i,c,"F",l,u)}function tP(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ie(28987,{purpose:s})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function My(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ts(n.unaryFilter.field);return Je.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ts(n.unaryFilter.field);return Je.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ts(n.unaryFilter.field);return Je.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ts(n.unaryFilter.field);return Je.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ie(61313);default:return ie(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Je.create(Ts(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ie(58110);default:return ie(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return ln.create(n.compositeFilter.filters.map((r=>My(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ie(1026)}})(n.compositeFilter.op))})(t):ie(30097,{filter:t})}function nP(t){return $S[t]}function rP(t){return HS[t]}function sP(t){return GS[t]}function vs(t){return{fieldPath:t.canonicalString()}}function Ts(t){return dt.fromServerFormat(t.fieldPath)}function Ly(t){return t instanceof Je?(function(n){if(n.op==="=="){if(Pp(n.value))return{unaryFilter:{field:vs(n.field),op:"IS_NAN"}};if(Sp(n.value))return{unaryFilter:{field:vs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Pp(n.value))return{unaryFilter:{field:vs(n.field),op:"IS_NOT_NAN"}};if(Sp(n.value))return{unaryFilter:{field:vs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vs(n.field),op:rP(n.op),value:n.value}}})(t):t instanceof ln?(function(n){const r=n.getFilters().map((s=>Ly(s)));return r.length===1?r[0]:{compositeFilter:{op:sP(n.op),filters:r}}})(t):ie(54877,{filter:t})}function iP(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function Fy(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class lr{constructor(e,n,r,s,i=le.min(),o=le.min(),c=mt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new lr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new lr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new lr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new lr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class oP{constructor(e){this.yt=e}}function aP(t){const e=eP({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?$a(e,e.limit,"L"):e}class cP{constructor(){this.Cn=new lP}addToCollectionParentIndex(e,n){return this.Cn.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(Ir.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(Ir.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class lP{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new nt(Ne.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new nt(Ne.comparator)).toArray()}}const qp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Uy=41943040;class Vt{static withCacheSize(e){return new Vt(e,Vt.DEFAULT_COLLECTION_PERCENTILE,Vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}Vt.DEFAULT_COLLECTION_PERCENTILE=10,Vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vt.DEFAULT=new Vt(Uy,Vt.DEFAULT_COLLECTION_PERCENTILE,Vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vt.DISABLED=new Vt(-1,0,0);class $s{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new $s(0)}static cr(){return new $s(-1)}}const $p="LruGarbageCollector",uP=1048576;function Hp([t,e],[n,r]){const s=ye(t,n);return s===0?ye(e,r):s}class hP{constructor(e){this.Ir=e,this.buffer=new nt(Hp),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Hp(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class fP{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){X($p,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Xs(n)?X($p,"Ignoring IndexedDB error during garbage collection: ",n):await Js(n)}await this.Vr(3e5)}))}}class dP{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return U.resolve(Ec.ce);const r=new hP(n);return this.mr.forEachTarget(e,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(X("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(qp)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(X("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),qp):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,c,l,u;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((d=>(d>this.params.maximumSequenceNumbersToCollect?(X("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),s=this.params.maximumSequenceNumbersToCollect):s=d,o=Date.now(),this.nthSequenceNumber(e,s)))).next((d=>(r=d,c=Date.now(),this.removeTargets(e,r,n)))).next((d=>(i=d,l=Date.now(),this.removeOrphanedDocuments(e,r)))).next((d=>(u=Date.now(),ys()<=_e.DEBUG&&X("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${s} in `+(c-o)+`ms
	Removed ${i} targets in `+(l-c)+`ms
	Removed ${d} documents in `+(u-l)+`ms
Total Duration: ${u-f}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:d}))))}}function pP(t,e){return new dP(t,e)}class mP{constructor(){this.changes=new cs((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ot.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class gP{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class _P{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(r!==null&&qi(r.mutation,s,jt.empty(),Ue.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Ee()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Ee()){const s=Yr();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,r).next((i=>{let o=Ai();return i.forEach(((c,l)=>{o=o.insert(c,l.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const r=Yr();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Ee())))}populateOverlays(e,n,r){const s=[];return r.forEach((i=>{n.has(i)||s.push(i)})),this.documentOverlayCache.getOverlays(e,s).next((i=>{i.forEach(((o,c)=>{n.set(o,c)}))}))}computeViews(e,n,r,s){let i=$n();const o=ji(),c=(function(){return ji()})();return n.forEach(((l,u)=>{const f=r.get(u.key);s.has(u.key)&&(f===void 0||f.mutation instanceof xr)?i=i.insert(u.key,u):f!==void 0?(o.set(u.key,f.mutation.getFieldMask()),qi(f.mutation,u,f.mutation.getFieldMask(),Ue.now())):o.set(u.key,jt.empty())})),this.recalculateAndSaveOverlays(e,i).next((l=>(l.forEach(((u,f)=>o.set(u,f))),n.forEach(((u,f)=>c.set(u,new gP(f,o.get(u)??null)))),c)))}recalculateAndSaveOverlays(e,n){const r=ji();let s=new qe(((o,c)=>o-c)),i=Ee();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const c of o)c.keys().forEach((l=>{const u=n.get(l);if(u===null)return;let f=r.get(l)||jt.empty();f=c.applyToLocalView(u,f),r.set(l,f);const d=(s.get(c.batchId)||Ee()).add(l);s=s.insert(c.batchId,d)}))})).next((()=>{const o=[],c=s.getReverseIterator();for(;c.hasNext();){const l=c.getNext(),u=l.key,f=l.value,d=gy();f.forEach((m=>{if(!i.has(m)){const _=Ay(n.get(m),r.get(m));_!==null&&d.set(m,_),i=i.add(m)}})),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return U.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,s){return(function(o){return ee.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ch(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next((i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):U.resolve(Yr());let c=no,l=i;return o.next((u=>U.forEach(u,((f,d)=>(c<d.largestBatchId&&(c=d.largestBatchId),i.get(f)?U.resolve():this.remoteDocumentCache.getEntry(e,f).next((m=>{l=l.insert(f,m)}))))).next((()=>this.populateOverlays(e,u,i))).next((()=>this.computeViews(e,l,u,Ee()))).next((f=>({batchId:c,changes:my(f)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ee(n)).next((r=>{let s=Ai();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Ai();return this.indexManager.getCollectionParents(e,i).next((c=>U.forEach(c,(l=>{const u=(function(d,m){return new as(m,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)})(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next((f=>{f.forEach(((d,m)=>{o=o.insert(d,m)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s)))).next((o=>{i.forEach(((l,u)=>{const f=u.getKey();o.get(f)===null&&(o=o.insert(f,ot.newInvalidDocument(f)))}));let c=Ai();return o.forEach(((l,u)=>{const f=i.get(l);f!==void 0&&qi(f.mutation,u,jt.empty(),Ue.now()),Ic(n,u)&&(c=c.insert(l,u))})),c}))}}class yP{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return U.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:qt(s.createTime)}})(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(s){return{name:s.name,query:aP(s.bundledQuery),readTime:qt(s.readTime)}})(n)),U.resolve()}}class EP{constructor(){this.overlays=new qe(ee.comparator),this.qr=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Yr();return U.forEach(n,(s=>this.getOverlay(e,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((s,i)=>{this.St(e,n,i)})),U.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((i=>this.overlays=this.overlays.remove(i))),this.qr.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const s=Yr(),i=n.length+1,o=new ee(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const l=c.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return U.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new qe(((u,f)=>u-f));const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let f=i.get(u.largestBatchId);f===null&&(f=Yr(),i=i.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}const c=Yr(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((u,f)=>c.set(u,f))),!(c.size()>=s)););return U.resolve(c)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new FS(n,r));let i=this.qr.get(n);i===void 0&&(i=Ee(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}class vP{constructor(){this.sessionToken=mt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}class dh{constructor(){this.Qr=new nt(it.$r),this.Ur=new nt(it.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new it(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new it(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new ee(new Ne([])),r=new it(n,e),s=new it(n,e+1),i=[];return this.Ur.forEachInRange([r,s],(o=>{this.Gr(o),i.push(o.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ee(new Ne([])),r=new it(n,e),s=new it(n,e+1);let i=Ee();return this.Ur.forEachInRange([r,s],(o=>{i=i.add(o.key)})),i}containsKey(e){const n=new it(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class it{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ee.comparator(e.key,n.key)||ye(e.Yr,n.Yr)}static Kr(e,n){return ye(e.Yr,n.Yr)||ee.comparator(e.key,n.key)}}class TP{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new nt(it.$r)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new LS(i,n,r,s);this.mutationQueue.push(o);for(const c of s)this.Zr=this.Zr.add(new it(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return U.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?rh:this.tr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new it(n,0),s=new it(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],(o=>{const c=this.Xr(o.Yr);i.push(c)})),U.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new nt(ye);return n.forEach((s=>{const i=new it(s,0),o=new it(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],(c=>{r=r.add(c.Yr)}))})),U.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ee.isDocumentKey(i)||(i=i.child(""));const o=new it(new ee(i),0);let c=new nt(ye);return this.Zr.forEachWhile((l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(c=c.add(l.Yr)),!0)}),o),U.resolve(this.ti(c))}ti(e){const n=[];return e.forEach((r=>{const s=this.Xr(r);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){Ie(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return U.forEach(n.mutations,(s=>{const i=new it(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new it(n,0),s=this.Zr.firstAfterOrEqual(r);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class wP{constructor(e){this.ri=e,this.docs=(function(){return new qe(ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():ot.newInvalidDocument(n))}getEntries(e,n){let r=$n();return n.forEach((s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ot.newInvalidDocument(s))})),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=$n();const o=n.path,c=new ee(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){const{key:u,value:{document:f}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||eS(Z0(f),r)<=0||(s.has(f.key)||Ic(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return U.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ie(9500)}ii(e,n){return U.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new IP(this)}getSize(e){return U.resolve(this.size)}}class IP extends mP{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)})),U.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class AP{constructor(e){this.persistence=e,this.si=new cs((n=>ih(n)),oh),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.oi=0,this._i=new dh,this.targetCount=0,this.ai=$s.ur()}forEachTarget(e,n){return this.si.forEach(((r,s)=>n(s))),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),U.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new $s(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Pr(n),U.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach(((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)})),U.waitFor(i).next((()=>s))}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach((o=>{i.push(s.markPotentiallyOrphaned(e,o))})),U.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this._i.containsKey(n))}}class By{constructor(e,n){this.ui={},this.overlays={},this.ci=new Ec(0),this.li=!1,this.li=!0,this.hi=new vP,this.referenceDelegate=e(this),this.Pi=new AP(this),this.indexManager=new cP,this.remoteDocumentCache=(function(s){return new wP(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new oP(n),this.Ii=new yP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new EP,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new TP(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){X("MemoryPersistence","Starting transaction:",e);const s=new bP(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((i=>this.referenceDelegate.di(s).next((()=>i)))).toPromise().then((i=>(s.raiseOnCommittedEvent(),i)))}Ai(e,n){return U.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class bP extends nS{constructor(e){super(),this.currentSequenceNumber=e}}class ph{constructor(e){this.persistence=e,this.Ri=new dh,this.Vi=null}static mi(e){return new ph(e)}get fi(){if(this.Vi)return this.Vi;throw ie(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),U.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((i=>this.fi.add(i.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.fi,(r=>{const s=ee.fromPath(r);return this.gi(e,s).next((i=>{i||n.removeEntry(s,le.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return U.or([()=>U.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Wa{constructor(e,n){this.persistence=e,this.pi=new cs((r=>iS(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=pP(this,n)}static mi(e,n){return new Wa(e,n)}Ei(){}di(e){return U.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((s=>r+s))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return U.forEach(this.pi,((r,s)=>this.br(e,r,s).next((i=>i?U.resolve():n(s)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,(o=>this.br(e,o,n).next((c=>{c||(r++,i.removeEntry(o,le.min()))})))).next((()=>i.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),U.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),U.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),U.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=da(e.data.value)),n}br(e,n,r){return U.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return U.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class mh{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Ee(),s=Ee();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new mh(e,n.fromCache,r,s)}}class RP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class SP{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return iA()?8:rS(It())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.ws(e,n,s,r).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new RP;return this.Ss(e,n,o).next((c=>{if(i.result=c,this.Vs)return this.bs(e,n,o,c.size)}))})).next((()=>i.result))}bs(e,n,r,s){return r.documentReadCount<this.fs?(ys()<=_e.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",Es(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),U.resolve()):(ys()<=_e.DEBUG&&X("QueryEngine","Query:",Es(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(ys()<=_e.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",Es(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Tn(n))):U.resolve())}ys(e,n){if(xp(n))return U.resolve(null);let r=Tn(n);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=$a(n,null,"F"),r=Tn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((i=>{const o=Ee(...i);return this.ps.getDocuments(e,o).next((c=>this.indexManager.getMinOffset(e,r).next((l=>{const u=this.Ds(n,c);return this.Cs(n,u,o,l.readTime)?this.ys(e,$a(n,null,"F")):this.vs(e,u,n,l)}))))})))))}ws(e,n,r,s){return xp(n)||s.isEqual(le.min())?U.resolve(null):this.ps.getDocuments(e,r).next((i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?U.resolve(null):(ys()<=_e.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Es(n)),this.vs(e,o,n,X0(s,no)).next((c=>c)))}))}Ds(e,n){let r=new nt(dy(e));return n.forEach(((s,i)=>{Ic(e,i)&&(r=r.add(i))})),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return ys()<=_e.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",Es(n)),this.ps.getDocumentsMatchingQuery(e,n,Ir.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next((i=>(n.forEach((o=>{i=i.insert(o.key,o)})),i)))}}const gh="LocalStore",PP=3e8;class CP{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new qe(ye),this.xs=new cs((i=>ih(i)),oh),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _P(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function kP(t,e,n,r){return new CP(t,e,n,r)}async function jy(t,e){const n=he(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((i=>{const o=[],c=[];let l=Ee();for(const u of s){o.push(u.batchId);for(const f of u.mutations)l=l.add(f.key)}for(const u of i){c.push(u.batchId);for(const f of u.mutations)l=l.add(f.key)}return n.localDocuments.getDocuments(r,l).next((u=>({Ls:u,removedBatchIds:o,addedBatchIds:c})))}))}))}function NP(t,e){const n=he(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,l,u,f){const d=u.batch,m=d.keys();let _=U.resolve();return m.forEach((S=>{_=_.next((()=>f.getEntry(l,S))).next((N=>{const C=u.docVersions.get(S);Ie(C!==null,48541),N.version.compareTo(C)<0&&(d.applyToRemoteDocument(N,u),N.isValidDocument()&&(N.setReadTime(u.commitVersion),f.addEntry(N)))}))})),_.next((()=>c.mutationQueue.removeMutationBatch(l,d)))})(n,r,e,i).next((()=>i.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let l=Ee();for(let u=0;u<c.mutationResults.length;++u)c.mutationResults[u].transformResults.length>0&&(l=l.add(c.batch.mutations[u].key));return l})(e)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function qy(t){const e=he(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function xP(t,e){const n=he(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const c=[];e.targetChanges.forEach(((f,d)=>{const m=s.get(d);if(!m)return;c.push(n.Pi.removeMatchingKeys(i,f.removedDocuments,d).next((()=>n.Pi.addMatchingKeys(i,f.addedDocuments,d))));let _=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?_=_.withResumeToken(mt.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):f.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(f.resumeToken,r)),s=s.insert(d,_),(function(N,C,x){return N.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=PP?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0})(m,_,f)&&c.push(n.Pi.updateTargetData(i,_))}));let l=$n(),u=Ee();if(e.documentUpdates.forEach((f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))})),c.push(VP(i,o,e.documentUpdates).next((f=>{l=f.ks,u=f.qs}))),!r.isEqual(le.min())){const f=n.Pi.getLastRemoteSnapshotVersion(i).next((d=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r)));c.push(f)}return U.waitFor(c).next((()=>o.apply(i))).next((()=>n.localDocuments.getLocalViewOfDocuments(i,l,u))).next((()=>l))})).then((i=>(n.Ms=s,i)))}function VP(t,e,n){let r=Ee(),s=Ee();return n.forEach((i=>r=r.add(i))),e.getEntries(t,r).next((i=>{let o=$n();return n.forEach(((c,l)=>{const u=i.get(c);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(c)),l.isNoDocument()&&l.version.isEqual(le.min())?(e.removeEntry(c,l.readTime),o=o.insert(c,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(c,l)):X(gh,"Ignoring outdated watch update for ",c,". Current version:",u.version," Watch version:",l.version)})),{ks:o,qs:s}}))}function DP(t,e){const n=he(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=rh),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function OP(t,e){const n=he(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.Pi.getTargetData(r,e).next((i=>i?(s=i,U.resolve(s)):n.Pi.allocateTargetId(r).next((o=>(s=new lr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function fu(t,e,n){const r=he(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,(o=>r.persistence.referenceDelegate.removeTarget(o,s)))}catch(o){if(!Xs(o))throw o;X(gh,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function Gp(t,e,n){const r=he(t);let s=le.min(),i=Ee();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(l,u,f){const d=he(l),m=d.xs.get(f);return m!==void 0?U.resolve(d.Ms.get(m)):d.Pi.getTargetData(u,f)})(r,o,Tn(e)).next((c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,c.targetId).next((l=>{i=l}))})).next((()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:le.min(),n?i:Ee()))).next((c=>(MP(r,AS(e),c),{documents:c,Qs:i})))))}function MP(t,e,n){let r=t.Os.get(e)||le.min();n.forEach(((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)})),t.Os.set(e,r)}class Wp{constructor(){this.activeTargetIds=kS()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class LP{constructor(){this.Mo=new Wp,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Wp,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class FP{Oo(e){}shutdown(){}}const zp="ConnectivityMonitor";class Kp{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){X(zp,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){X(zp,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let ea=null;function du(){return ea===null?ea=(function(){return 268435456+Math.round(2147483648*Math.random())})():ea++,"0x"+ea.toString(16)}const Al="RestConnection",UP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class BP{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Ba?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=du(),c=this.zo(e,n.toUriEncodedString());X(Al,`Sending RPC '${e}' ${o}:`,c,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,i);const{host:u}=new URL(c),f=zs(u);return this.Jo(e,c,l,r,f).then((d=>(X(Al,`Received RPC '${e}' ${o}: `,d),d)),(d=>{throw Fs(Al,`RPC '${e}' ${o} failed with error: `,d,"url: ",c,"request:",r),d}))}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ys})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,i)=>e[i]=s)),r&&r.headers.forEach(((s,i)=>e[i]=s))}zo(e,n){const r=UP[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}class jP{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Et="WebChannelConnection";class qP extends BP{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=du();return new Promise(((c,l)=>{const u=new j_;u.setWithCredentials(!0),u.listenOnce(q_.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case fa.NO_ERROR:const d=u.getResponseJson();X(Et,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),c(d);break;case fa.TIMEOUT:X(Et,`RPC '${e}' ${o} timed out`),l(new G(D.DEADLINE_EXCEEDED,"Request time out"));break;case fa.HTTP_ERROR:const m=u.getStatus();if(X(Et,`RPC '${e}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let _=u.getResponseJson();Array.isArray(_)&&(_=_[0]);const S=_?.error;if(S&&S.status&&S.message){const N=(function(x){const O=x.toLowerCase().replace(/_/g,"-");return Object.values(D).indexOf(O)>=0?O:D.UNKNOWN})(S.status);l(new G(N,S.message))}else l(new G(D.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new G(D.UNAVAILABLE,"Connection failed."));break;default:ie(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{X(Et,`RPC '${e}' ${o} completed.`)}}));const f=JSON.stringify(s);X(Et,`RPC '${e}' ${o} sending request:`,s),u.send(n,"POST",f,r,15)}))}T_(e,n,r){const s=du(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=G_(),c=H_(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const f=i.join("");X(Et,`Creating RPC '${e}' stream ${s}: ${f}`,l);const d=o.createWebChannel(f,l);this.I_(d);let m=!1,_=!1;const S=new jP({Yo:C=>{_?X(Et,`Not sending because RPC '${e}' stream ${s} is closed:`,C):(m||(X(Et,`Opening RPC '${e}' stream ${s} transport.`),d.open(),m=!0),X(Et,`RPC '${e}' stream ${s} sending:`,C),d.send(C))},Zo:()=>d.close()}),N=(C,x,O)=>{C.listen(x,(H=>{try{O(H)}catch(W){setTimeout((()=>{throw W}),0)}}))};return N(d,Ii.EventType.OPEN,(()=>{_||(X(Et,`RPC '${e}' stream ${s} transport opened.`),S.o_())})),N(d,Ii.EventType.CLOSE,(()=>{_||(_=!0,X(Et,`RPC '${e}' stream ${s} transport closed`),S.a_(),this.E_(d))})),N(d,Ii.EventType.ERROR,(C=>{_||(_=!0,Fs(Et,`RPC '${e}' stream ${s} transport errored. Name:`,C.name,"Message:",C.message),S.a_(new G(D.UNAVAILABLE,"The operation could not be completed")))})),N(d,Ii.EventType.MESSAGE,(C=>{if(!_){const x=C.data[0];Ie(!!x,16349);const O=x,H=O?.error||O[0]?.error;if(H){X(Et,`RPC '${e}' stream ${s} received error:`,H);const W=H.status;let Z=(function(E){const y=Ye[E];if(y!==void 0)return Py(y)})(W),te=H.message;Z===void 0&&(Z=D.INTERNAL,te="Unknown error status: "+W+" with message "+H.message),_=!0,S.a_(new G(Z,te)),d.close()}else X(Et,`RPC '${e}' stream ${s} received:`,x),S.u_(x)}})),N(c,$_.STAT_EVENT,(C=>{C.stat===nu.PROXY?X(Et,`RPC '${e}' stream ${s} detected buffering proxy`):C.stat===nu.NOPROXY&&X(Et,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{S.__()}),0),S}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function bl(){return typeof document<"u"?document:null}function Pc(t){return new WS(t,!0)}class _h{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&X("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Qp="PersistentStream";class $y{constructor(e,n,r,s,i,o,c,l){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new _h(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===D.RESOURCE_EXHAUSTED?(qn(n.toString()),qn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===D.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===n&&this.G_(r,s)}),(r=>{e((()=>{const s=new G(D.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return X(Qp,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(X(Qp,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class $P extends $y{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=YS(this.serializer,e),r=(function(i){if(!("targetChange"in i))return le.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?le.min():o.readTime?qt(o.readTime):le.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=hu(this.serializer),n.addTarget=(function(i,o){let c;const l=o.target;if(c=au(l)?{documents:XS(i,l)}:{query:ZS(i,l).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=Ny(i,o.resumeToken);const u=lu(i,o.expectedCount);u!==null&&(c.expectedCount=u)}else if(o.snapshotVersion.compareTo(le.min())>0){c.readTime=Ha(i,o.snapshotVersion.toTimestamp());const u=lu(i,o.expectedCount);u!==null&&(c.expectedCount=u)}return c})(this.serializer,e);const r=tP(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=hu(this.serializer),n.removeTarget=e,this.q_(n)}}class HP extends $y{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ie(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ie(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ie(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=JS(e.writeResults,e.commitTime),r=qt(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=hu(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>Oy(this.serializer,r)))};this.q_(n)}}class GP{}class WP extends GP{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new G(D.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Go(e,uu(n,r),s,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new G(D.UNKNOWN,i.toString())}))}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Ho(e,uu(n,r),s,o,c,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(D.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class zP{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(qn(n),this.aa=!1):X("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const ss="RemoteStore";class KP{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((o=>{r.enqueueAndForget((async()=>{ls(this)&&(X(ss,"Restarting streams for network reachability change."),await(async function(l){const u=he(l);u.Ea.add(4),await Co(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Cc(u)})(this))}))})),this.Ra=new zP(r,s)}}async function Cc(t){if(ls(t))for(const e of t.da)await e(!0)}async function Co(t){for(const e of t.da)await e(!1)}function Hy(t,e){const n=he(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Th(n)?vh(n):Zs(n).O_()&&Eh(n,e))}function yh(t,e){const n=he(t),r=Zs(n);n.Ia.delete(e),r.O_()&&Gy(n,e),n.Ia.size===0&&(r.O_()?r.L_():ls(n)&&n.Ra.set("Unknown"))}function Eh(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Zs(t).Y_(e)}function Gy(t,e){t.Va.Ue(e),Zs(t).Z_(e)}function vh(t){t.Va=new qS({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Zs(t).start(),t.Ra.ua()}function Th(t){return ls(t)&&!Zs(t).x_()&&t.Ia.size>0}function ls(t){return he(t).Ea.size===0}function Wy(t){t.Va=void 0}async function QP(t){t.Ra.set("Online")}async function YP(t){t.Ia.forEach(((e,n)=>{Eh(t,e)}))}async function JP(t,e){Wy(t),Th(t)?(t.Ra.ha(e),vh(t)):t.Ra.set("Unknown")}async function XP(t,e,n){if(t.Ra.set("Online"),e instanceof ky&&e.state===2&&e.cause)try{await(async function(s,i){const o=i.cause;for(const c of i.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,o),s.Ia.delete(c),s.Va.removeTarget(c))})(t,e)}catch(r){X(ss,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await za(t,r)}else if(e instanceof ga?t.Va.Ze(e):e instanceof Cy?t.Va.st(e):t.Va.tt(e),!n.isEqual(le.min()))try{const r=await qy(t.localStore);n.compareTo(r)>=0&&await(function(i,o){const c=i.Va.Tt(o);return c.targetChanges.forEach(((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const f=i.Ia.get(u);f&&i.Ia.set(u,f.withResumeToken(l.resumeToken,o))}})),c.targetMismatches.forEach(((l,u)=>{const f=i.Ia.get(l);if(!f)return;i.Ia.set(l,f.withResumeToken(mt.EMPTY_BYTE_STRING,f.snapshotVersion)),Gy(i,l);const d=new lr(f.target,l,u,f.sequenceNumber);Eh(i,d)})),i.remoteSyncer.applyRemoteEvent(c)})(t,n)}catch(r){X(ss,"Failed to raise snapshot:",r),await za(t,r)}}async function za(t,e,n){if(!Xs(e))throw e;t.Ea.add(1),await Co(t),t.Ra.set("Offline"),n||(n=()=>qy(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{X(ss,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Cc(t)}))}function zy(t,e){return e().catch((n=>za(t,n,e)))}async function kc(t){const e=he(t),n=Sr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:rh;for(;ZP(e);)try{const s=await DP(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,eC(e,s)}catch(s){await za(e,s)}Ky(e)&&Qy(e)}function ZP(t){return ls(t)&&t.Ta.length<10}function eC(t,e){t.Ta.push(e);const n=Sr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function Ky(t){return ls(t)&&!Sr(t).x_()&&t.Ta.length>0}function Qy(t){Sr(t).start()}async function tC(t){Sr(t).ra()}async function nC(t){const e=Sr(t);for(const n of t.Ta)e.ea(n.mutations)}async function rC(t,e,n){const r=t.Ta.shift(),s=uh.from(r,e,n);await zy(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await kc(t)}async function sC(t,e){e&&Sr(t).X_&&await(async function(r,s){if((function(o){return Sy(o)&&o!==D.ABORTED})(s.code)){const i=r.Ta.shift();Sr(r).B_(),await zy(r,(()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s))),await kc(r)}})(t,e),Ky(t)&&Qy(t)}async function Yp(t,e){const n=he(t);n.asyncQueue.verifyOperationInProgress(),X(ss,"RemoteStore received new credentials");const r=ls(n);n.Ea.add(3),await Co(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Cc(n)}async function iC(t,e){const n=he(t);e?(n.Ea.delete(2),await Cc(n)):e||(n.Ea.add(2),await Co(n),n.Ra.set("Unknown"))}function Zs(t){return t.ma||(t.ma=(function(n,r,s){const i=he(n);return i.sa(),new $P(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Xo:QP.bind(null,t),t_:YP.bind(null,t),r_:JP.bind(null,t),H_:XP.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),Th(t)?vh(t):t.Ra.set("Unknown")):(await t.ma.stop(),Wy(t))}))),t.ma}function Sr(t){return t.fa||(t.fa=(function(n,r,s){const i=he(n);return i.sa(),new HP(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:tC.bind(null,t),r_:sC.bind(null,t),ta:nC.bind(null,t),na:rC.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await kc(t)):(await t.fa.stop(),t.Ta.length>0&&(X(ss,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class wh{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new vn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,c=new wh(e,n,o,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(D.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ih(t,e){if(qn("AsyncQueue",`${e}: ${t}`),Xs(t))return new G(D.UNAVAILABLE,`${e}: ${t}`);throw t}class Ns{static emptySet(e){return new Ns(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ee.comparator(n.key,r.key):(n,r)=>ee.comparator(n.key,r.key),this.keyedMap=Ai(),this.sortedSet=new qe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ns)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ns;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class Jp{constructor(){this.ga=new qe(ee.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ie(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Hs{constructor(e,n,r,s,i,o,c,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach((c=>{o.push({type:0,doc:c})})),new Hs(e,n,Ns.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}class oC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class aC{constructor(){this.queries=Xp(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=he(n),i=s.queries;s.queries=Xp(),i.forEach(((o,c)=>{for(const l of c.Sa)l.onError(r)}))})(this,new G(D.ABORTED,"Firestore shutting down"))}}function Xp(){return new cs((t=>fy(t)),wc)}async function Yy(t,e){const n=he(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new oC,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const c=Ih(o,`Initialization of query '${Es(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Ah(n)}async function Jy(t,e){const n=he(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function cC(t,e){const n=he(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const c of o.Sa)c.Fa(s)&&(r=!0);o.wa=s}}r&&Ah(n)}function lC(t,e,n){const r=he(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function Ah(t){t.Ca.forEach((e=>{e.next()}))}var pu,Zp;(Zp=pu||(pu={})).Ma="default",Zp.Cache="cache";class Xy{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Hs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Hs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==pu.Cache}}class Zy{constructor(e){this.key=e}}class eE{constructor(e){this.key=e}}class uC{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ee(),this.mutatedKeys=Ee(),this.eu=dy(e),this.tu=new Ns(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Jp,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,c=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((f,d)=>{const m=s.get(f),_=Ic(this.query,d)?d:null,S=!!m&&this.mutatedKeys.has(m.key),N=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let C=!1;m&&_?m.data.isEqual(_.data)?S!==N&&(r.track({type:3,doc:_}),C=!0):this.su(m,_)||(r.track({type:2,doc:_}),C=!0,(l&&this.eu(_,l)>0||u&&this.eu(_,u)<0)&&(c=!0)):!m&&_?(r.track({type:0,doc:_}),C=!0):m&&!_&&(r.track({type:1,doc:m}),C=!0,(l||u)&&(c=!0)),C&&(_?(o=o.add(_),i=N?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{tu:o,iu:r,Cs:c,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((f,d)=>(function(_,S){const N=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ie(20277,{Rt:C})}};return N(_)-N(S)})(f.type,d.type)||this.eu(f.doc,d.doc))),this.ou(r),s=s??!1;const c=n&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new Hs(this.query,e.tu,i,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Jp,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ee(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new eE(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new Zy(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=Ee();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Hs.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const bh="SyncEngine";class hC{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class fC{constructor(e){this.key=e,this.hu=!1}}class dC{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new cs((c=>fy(c)),wc),this.Iu=new Map,this.Eu=new Set,this.du=new qe(ee.comparator),this.Au=new Map,this.Ru=new dh,this.Vu={},this.mu=new Map,this.fu=$s.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function pC(t,e,n=!0){const r=oE(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await tE(r,e,n,!0),s}async function mC(t,e){const n=oE(t);await tE(n,e,!0,!1)}async function tE(t,e,n,r){const s=await OP(t.localStore,Tn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let c;return r&&(c=await gC(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Hy(t.remoteStore,s),c}async function gC(t,e,n,r,s){t.pu=(d,m,_)=>(async function(N,C,x,O){let H=C.view.ru(x);H.Cs&&(H=await Gp(N.localStore,C.query,!1).then((({documents:b})=>C.view.ru(b,H))));const W=O&&O.targetChanges.get(C.targetId),Z=O&&O.targetMismatches.get(C.targetId)!=null,te=C.view.applyChanges(H,N.isPrimaryClient,W,Z);return tm(N,C.targetId,te.au),te.snapshot})(t,d,m,_);const i=await Gp(t.localStore,e,!0),o=new uC(e,i.Qs),c=o.ru(i.documents),l=Po.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(c,t.isPrimaryClient,l);tm(t,n,u.au);const f=new hC(e,n,o);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function _C(t,e,n){const r=he(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter((o=>!wc(o,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await fu(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&yh(r.remoteStore,s.targetId),mu(r,s.targetId)})).catch(Js)):(mu(r,s.targetId),await fu(r.localStore,s.targetId,!0))}async function yC(t,e){const n=he(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),yh(n.remoteStore,r.targetId))}async function EC(t,e,n){const r=RC(t);try{const s=await(function(o,c){const l=he(o),u=Ue.now(),f=c.reduce(((_,S)=>_.add(S.key)),Ee());let d,m;return l.persistence.runTransaction("Locally write mutations","readwrite",(_=>{let S=$n(),N=Ee();return l.Ns.getEntries(_,f).next((C=>{S=C,S.forEach(((x,O)=>{O.isValidDocument()||(N=N.add(x))}))})).next((()=>l.localDocuments.getOverlayedDocuments(_,S))).next((C=>{d=C;const x=[];for(const O of c){const H=MS(O,d.get(O.key).overlayedDocument);H!=null&&x.push(new xr(O.key,H,iy(H.value.mapValue),pt.exists(!0)))}return l.mutationQueue.addMutationBatch(_,u,x,c)})).next((C=>{m=C;const x=C.applyToLocalDocumentSet(d,N);return l.documentOverlayCache.saveOverlays(_,C.batchId,x)}))})).then((()=>({batchId:m.batchId,changes:my(d)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(o,c,l){let u=o.Vu[o.currentUser.toKey()];u||(u=new qe(ye)),u=u.insert(c,l),o.Vu[o.currentUser.toKey()]=u})(r,s.batchId,n),await ko(r,s.changes),await kc(r.remoteStore)}catch(s){const i=Ih(s,"Failed to persist write");n.reject(i)}}async function nE(t,e){const n=he(t);try{const r=await xP(n.localStore,e);e.targetChanges.forEach(((s,i)=>{const o=n.Au.get(i);o&&(Ie(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?Ie(o.hu,14607):s.removedDocuments.size>0&&(Ie(o.hu,42227),o.hu=!1))})),await ko(n,r,e)}catch(r){await Js(r)}}function em(t,e,n){const r=he(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach(((i,o)=>{const c=o.view.va(e);c.snapshot&&s.push(c.snapshot)})),(function(o,c){const l=he(o);l.onlineState=c;let u=!1;l.queries.forEach(((f,d)=>{for(const m of d.Sa)m.va(c)&&(u=!0)})),u&&Ah(l)})(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function vC(t,e,n){const r=he(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new qe(ee.comparator);o=o.insert(i,ot.newNoDocument(i,le.min()));const c=Ee().add(i),l=new Sc(le.min(),new Map,new qe(ye),o,c);await nE(r,l),r.du=r.du.remove(i),r.Au.delete(e),Rh(r)}else await fu(r.localStore,e,!1).then((()=>mu(r,e,n))).catch(Js)}async function TC(t,e){const n=he(t),r=e.batch.batchId;try{const s=await NP(n.localStore,e);sE(n,r,null),rE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ko(n,s)}catch(s){await Js(s)}}async function wC(t,e,n){const r=he(t);try{const s=await(function(o,c){const l=he(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let f;return l.mutationQueue.lookupMutationBatch(u,c).next((d=>(Ie(d!==null,37113),f=d.keys(),l.mutationQueue.removeMutationBatch(u,d)))).next((()=>l.mutationQueue.performConsistencyCheck(u))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(u,f,c))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f))).next((()=>l.localDocuments.getDocuments(u,f)))}))})(r.localStore,e);sE(r,e,n),rE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ko(r,s)}catch(s){await Js(s)}}function rE(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function sE(t,e,n){const r=he(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function mu(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||iE(t,r)}))}function iE(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(yh(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Rh(t))}function tm(t,e,n){for(const r of n)r instanceof Zy?(t.Ru.addReference(r.key,e),IC(t,r)):r instanceof eE?(X(bh,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||iE(t,r.key)):ie(19791,{wu:r})}function IC(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(X(bh,"New document in limbo: "+n),t.Eu.add(r),Rh(t))}function Rh(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ee(Ne.fromString(e)),r=t.fu.next();t.Au.set(r,new fC(n)),t.du=t.du.insert(n,r),Hy(t.remoteStore,new lr(Tn(ah(n.path)),r,"TargetPurposeLimboResolution",Ec.ce))}}async function ko(t,e,n){const r=he(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((c,l)=>{o.push(r.pu(l,e,n).then((u=>{if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:n?.targetChanges.get(l.targetId)?.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){s.push(u);const f=mh.As(l.targetId,u);i.push(f)}})))})),await Promise.all(o),r.Pu.H_(s),await(async function(l,u){const f=he(l);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",(d=>U.forEach(u,(m=>U.forEach(m.Es,(_=>f.persistence.referenceDelegate.addReference(d,m.targetId,_))).next((()=>U.forEach(m.ds,(_=>f.persistence.referenceDelegate.removeReference(d,m.targetId,_)))))))))}catch(d){if(!Xs(d))throw d;X(gh,"Failed to update sequence numbers: "+d)}for(const d of u){const m=d.targetId;if(!d.fromCache){const _=f.Ms.get(m),S=_.snapshotVersion,N=_.withLastLimboFreeSnapshotVersion(S);f.Ms=f.Ms.insert(m,N)}}})(r.localStore,i))}async function AC(t,e){const n=he(t);if(!n.currentUser.isEqual(e)){X(bh,"User change. New user:",e.toKey());const r=await jy(n.localStore,e);n.currentUser=e,(function(i,o){i.mu.forEach((c=>{c.forEach((l=>{l.reject(new G(D.CANCELLED,o))}))})),i.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ko(n,r.Ls)}}function bC(t,e){const n=he(t),r=n.Au.get(e);if(r&&r.hu)return Ee().add(r.key);{let s=Ee();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const c=n.Tu.get(o);s=s.unionWith(c.view.nu)}return s}}function oE(t){const e=he(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=nE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=bC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vC.bind(null,e),e.Pu.H_=cC.bind(null,e.eventManager),e.Pu.yu=lC.bind(null,e.eventManager),e}function RC(t){const e=he(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=TC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=wC.bind(null,e),e}class Ka{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Pc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return kP(this.persistence,new SP,e.initialUser,this.serializer)}Cu(e){return new By(ph.mi,this.serializer)}Du(e){return new LP}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ka.provider={build:()=>new Ka};class SC extends Ka{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ie(this.persistence.referenceDelegate instanceof Wa,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new fP(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Vt.withCacheSize(this.cacheSizeBytes):Vt.DEFAULT;return new By((r=>Wa.mi(r,n)),this.serializer)}}class gu{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>em(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=AC.bind(null,this.syncEngine),await iC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new aC})()}createDatastore(e){const n=Pc(e.databaseInfo.databaseId),r=(function(i){return new qP(i)})(e.databaseInfo);return(function(i,o,c,l){return new WP(i,o,c,l)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,s,i,o,c){return new KP(r,s,i,o,c)})(this.localStore,this.datastore,e.asyncQueue,(n=>em(this.syncEngine,n,0)),(function(){return Kp.v()?new Kp:new FP})())}createSyncEngine(e,n){return(function(s,i,o,c,l,u,f){const d=new dC(s,i,o,c,l,u);return f&&(d.gu=!0),d})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=he(n);X(ss,"RemoteStore shutting down."),r.Ea.add(5),await Co(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}gu.provider={build:()=>new gu};class aE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):qn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}class PC{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new G(D.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await(async function(s,i){const o=he(s),c={documents:i.map((d=>Ga(o.serializer,d)))},l=await o.Ho("BatchGetDocuments",o.serializer.databaseId,Ne.emptyPath(),c,i.length),u=new Map;l.forEach((d=>{const m=QS(o.serializer,d);u.set(m.key.toString(),m)}));const f=[];return i.forEach((d=>{const m=u.get(d.toString());Ie(!!m,55234,{key:d}),f.push(m)})),f})(this.datastore,e);return n.forEach((r=>this.recordVersion(r))),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Rc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((n=>{e.delete(n.key.toString())})),e.forEach(((n,r)=>{const s=ee.fromPath(r);this.mutations.push(new Ry(s,this.precondition(s)))})),await(async function(r,s){const i=he(r),o={writes:s.map((c=>Oy(i.serializer,c)))};await i.Go("Commit",i.serializer.databaseId,Ne.emptyPath(),o)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw ie(50498,{Gu:e.constructor.name});n=le.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new G(D.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(le.min())?pt.exists(!1):pt.updateTime(n):pt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(le.min()))throw new G(D.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return pt.updateTime(n)}return pt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class CC{constructor(e,n,r,s,i){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=s,this.deferred=i,this.zu=r.maxAttempts,this.M_=new _h(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new PC(this.datastore),n=this.Hu(e);n&&n.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((s=>{this.Yu(s)}))))})).catch((r=>{this.Yu(r)}))}))}Hu(e){try{const n=this.updateFunction(e);return!Ro(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!Sy(n)}return!1}}const Pr="FirestoreClient";class kC{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Tt.UNAUTHENTICATED,this.clientId=nh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,(async o=>{X(Pr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(X(Pr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ih(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Rl(t,e){t.asyncQueue.verifyOperationInProgress(),X(Pr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async s=>{r.isEqual(s)||(await jy(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function nm(t,e){t.asyncQueue.verifyOperationInProgress();const n=await NC(t);X(Pr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>Yp(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,s)=>Yp(e.remoteStore,s))),t._onlineComponents=e}async function NC(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){X(Pr,"Using user provided OfflineComponentProvider");try{await Rl(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===D.FAILED_PRECONDITION||s.code===D.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;Fs("Error using user provided cache. Falling back to memory cache: "+n),await Rl(t,new Ka)}}else X(Pr,"Using default OfflineComponentProvider"),await Rl(t,new SC(void 0));return t._offlineComponents}async function Sh(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(X(Pr,"Using user provided OnlineComponentProvider"),await nm(t,t._uninitializedComponentsProvider._online)):(X(Pr,"Using default OnlineComponentProvider"),await nm(t,new gu))),t._onlineComponents}function xC(t){return Sh(t).then((e=>e.syncEngine))}function VC(t){return Sh(t).then((e=>e.datastore))}async function cE(t){const e=await Sh(t),n=e.eventManager;return n.onListen=pC.bind(null,e.syncEngine),n.onUnlisten=_C.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=mC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=yC.bind(null,e.syncEngine),n}function DC(t,e,n={}){const r=new vn;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,c,l,u){const f=new aE({next:m=>{f.Nu(),o.enqueueAndForget((()=>Jy(i,d)));const _=m.docs.has(c);!_&&m.fromCache?u.reject(new G(D.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&m.fromCache&&l&&l.source==="server"?u.reject(new G(D.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),d=new Xy(ah(c.path),f,{includeMetadataChanges:!0,qa:!0});return Yy(i,d)})(await cE(t),t.asyncQueue,e,n,r))),r.promise}function OC(t,e,n={}){const r=new vn;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,c,l,u){const f=new aE({next:m=>{f.Nu(),o.enqueueAndForget((()=>Jy(i,d))),m.fromCache&&l.source==="server"?u.reject(new G(D.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),d=new Xy(c,f,{includeMetadataChanges:!0,qa:!0});return Yy(i,d)})(await cE(t),t.asyncQueue,e,n,r))),r.promise}function lE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const rm=new Map;const uE="firestore.googleapis.com",sm=!0;class im{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new G(D.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=uE,this.ssl=sm}else this.host=e.host,this.ssl=e.ssl??sm;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Uy;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<uP)throw new G(D.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Y0("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lE(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new G(D.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new G(D.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new G(D.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Nc{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new im({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(D.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(D.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new im(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new B0;switch(r.type){case"firstParty":return new H0(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(D.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=rm.get(n);r&&(X("ComponentProvider","Removing Datastore"),rm.delete(n),r.terminate())})(this),Promise.resolve()}}function MC(t,e,n,r={}){t=Yt(t,Nc);const s=zs(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;s&&(e_(`https://${c}`),t_("Firestore",!0)),i.host!==uE&&i.host!==c&&Fs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:c,ssl:s,emulatorOptions:r};if(!es(l,o)&&(t._setSettings(l),r.mockUserToken)){let u,f;if(typeof r.mockUserToken=="string")u=r.mockUserToken,f=Tt.MOCK_USER;else{u=YI(r.mockUserToken,t._app?.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new G(D.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Tt(d)}t._authCredentials=new j0(new z_(u,f))}}class Wn{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Wn(this.firestore,e,this._query)}}class Ge{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ge(this.firestore,e,this._key)}toJSON(){return{type:Ge._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(bo(n,Ge._jsonSchema))return new Ge(e,r||null,new ee(Ne.fromString(n.referencePath)))}}Ge._jsonSchemaVersion="firestore/documentReference/1.0",Ge._jsonSchema={type:Xe("string",Ge._jsonSchemaVersion),referencePath:Xe("string")};class yr extends Wn{constructor(e,n,r){super(e,n,ah(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ge(this.firestore,null,new ee(e))}withConverter(e){return new yr(this.firestore,e,this._path)}}function LC(t,e,...n){if(t=Qe(t),K_("collection","path",e),t instanceof Nc){const r=Ne.fromString(e,...n);return Ep(r),new yr(t,null,r)}{if(!(t instanceof Ge||t instanceof yr))throw new G(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ne.fromString(e,...n));return Ep(r),new yr(t.firestore,null,r)}}function Rn(t,e,...n){if(t=Qe(t),arguments.length===1&&(e=nh.newId()),K_("doc","path",e),t instanceof Nc){const r=Ne.fromString(e,...n);return yp(r),new Ge(t,null,new ee(r))}{if(!(t instanceof Ge||t instanceof yr))throw new G(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ne.fromString(e,...n));return yp(r),new Ge(t.firestore,t instanceof yr?t.converter:null,new ee(r))}}const om="AsyncQueue";class am{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new _h(this,"async_queue_retry"),this._c=()=>{const r=bl();r&&X(om,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=bl();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=bl();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new vn;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Xs(e))throw e;X(om,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,qn("INTERNAL UNHANDLED ERROR: ",cm(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=wh.createAndSchedule(this,e,n,r,(i=>this.hc(i)));return this.tc.push(s),s}uc(){this.nc&&ie(47125,{Pc:cm(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function cm(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Vr extends Nc{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new am,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new am(e),this._firestoreClient=void 0,await e}}}function FC(t,e){const n=typeof t=="object"?t:i_(),r=typeof t=="string"?t:Ba,s=Hu(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=KI("firestore");i&&MC(s,...i)}return s}function xc(t){if(t._terminated)throw new G(D.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||UC(t),t._firestoreClient}function UC(t){const e=t._freezeSettings(),n=(function(s,i,o,c){return new cS(s,i,o,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,lE(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new kC(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(s){const i=s?._online.build();return{_offline:s?._offline.build(i),_online:i}})(t._componentsProvider))}class Ut{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ut(mt.fromBase64String(e))}catch(n){throw new G(D.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ut(mt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ut._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(bo(e,Ut._jsonSchema))return Ut.fromBase64String(e.bytes)}}Ut._jsonSchemaVersion="firestore/bytes/1.0",Ut._jsonSchema={type:Xe("string",Ut._jsonSchemaVersion),bytes:Xe("string")};class No{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new G(D.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class xo{constructor(e){this._methodName=e}}class wn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new G(D.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new G(D.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ye(this._lat,e._lat)||ye(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:wn._jsonSchemaVersion}}static fromJSON(e){if(bo(e,wn._jsonSchema))return new wn(e.latitude,e.longitude)}}wn._jsonSchemaVersion="firestore/geoPoint/1.0",wn._jsonSchema={type:Xe("string",wn._jsonSchemaVersion),latitude:Xe("number"),longitude:Xe("number")};class In{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:In._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(bo(e,In._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new In(e.vectorValues);throw new G(D.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}In._jsonSchemaVersion="firestore/vectorValue/1.0",In._jsonSchema={type:Xe("string",In._jsonSchemaVersion),vectorValues:Xe("object")};const BC=/^__.*__$/;class jC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new xr(e,this.data,this.fieldMask,n,this.fieldTransforms):new So(e,this.data,n,this.fieldTransforms)}}class hE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new xr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function fE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ie(40011,{Ac:t})}}class Ph{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ph({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Qa(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(fE(this.Ac)&&BC.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class qC{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Pc(e)}Cc(e,n,r,s=!1){return new Ph({Ac:e,methodName:n,Dc:r,path:dt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ei(t){const e=t._freezeSettings(),n=Pc(t._databaseId);return new qC(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ch(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);xh("Data must be an object, but it was:",o,r);const c=gE(r,o);let l,u;if(i.merge)l=new jt(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const d of i.mergeFields){const m=_u(e,d,n);if(!o.contains(m))throw new G(D.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);yE(f,m)||f.push(m)}l=new jt(f),u=o.fieldTransforms.filter((d=>l.covers(d.field)))}else l=null,u=o.fieldTransforms;return new jC(new Nt(c),l,u)}class Vc extends xo{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Vc}}class kh extends xo{_toFieldTransform(e){return new Iy(e.path,new ao)}isEqual(e){return e instanceof kh}}class Nh extends xo{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new uo(e.serializer,yy(e.serializer,this.Fc));return new Iy(e.path,n)}isEqual(e){return e instanceof Nh&&this.Fc===e.Fc}}function dE(t,e,n,r){const s=t.Cc(1,e,n);xh("Data must be an object, but it was:",s,r);const i=[],o=Nt.empty();Nr(r,((l,u)=>{const f=Vh(e,l,n);u=Qe(u);const d=s.yc(f);if(u instanceof Vc)i.push(f);else{const m=Vo(u,d);m!=null&&(i.push(f),o.set(f,m))}}));const c=new jt(i);return new hE(o,c,s.fieldTransforms)}function pE(t,e,n,r,s,i){const o=t.Cc(1,e,n),c=[_u(e,r,n)],l=[s];if(i.length%2!=0)throw new G(D.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)c.push(_u(e,i[m])),l.push(i[m+1]);const u=[],f=Nt.empty();for(let m=c.length-1;m>=0;--m)if(!yE(u,c[m])){const _=c[m];let S=l[m];S=Qe(S);const N=o.yc(_);if(S instanceof Vc)u.push(_);else{const C=Vo(S,N);C!=null&&(u.push(_),f.set(_,C))}}const d=new jt(u);return new hE(f,d,o.fieldTransforms)}function mE(t,e,n,r=!1){return Vo(n,t.Cc(r?4:3,e))}function Vo(t,e){if(_E(t=Qe(t)))return xh("Unsupported field value:",e,t),gE(t,e);if(t instanceof xo)return(function(r,s){if(!fE(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,s){const i=[];let o=0;for(const c of r){let l=Vo(c,s.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}})(t,e)}return(function(r,s){if((r=Qe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return yy(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ue.fromDate(r);return{timestampValue:Ha(s.serializer,i)}}if(r instanceof Ue){const i=new Ue(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ha(s.serializer,i)}}if(r instanceof wn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ut)return{bytesValue:Ny(s.serializer,r._byteString)};if(r instanceof Ge){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:fh(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof In)return(function(o,c){return{mapValue:{fields:{[ry]:{stringValue:sy},[ja]:{arrayValue:{values:o.toArray().map((u=>{if(typeof u!="number")throw c.Sc("VectorValues must only contain numeric values.");return lh(c.serializer,u)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${yc(r)}`)})(t,e)}function gE(t,e){const n={};return J_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Nr(t,((r,s)=>{const i=Vo(s,e.mc(r));i!=null&&(n[r]=i)})),{mapValue:{fields:n}}}function _E(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ue||t instanceof wn||t instanceof Ut||t instanceof Ge||t instanceof xo||t instanceof In)}function xh(t,e,n){if(!_E(n)||!Q_(n)){const r=yc(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function _u(t,e,n){if((e=Qe(e))instanceof No)return e._internalPath;if(typeof e=="string")return Vh(t,e);throw Qa("Field path arguments must be of type string or ",t,!1,void 0,n)}const $C=new RegExp("[~\\*/\\[\\]]");function Vh(t,e,n){if(e.search($C)>=0)throw Qa(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new No(...e.split("."))._internalPath}catch{throw Qa(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Qa(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new G(D.INVALID_ARGUMENT,c+t+l)}function yE(t,e){return t.some((n=>n.isEqual(e)))}class ho{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ge(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new HC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Dc("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class HC extends ho{data(){return super.data()}}function Dc(t,e){return typeof e=="string"?Vh(t,e):e instanceof No?e._internalPath:e._delegate._internalPath}function GC(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new G(D.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Dh{}class Oc extends Dh{}function xs(t,e,...n){let r=[];e instanceof Dh&&r.push(e),r=r.concat(n),(function(i){const o=i.filter((l=>l instanceof Oh)).length,c=i.filter((l=>l instanceof Mc)).length;if(o>1||o>0&&c>0)throw new G(D.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)t=s._apply(t);return t}class Mc extends Oc{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Mc(e,n,r)}_apply(e){const n=this._parse(e);return EE(e._query,n),new Wn(e.firestore,e.converter,cu(e._query,n))}_parse(e){const n=ei(e.firestore);return(function(i,o,c,l,u,f,d){let m;if(u.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new G(D.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){hm(d,f);const S=[];for(const N of d)S.push(um(l,i,N));m={arrayValue:{values:S}}}else m=um(l,i,d)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||hm(d,f),m=mE(c,o,d,f==="in"||f==="not-in");return Je.create(u,f,m)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Zr(t,e,n){const r=e,s=Dc("where",t);return Mc._create(s,r,n)}class Oh extends Dh{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Oh(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:ln.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(s,i){let o=s;const c=i.getFlattenedFilters();for(const l of c)EE(o,l),o=cu(o,l)})(e._query,n),new Wn(e.firestore,e.converter,cu(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Mh extends Oc{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Mh(e,n)}_apply(e){const n=(function(s,i,o){if(s.startAt!==null)throw new G(D.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new G(D.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new oo(i,o)})(e._query,this._field,this._direction);return new Wn(e.firestore,e.converter,(function(s,i){const o=s.explicitOrderBy.concat([i]);return new as(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,n))}}function Ya(t,e="asc"){const n=e,r=Dc("orderBy",t);return Mh._create(r,n)}class Lh extends Oc{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Lh(e,n,r)}_apply(e){return new Wn(e.firestore,e.converter,$a(e._query,this._limit,this._limitType))}}function lm(t){return J0("limit",t),Lh._create("limit",t,"F")}class Fh extends Oc{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Fh(e,n,r)}_apply(e){const n=zC(e,this.type,this._docOrFields,this._inclusive);return new Wn(e.firestore,e.converter,(function(s,i){return new as(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)})(e._query,n))}}function WC(...t){return Fh._create("startAfter",t,!1)}function zC(t,e,n,r){if(n[0]=Qe(n[0]),n[0]instanceof ho)return(function(i,o,c,l,u){if(!l)throw new G(D.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const f=[];for(const d of ks(i))if(d.field.isKeyField())f.push(qa(o,l.key));else{const m=l.data.field(d.field);if(vc(m))throw new G(D.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){const _=d.field.canonicalString();throw new G(D.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${_}' (used as the orderBy) does not exist.`)}f.push(m)}return new qs(f,u)})(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=ei(t.firestore);return(function(o,c,l,u,f,d){const m=o.explicitOrderBy;if(f.length>m.length)throw new G(D.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const _=[];for(let S=0;S<f.length;S++){const N=f[S];if(m[S].field.isKeyField()){if(typeof N!="string")throw new G(D.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof N}`);if(!ch(o)&&N.indexOf("/")!==-1)throw new G(D.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${N}' contains a slash.`);const C=o.path.child(Ne.fromString(N));if(!ee.isDocumentKey(C))throw new G(D.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${C}' is not because it contains an odd number of segments.`);const x=new ee(C);_.push(qa(c,x))}else{const C=mE(l,u,N);_.push(C)}}return new qs(_,d)})(t._query,t.firestore._databaseId,s,e,n,r)}}function um(t,e,n){if(typeof(n=Qe(n))=="string"){if(n==="")throw new G(D.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ch(e)&&n.indexOf("/")!==-1)throw new G(D.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ne.fromString(n));if(!ee.isDocumentKey(r))throw new G(D.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return qa(t,new ee(r))}if(n instanceof Ge)return qa(t,n._key);throw new G(D.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${yc(n)}.`)}function hm(t,e){if(!Array.isArray(t)||t.length===0)throw new G(D.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function EE(t,e){const n=(function(s,i){for(const o of s)for(const c of o.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new G(D.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(D.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class vE{convertValue(e,n="none"){switch(Rr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ze(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(br(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ie(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Nr(e,((s,i)=>{r[s]=this.convertValue(i,n)})),r}convertVectorValue(e){const n=e.fields?.[ja].arrayValue?.values?.map((r=>ze(r.doubleValue)));return new In(n)}convertGeoPoint(e){return new wn(ze(e.latitude),ze(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Tc(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ro(e));default:return null}}convertTimestamp(e){const n=Ar(e);return new Ue(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ne.fromString(e);Ie(Fy(r),9688,{name:e});const s=new so(r.get(1),r.get(3)),i=new ee(r.popFirst(5));return s.isEqual(n)||qn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}function Uh(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class KC extends vE{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ut(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ge(this.firestore,null,n)}}class ws{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Er extends ho{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new _a(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Dc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new G(D.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Er._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Er._jsonSchemaVersion="firestore/documentSnapshot/1.0",Er._jsonSchema={type:Xe("string",Er._jsonSchemaVersion),bundleSource:Xe("string","DocumentSnapshot"),bundleName:Xe("string"),bundle:Xe("string")};class _a extends Er{data(e={}){return super.data(e)}}class Vs{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ws(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new _a(this._firestore,this._userDataWriter,r.key,r,new ws(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(D.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map((c=>{const l=new _a(s._firestore,s._userDataWriter,c.doc.key,c.doc,new ws(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}}))}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((c=>i||c.type!==3)).map((c=>{const l=new _a(s._firestore,s._userDataWriter,c.doc.key,c.doc,new ws(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,f=-1;return c.type!==0&&(u=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:QC(c.type),doc:l,oldIndex:u,newIndex:f}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new G(D.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Vs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=nh.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach((i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function QC(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ie(61501,{type:t})}}function Lc(t){t=Yt(t,Ge);const e=Yt(t.firestore,Vr);return DC(xc(e),t._key).then((n=>ZC(e,t,n)))}Vs._jsonSchemaVersion="firestore/querySnapshot/1.0",Vs._jsonSchema={type:Xe("string",Vs._jsonSchemaVersion),bundleSource:Xe("string","QuerySnapshot"),bundleName:Xe("string"),bundle:Xe("string")};class Bh extends vE{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ut(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ge(this.firestore,null,n)}}function Fc(t){t=Yt(t,Wn);const e=Yt(t.firestore,Vr),n=xc(e),r=new Bh(e);return GC(t._query),OC(n,t._query).then((s=>new Vs(e,r,t,s)))}function YC(t,e,n){t=Yt(t,Ge);const r=Yt(t.firestore,Vr),s=Uh(t.converter,e,n);return Uc(r,[Ch(ei(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,pt.none())])}function jh(t,e,n,...r){t=Yt(t,Ge);const s=Yt(t.firestore,Vr),i=ei(s);let o;return o=typeof(e=Qe(e))=="string"||e instanceof No?pE(i,"updateDoc",t._key,e,n,r):dE(i,"updateDoc",t._key,e),Uc(s,[o.toMutation(t._key,pt.exists(!0))])}function JC(t){return Uc(Yt(t.firestore,Vr),[new Rc(t._key,pt.none())])}function XC(t,e){const n=Yt(t.firestore,Vr),r=Rn(t),s=Uh(t.converter,e);return Uc(n,[Ch(ei(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,pt.exists(!1))]).then((()=>r))}function Uc(t,e){return(function(r,s){const i=new vn;return r.asyncQueue.enqueueAndForget((async()=>EC(await xC(r),s,i))),i.promise})(xc(t),e)}function ZC(t,e,n){const r=n.docs.get(e._key),s=new Bh(t);return new Er(t,s,e._key,r,new ws(n.hasPendingWrites,n.fromCache),e.converter)}const e1={maxAttempts:5};function Ri(t,e){if((t=Qe(t)).firestore!==e)throw new G(D.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}class t1{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=ei(e)}get(e){const n=Ri(e,this._firestore),r=new KC(this._firestore);return this._transaction.lookup([n._key]).then((s=>{if(!s||s.length!==1)return ie(24041);const i=s[0];if(i.isFoundDocument())return new ho(this._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new ho(this._firestore,r,n._key,null,n.converter);throw ie(18433,{doc:i})}))}set(e,n,r){const s=Ri(e,this._firestore),i=Uh(s.converter,n,r),o=Ch(this._dataReader,"Transaction.set",s._key,i,s.converter!==null,r);return this._transaction.set(s._key,o),this}update(e,n,r,...s){const i=Ri(e,this._firestore);let o;return o=typeof(n=Qe(n))=="string"||n instanceof No?pE(this._dataReader,"Transaction.update",i._key,n,r,s):dE(this._dataReader,"Transaction.update",i._key,n),this._transaction.update(i._key,o),this}delete(e){const n=Ri(e,this._firestore);return this._transaction.delete(n._key),this}}class n1 extends t1{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Ri(e,this._firestore),r=new Bh(this._firestore);return super.get(e).then((s=>new Er(this._firestore,r,n._key,s._document,new ws(!1,!1),n.converter)))}}function r1(t,e,n){t=Yt(t,Vr);const r={...e1,...n};return(function(i){if(i.maxAttempts<1)throw new G(D.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(i,o,c){const l=new vn;return i.asyncQueue.enqueueAndForget((async()=>{const u=await VC(i);new CC(i.asyncQueue,u,c,o,l).ju()})),l.promise})(xc(t),(s=>e(new n1(t,s))),r)}function fo(){return new kh("serverTimestamp")}function s1(t){return new Nh("increment",t)}(function(e,n=!0){(function(s){Ys=s})(Ks),Ms(new ts("firestore",((r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),c=new Vr(new q0(r.getProvider("auth-internal")),new G0(o,r.getProvider("app-check-internal")),(function(u,f){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new G(D.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new so(u.options.projectId,f)})(o,s),o);return i={useFetchStreams:n,...i},c._setSettings(i),c}),"PUBLIC").setMultipleInstances(!0)),mr(pp,mp,e),mr(pp,mp,"esm2020")})();const i1={apiKey:"AIzaSyBxWCMO2jovFoO2p0bRtjObLG6Wm_BUh3A",authDomain:"vue-blog-501c8.firebaseapp.com",projectId:"vue-blog-501c8",storageBucket:"vue-blog-501c8.firebasestorage.app",messagingSenderId:"453986197221",appId:"1:453986197221:web:822f170abbea04e29c7e0c"},TE=s_(i1),ta=M0(TE),on=FC(TE),fm="salcho5678@gmail.com";async function Sl(t){if(!t.email)return;const e=Rn(on,"users",t.uid),n=await Lc(e);if(n.exists()){const r=n.data();t.email===fm&&r.role!=="admin"&&await jh(e,{role:"admin"})}else{const r=t.email===fm?"admin":"user",s={uid:t.uid,email:t.email,role:r,createdAt:fo()},i={};t.displayName&&(i.displayName=t.displayName),t.photoURL&&(i.photoURL=t.photoURL),await YC(e,{...s,...i})}}async function Pl(t){const e=Rn(on,"users",t),n=await Lc(e);return n.exists()?n.data():null}const wE=Dg("auth",{state:()=>({user:null,profile:null,initialized:!1,_initPromise:null}),getters:{isLoggedIn:t=>!!t.user,canWrite:t=>t.profile?.role==="admin"},actions:{async init(){if(!this.initialized)return this._initPromise?this._initPromise:(this._initPromise=new Promise(t=>{AR(ta,async e=>{this.user=e,e?(await Sl({uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL}),this.profile=await Pl(e.uid)):this.profile=null,this.initialized=!0,t()})}),this._initPromise)},async login(t,e){const n=await TR(ta,t,e);this.user=n?.user,await Sl({uid:n.user.uid,email:n.user.email,displayName:n.user.displayName,photoURL:n.user.photoURL}),this.profile=await Pl(n.user.uid),this.initialized=!0},async loginWithGoogle(){const t=new On,e=await GR(ta,t);this.user=e.user,await Sl({uid:e.user.uid,email:e.user.email,displayName:e.user.displayName,photoURL:e.user.photoURL}),this.profile=await Pl(e.user.uid),this.initialized=!0},async logout(){await bR(ta),this.user=null,this.profile=null,this.initialized=!1,this._initPromise=null}}}),Gs=LC(on,"posts");async function wk(t){return(await XC(Gs,{title:t.title,content:t.content,summary:t.summary??"",thumbnailUrl:t.thumbnailUrl??null,category:t.category,tags:t.tags??[],authorId:t.authorId,authorName:t.authorName??"user",views:0,likes:0,isPublished:t.isPublished??!0,createdAt:fo(),updatedAt:fo()})).id}async function Ik(t,e){const n=Rn(on,"posts",t);await jh(n,{...e,updatedAt:fo()})}async function o1(){const t=xs(Gs,Zr("isPublished","==",!0),Ya("createdAt","desc"));return(await Fc(t)).docs.map(n=>({id:n.id,...n.data()}))}async function Ak(t){const e=Rn(on,"posts",t),n=await Lc(e);return n.exists()?{id:n.id,...n.data()}:null}async function a1(t){await JC(Rn(on,"posts",t))}const bk=a1;async function Rk(t){const e=Rn(on,"posts",t);await jh(e,{views:s1(1)})}async function Sk(t,e){if(!t||!e)return!1;const n=Rn(on,"posts",t,"likes",e);return(await Lc(n)).exists()}async function Pk(t,e){if(!t||!e)throw new Error("invalid postId or userId");const n=Rn(on,"posts",t),r=Rn(on,"posts",t,"likes",e);return r1(on,async s=>{const i=await s.get(n);if(!i.exists())throw new Error("Post not found");const o=i.data(),c=Number(o.likes||0);if((await s.get(r)).exists()){s.delete(r);const u=Math.max(c-1,0);return s.update(n,{likes:u}),{liked:!1,likes:u}}else{s.set(r,{createdAt:fo()});const u=c+1;return s.update(n,{likes:u}),{liked:!0,likes:u}}})}async function Ck(t){const e=xs(Gs,Zr("isPublished","==",!0),Zr("tags","array-contains",t),Ya("createdAt","desc"));return(await Fc(e)).docs.map(r=>({id:r.id,...r.data()}))}async function kk(){const t=xs(Gs,Zr("isPublished","==",!0)),e=await Fc(t),n=new Map;return e.forEach(r=>{(r.data().tags||[]).forEach(i=>n.set(i,(n.get(i)??0)+1))}),[...n.entries()].map(([r,s])=>({name:r,count:s})).sort((r,s)=>s.count-r.count)}async function Nk(t){const e=t?.limit??10;let n=xs(Gs,Zr("isPublished","==",!0),Ya("createdAt","desc"),lm(e));t?.tag&&(n=xs(Gs,Zr("isPublished","==",!0),Zr("tags","array-contains",t.tag),Ya("createdAt","desc"),lm(e))),t?.cursor&&(n=xs(n,WC(t.cursor)));const r=await Fc(n),s=r.docs.map(c=>({id:c.id,...c.data()})),i=r.docs.length?r.docs[r.docs.length-1]:null,o=r.docs.length<e;return{items:s,nextCursor:i,isEnd:o}}const c1={class:"w-full max-w-sm rounded-2xl border border-slate-200 bg-white px-4 py-3 shadow-xl dark:bg-slate-900 dark:border-slate-700"},l1={class:"flex items-start gap-3"},u1={class:"flex-1 space-y-1"},h1={class:"text-xs font-semibold text-slate-900 dark:text-slate-50"},f1={class:"text-[11px] leading-relaxed text-slate-600 dark:text-slate-300"},d1={class:"mt-3 flex justify-end gap-2"},p1=Ws({__name:"BaseModal",props:{open:{type:Boolean},title:{},message:{},type:{},variant:{}},emits:["close","confirm"],setup(t,{emit:e}){const n=t,r=e,s=ft(()=>{switch(n.type){case"success":return"";case"info":return"";default:return"!"}}),i=ft(()=>{switch(n.type){case"success":return"bg-white-500 text-white";case"info":return"bg-white-500 text-white";default:return"bg-red-500 text-white"}});return(o,c)=>(ke(),Qi(jv,{to:"body"},[t.open?(ke(),Be("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",onClick:c[2]||(c[2]=vw(l=>r("close"),["self"]))},[se("div",c1,[se("div",l1,[se("div",{class:mo(["mt-0.5 flex h-7 w-7 items-center justify-center rounded-full text-xs font-bold",i.value])},tt(s.value),3),se("div",u1,[se("h2",h1,tt(t.title||""),1),se("p",f1,tt(t.message),1)])]),se("div",d1,[t.variant==="confirm"?(ke(),Be("button",{key:0,type:"button",class:"px-3 py-1.5 rounded-md text-[11px] border border-slate-300 dark:border-slate-600 text-slate-600 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",onClick:c[0]||(c[0]=l=>r("close"))},"  ")):Oi("",!0),se("button",{type:"button",class:"px-3 py-1.5 rounded-md text-[11px] font-semibold bg-slate-900 text-white hover:bg-slate-800 dark:bg-yellow-400 dark:text-slate-900 dark:hover:bg-yellow-300 transition-colors",onClick:c[1]||(c[1]=l=>t.variant==="confirm"?r("confirm"):r("close"))},tt(t.variant==="confirm"?"":""),1)])])])):Oi("",!0)]))}}),IE=Dg("modal",{state:()=>({open:!1,title:"",message:"",type:"info",variant:"alert",onConfirm:null}),actions:{alert(t){this.open=!0,this.title=t.title??"",this.message=t.message,this.type=t.type??"info",this.variant="alert",this.onConfirm=null},confirm(t){this.open=!0,this.title=t.title??"",this.message=t.message,this.type=t.type??"error",this.variant="confirm",this.onConfirm=t.onConfirm??null},close(){this.open=!1,this.title="",this.message="",this.onConfirm=null},accept(){const t=this.onConfirm;this.close(),t&&t()}}}),m1=Ws({__name:"GlobalModal",setup(t){const e=IE(),n=()=>{e.close()},r=()=>{e.accept()};return(s,i)=>(ke(),Qi(p1,{open:De(e).open,title:De(e).title,message:De(e).message,type:De(e).type,variant:De(e).variant,onClose:n,onConfirm:r},null,8,["open","title","message","type","variant"]))}}),g1={class:"hidden md:flex w-64 flex-col gap-2 rounded-2xl border border-slate-200 dark:border-slate-800 bg-white/95 dark:bg-slate-950/95 p-3 text-[11px] text-slate-600 dark:text-slate-400 sticky top-20 self-start max-h-[calc(100vh-6rem)]"},_1={key:0,class:"pl-1 text-[10px] text-slate-500"},y1={key:1,class:"pl-1 text-[10px] text-red-400"},E1=["onClick"],v1={class:"flex items-center gap-1"},T1={class:"inline-flex h-3 w-3 items-center justify-center rounded-sm border border-slate-400/60 text-[9px] text-slate-500"},w1={class:"text-[9px] text-slate-400"},I1={class:"pl-4 space-y-0.5"},A1=["onClick"],b1={class:"truncate"},R1={class:"text-[9px] text-slate-400"},S1={class:"mt-3 pt-2 border-t border-slate-200 dark:border-slate-800 text-[10px] text-slate-500 dark:text-slate-600"},P1={class:"font-semibold text-black dark:text-yellow-400"},C1=Ws({__name:"ExplorerSidebar",props:{posts:{},activePostId:{},loading:{type:Boolean},error:{}},emits:["open-post"],setup(t,{emit:e}){const n=t,r=e,s=["Java","TypeScript","JavaScript","React","Vue","",""],i=ft(()=>{const f=new Map;for(const m of n.posts){const _=m.category||"";f.has(_)||f.set(_,[]),f.get(_).push(m)}const d=[];for(const m of s){const _=f.get(m);_&&_.length&&(d.push({category:m,posts:_}),f.delete(m))}for(const[m,_]of f.entries())d.push({category:m,posts:_});return d}),o=tn({});fr(i,f=>{for(const d of f)o.value[d.category]===void 0&&(o.value[d.category]=!0)},{immediate:!0});const c=tn(null),l=tn({});function u(f,d){l.value[f]=d}return fr(()=>n.activePostId,async f=>{if(!f)return;await yo();const d=l.value[f],m=c.value;if(d&&m){const _=d.getBoundingClientRect(),S=m.getBoundingClientRect(),N=_.top-S.top;(N<0||N>m.clientHeight-40)&&d.scrollIntoView({block:"nearest",behavior:"smooth"})}},{immediate:!0}),(f,d)=>(ke(),Be("aside",g1,[d[2]||(d[2]=se("div",{class:"flex items-center justify-between mb-1"},[se("span",{class:"text-[10px] uppercase tracking-[0.14em]"},"explorer"),se("span",{class:"text-slate-500"},"")],-1)),d[3]||(d[3]=se("p",{class:"text-[10px] mb-1 text-slate-400 dark:text-slate-500"},"  ",-1)),t.loading?(ke(),Be("div",_1," loading posts... ")):t.error?(ke(),Be("div",y1,tt(t.error),1)):(ke(),Be("div",{key:2,ref_key:"containerRef",ref:c,class:"pl-1 space-y-1 overflow-y-auto scroll-theme flex-1"},[(ke(!0),Be(Dt,null,Ol(i.value,m=>(ke(),Be("div",{key:m.category,class:"space-y-0.5"},[se("button",{type:"button",class:"flex w-full items-center justify-between px-1 py-1 text-[10px] font-medium text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200",onClick:_=>o.value[m.category]=!o.value[m.category]},[se("span",v1,[se("span",T1,tt(o.value[m.category]?"":"+"),1),se("span",null,tt(m.category),1)]),se("span",w1,tt(m.posts.length),1)],8,E1),Fe(JT,{name:"fade"},{default:en(()=>[Uv(se("div",I1,[(ke(!0),Be(Dt,null,Ol(m.posts,_=>(ke(),Be("button",{key:_.id,ref_for:!0,ref:S=>u(String(_.id),S),type:"button",onClick:S=>r("open-post",_),class:mo(["flex w-full items-center justify-between gap-2 rounded-md px-2 py-1.5 text-left transition-colors",t.activePostId===String(_.id)?"bg-slate-200 text-black dark:bg-slate-800 dark:text-yellow-400":"hover:bg-slate-100 hover:text-black dark:hover:bg-slate-900 dark:hover:text-yellow-300"])},[se("span",b1,tt(_.title||"untitled.md"),1),se("span",R1,tt(_.views??0)+"v",1)],10,A1))),128))],512),[[rw,o.value[m.category]]])]),_:2},1024)]))),128))],512)),se("div",S1,[se("p",null,[d[0]||(d[0]=Ht(" auth: ",-1)),se("span",P1,tt(f.$auth?.user?f.$auth.user.email:"guest"),1)]),d[1]||(d[1]=se("p",null,[Ht("env: "),se("span",null,"firebase")],-1))])]))}}),k1=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},N1=k1(C1,[["__scopeId","data-v-17db2751"]]),x1={class:"min-h-screen bg-white text-slate-900 dark:bg-slate-950 dark:text-slate-100 font-[system-ui] text-[14px] md:text-[15px] transition-colors duration-300"},V1={class:"sticky top-0 z-40 border-b border-slate-200 dark:border-slate-800 bg-white/90 dark:bg-slate-950/95 backdrop-blur-xl"},D1={class:"mx-auto max-w-6xl px-4 py-3 flex items-center justify-between gap-3"},O1={class:"flex items-center gap-3"},M1={class:"hidden md:flex items-center gap-2 text-[12px] md:text-[13px]"},L1={class:"flex items-center gap-2"},F1={key:0},U1={key:1},B1={key:0,class:"hidden md:flex items-center gap-2 text-[11px] md:text-[12px]"},j1={class:"max-w-[160px] truncate rounded bg-slate-100 dark:bg-slate-900 px-2 py-1 border border-slate-300 dark:border-slate-700 text-slate-700 dark:text-slate-300"},q1={key:1,class:"hidden md:flex items-center gap-2 text-[11px] md:text-[12px]"},$1={key:0},H1={key:1},G1={key:0,class:"md:hidden border-t border-slate-200 dark:border-slate-800 bg-white/98 dark:bg-slate-950/98"},W1={class:"mx-auto max-w-6xl px-4 py-2 flex flex-col gap-1 text-[12px]"},z1={key:1,class:"flex items-center justify-between px-2 pt-1"},K1={class:"text-slate-500 text-[11px] truncate"},Q1={key:2,class:"flex gap-2 px-2 pt-1"},Y1={class:"mx-auto max-w-6xl px-4 py-4 flex flex-col gap-4 md:flex-row"},J1={class:"flex-1 rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-950 p-4 transition-colors duration-300"},X1={class:"mb-3 md:hidden"},Z1=["value"],ek={class:"mb-3 flex items-center gap-2 border-b border-slate-200 dark:border-slate-800 pb-2 text-[10px] text-slate-500 dark:text-slate-600"},tk={class:"flex items-center gap-1 rounded-md bg-slate-100 dark:bg-slate-900 px-2 py-1 text-black dark:text-yellow-400"},nk={key:0},rk={class:"ml-2 text-[10px] text-slate-500 dark:text-slate-400"},sk={key:1},ik={class:"leading-relaxed"},ok=Ws({__name:"App",setup(t){const e=tn(!1),n=wE(),r=FI(),s=UI(),i=tn(!0),o=tn([]),c=tn(!1),l=tn(""),u=async()=>{c.value=!0;try{o.value=await o1(),l.value=""}catch(C){l.value=C?.message||"   ."}finally{c.value=!1}},f=()=>{const C=document.documentElement;i.value?(C.classList.add("dark"),localStorage.setItem("theme","dark")):(C.classList.remove("dark"),localStorage.setItem("theme","light"))};xu(async()=>{n.init?.();const C=localStorage.getItem("theme");C==="dark"?i.value=!0:C==="light"&&(i.value=!1),f(),await u(),window.addEventListener("posts-updated",u)}),Vu(()=>{window.removeEventListener("posts-updated",u)}),fr(i,f);const d=ft(()=>s.name==="post-detail"&&typeof s.params.id=="string"?s.params.id:null),m=ft(()=>{if(s.name==="post-detail"&&typeof s.params.id=="string"){const C=o.value.find(x=>String(x.id)===s.params.id);if(C){const x=C.createdAt?.toDate?.().toLocaleDateString?.("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit"})||"";return{title:C.title||"untitled.md",author:C.authorName||"",category:C.category||"other",createdAt:x}}}return null}),_=C=>{C?.id&&r.push({name:"post-detail",params:{id:String(C.id)}})},S=C=>{const O=C.target.value;if(!O){r.push({name:"home"});return}r.push({name:"post-detail",params:{id:O}})},N=async()=>{await n.logout(),r.push({name:"home"})};return(C,x)=>(ke(),Be(Dt,null,[Fe(m1),se("div",x1,[se("header",V1,[se("div",D1,[se("div",O1,[Fe(De(pn),{to:{name:"home"},class:"flex items-center gap-2"},{default:en(()=>[...x[7]||(x[7]=[se("img",{src:Vw,alt:"SALCHO",class:"h-8 w-auto object-contain dark:invert dark:brightness-200"},null,-1)])]),_:1}),se("nav",M1,[Fe(De(pn),{to:{name:"home"},class:"rounded-t-md px-3 py-1.5 border border-transparent hover:bg-slate-100 dark:hover:bg-slate-900/70 hover:text-black dark:hover:text-yellow-400 transition-colors","active-class":"bg-slate-200 dark:bg-slate-900 text-black dark:text-yellow-400"},{default:en(()=>[...x[8]||(x[8]=[Ht("  ",-1)])]),_:1}),De(n).canWrite?(ke(),Qi(De(pn),{key:0,to:{name:"new-post"},class:"rounded-t-md px-3 py-1.5 hover:bg-slate-100 dark:hover:bg-slate-900/70 hover:text-black dark:hover:text-yellow-400 transition-colors","active-class":"bg-slate-200 dark:bg-slate-900 text-black dark:text-yellow-400"},{default:en(()=>[...x[9]||(x[9]=[Ht("   ",-1)])]),_:1})):Oi("",!0)])]),se("div",L1,[se("button",{onClick:x[0]||(x[0]=O=>i.value=!i.value),class:"flex h-8 w-8 items-center justify-center rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-950 text-[15px] hover:border-black hover:text-black dark:hover:border-yellow-400 dark:hover:text-yellow-400 transition-colors"},[i.value?(ke(),Be("span",F1,"")):(ke(),Be("span",U1,""))]),De(n).user?(ke(),Be("div",B1,[se("span",j1,tt(De(n).user.email),1),se("button",{onClick:N,class:"rounded px-3 py-1.5 text-[11px] font-semibold bg-black text-white hover:bg-slate-800 dark:bg-yellow-400 dark:text-black dark:hover:bg-yellow-300 transition-colors"}," logout ")])):(ke(),Be("div",q1,[Fe(De(pn),{to:{name:"login"},class:"rounded px-3 py-1.5 border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-950 hover:border-black hover:text-black dark:hover:border-yellow-400 dark:hover:text-yellow-400 transition-colors"},{default:en(()=>[...x[10]||(x[10]=[Ht(" login ",-1)])]),_:1}),Fe(De(pn),{to:{name:"signup"},class:"rounded px-3 py-1.5 font-semibold bg-black text-white hover:bg-slate-800 dark:bg-yellow-400 dark:text-black dark:hover:bg-yellow-300 transition-colors"},{default:en(()=>[...x[11]||(x[11]=[Ht(" sign up ",-1)])]),_:1})])),se("button",{class:"md:hidden flex h-8 w-8 items-center justify-center rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-950 text-[16px]",onClick:x[1]||(x[1]=O=>e.value=!e.value)},[e.value?(ke(),Be("span",$1,"")):(ke(),Be("span",H1,""))])])]),e.value?(ke(),Be("div",G1,[se("div",W1,[Fe(De(pn),{to:{name:"home"},class:"px-2 py-1 rounded-md hover:bg-slate-100 dark:hover:bg-slate-900 transition-colors",onClick:x[2]||(x[2]=O=>e.value=!1)},{default:en(()=>[...x[12]||(x[12]=[Ht("  ",-1)])]),_:1}),De(n).canWrite?(ke(),Qi(De(pn),{key:0,to:{name:"new-post"},class:"px-2 py-1 rounded-md hover:bg-slate-100 dark:hover:bg-slate-900 transition-colors",onClick:x[3]||(x[3]=O=>e.value=!1)},{default:en(()=>[...x[13]||(x[13]=[Ht("   ",-1)])]),_:1})):Oi("",!0),De(n).user?(ke(),Be("div",z1,[se("span",K1,tt(De(n).user.email),1),se("button",{onClick:x[4]||(x[4]=O=>{N(),e.value=!1}),class:"text-[11px] px-2 py-1 rounded bg-black text-white dark:bg-yellow-400 dark:text-black"}," logout ")])):(ke(),Be("div",Q1,[Fe(De(pn),{to:{name:"login"},class:"flex-1 text-center text-[11px] px-2 py-1 rounded border border-slate-300 dark:border-slate-700 hover:border-black dark:hover:border-yellow-400",onClick:x[5]||(x[5]=O=>e.value=!1)},{default:en(()=>[...x[14]||(x[14]=[Ht(" login ",-1)])]),_:1}),Fe(De(pn),{to:{name:"signup"},class:"flex-1 text-center text-[11px] px-2 py-1 rounded bg-black text-white dark:bg-yellow-400 dark:text-black",onClick:x[6]||(x[6]=O=>e.value=!1)},{default:en(()=>[...x[15]||(x[15]=[Ht(" sign up ",-1)])]),_:1})]))])])):Oi("",!0)]),se("div",Y1,[Fe(N1,{posts:o.value,"active-post-id":d.value,loading:c.value,error:l.value,onOpenPost:_},null,8,["posts","active-post-id","loading","error"]),se("main",J1,[se("div",X1,[x[17]||(x[17]=se("label",{class:"block text-[11px] text-slate-500 dark:text-slate-400 mb-1"}," select post ",-1)),se("select",{class:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-950 px-2 py-1.5 text-[12px]",onChange:S},[x[16]||(x[16]=se("option",{value:""},"router-view.tsx ( )",-1)),(ke(!0),Be(Dt,null,Ol(o.value,O=>(ke(),Be("option",{key:O.id,value:O.id},tt(O.title||"untitled.md"),9,Z1))),128))],32)]),se("div",ek,[se("div",tk,[x[18]||(x[18]=se("span",{class:"h-1.5 w-1.5 rounded-full bg-black dark:bg-yellow-400"},null,-1)),m.value?(ke(),Be("span",nk,[Ht(tt(m.value.title)+" ",1),se("span",rk,"  "+tt(m.value.author)+"  "+tt(m.value.category)+"  "+tt(m.value.createdAt),1)])):(ke(),Be("span",sk,"router-view.tsx"))]),x[19]||(x[19]=se("div",{class:"flex-1 text-right text-[9px]"}," Vue 3  Firebase  Tailwind ",-1))]),se("div",ik,[Fe(De(zg))])])]),x[20]||(x[20]=OT('<footer class="mt-2 border-t border-slate-200 dark:border-slate-800 bg-white/95 dark:bg-slate-950/95 text-[10px] text-slate-500 dark:text-slate-600"><div class="mx-auto flex max-w-6xl items-center justify-between px-4 py-2 gap-4"><div class="flex items-center gap-2"><span class="h-1.5 w-1.5 rounded-full bg-black dark:bg-yellow-400"></span><span>connected: salcho-blog</span></div><div class="flex items-center gap-3"><span>Ln 42, Col 7</span><span>UTF-8</span><span>Spaces: 2</span><span>TS</span></div></div></footer>',1))])],64))}}),ak="modulepreload",ck=function(t){return"/"+t},dm={},Dr=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let l=function(u){return Promise.all(u.map(f=>Promise.resolve(f).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=o?.nonce||o?.getAttribute("nonce");s=l(n.map(u=>{if(u=ck(u),u in dm)return;dm[u]=!0;const f=u.endsWith(".css"),d=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const m=document.createElement("link");if(m.rel=f?"stylesheet":ak,f||(m.as="script"),m.crossOrigin="",m.href=u,c&&m.setAttribute("nonce",c),document.head.appendChild(m),f)return new Promise((_,S)=>{m.addEventListener("load",_),m.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return s.then(o=>{for(const c of o||[])c.status==="rejected"&&i(c.reason);return e().catch(i)})},pm=()=>Dr(()=>import("./HomeFeed-BWNrYhEl.js"),[]),lk=()=>Dr(()=>import("./PostDetailPage-Z5QPt3E8.js"),__vite__mapDeps([0,1])),uk=()=>Dr(()=>import("./LoginPage-BGTGOV4W.js"),[]),hk=()=>Dr(()=>import("./SignupPage-CcIKHUdO.js"),[]),fk=()=>Dr(()=>import("./NewPostPage-DEF2-MUX.js"),__vite__mapDeps([2,3,1])),dk=()=>Dr(()=>import("./EditPostPage-CZzqY9Hq.js"),__vite__mapDeps([4,3,1])),pk=()=>Dr(()=>import("./AboutView-DCiM9zCZ.js"),[]),mk=()=>Dr(()=>import("./TagPage-C230JyFe.js"),[]),gk=[{path:"/",name:"home",component:pm},{path:"/posts",name:"posts",component:pm},{path:"/posts/:id",name:"post-detail",component:lk},{path:"/t/:tag",name:"tag-view",props:!0,component:mk},{path:"/about",name:"about",component:pk},{path:"/login",name:"login",component:uk},{path:"/signup",name:"signup",component:hk},{path:"/admin/new",name:"new-post",component:fk,meta:{requiresAuth:!0,requiresWriter:!0}},{path:"/admin/edit/:id",name:"edit-post",component:dk,meta:{requiresAuth:!0,requiresWriter:!0}}],AE=LI({history:_I("/"),routes:gk,scrollBehavior(){return{top:0}}});AE.beforeEach(async t=>{const e=wE(),n=IE();e.initialized||await e.init();const r=e.isLoggedIn,s=String(t.name||"");if(t.meta.requiresAuth&&!r)return{name:"login",query:{redirect:t.fullPath}};if(r&&(s==="login"||s==="signup"))return{name:"home"};if(t.meta.requiresWriter){if(!r)return n.alert({title:" ",message:"   .",type:"info"}),{name:"login",query:{redirect:t.fullPath}};if(!e.canWrite)return n.alert({title:" ",message:"   .(https://salcho.kro.kr  )",type:"error"}),{name:"home"}}return!0});const qh=Aw(ok),_k=Sw();qh.use(_k);qh.use(AE);qh.mount("#app");export{LC as A,Fc as B,JC as C,Rn as D,on as E,Dt as F,fo as G,IE as H,wE as I,Qi as J,bk as K,FI as L,Pk as M,Sk as N,Ak as O,Rk as P,Ek as Q,pn as R,rw as S,wk as T,yo as U,vk as V,vw as W,Ik as X,Ck as Y,k1 as _,og as a,Be as b,ft as c,Ws as d,se as e,Uv as f,Oi as g,Ol as h,Ht as i,Fe as j,en as k,UI as l,kk as m,mo as n,xu as o,Nk as p,ke as q,tn as r,XC as s,tt as t,De as u,yk as v,fr as w,xs as x,Ya as y,Zr as z};
