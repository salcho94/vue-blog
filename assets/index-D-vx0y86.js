const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PostDetailPage-BVxDMAwp.js","assets/index-BMSQkwth.js","assets/NewPostPage-wT4x2dyX.js","assets/upload-B7hhaLRr.js","assets/index-B9ygI19o.js","assets/EditPostPage-B6E3B4Rn.js","assets/Chat-ucrTG7e1.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Tu(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Oe={},Rs=[],yn=()=>{},gm=()=>!1,Xa=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),wu=t=>t.startsWith("onUpdate:"),at=Object.assign,Iu=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},QE=Object.prototype.hasOwnProperty,Pe=(t,e)=>QE.call(t,e),ae=Array.isArray,Ss=t=>mo(t)==="[object Map]",Za=t=>mo(t)==="[object Set]",Df=t=>mo(t)==="[object Date]",de=t=>typeof t=="function",We=t=>typeof t=="string",An=t=>typeof t=="symbol",xe=t=>t!==null&&typeof t=="object",_m=t=>(xe(t)||de(t))&&de(t.then)&&de(t.catch),ym=Object.prototype.toString,mo=t=>ym.call(t),YE=t=>mo(t).slice(8,-1),Em=t=>mo(t)==="[object Object]",Au=t=>We(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,ki=Tu(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ec=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},JE=/-\w/g,Tr=ec(t=>t.replace(JE,e=>e.slice(1).toUpperCase())),XE=/\B([A-Z])/g,kr=ec(t=>t.replace(XE,"-$1").toLowerCase()),vm=ec(t=>t.charAt(0).toUpperCase()+t.slice(1)),nl=ec(t=>t?`on${vm(t)}`:""),fr=(t,e)=>!Object.is(t,e),ra=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},Tm=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},tc=t=>{const e=parseFloat(t);return isNaN(e)?t:e},ZE=t=>{const e=We(t)?Number(t):NaN;return isNaN(e)?t:e};let Of;const nc=()=>Of||(Of=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function bu(t){if(ae(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=We(r)?rv(r):bu(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(We(t)||xe(t))return t}const ev=/;(?![^(]*\))/g,tv=/:([^]+)/,nv=/\/\*[^]*?\*\//g;function rv(t){const e={};return t.replace(nv,"").split(ev).forEach(n=>{if(n){const r=n.split(tv);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function go(t){let e="";if(We(t))e=t;else if(ae(t))for(let n=0;n<t.length;n++){const r=go(t[n]);r&&(e+=r+" ")}else if(xe(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const sv="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",iv=Tu(sv);function wm(t){return!!t||t===""}function ov(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=rc(t[r],e[r]);return n}function rc(t,e){if(t===e)return!0;let n=Df(t),r=Df(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=An(t),r=An(e),n||r)return t===e;if(n=ae(t),r=ae(e),n||r)return n&&r?ov(t,e):!1;if(n=xe(t),r=xe(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const o in t){const c=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(c&&!l||!c&&l||!rc(t[o],e[o]))return!1}}return String(t)===String(e)}function av(t,e){return t.findIndex(n=>rc(n,e))}const Im=t=>!!(t&&t.__v_isRef===!0),Je=t=>We(t)?t:t==null?"":ae(t)||xe(t)&&(t.toString===ym||!de(t.toString))?Im(t)?Je(t.value):JSON.stringify(t,Am,2):String(t),Am=(t,e)=>Im(e)?Am(t,e.value):Ss(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[rl(r,i)+" =>"]=s,n),{})}:Za(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>rl(n))}:An(e)?rl(e):xe(e)&&!ae(e)&&!Em(e)?String(e):e,rl=(t,e="")=>{var n;return An(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let Tt;class bm{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Tt,!e&&Tt&&(this.index=(Tt.scopes||(Tt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Tt;try{return Tt=this,e()}finally{Tt=n}}}on(){++this._on===1&&(this.prevScope=Tt,Tt=this)}off(){this._on>0&&--this._on===0&&(Tt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function Rm(t){return new bm(t)}function Sm(){return Tt}function cv(t,e=!1){Tt&&Tt.cleanups.push(t)}let Me;const sl=new WeakSet;class Pm{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Tt&&Tt.active&&Tt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,sl.has(this)&&(sl.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||km(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Mf(this),Nm(this);const e=Me,n=sn;Me=this,sn=!0;try{return this.fn()}finally{xm(this),Me=e,sn=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Pu(e);this.deps=this.depsTail=void 0,Mf(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?sl.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Nl(this)&&this.run()}get dirty(){return Nl(this)}}let Cm=0,Ni,xi;function km(t,e=!1){if(t.flags|=8,e){t.next=xi,xi=t;return}t.next=Ni,Ni=t}function Ru(){Cm++}function Su(){if(--Cm>0)return;if(xi){let e=xi;for(xi=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Ni;){let e=Ni;for(Ni=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function Nm(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function xm(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),Pu(r),lv(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function Nl(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Vm(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Vm(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Wi)||(t.globalVersion=Wi,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Nl(t))))return;t.flags|=2;const e=t.dep,n=Me,r=sn;Me=t,sn=!0;try{Nm(t);const s=t.fn(t._value);(e.version===0||fr(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{Me=n,sn=r,xm(t),t.flags&=-3}}function Pu(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Pu(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function lv(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let sn=!0;const Dm=[];function Un(){Dm.push(sn),sn=!1}function Bn(){const t=Dm.pop();sn=t===void 0?!0:t}function Mf(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Me;Me=void 0;try{e()}finally{Me=n}}}let Wi=0;class uv{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Cu{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Me||!sn||Me===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Me)n=this.activeLink=new uv(Me,this),Me.deps?(n.prevDep=Me.depsTail,Me.depsTail.nextDep=n,Me.depsTail=n):Me.deps=Me.depsTail=n,Om(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=Me.depsTail,n.nextDep=void 0,Me.depsTail.nextDep=n,Me.depsTail=n,Me.deps===n&&(Me.deps=r)}return n}trigger(e){this.version++,Wi++,this.notify(e)}notify(e){Ru();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Su()}}}function Om(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)Om(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Ea=new WeakMap,ts=Symbol(""),xl=Symbol(""),zi=Symbol("");function It(t,e,n){if(sn&&Me){let r=Ea.get(t);r||Ea.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new Cu),s.map=r,s.key=n),s.track()}}function Vn(t,e,n,r,s,i){const o=Ea.get(t);if(!o){Wi++;return}const c=l=>{l&&l.trigger()};if(Ru(),e==="clear")o.forEach(c);else{const l=ae(t),u=l&&Au(n);if(l&&n==="length"){const f=Number(r);o.forEach((d,m)=>{(m==="length"||m===zi||!An(m)&&m>=f)&&c(d)})}else switch((n!==void 0||o.has(void 0))&&c(o.get(n)),u&&c(o.get(zi)),e){case"add":l?u&&c(o.get("length")):(c(o.get(ts)),Ss(t)&&c(o.get(xl)));break;case"delete":l||(c(o.get(ts)),Ss(t)&&c(o.get(xl)));break;case"set":Ss(t)&&c(o.get(ts));break}}Su()}function hv(t,e){const n=Ea.get(t);return n&&n.get(e)}function _s(t){const e=Re(t);return e===t?e:(It(e,"iterate",zi),Qt(t)?e:e.map(ht))}function sc(t){return It(t=Re(t),"iterate",zi),t}const fv={__proto__:null,[Symbol.iterator](){return il(this,Symbol.iterator,ht)},concat(...t){return _s(this).concat(...t.map(e=>ae(e)?_s(e):e))},entries(){return il(this,"entries",t=>(t[1]=ht(t[1]),t))},every(t,e){return Pn(this,"every",t,e,void 0,arguments)},filter(t,e){return Pn(this,"filter",t,e,n=>n.map(ht),arguments)},find(t,e){return Pn(this,"find",t,e,ht,arguments)},findIndex(t,e){return Pn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Pn(this,"findLast",t,e,ht,arguments)},findLastIndex(t,e){return Pn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Pn(this,"forEach",t,e,void 0,arguments)},includes(...t){return ol(this,"includes",t)},indexOf(...t){return ol(this,"indexOf",t)},join(t){return _s(this).join(t)},lastIndexOf(...t){return ol(this,"lastIndexOf",t)},map(t,e){return Pn(this,"map",t,e,void 0,arguments)},pop(){return yi(this,"pop")},push(...t){return yi(this,"push",t)},reduce(t,...e){return Lf(this,"reduce",t,e)},reduceRight(t,...e){return Lf(this,"reduceRight",t,e)},shift(){return yi(this,"shift")},some(t,e){return Pn(this,"some",t,e,void 0,arguments)},splice(...t){return yi(this,"splice",t)},toReversed(){return _s(this).toReversed()},toSorted(t){return _s(this).toSorted(t)},toSpliced(...t){return _s(this).toSpliced(...t)},unshift(...t){return yi(this,"unshift",t)},values(){return il(this,"values",ht)}};function il(t,e,n){const r=sc(t),s=r[e]();return r!==t&&!Qt(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.done||(i.value=n(i.value)),i}),s}const dv=Array.prototype;function Pn(t,e,n,r,s,i){const o=sc(t),c=o!==t&&!Qt(t),l=o[e];if(l!==dv[e]){const d=l.apply(t,i);return c?ht(d):d}let u=n;o!==t&&(c?u=function(d,m){return n.call(this,ht(d),m,t)}:n.length>2&&(u=function(d,m){return n.call(this,d,m,t)}));const f=l.call(o,u,r);return c&&s?s(f):f}function Lf(t,e,n,r){const s=sc(t);let i=n;return s!==t&&(Qt(t)?n.length>3&&(i=function(o,c,l){return n.call(this,o,c,l,t)}):i=function(o,c,l){return n.call(this,o,ht(c),l,t)}),s[e](i,...r)}function ol(t,e,n){const r=Re(t);It(r,"iterate",zi);const s=r[e](...n);return(s===-1||s===!1)&&xu(n[0])?(n[0]=Re(n[0]),r[e](...n)):s}function yi(t,e,n=[]){Un(),Ru();const r=Re(t)[e].apply(t,n);return Su(),Bn(),r}const pv=Tu("__proto__,__v_isRef,__isVue"),Mm=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(An));function mv(t){An(t)||(t=String(t));const e=Re(this);return It(e,"has",t),e.hasOwnProperty(t)}class Lm{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?bv:jm:i?Bm:Um).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=ae(e);if(!s){let l;if(o&&(l=fv[n]))return l;if(n==="hasOwnProperty")return mv}const c=Reflect.get(e,n,Ke(e)?e:r);if((An(n)?Mm.has(n):pv(n))||(s||It(e,"get",n),i))return c;if(Ke(c)){const l=o&&Au(n)?c:c.value;return s&&xe(l)?Dl(l):l}return xe(c)?s?Dl(c):_o(c):c}}class Fm extends Lm{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];if(!this._isShallow){const l=wr(i);if(!Qt(r)&&!wr(r)&&(i=Re(i),r=Re(r)),!ae(e)&&Ke(i)&&!Ke(r))return l||(i.value=r),!0}const o=ae(e)&&Au(n)?Number(n)<e.length:Pe(e,n),c=Reflect.set(e,n,r,Ke(e)?e:s);return e===Re(s)&&(o?fr(r,i)&&Vn(e,"set",n,r):Vn(e,"add",n,r)),c}deleteProperty(e,n){const r=Pe(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&Vn(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!An(n)||!Mm.has(n))&&It(e,"has",n),r}ownKeys(e){return It(e,"iterate",ae(e)?"length":ts),Reflect.ownKeys(e)}}class gv extends Lm{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const _v=new Fm,yv=new gv,Ev=new Fm(!0);const Vl=t=>t,Wo=t=>Reflect.getPrototypeOf(t);function vv(t,e,n){return function(...r){const s=this.__v_raw,i=Re(s),o=Ss(i),c=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=s[t](...r),f=n?Vl:e?va:ht;return!e&&It(i,"iterate",l?xl:ts),{next(){const{value:d,done:m}=u.next();return m?{value:d,done:m}:{value:c?[f(d[0]),f(d[1])]:f(d),done:m}},[Symbol.iterator](){return this}}}}function zo(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Tv(t,e){const n={get(s){const i=this.__v_raw,o=Re(i),c=Re(s);t||(fr(s,c)&&It(o,"get",s),It(o,"get",c));const{has:l}=Wo(o),u=e?Vl:t?va:ht;if(l.call(o,s))return u(i.get(s));if(l.call(o,c))return u(i.get(c));i!==o&&i.get(s)},get size(){const s=this.__v_raw;return!t&&It(Re(s),"iterate",ts),s.size},has(s){const i=this.__v_raw,o=Re(i),c=Re(s);return t||(fr(s,c)&&It(o,"has",s),It(o,"has",c)),s===c?i.has(s):i.has(s)||i.has(c)},forEach(s,i){const o=this,c=o.__v_raw,l=Re(c),u=e?Vl:t?va:ht;return!t&&It(l,"iterate",ts),c.forEach((f,d)=>s.call(i,u(f),u(d),o))}};return at(n,t?{add:zo("add"),set:zo("set"),delete:zo("delete"),clear:zo("clear")}:{add(s){!e&&!Qt(s)&&!wr(s)&&(s=Re(s));const i=Re(this);return Wo(i).has.call(i,s)||(i.add(s),Vn(i,"add",s,s)),this},set(s,i){!e&&!Qt(i)&&!wr(i)&&(i=Re(i));const o=Re(this),{has:c,get:l}=Wo(o);let u=c.call(o,s);u||(s=Re(s),u=c.call(o,s));const f=l.call(o,s);return o.set(s,i),u?fr(i,f)&&Vn(o,"set",s,i):Vn(o,"add",s,i),this},delete(s){const i=Re(this),{has:o,get:c}=Wo(i);let l=o.call(i,s);l||(s=Re(s),l=o.call(i,s)),c&&c.call(i,s);const u=i.delete(s);return l&&Vn(i,"delete",s,void 0),u},clear(){const s=Re(this),i=s.size!==0,o=s.clear();return i&&Vn(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=vv(s,t,e)}),n}function ku(t,e){const n=Tv(t,e);return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(Pe(n,s)&&s in r?n:r,s,i)}const wv={get:ku(!1,!1)},Iv={get:ku(!1,!0)},Av={get:ku(!0,!1)};const Um=new WeakMap,Bm=new WeakMap,jm=new WeakMap,bv=new WeakMap;function Rv(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Sv(t){return t.__v_skip||!Object.isExtensible(t)?0:Rv(YE(t))}function _o(t){return wr(t)?t:Nu(t,!1,_v,wv,Um)}function qm(t){return Nu(t,!1,Ev,Iv,Bm)}function Dl(t){return Nu(t,!0,yv,Av,jm)}function Nu(t,e,n,r,s){if(!xe(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=Sv(t);if(i===0)return t;const o=s.get(t);if(o)return o;const c=new Proxy(t,i===2?r:n);return s.set(t,c),c}function dr(t){return wr(t)?dr(t.__v_raw):!!(t&&t.__v_isReactive)}function wr(t){return!!(t&&t.__v_isReadonly)}function Qt(t){return!!(t&&t.__v_isShallow)}function xu(t){return t?!!t.__v_raw:!1}function Re(t){const e=t&&t.__v_raw;return e?Re(e):t}function Vu(t){return!Pe(t,"__v_skip")&&Object.isExtensible(t)&&Tm(t,"__v_skip",!0),t}const ht=t=>xe(t)?_o(t):t,va=t=>xe(t)?Dl(t):t;function Ke(t){return t?t.__v_isRef===!0:!1}function nn(t){return $m(t,!1)}function Pv(t){return $m(t,!0)}function $m(t,e){return Ke(t)?t:new Cv(t,e)}class Cv{constructor(e,n){this.dep=new Cu,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Re(e),this._value=n?e:ht(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||Qt(e)||wr(e);e=r?e:Re(e),fr(e,n)&&(this._rawValue=e,this._value=r?e:ht(e),this.dep.trigger())}}function De(t){return Ke(t)?t.value:t}const kv={get:(t,e,n)=>e==="__v_raw"?t:De(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return Ke(s)&&!Ke(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function Hm(t){return dr(t)?t:new Proxy(t,kv)}function Nv(t){const e=ae(t)?new Array(t.length):{};for(const n in t)e[n]=Vv(t,n);return e}class xv{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return hv(Re(this._object),this._key)}}function Vv(t,e,n){const r=t[e];return Ke(r)?r:new xv(t,e,n)}class Dv{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Cu(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Wi-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Me!==this)return km(this,!0),!0}get value(){const e=this.dep.track();return Vm(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Ov(t,e,n=!1){let r,s;return de(t)?r=t:(r=t.get,s=t.set),new Dv(r,s,n)}const Ko={},Ta=new WeakMap;let Wr;function Mv(t,e=!1,n=Wr){if(n){let r=Ta.get(n);r||Ta.set(n,r=[]),r.push(t)}}function Lv(t,e,n=Oe){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:c,call:l}=n,u=W=>s?W:Qt(W)||s===!1||s===0?Dn(W,1):Dn(W);let f,d,m,_,S=!1,N=!1;if(Ke(t)?(d=()=>t.value,S=Qt(t)):dr(t)?(d=()=>u(t),S=!0):ae(t)?(N=!0,S=t.some(W=>dr(W)||Qt(W)),d=()=>t.map(W=>{if(Ke(W))return W.value;if(dr(W))return u(W);if(de(W))return l?l(W,2):W()})):de(t)?e?d=l?()=>l(t,2):t:d=()=>{if(m){Un();try{m()}finally{Bn()}}const W=Wr;Wr=f;try{return l?l(t,3,[_]):t(_)}finally{Wr=W}}:d=yn,e&&s){const W=d,Z=s===!0?1/0:s;d=()=>Dn(W(),Z)}const P=Sm(),x=()=>{f.stop(),P&&P.active&&Iu(P.effects,f)};if(i&&e){const W=e;e=(...Z)=>{W(...Z),x()}}let O=N?new Array(t.length).fill(Ko):Ko;const H=W=>{if(!(!(f.flags&1)||!f.dirty&&!W))if(e){const Z=f.run();if(s||S||(N?Z.some((te,b)=>fr(te,O[b])):fr(Z,O))){m&&m();const te=Wr;Wr=f;try{const b=[Z,O===Ko?void 0:N&&O[0]===Ko?[]:O,_];O=Z,l?l(e,3,b):e(...b)}finally{Wr=te}}}else f.run()};return c&&c(H),f=new Pm(d),f.scheduler=o?()=>o(H,!1):H,_=W=>Mv(W,!1,f),m=f.onStop=()=>{const W=Ta.get(f);if(W){if(l)l(W,4);else for(const Z of W)Z();Ta.delete(f)}},e?r?H(!0):O=f.run():o?o(H.bind(null,!0),!0):f.run(),x.pause=f.pause.bind(f),x.resume=f.resume.bind(f),x.stop=x,x}function Dn(t,e=1/0,n){if(e<=0||!xe(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,Ke(t))Dn(t.value,e,n);else if(ae(t))for(let r=0;r<t.length;r++)Dn(t[r],e,n);else if(Za(t)||Ss(t))t.forEach(r=>{Dn(r,e,n)});else if(Em(t)){for(const r in t)Dn(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Dn(t[r],e,n)}return t}function yo(t,e,n,r){try{return r?t(...r):t()}catch(s){ic(s,e,n)}}function cn(t,e,n,r){if(de(t)){const s=yo(t,e,n,r);return s&&_m(s)&&s.catch(i=>{ic(i,e,n)}),s}if(ae(t)){const s=[];for(let i=0;i<t.length;i++)s.push(cn(t[i],e,n,r));return s}}function ic(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Oe;if(e){let c=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;c;){const f=c.ec;if(f){for(let d=0;d<f.length;d++)if(f[d](t,l,u)===!1)return}c=c.parent}if(i){Un(),yo(i,null,10,[t,l,u]),Bn();return}}Fv(t,n,s,r,o)}function Fv(t,e,n,r=!0,s=!1){if(s)throw t;console.error(t)}const kt=[];let mn=-1;const Ps=[];let ir=null,Es=0;const Gm=Promise.resolve();let wa=null;function Eo(t){const e=wa||Gm;return t?e.then(this?t.bind(this):t):e}function Uv(t){let e=mn+1,n=kt.length;for(;e<n;){const r=e+n>>>1,s=kt[r],i=Ki(s);i<t||i===t&&s.flags&2?e=r+1:n=r}return e}function Du(t){if(!(t.flags&1)){const e=Ki(t),n=kt[kt.length-1];!n||!(t.flags&2)&&e>=Ki(n)?kt.push(t):kt.splice(Uv(e),0,t),t.flags|=1,Wm()}}function Wm(){wa||(wa=Gm.then(Km))}function Bv(t){ae(t)?Ps.push(...t):ir&&t.id===-1?ir.splice(Es+1,0,t):t.flags&1||(Ps.push(t),t.flags|=1),Wm()}function Ff(t,e,n=mn+1){for(;n<kt.length;n++){const r=kt[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;kt.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function zm(t){if(Ps.length){const e=[...new Set(Ps)].sort((n,r)=>Ki(n)-Ki(r));if(Ps.length=0,ir){ir.push(...e);return}for(ir=e,Es=0;Es<ir.length;Es++){const n=ir[Es];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}ir=null,Es=0}}const Ki=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Km(t){try{for(mn=0;mn<kt.length;mn++){const e=kt[mn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),yo(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;mn<kt.length;mn++){const e=kt[mn];e&&(e.flags&=-2)}mn=-1,kt.length=0,zm(),wa=null,(kt.length||Ps.length)&&Km()}}let Kt=null,Qm=null;function Ia(t){const e=Kt;return Kt=t,Qm=t&&t.type.__scopeId||null,e}function Bt(t,e=Kt,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&Ra(-1);const i=Ia(e);let o;try{o=t(...s)}finally{Ia(i),r._d&&Ra(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function jv(t,e){if(Kt===null)return t;const n=uc(Kt),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,c,l=Oe]=e[s];i&&(de(i)&&(i={mounted:i,updated:i}),i.deep&&Dn(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:c,modifiers:l}))}return t}function qr(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const c=s[o];i&&(c.oldValue=i[o].value);let l=c.dir[r];l&&(Un(),cn(l,n,8,[t.el,c,t,e]),Bn())}}const Ym=Symbol("_vte"),Jm=t=>t.__isTeleport,Vi=t=>t&&(t.disabled||t.disabled===""),Uf=t=>t&&(t.defer||t.defer===""),Bf=t=>typeof SVGElement<"u"&&t instanceof SVGElement,jf=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,Ol=(t,e)=>{const n=t&&t.to;return We(n)?e?e(n):null:n},Xm={name:"Teleport",__isTeleport:!0,process(t,e,n,r,s,i,o,c,l,u){const{mc:f,pc:d,pbc:m,o:{insert:_,querySelector:S,createText:N,createComment:P}}=u,x=Vi(e.props);let{shapeFlag:O,children:H,dynamicChildren:W}=e;if(t==null){const Z=e.el=N(""),te=e.anchor=N("");_(Z,n,r),_(te,n,r);const b=(y,w)=>{O&16&&f(H,y,w,s,i,o,c,l)},E=()=>{const y=e.target=Ol(e.props,S),w=Zm(y,e,N,_);y&&(o!=="svg"&&Bf(y)?o="svg":o!=="mathml"&&jf(y)&&(o="mathml"),s&&s.isCE&&(s.ce._teleportTargets||(s.ce._teleportTargets=new Set)).add(y),x||(b(y,w),sa(e,!1)))};x&&(b(n,te),sa(e,!0)),Uf(e.props)?(e.el.__isMounted=!1,Pt(()=>{E(),delete e.el.__isMounted},i)):E()}else{if(Uf(e.props)&&t.el.__isMounted===!1){Pt(()=>{Xm.process(t,e,n,r,s,i,o,c,l,u)},i);return}e.el=t.el,e.targetStart=t.targetStart;const Z=e.anchor=t.anchor,te=e.target=t.target,b=e.targetAnchor=t.targetAnchor,E=Vi(t.props),y=E?n:te,w=E?Z:b;if(o==="svg"||Bf(te)?o="svg":(o==="mathml"||jf(te))&&(o="mathml"),W?(m(t.dynamicChildren,W,y,s,i,o,c),Uu(t,e,!0)):l||d(t,e,y,w,s,i,o,c,!1),x)E?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):Qo(e,n,Z,u,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const A=e.target=Ol(e.props,S);A&&Qo(e,A,null,u,0)}else E&&Qo(e,te,b,u,1);sa(e,x)}},remove(t,e,n,{um:r,o:{remove:s}},i){const{shapeFlag:o,children:c,anchor:l,targetStart:u,targetAnchor:f,target:d,props:m}=t;if(d&&(s(u),s(f)),i&&s(l),o&16){const _=i||!Vi(m);for(let S=0;S<c.length;S++){const N=c[S];r(N,e,n,_,!!N.dynamicChildren)}}},move:Qo,hydrate:qv};function Qo(t,e,n,{o:{insert:r},m:s},i=2){i===0&&r(t.targetAnchor,e,n);const{el:o,anchor:c,shapeFlag:l,children:u,props:f}=t,d=i===2;if(d&&r(o,e,n),(!d||Vi(f))&&l&16)for(let m=0;m<u.length;m++)s(u[m],e,n,2);d&&r(c,e,n)}function qv(t,e,n,r,s,i,{o:{nextSibling:o,parentNode:c,querySelector:l,insert:u,createText:f}},d){function m(N,P,x,O){P.anchor=d(o(N),P,c(N),n,r,s,i),P.targetStart=x,P.targetAnchor=O}const _=e.target=Ol(e.props,l),S=Vi(e.props);if(_){const N=_._lpa||_.firstChild;if(e.shapeFlag&16)if(S)m(t,e,N,N&&o(N));else{e.anchor=o(t);let P=N;for(;P;){if(P&&P.nodeType===8){if(P.data==="teleport start anchor")e.targetStart=P;else if(P.data==="teleport anchor"){e.targetAnchor=P,_._lpa=e.targetAnchor&&o(e.targetAnchor);break}}P=o(P)}e.targetAnchor||Zm(_,e,f,u),d(N&&o(N),e,_,n,r,s,i)}sa(e,S)}else S&&e.shapeFlag&16&&m(t,e,t,o(t));return e.anchor&&o(e.anchor)}const $v=Xm;function sa(t,e){const n=t.ctx;if(n&&n.ut){let r,s;for(e?(r=t.el,s=t.anchor):(r=t.targetStart,s=t.targetAnchor);r&&r!==s;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function Zm(t,e,n,r){const s=e.targetStart=n(""),i=e.targetAnchor=n("");return s[Ym]=i,t&&(r(s,t),r(i,t)),i}const xn=Symbol("_leaveCb"),Yo=Symbol("_enterCb");function Hv(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ou(()=>{t.isMounted=!0}),ag(()=>{t.isUnmounting=!0}),t}const Wt=[Function,Array],eg={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Wt,onEnter:Wt,onAfterEnter:Wt,onEnterCancelled:Wt,onBeforeLeave:Wt,onLeave:Wt,onAfterLeave:Wt,onLeaveCancelled:Wt,onBeforeAppear:Wt,onAppear:Wt,onAfterAppear:Wt,onAppearCancelled:Wt},tg=t=>{const e=t.subTree;return e.component?tg(e.component):e},Gv={name:"BaseTransition",props:eg,setup(t,{slots:e}){const n=ju(),r=Hv();return()=>{const s=e.default&&sg(e.default(),!0);if(!s||!s.length)return;const i=ng(s),o=Re(t),{mode:c}=o;if(r.isLeaving)return al(i);const l=qf(i);if(!l)return al(i);let u=Ml(l,o,r,n,d=>u=d);l.type!==Nt&&Qi(l,u);let f=n.subTree&&qf(n.subTree);if(f&&f.type!==Nt&&!Kr(f,l)&&tg(n).type!==Nt){let d=Ml(f,o,r,n);if(Qi(f,d),c==="out-in"&&l.type!==Nt)return r.isLeaving=!0,d.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete d.afterLeave,f=void 0},al(i);c==="in-out"&&l.type!==Nt?d.delayLeave=(m,_,S)=>{const N=rg(r,f);N[String(f.key)]=f,m[xn]=()=>{_(),m[xn]=void 0,delete u.delayedLeave,f=void 0},u.delayedLeave=()=>{S(),delete u.delayedLeave,f=void 0}}:f=void 0}else f&&(f=void 0);return i}}};function ng(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==Nt){e=n;break}}return e}const Wv=Gv;function rg(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Ml(t,e,n,r,s){const{appear:i,mode:o,persisted:c=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:f,onEnterCancelled:d,onBeforeLeave:m,onLeave:_,onAfterLeave:S,onLeaveCancelled:N,onBeforeAppear:P,onAppear:x,onAfterAppear:O,onAppearCancelled:H}=e,W=String(t.key),Z=rg(n,t),te=(y,w)=>{y&&cn(y,r,9,w)},b=(y,w)=>{const A=w[1];te(y,w),ae(y)?y.every(I=>I.length<=1)&&A():y.length<=1&&A()},E={mode:o,persisted:c,beforeEnter(y){let w=l;if(!n.isMounted)if(i)w=P||l;else return;y[xn]&&y[xn](!0);const A=Z[W];A&&Kr(t,A)&&A.el[xn]&&A.el[xn](),te(w,[y])},enter(y){let w=u,A=f,I=d;if(!n.isMounted)if(i)w=x||u,A=O||f,I=H||d;else return;let v=!1;const ve=y[Yo]=je=>{v||(v=!0,je?te(I,[y]):te(A,[y]),E.delayedLeave&&E.delayedLeave(),y[Yo]=void 0)};w?b(w,[y,ve]):ve()},leave(y,w){const A=String(t.key);if(y[Yo]&&y[Yo](!0),n.isUnmounting)return w();te(m,[y]);let I=!1;const v=y[xn]=ve=>{I||(I=!0,w(),ve?te(N,[y]):te(S,[y]),y[xn]=void 0,Z[A]===t&&delete Z[A])};Z[A]=t,_?b(_,[y,v]):v()},clone(y){const w=Ml(y,e,n,r,s);return s&&s(w),w}};return E}function al(t){if(oc(t))return t=Ir(t),t.children=null,t}function qf(t){if(!oc(t))return Jm(t.type)&&t.children?ng(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&de(n.default))return n.default()}}function Qi(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Qi(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function sg(t,e=!1,n){let r=[],s=0;for(let i=0;i<t.length;i++){let o=t[i];const c=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===At?(o.patchFlag&128&&s++,r=r.concat(sg(o.children,e,c))):(e||o.type!==Nt)&&r.push(c!=null?Ir(o,{key:c}):o)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}function Ks(t,e){return de(t)?at({name:t.name},e,{setup:t}):t}function ig(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const Aa=new WeakMap;function Di(t,e,n,r,s=!1){if(ae(t)){t.forEach((S,N)=>Di(S,e&&(ae(e)?e[N]:e),n,r,s));return}if(Oi(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Di(t,e,n,r.component.subTree);return}const i=r.shapeFlag&4?uc(r.component):r.el,o=s?null:i,{i:c,r:l}=t,u=e&&e.r,f=c.refs===Oe?c.refs={}:c.refs,d=c.setupState,m=Re(d),_=d===Oe?gm:S=>Pe(m,S);if(u!=null&&u!==l){if($f(e),We(u))f[u]=null,_(u)&&(d[u]=null);else if(Ke(u)){u.value=null;const S=e;S.k&&(f[S.k]=null)}}if(de(l))yo(l,c,12,[o,f]);else{const S=We(l),N=Ke(l);if(S||N){const P=()=>{if(t.f){const x=S?_(l)?d[l]:f[l]:l.value;if(s)ae(x)&&Iu(x,i);else if(ae(x))x.includes(i)||x.push(i);else if(S)f[l]=[i],_(l)&&(d[l]=f[l]);else{const O=[i];l.value=O,t.k&&(f[t.k]=O)}}else S?(f[l]=o,_(l)&&(d[l]=o)):N&&(l.value=o,t.k&&(f[t.k]=o))};if(o){const x=()=>{P(),Aa.delete(t)};x.id=-1,Aa.set(t,x),Pt(x,n)}else $f(t),P()}}}function $f(t){const e=Aa.get(t);e&&(e.flags|=8,Aa.delete(t))}nc().requestIdleCallback;nc().cancelIdleCallback;const Oi=t=>!!t.type.__asyncLoader,oc=t=>t.type.__isKeepAlive;function zv(t,e){og(t,"a",e)}function Kv(t,e){og(t,"da",e)}function og(t,e,n=xt){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(ac(e,r,n),n){let s=n.parent;for(;s&&s.parent;)oc(s.parent.vnode)&&Qv(r,e,n,s),s=s.parent}}function Qv(t,e,n,r){const s=ac(e,t,r,!0);Mu(()=>{Iu(r[e],s)},n)}function ac(t,e,n=xt,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Un();const c=vo(n),l=cn(e,n,t,o);return c(),Bn(),l});return r?s.unshift(i):s.push(i),i}}const Gn=t=>(e,n=xt)=>{(!Ji||t==="sp")&&ac(t,(...r)=>e(...r),n)},Yv=Gn("bm"),Ou=Gn("m"),Jv=Gn("bu"),Xv=Gn("u"),ag=Gn("bum"),Mu=Gn("um"),Zv=Gn("sp"),eT=Gn("rtg"),tT=Gn("rtc");function nT(t,e=xt){ac("ec",t,e)}const rT=Symbol.for("v-ndc");function Ll(t,e,n,r){let s;const i=n,o=ae(t);if(o||We(t)){const c=o&&dr(t);let l=!1,u=!1;c&&(l=!Qt(t),u=wr(t),t=sc(t)),s=new Array(t.length);for(let f=0,d=t.length;f<d;f++)s[f]=e(l?u?va(ht(t[f])):ht(t[f]):t[f],f,void 0,i)}else if(typeof t=="number"){s=new Array(t);for(let c=0;c<t;c++)s[c]=e(c+1,c,void 0,i)}else if(xe(t))if(t[Symbol.iterator])s=Array.from(t,(c,l)=>e(c,l,void 0,i));else{const c=Object.keys(t);s=new Array(c.length);for(let l=0,u=c.length;l<u;l++){const f=c[l];s[l]=e(t[f],f,l,i)}}else s=[];return s}const Fl=t=>t?Rg(t)?uc(t):Fl(t.parent):null,Mi=at(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Fl(t.parent),$root:t=>Fl(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>lg(t),$forceUpdate:t=>t.f||(t.f=()=>{Du(t.update)}),$nextTick:t=>t.n||(t.n=Eo.bind(t.proxy)),$watch:t=>bT.bind(t)}),cl=(t,e)=>t!==Oe&&!t.__isScriptSetup&&Pe(t,e),sT={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:c,appContext:l}=t;let u;if(e[0]!=="$"){const _=o[e];if(_!==void 0)switch(_){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(cl(r,e))return o[e]=1,r[e];if(s!==Oe&&Pe(s,e))return o[e]=2,s[e];if((u=t.propsOptions[0])&&Pe(u,e))return o[e]=3,i[e];if(n!==Oe&&Pe(n,e))return o[e]=4,n[e];Ul&&(o[e]=0)}}const f=Mi[e];let d,m;if(f)return e==="$attrs"&&It(t.attrs,"get",""),f(t);if((d=c.__cssModules)&&(d=d[e]))return d;if(n!==Oe&&Pe(n,e))return o[e]=4,n[e];if(m=l.config.globalProperties,Pe(m,e))return m[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return cl(s,e)?(s[e]=n,!0):r!==Oe&&Pe(r,e)?(r[e]=n,!0):Pe(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:i,type:o}},c){let l,u;return!!(n[c]||t!==Oe&&c[0]!=="$"&&Pe(t,c)||cl(e,c)||(l=i[0])&&Pe(l,c)||Pe(r,c)||Pe(Mi,c)||Pe(s.config.globalProperties,c)||(u=o.__cssModules)&&u[c])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Pe(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Hf(t){return ae(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Ul=!0;function iT(t){const e=lg(t),n=t.proxy,r=t.ctx;Ul=!1,e.beforeCreate&&Gf(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:c,provide:l,inject:u,created:f,beforeMount:d,mounted:m,beforeUpdate:_,updated:S,activated:N,deactivated:P,beforeDestroy:x,beforeUnmount:O,destroyed:H,unmounted:W,render:Z,renderTracked:te,renderTriggered:b,errorCaptured:E,serverPrefetch:y,expose:w,inheritAttrs:A,components:I,directives:v,filters:ve}=e;if(u&&oT(u,r,null),o)for(const fe in o){const Te=o[fe];de(Te)&&(r[fe]=Te.bind(n))}if(s){const fe=s.call(n,n);xe(fe)&&(t.data=_o(fe))}if(Ul=!0,i)for(const fe in i){const Te=i[fe],Dt=de(Te)?Te.bind(n,n):de(Te.get)?Te.get.bind(n,n):yn,hn=!de(Te)&&de(Te.set)?Te.set.bind(n):yn,Mt=ft({get:Dt,set:hn});Object.defineProperty(r,fe,{enumerable:!0,configurable:!0,get:()=>Mt.value,set:ct=>Mt.value=ct})}if(c)for(const fe in c)cg(c[fe],r,n,fe);if(l){const fe=de(l)?l.call(n):l;Reflect.ownKeys(fe).forEach(Te=>{ia(Te,fe[Te])})}f&&Gf(f,t,"c");function Ce(fe,Te){ae(Te)?Te.forEach(Dt=>fe(Dt.bind(n))):Te&&fe(Te.bind(n))}if(Ce(Yv,d),Ce(Ou,m),Ce(Jv,_),Ce(Xv,S),Ce(zv,N),Ce(Kv,P),Ce(nT,E),Ce(tT,te),Ce(eT,b),Ce(ag,O),Ce(Mu,W),Ce(Zv,y),ae(w))if(w.length){const fe=t.exposed||(t.exposed={});w.forEach(Te=>{Object.defineProperty(fe,Te,{get:()=>n[Te],set:Dt=>n[Te]=Dt,enumerable:!0})})}else t.exposed||(t.exposed={});Z&&t.render===yn&&(t.render=Z),A!=null&&(t.inheritAttrs=A),I&&(t.components=I),v&&(t.directives=v),y&&ig(t)}function oT(t,e,n=yn){ae(t)&&(t=Bl(t));for(const r in t){const s=t[r];let i;xe(s)?"default"in s?i=Yt(s.from||r,s.default,!0):i=Yt(s.from||r):i=Yt(s),Ke(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function Gf(t,e,n){cn(ae(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function cg(t,e,n,r){let s=r.includes(".")?Tg(n,r):()=>n[r];if(We(t)){const i=e[t];de(i)&&pr(s,i)}else if(de(t))pr(s,t.bind(n));else if(xe(t))if(ae(t))t.forEach(i=>cg(i,e,n,r));else{const i=de(t.handler)?t.handler.bind(n):e[t.handler];de(i)&&pr(s,i,t)}}function lg(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,c=i.get(e);let l;return c?l=c:!s.length&&!n&&!r?l=e:(l={},s.length&&s.forEach(u=>ba(l,u,o,!0)),ba(l,e,o)),xe(e)&&i.set(e,l),l}function ba(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&ba(t,i,n,!0),s&&s.forEach(o=>ba(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const c=aT[o]||n&&n[o];t[o]=c?c(t[o],e[o]):e[o]}return t}const aT={data:Wf,props:zf,emits:zf,methods:Ii,computed:Ii,beforeCreate:St,created:St,beforeMount:St,mounted:St,beforeUpdate:St,updated:St,beforeDestroy:St,beforeUnmount:St,destroyed:St,unmounted:St,activated:St,deactivated:St,errorCaptured:St,serverPrefetch:St,components:Ii,directives:Ii,watch:lT,provide:Wf,inject:cT};function Wf(t,e){return e?t?function(){return at(de(t)?t.call(this,this):t,de(e)?e.call(this,this):e)}:e:t}function cT(t,e){return Ii(Bl(t),Bl(e))}function Bl(t){if(ae(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function St(t,e){return t?[...new Set([].concat(t,e))]:e}function Ii(t,e){return t?at(Object.create(null),t,e):e}function zf(t,e){return t?ae(t)&&ae(e)?[...new Set([...t,...e])]:at(Object.create(null),Hf(t),Hf(e??{})):e}function lT(t,e){if(!t)return e;if(!e)return t;const n=at(Object.create(null),t);for(const r in e)n[r]=St(t[r],e[r]);return n}function ug(){return{app:null,config:{isNativeTag:gm,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uT=0;function hT(t,e){return function(r,s=null){de(r)||(r=at({},r)),s!=null&&!xe(s)&&(s=null);const i=ug(),o=new WeakSet,c=[];let l=!1;const u=i.app={_uid:uT++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:zT,get config(){return i.config},set config(f){},use(f,...d){return o.has(f)||(f&&de(f.install)?(o.add(f),f.install(u,...d)):de(f)&&(o.add(f),f(u,...d))),u},mixin(f){return i.mixins.includes(f)||i.mixins.push(f),u},component(f,d){return d?(i.components[f]=d,u):i.components[f]},directive(f,d){return d?(i.directives[f]=d,u):i.directives[f]},mount(f,d,m){if(!l){const _=u._ceVNode||Ue(r,s);return _.appContext=i,m===!0?m="svg":m===!1&&(m=void 0),t(_,f,m),l=!0,u._container=f,f.__vue_app__=u,uc(_.component)}},onUnmount(f){c.push(f)},unmount(){l&&(cn(c,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(f,d){return i.provides[f]=d,u},runWithContext(f){const d=ns;ns=u;try{return f()}finally{ns=d}}};return u}}let ns=null;function ia(t,e){if(xt){let n=xt.provides;const r=xt.parent&&xt.parent.provides;r===n&&(n=xt.provides=Object.create(r)),n[t]=e}}function Yt(t,e,n=!1){const r=ju();if(r||ns){let s=ns?ns._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&de(e)?e.call(r&&r.proxy):e}}function fT(){return!!(ju()||ns)}const hg={},fg=()=>Object.create(hg),dg=t=>Object.getPrototypeOf(t)===hg;function dT(t,e,n,r=!1){const s={},i=fg();t.propsDefaults=Object.create(null),pg(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:qm(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function pT(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,c=Re(s),[l]=t.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const f=t.vnode.dynamicProps;for(let d=0;d<f.length;d++){let m=f[d];if(cc(t.emitsOptions,m))continue;const _=e[m];if(l)if(Pe(i,m))_!==i[m]&&(i[m]=_,u=!0);else{const S=Tr(m);s[S]=jl(l,c,S,_,t,!1)}else _!==i[m]&&(i[m]=_,u=!0)}}}else{pg(t,e,s,i)&&(u=!0);let f;for(const d in c)(!e||!Pe(e,d)&&((f=kr(d))===d||!Pe(e,f)))&&(l?n&&(n[d]!==void 0||n[f]!==void 0)&&(s[d]=jl(l,c,d,void 0,t,!0)):delete s[d]);if(i!==c)for(const d in i)(!e||!Pe(e,d))&&(delete i[d],u=!0)}u&&Vn(t.attrs,"set","")}function pg(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,c;if(e)for(let l in e){if(ki(l))continue;const u=e[l];let f;s&&Pe(s,f=Tr(l))?!i||!i.includes(f)?n[f]=u:(c||(c={}))[f]=u:cc(t.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,o=!0)}if(i){const l=Re(n),u=c||Oe;for(let f=0;f<i.length;f++){const d=i[f];n[d]=jl(s,l,d,u[d],t,!Pe(u,d))}}return o}function jl(t,e,n,r,s,i){const o=t[n];if(o!=null){const c=Pe(o,"default");if(c&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&de(l)){const{propsDefaults:u}=s;if(n in u)r=u[n];else{const f=vo(s);r=u[n]=l.call(null,e),f()}}else r=l;s.ce&&s.ce._setProp(n,r)}o[0]&&(i&&!c?r=!1:o[1]&&(r===""||r===kr(n))&&(r=!0))}return r}const mT=new WeakMap;function mg(t,e,n=!1){const r=n?mT:e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},c=[];let l=!1;if(!de(t)){const f=d=>{l=!0;const[m,_]=mg(d,e,!0);at(o,m),_&&c.push(..._)};!n&&e.mixins.length&&e.mixins.forEach(f),t.extends&&f(t.extends),t.mixins&&t.mixins.forEach(f)}if(!i&&!l)return xe(t)&&r.set(t,Rs),Rs;if(ae(i))for(let f=0;f<i.length;f++){const d=Tr(i[f]);Kf(d)&&(o[d]=Oe)}else if(i)for(const f in i){const d=Tr(f);if(Kf(d)){const m=i[f],_=o[d]=ae(m)||de(m)?{type:m}:at({},m),S=_.type;let N=!1,P=!0;if(ae(S))for(let x=0;x<S.length;++x){const O=S[x],H=de(O)&&O.name;if(H==="Boolean"){N=!0;break}else H==="String"&&(P=!1)}else N=de(S)&&S.name==="Boolean";_[0]=N,_[1]=P,(N||Pe(_,"default"))&&c.push(d)}}const u=[o,c];return xe(t)&&r.set(t,u),u}function Kf(t){return t[0]!=="$"&&!ki(t)}const Lu=t=>t==="_"||t==="_ctx"||t==="$stable",Fu=t=>ae(t)?t.map(_n):[_n(t)],gT=(t,e,n)=>{if(e._n)return e;const r=Bt((...s)=>Fu(e(...s)),n);return r._c=!1,r},gg=(t,e,n)=>{const r=t._ctx;for(const s in t){if(Lu(s))continue;const i=t[s];if(de(i))e[s]=gT(s,i,r);else if(i!=null){const o=Fu(i);e[s]=()=>o}}},_g=(t,e)=>{const n=Fu(e);t.slots.default=()=>n},yg=(t,e,n)=>{for(const r in e)(n||!Lu(r))&&(t[r]=e[r])},_T=(t,e,n)=>{const r=t.slots=fg();if(t.vnode.shapeFlag&32){const s=e._;s?(yg(r,e,n),n&&Tm(r,"_",s,!0)):gg(e,r)}else e&&_g(t,e)},yT=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=Oe;if(r.shapeFlag&32){const c=e._;c?n&&c===1?i=!1:yg(s,e,n):(i=!e.$stable,gg(e,s)),o=e}else e&&(_g(t,e),o={default:1});if(i)for(const c in s)!Lu(c)&&o[c]==null&&delete s[c]},Pt=VT;function ET(t){return vT(t)}function vT(t,e){const n=nc();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:c,createComment:l,setText:u,setElementText:f,parentNode:d,nextSibling:m,setScopeId:_=yn,insertStaticContent:S}=t,N=(T,R,C,F=null,B=null,M=null,K=void 0,$=null,q=!!R.dynamicChildren)=>{if(T===R)return;T&&!Kr(T,R)&&(F=L(T),ct(T,B,M,!0),T=null),R.patchFlag===-2&&(q=!1,R.dynamicChildren=null);const{type:j,ref:oe,shapeFlag:Y}=R;switch(j){case lc:P(T,R,C,F);break;case Nt:x(T,R,C,F);break;case oa:T==null&&O(R,C,F,K);break;case At:I(T,R,C,F,B,M,K,$,q);break;default:Y&1?Z(T,R,C,F,B,M,K,$,q):Y&6?v(T,R,C,F,B,M,K,$,q):(Y&64||Y&128)&&j.process(T,R,C,F,B,M,K,$,q,ne)}oe!=null&&B?Di(oe,T&&T.ref,M,R||T,!R):oe==null&&T&&T.ref!=null&&Di(T.ref,null,M,T,!0)},P=(T,R,C,F)=>{if(T==null)r(R.el=c(R.children),C,F);else{const B=R.el=T.el;R.children!==T.children&&u(B,R.children)}},x=(T,R,C,F)=>{T==null?r(R.el=l(R.children||""),C,F):R.el=T.el},O=(T,R,C,F)=>{[T.el,T.anchor]=S(T.children,R,C,F,T.el,T.anchor)},H=({el:T,anchor:R},C,F)=>{let B;for(;T&&T!==R;)B=m(T),r(T,C,F),T=B;r(R,C,F)},W=({el:T,anchor:R})=>{let C;for(;T&&T!==R;)C=m(T),s(T),T=C;s(R)},Z=(T,R,C,F,B,M,K,$,q)=>{if(R.type==="svg"?K="svg":R.type==="math"&&(K="mathml"),T==null)te(R,C,F,B,M,K,$,q);else{const j=T.el&&T.el._isVueCE?T.el:null;try{j&&j._beginPatch(),y(T,R,B,M,K,$,q)}finally{j&&j._endPatch()}}},te=(T,R,C,F,B,M,K,$)=>{let q,j;const{props:oe,shapeFlag:Y,transition:re,dirs:ce}=T;if(q=T.el=o(T.type,M,oe&&oe.is,oe),Y&8?f(q,T.children):Y&16&&E(T.children,q,null,F,B,ll(T,M),K,$),ce&&qr(T,null,F,"created"),b(q,T,T.scopeId,K,F),oe){for(const ke in oe)ke!=="value"&&!ki(ke)&&i(q,ke,null,oe[ke],M,F);"value"in oe&&i(q,"value",null,oe.value,M),(j=oe.onVnodeBeforeMount)&&pn(j,F,T)}ce&&qr(T,null,F,"beforeMount");const me=TT(B,re);me&&re.beforeEnter(q),r(q,R,C),((j=oe&&oe.onVnodeMounted)||me||ce)&&Pt(()=>{j&&pn(j,F,T),me&&re.enter(q),ce&&qr(T,null,F,"mounted")},B)},b=(T,R,C,F,B)=>{if(C&&_(T,C),F)for(let M=0;M<F.length;M++)_(T,F[M]);if(B){let M=B.subTree;if(R===M||Ig(M.type)&&(M.ssContent===R||M.ssFallback===R)){const K=B.vnode;b(T,K,K.scopeId,K.slotScopeIds,B.parent)}}},E=(T,R,C,F,B,M,K,$,q=0)=>{for(let j=q;j<T.length;j++){const oe=T[j]=$?or(T[j]):_n(T[j]);N(null,oe,R,C,F,B,M,K,$)}},y=(T,R,C,F,B,M,K)=>{const $=R.el=T.el;let{patchFlag:q,dynamicChildren:j,dirs:oe}=R;q|=T.patchFlag&16;const Y=T.props||Oe,re=R.props||Oe;let ce;if(C&&$r(C,!1),(ce=re.onVnodeBeforeUpdate)&&pn(ce,C,R,T),oe&&qr(R,T,C,"beforeUpdate"),C&&$r(C,!0),(Y.innerHTML&&re.innerHTML==null||Y.textContent&&re.textContent==null)&&f($,""),j?w(T.dynamicChildren,j,$,C,F,ll(R,B),M):K||Te(T,R,$,null,C,F,ll(R,B),M,!1),q>0){if(q&16)A($,Y,re,C,B);else if(q&2&&Y.class!==re.class&&i($,"class",null,re.class,B),q&4&&i($,"style",Y.style,re.style,B),q&8){const me=R.dynamicProps;for(let ke=0;ke<me.length;ke++){const Ae=me[ke],_t=Y[Ae],yt=re[Ae];(yt!==_t||Ae==="value")&&i($,Ae,_t,yt,B,C)}}q&1&&T.children!==R.children&&f($,R.children)}else!K&&j==null&&A($,Y,re,C,B);((ce=re.onVnodeUpdated)||oe)&&Pt(()=>{ce&&pn(ce,C,R,T),oe&&qr(R,T,C,"updated")},F)},w=(T,R,C,F,B,M,K)=>{for(let $=0;$<R.length;$++){const q=T[$],j=R[$],oe=q.el&&(q.type===At||!Kr(q,j)||q.shapeFlag&198)?d(q.el):C;N(q,j,oe,null,F,B,M,K,!0)}},A=(T,R,C,F,B)=>{if(R!==C){if(R!==Oe)for(const M in R)!ki(M)&&!(M in C)&&i(T,M,R[M],null,B,F);for(const M in C){if(ki(M))continue;const K=C[M],$=R[M];K!==$&&M!=="value"&&i(T,M,$,K,B,F)}"value"in C&&i(T,"value",R.value,C.value,B)}},I=(T,R,C,F,B,M,K,$,q)=>{const j=R.el=T?T.el:c(""),oe=R.anchor=T?T.anchor:c("");let{patchFlag:Y,dynamicChildren:re,slotScopeIds:ce}=R;ce&&($=$?$.concat(ce):ce),T==null?(r(j,C,F),r(oe,C,F),E(R.children||[],C,oe,B,M,K,$,q)):Y>0&&Y&64&&re&&T.dynamicChildren?(w(T.dynamicChildren,re,C,B,M,K,$),(R.key!=null||B&&R===B.subTree)&&Uu(T,R,!0)):Te(T,R,C,oe,B,M,K,$,q)},v=(T,R,C,F,B,M,K,$,q)=>{R.slotScopeIds=$,T==null?R.shapeFlag&512?B.ctx.activate(R,C,F,K,q):ve(R,C,F,B,M,K,q):je(T,R,q)},ve=(T,R,C,F,B,M,K)=>{const $=T.component=jT(T,F,B);if(oc(T)&&($.ctx.renderer=ne),qT($,!1,K),$.asyncDep){if(B&&B.registerDep($,Ce,K),!T.el){const q=$.subTree=Ue(Nt);x(null,q,R,C),T.placeholder=q.el}}else Ce($,T,R,C,B,M,K)},je=(T,R,C)=>{const F=R.component=T.component;if(NT(T,R,C))if(F.asyncDep&&!F.asyncResolved){fe(F,R,C);return}else F.next=R,F.update();else R.el=T.el,F.vnode=R},Ce=(T,R,C,F,B,M,K)=>{const $=()=>{if(T.isMounted){let{next:Y,bu:re,u:ce,parent:me,vnode:ke}=T;{const Ft=Eg(T);if(Ft){Y&&(Y.el=ke.el,fe(T,Y,K)),Ft.asyncDep.then(()=>{T.isUnmounted||$()});return}}let Ae=Y,_t;$r(T,!1),Y?(Y.el=ke.el,fe(T,Y,K)):Y=ke,re&&ra(re),(_t=Y.props&&Y.props.onVnodeBeforeUpdate)&&pn(_t,me,Y,ke),$r(T,!0);const yt=Yf(T),Lt=T.subTree;T.subTree=yt,N(Lt,yt,d(Lt.el),L(Lt),T,B,M),Y.el=yt.el,Ae===null&&xT(T,yt.el),ce&&Pt(ce,B),(_t=Y.props&&Y.props.onVnodeUpdated)&&Pt(()=>pn(_t,me,Y,ke),B)}else{let Y;const{el:re,props:ce}=R,{bm:me,m:ke,parent:Ae,root:_t,type:yt}=T,Lt=Oi(R);$r(T,!1),me&&ra(me),!Lt&&(Y=ce&&ce.onVnodeBeforeMount)&&pn(Y,Ae,R),$r(T,!0);{_t.ce&&_t.ce._def.shadowRoot!==!1&&_t.ce._injectChildStyle(yt);const Ft=T.subTree=Yf(T);N(null,Ft,C,F,T,B,M),R.el=Ft.el}if(ke&&Pt(ke,B),!Lt&&(Y=ce&&ce.onVnodeMounted)){const Ft=R;Pt(()=>pn(Y,Ae,Ft),B)}(R.shapeFlag&256||Ae&&Oi(Ae.vnode)&&Ae.vnode.shapeFlag&256)&&T.a&&Pt(T.a,B),T.isMounted=!0,R=C=F=null}};T.scope.on();const q=T.effect=new Pm($);T.scope.off();const j=T.update=q.run.bind(q),oe=T.job=q.runIfDirty.bind(q);oe.i=T,oe.id=T.uid,q.scheduler=()=>Du(oe),$r(T,!0),j()},fe=(T,R,C)=>{R.component=T;const F=T.vnode.props;T.vnode=R,T.next=null,pT(T,R.props,F,C),yT(T,R.children,C),Un(),Ff(T),Bn()},Te=(T,R,C,F,B,M,K,$,q=!1)=>{const j=T&&T.children,oe=T?T.shapeFlag:0,Y=R.children,{patchFlag:re,shapeFlag:ce}=R;if(re>0){if(re&128){hn(j,Y,C,F,B,M,K,$,q);return}else if(re&256){Dt(j,Y,C,F,B,M,K,$,q);return}}ce&8?(oe&16&&gt(j,B,M),Y!==j&&f(C,Y)):oe&16?ce&16?hn(j,Y,C,F,B,M,K,$,q):gt(j,B,M,!0):(oe&8&&f(C,""),ce&16&&E(Y,C,F,B,M,K,$,q))},Dt=(T,R,C,F,B,M,K,$,q)=>{T=T||Rs,R=R||Rs;const j=T.length,oe=R.length,Y=Math.min(j,oe);let re;for(re=0;re<Y;re++){const ce=R[re]=q?or(R[re]):_n(R[re]);N(T[re],ce,C,null,B,M,K,$,q)}j>oe?gt(T,B,M,!0,!1,Y):E(R,C,F,B,M,K,$,q,Y)},hn=(T,R,C,F,B,M,K,$,q)=>{let j=0;const oe=R.length;let Y=T.length-1,re=oe-1;for(;j<=Y&&j<=re;){const ce=T[j],me=R[j]=q?or(R[j]):_n(R[j]);if(Kr(ce,me))N(ce,me,C,null,B,M,K,$,q);else break;j++}for(;j<=Y&&j<=re;){const ce=T[Y],me=R[re]=q?or(R[re]):_n(R[re]);if(Kr(ce,me))N(ce,me,C,null,B,M,K,$,q);else break;Y--,re--}if(j>Y){if(j<=re){const ce=re+1,me=ce<oe?R[ce].el:F;for(;j<=re;)N(null,R[j]=q?or(R[j]):_n(R[j]),C,me,B,M,K,$,q),j++}}else if(j>re)for(;j<=Y;)ct(T[j],B,M,!0),j++;else{const ce=j,me=j,ke=new Map;for(j=me;j<=re;j++){const lt=R[j]=q?or(R[j]):_n(R[j]);lt.key!=null&&ke.set(lt.key,j)}let Ae,_t=0;const yt=re-me+1;let Lt=!1,Ft=0;const tn=new Array(yt);for(j=0;j<yt;j++)tn[j]=0;for(j=ce;j<=Y;j++){const lt=T[j];if(_t>=yt){ct(lt,B,M,!0);continue}let rt;if(lt.key!=null)rt=ke.get(lt.key);else for(Ae=me;Ae<=re;Ae++)if(tn[Ae-me]===0&&Kr(lt,R[Ae])){rt=Ae;break}rt===void 0?ct(lt,B,M,!0):(tn[rt-me]=j+1,rt>=Ft?Ft=rt:Lt=!0,N(lt,R[rt],C,null,B,M,K,$,q),_t++)}const ds=Lt?wT(tn):Rs;for(Ae=ds.length-1,j=yt-1;j>=0;j--){const lt=me+j,rt=R[lt],ri=R[lt+1],Lr=lt+1<oe?ri.el||ri.placeholder:F;tn[j]===0?N(null,rt,C,Lr,B,M,K,$,q):Lt&&(Ae<0||j!==ds[Ae]?Mt(rt,C,Lr,2):Ae--)}}},Mt=(T,R,C,F,B=null)=>{const{el:M,type:K,transition:$,children:q,shapeFlag:j}=T;if(j&6){Mt(T.component.subTree,R,C,F);return}if(j&128){T.suspense.move(R,C,F);return}if(j&64){K.move(T,R,C,ne);return}if(K===At){r(M,R,C);for(let Y=0;Y<q.length;Y++)Mt(q[Y],R,C,F);r(T.anchor,R,C);return}if(K===oa){H(T,R,C);return}if(F!==2&&j&1&&$)if(F===0)$.beforeEnter(M),r(M,R,C),Pt(()=>$.enter(M),B);else{const{leave:Y,delayLeave:re,afterLeave:ce}=$,me=()=>{T.ctx.isUnmounted?s(M):r(M,R,C)},ke=()=>{M._isLeaving&&M[xn](!0),Y(M,()=>{me(),ce&&ce()})};re?re(M,me,ke):ke()}else r(M,R,C)},ct=(T,R,C,F=!1,B=!1)=>{const{type:M,props:K,ref:$,children:q,dynamicChildren:j,shapeFlag:oe,patchFlag:Y,dirs:re,cacheIndex:ce}=T;if(Y===-2&&(B=!1),$!=null&&(Un(),Di($,null,C,T,!0),Bn()),ce!=null&&(R.renderCache[ce]=void 0),oe&256){R.ctx.deactivate(T);return}const me=oe&1&&re,ke=!Oi(T);let Ae;if(ke&&(Ae=K&&K.onVnodeBeforeUnmount)&&pn(Ae,R,T),oe&6)en(T.component,C,F);else{if(oe&128){T.suspense.unmount(C,F);return}me&&qr(T,null,R,"beforeUnmount"),oe&64?T.type.remove(T,R,C,ne,F):j&&!j.hasOnce&&(M!==At||Y>0&&Y&64)?gt(j,R,C,!1,!0):(M===At&&Y&384||!B&&oe&16)&&gt(q,R,C),F&&Sn(T)}(ke&&(Ae=K&&K.onVnodeUnmounted)||me)&&Pt(()=>{Ae&&pn(Ae,R,T),me&&qr(T,null,R,"unmounted")},C)},Sn=T=>{const{type:R,el:C,anchor:F,transition:B}=T;if(R===At){Zt(C,F);return}if(R===oa){W(T);return}const M=()=>{s(C),B&&!B.persisted&&B.afterLeave&&B.afterLeave()};if(T.shapeFlag&1&&B&&!B.persisted){const{leave:K,delayLeave:$}=B,q=()=>K(C,M);$?$(T.el,M,q):q()}else M()},Zt=(T,R)=>{let C;for(;T!==R;)C=m(T),s(T),T=C;s(R)},en=(T,R,C)=>{const{bum:F,scope:B,job:M,subTree:K,um:$,m:q,a:j}=T;Qf(q),Qf(j),F&&ra(F),B.stop(),M&&(M.flags|=8,ct(K,T,R,C)),$&&Pt($,R),Pt(()=>{T.isUnmounted=!0},R)},gt=(T,R,C,F=!1,B=!1,M=0)=>{for(let K=M;K<T.length;K++)ct(T[K],R,C,F,B)},L=T=>{if(T.shapeFlag&6)return L(T.component.subTree);if(T.shapeFlag&128)return T.suspense.next();const R=m(T.anchor||T.el),C=R&&R[Ym];return C?m(C):R};let J=!1;const Q=(T,R,C)=>{T==null?R._vnode&&ct(R._vnode,null,null,!0):N(R._vnode||null,T,R,null,null,null,C),R._vnode=T,J||(J=!0,Ff(),zm(),J=!1)},ne={p:N,um:ct,m:Mt,r:Sn,mt:ve,mc:E,pc:Te,pbc:w,n:L,o:t};return{render:Q,hydrate:void 0,createApp:hT(Q)}}function ll({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function $r({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function TT(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Uu(t,e,n=!1){const r=t.children,s=e.children;if(ae(r)&&ae(s))for(let i=0;i<r.length;i++){const o=r[i];let c=s[i];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=s[i]=or(s[i]),c.el=o.el),!n&&c.patchFlag!==-2&&Uu(o,c)),c.type===lc&&c.patchFlag!==-1&&(c.el=o.el),c.type===Nt&&!c.el&&(c.el=o.el)}}function wT(t){const e=t.slice(),n=[0];let r,s,i,o,c;const l=t.length;for(r=0;r<l;r++){const u=t[r];if(u!==0){if(s=n[n.length-1],t[s]<u){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)c=i+o>>1,t[n[c]]<u?i=c+1:o=c;u<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function Eg(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Eg(e)}function Qf(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const IT=Symbol.for("v-scx"),AT=()=>Yt(IT);function pr(t,e,n){return vg(t,e,n)}function vg(t,e,n=Oe){const{immediate:r,deep:s,flush:i,once:o}=n,c=at({},n),l=e&&r||!e&&i!=="post";let u;if(Ji){if(i==="sync"){const _=AT();u=_.__watcherHandles||(_.__watcherHandles=[])}else if(!l){const _=()=>{};return _.stop=yn,_.resume=yn,_.pause=yn,_}}const f=xt;c.call=(_,S,N)=>cn(_,f,S,N);let d=!1;i==="post"?c.scheduler=_=>{Pt(_,f&&f.suspense)}:i!=="sync"&&(d=!0,c.scheduler=(_,S)=>{S?_():Du(_)}),c.augmentJob=_=>{e&&(_.flags|=4),d&&(_.flags|=2,f&&(_.id=f.uid,_.i=f))};const m=Lv(t,e,c);return Ji&&(u?u.push(m):l&&m()),m}function bT(t,e,n){const r=this.proxy,s=We(t)?t.includes(".")?Tg(r,t):()=>r[t]:t.bind(r,r);let i;de(e)?i=e:(i=e.handler,n=e);const o=vo(this),c=vg(s,i.bind(r),n);return o(),c}function Tg(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const RT=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Tr(e)}Modifiers`]||t[`${kr(e)}Modifiers`];function ST(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Oe;let s=n;const i=e.startsWith("update:"),o=i&&RT(r,e.slice(7));o&&(o.trim&&(s=n.map(f=>We(f)?f.trim():f)),o.number&&(s=n.map(tc)));let c,l=r[c=nl(e)]||r[c=nl(Tr(e))];!l&&i&&(l=r[c=nl(kr(e))]),l&&cn(l,t,6,s);const u=r[c+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[c])return;t.emitted[c]=!0,cn(u,t,6,s)}}const PT=new WeakMap;function wg(t,e,n=!1){const r=n?PT:e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},c=!1;if(!de(t)){const l=u=>{const f=wg(u,e,!0);f&&(c=!0,at(o,f))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!c?(xe(t)&&r.set(t,null),null):(ae(i)?i.forEach(l=>o[l]=null):at(o,i),xe(t)&&r.set(t,o),o)}function cc(t,e){return!t||!Xa(e)?!1:(e=e.slice(2).replace(/Once$/,""),Pe(t,e[0].toLowerCase()+e.slice(1))||Pe(t,kr(e))||Pe(t,e))}function Yf(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:c,emit:l,render:u,renderCache:f,props:d,data:m,setupState:_,ctx:S,inheritAttrs:N}=t,P=Ia(t);let x,O;try{if(n.shapeFlag&4){const W=s||r,Z=W;x=_n(u.call(Z,W,f,d,_,m,S)),O=c}else{const W=e;x=_n(W.length>1?W(d,{attrs:c,slots:o,emit:l}):W(d,null)),O=e.props?c:CT(c)}}catch(W){Li.length=0,ic(W,t,1),x=Ue(Nt)}let H=x;if(O&&N!==!1){const W=Object.keys(O),{shapeFlag:Z}=H;W.length&&Z&7&&(i&&W.some(wu)&&(O=kT(O,i)),H=Ir(H,O,!1,!0))}return n.dirs&&(H=Ir(H,null,!1,!0),H.dirs=H.dirs?H.dirs.concat(n.dirs):n.dirs),n.transition&&Qi(H,n.transition),x=H,Ia(P),x}const CT=t=>{let e;for(const n in t)(n==="class"||n==="style"||Xa(n))&&((e||(e={}))[n]=t[n]);return e},kT=(t,e)=>{const n={};for(const r in t)(!wu(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function NT(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:c,patchFlag:l}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?Jf(r,o,u):!!o;if(l&8){const f=e.dynamicProps;for(let d=0;d<f.length;d++){const m=f[d];if(o[m]!==r[m]&&!cc(u,m))return!0}}}else return(s||c)&&(!c||!c.$stable)?!0:r===o?!1:r?o?Jf(r,o,u):!0:!!o;return!1}function Jf(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!cc(n,i))return!0}return!1}function xT({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const Ig=t=>t.__isSuspense;function VT(t,e){e&&e.pendingBranch?ae(t)?e.effects.push(...t):e.effects.push(t):Bv(t)}const At=Symbol.for("v-fgt"),lc=Symbol.for("v-txt"),Nt=Symbol.for("v-cmt"),oa=Symbol.for("v-stc"),Li=[];let $t=null;function be(t=!1){Li.push($t=t?null:[])}function DT(){Li.pop(),$t=Li[Li.length-1]||null}let Yi=1;function Ra(t,e=!1){Yi+=t,t<0&&$t&&e&&($t.hasOnce=!0)}function Ag(t){return t.dynamicChildren=Yi>0?$t||Rs:null,DT(),Yi>0&&$t&&$t.push(t),t}function Le(t,e,n,r,s,i){return Ag(se(t,e,n,r,s,i,!0))}function Jr(t,e,n,r,s){return Ag(Ue(t,e,n,r,s,!0))}function Sa(t){return t?t.__v_isVNode===!0:!1}function Kr(t,e){return t.type===e.type&&t.key===e.key}const bg=({key:t})=>t??null,aa=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?We(t)||Ke(t)||de(t)?{i:Kt,r:t,k:e,f:!!n}:t:null);function se(t,e=null,n=null,r=0,s=null,i=t===At?0:1,o=!1,c=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&bg(e),ref:e&&aa(e),scopeId:Qm,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Kt};return c?(Bu(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=We(n)?8:16),Yi>0&&!o&&$t&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&$t.push(l),l}const Ue=OT;function OT(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===rT)&&(t=Nt),Sa(t)){const c=Ir(t,e,!0);return n&&Bu(c,n),Yi>0&&!i&&$t&&(c.shapeFlag&6?$t[$t.indexOf(t)]=c:$t.push(c)),c.patchFlag=-2,c}if(WT(t)&&(t=t.__vccOpts),e){e=MT(e);let{class:c,style:l}=e;c&&!We(c)&&(e.class=go(c)),xe(l)&&(xu(l)&&!ae(l)&&(l=at({},l)),e.style=bu(l))}const o=We(t)?1:Ig(t)?128:Jm(t)?64:xe(t)?4:de(t)?2:0;return se(t,e,n,r,s,o,i,!0)}function MT(t){return t?xu(t)||dg(t)?at({},t):t:null}function Ir(t,e,n=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:c,transition:l}=t,u=e?FT(s||{},e):s,f={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&bg(u),ref:e&&e.ref?n&&i?ae(i)?i.concat(aa(e)):[i,aa(e)]:aa(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:c,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==At?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ir(t.ssContent),ssFallback:t.ssFallback&&Ir(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&Qi(f,l.clone(f)),f}function vt(t=" ",e=0){return Ue(lc,null,t,e)}function LT(t,e){const n=Ue(oa,null,t);return n.staticCount=e,n}function Qr(t="",e=!1){return e?(be(),Jr(Nt,null,t)):Ue(Nt,null,t)}function _n(t){return t==null||typeof t=="boolean"?Ue(Nt):ae(t)?Ue(At,null,t.slice()):Sa(t)?or(t):Ue(lc,null,String(t))}function or(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Ir(t)}function Bu(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(ae(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),Bu(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!dg(e)?e._ctx=Kt:s===3&&Kt&&(Kt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else de(e)?(e={default:e,_ctx:Kt},n=32):(e=String(e),r&64?(n=16,e=[vt(e)]):n=8);t.children=e,t.shapeFlag|=n}function FT(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=go([e.class,r.class]));else if(s==="style")e.style=bu([e.style,r.style]);else if(Xa(s)){const i=e[s],o=r[s];o&&i!==o&&!(ae(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function pn(t,e,n,r=null){cn(t,e,7,[n,r])}const UT=ug();let BT=0;function jT(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||UT,i={uid:BT++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new bm(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:mg(r,s),emitsOptions:wg(r,s),emit:null,emitted:null,propsDefaults:Oe,inheritAttrs:r.inheritAttrs,ctx:Oe,data:Oe,props:Oe,attrs:Oe,slots:Oe,refs:Oe,setupState:Oe,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=ST.bind(null,i),t.ce&&t.ce(i),i}let xt=null;const ju=()=>xt||Kt;let Pa,ql;{const t=nc(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};Pa=e("__VUE_INSTANCE_SETTERS__",n=>xt=n),ql=e("__VUE_SSR_SETTERS__",n=>Ji=n)}const vo=t=>{const e=xt;return Pa(t),t.scope.on(),()=>{t.scope.off(),Pa(e)}},Xf=()=>{xt&&xt.scope.off(),Pa(null)};function Rg(t){return t.vnode.shapeFlag&4}let Ji=!1;function qT(t,e=!1,n=!1){e&&ql(e);const{props:r,children:s}=t.vnode,i=Rg(t);dT(t,r,i,e),_T(t,s,n||e);const o=i?$T(t,e):void 0;return e&&ql(!1),o}function $T(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,sT);const{setup:r}=n;if(r){Un();const s=t.setupContext=r.length>1?GT(t):null,i=vo(t),o=yo(r,t,0,[t.props,s]),c=_m(o);if(Bn(),i(),(c||t.sp)&&!Oi(t)&&ig(t),c){if(o.then(Xf,Xf),e)return o.then(l=>{Zf(t,l)}).catch(l=>{ic(l,t,0)});t.asyncDep=o}else Zf(t,o)}else Sg(t)}function Zf(t,e,n){de(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:xe(e)&&(t.setupState=Hm(e)),Sg(t)}function Sg(t,e,n){const r=t.type;t.render||(t.render=r.render||yn);{const s=vo(t);Un();try{iT(t)}finally{Bn(),s()}}}const HT={get(t,e){return It(t,"get",""),t[e]}};function GT(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,HT),slots:t.slots,emit:t.emit,expose:e}}function uc(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Hm(Vu(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Mi)return Mi[n](t)},has(e,n){return n in e||n in Mi}})):t.proxy}function WT(t){return de(t)&&"__vccOpts"in t}const ft=(t,e)=>Ov(t,e,Ji);function qu(t,e,n){try{Ra(-1);const r=arguments.length;return r===2?xe(e)&&!ae(e)?Sa(e)?Ue(t,null,[e]):Ue(t,e):Ue(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Sa(n)&&(n=[n]),Ue(t,e,n))}finally{Ra(1)}}const zT="3.5.24";let $l;const ed=typeof window<"u"&&window.trustedTypes;if(ed)try{$l=ed.createPolicy("vue",{createHTML:t=>t})}catch{}const Pg=$l?t=>$l.createHTML(t):t=>t,KT="http://www.w3.org/2000/svg",QT="http://www.w3.org/1998/Math/MathML",Nn=typeof document<"u"?document:null,td=Nn&&Nn.createElement("template"),YT={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?Nn.createElementNS(KT,t):e==="mathml"?Nn.createElementNS(QT,t):n?Nn.createElement(t,{is:n}):Nn.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>Nn.createTextNode(t),createComment:t=>Nn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Nn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{td.innerHTML=Pg(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const c=td.content;if(r==="svg"||r==="mathml"){const l=c.firstChild;for(;l.firstChild;)c.appendChild(l.firstChild);c.removeChild(l)}e.insertBefore(c,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},tr="transition",Ei="animation",Xi=Symbol("_vtc"),Cg={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},JT=at({},eg,Cg),XT=t=>(t.displayName="Transition",t.props=JT,t),ZT=XT((t,{slots:e})=>qu(Wv,ew(t),e)),Hr=(t,e=[])=>{ae(t)?t.forEach(n=>n(...e)):t&&t(...e)},nd=t=>t?ae(t)?t.some(e=>e.length>1):t.length>1:!1;function ew(t){const e={};for(const I in t)I in Cg||(e[I]=t[I]);if(t.css===!1)return e;const{name:n="v",type:r,duration:s,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:c=`${n}-enter-to`,appearFromClass:l=i,appearActiveClass:u=o,appearToClass:f=c,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:m=`${n}-leave-active`,leaveToClass:_=`${n}-leave-to`}=t,S=tw(s),N=S&&S[0],P=S&&S[1],{onBeforeEnter:x,onEnter:O,onEnterCancelled:H,onLeave:W,onLeaveCancelled:Z,onBeforeAppear:te=x,onAppear:b=O,onAppearCancelled:E=H}=e,y=(I,v,ve,je)=>{I._enterCancelled=je,Gr(I,v?f:c),Gr(I,v?u:o),ve&&ve()},w=(I,v)=>{I._isLeaving=!1,Gr(I,d),Gr(I,_),Gr(I,m),v&&v()},A=I=>(v,ve)=>{const je=I?b:O,Ce=()=>y(v,I,ve);Hr(je,[v,Ce]),rd(()=>{Gr(v,I?l:i),Cn(v,I?f:c),nd(je)||sd(v,r,N,Ce)})};return at(e,{onBeforeEnter(I){Hr(x,[I]),Cn(I,i),Cn(I,o)},onBeforeAppear(I){Hr(te,[I]),Cn(I,l),Cn(I,u)},onEnter:A(!1),onAppear:A(!0),onLeave(I,v){I._isLeaving=!0;const ve=()=>w(I,v);Cn(I,d),I._enterCancelled?(Cn(I,m),ad(I)):(ad(I),Cn(I,m)),rd(()=>{I._isLeaving&&(Gr(I,d),Cn(I,_),nd(W)||sd(I,r,P,ve))}),Hr(W,[I,ve])},onEnterCancelled(I){y(I,!1,void 0,!0),Hr(H,[I])},onAppearCancelled(I){y(I,!0,void 0,!0),Hr(E,[I])},onLeaveCancelled(I){w(I),Hr(Z,[I])}})}function tw(t){if(t==null)return null;if(xe(t))return[ul(t.enter),ul(t.leave)];{const e=ul(t);return[e,e]}}function ul(t){return ZE(t)}function Cn(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Xi]||(t[Xi]=new Set)).add(e)}function Gr(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[Xi];n&&(n.delete(e),n.size||(t[Xi]=void 0))}function rd(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let nw=0;function sd(t,e,n,r){const s=t._endId=++nw,i=()=>{s===t._endId&&r()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:c,propCount:l}=rw(t,e);if(!o)return r();const u=o+"end";let f=0;const d=()=>{t.removeEventListener(u,m),i()},m=_=>{_.target===t&&++f>=l&&d()};setTimeout(()=>{f<l&&d()},c+1),t.addEventListener(u,m)}function rw(t,e){const n=window.getComputedStyle(t),r=S=>(n[S]||"").split(", "),s=r(`${tr}Delay`),i=r(`${tr}Duration`),o=id(s,i),c=r(`${Ei}Delay`),l=r(`${Ei}Duration`),u=id(c,l);let f=null,d=0,m=0;e===tr?o>0&&(f=tr,d=o,m=i.length):e===Ei?u>0&&(f=Ei,d=u,m=l.length):(d=Math.max(o,u),f=d>0?o>u?tr:Ei:null,m=f?f===tr?i.length:l.length:0);const _=f===tr&&/\b(?:transform|all)(?:,|$)/.test(r(`${tr}Property`).toString());return{type:f,timeout:d,propCount:m,hasTransform:_}}function id(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>od(n)+od(t[r])))}function od(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function ad(t){return(t?t.ownerDocument:document).body.offsetHeight}function sw(t,e,n){const r=t[Xi];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Ca=Symbol("_vod"),kg=Symbol("_vsh"),iw={name:"show",beforeMount(t,{value:e},{transition:n}){t[Ca]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):vi(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),vi(t,!0),r.enter(t)):r.leave(t,()=>{vi(t,!1)}):vi(t,e))},beforeUnmount(t,{value:e}){vi(t,e)}};function vi(t,e){t.style.display=e?t[Ca]:"none",t[kg]=!e}const ow=Symbol(""),aw=/(?:^|;)\s*display\s*:/;function cw(t,e,n){const r=t.style,s=We(n);let i=!1;if(n&&!s){if(e)if(We(e))for(const o of e.split(";")){const c=o.slice(0,o.indexOf(":")).trim();n[c]==null&&ca(r,c,"")}else for(const o in e)n[o]==null&&ca(r,o,"");for(const o in n)o==="display"&&(i=!0),ca(r,o,n[o])}else if(s){if(e!==n){const o=r[ow];o&&(n+=";"+o),r.cssText=n,i=aw.test(n)}}else e&&t.removeAttribute("style");Ca in t&&(t[Ca]=i?r.display:"",t[kg]&&(r.display="none"))}const cd=/\s*!important$/;function ca(t,e,n){if(ae(n))n.forEach(r=>ca(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=lw(t,e);cd.test(n)?t.setProperty(kr(r),n.replace(cd,""),"important"):t[r]=n}}const ld=["Webkit","Moz","ms"],hl={};function lw(t,e){const n=hl[e];if(n)return n;let r=Tr(e);if(r!=="filter"&&r in t)return hl[e]=r;r=vm(r);for(let s=0;s<ld.length;s++){const i=ld[s]+r;if(i in t)return hl[e]=i}return e}const ud="http://www.w3.org/1999/xlink";function hd(t,e,n,r,s,i=iv(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(ud,e.slice(6,e.length)):t.setAttributeNS(ud,e,n):n==null||i&&!wm(n)?t.removeAttribute(e):t.setAttribute(e,i?"":An(n)?String(n):n)}function fd(t,e,n,r,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?Pg(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const c=i==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(c!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const c=typeof t[e];c==="boolean"?n=wm(n):n==null&&c==="string"?(n="",o=!0):c==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(s||e)}function Yr(t,e,n,r){t.addEventListener(e,n,r)}function uw(t,e,n,r){t.removeEventListener(e,n,r)}const dd=Symbol("_vei");function hw(t,e,n,r,s=null){const i=t[dd]||(t[dd]={}),o=i[e];if(r&&o)o.value=r;else{const[c,l]=fw(e);if(r){const u=i[e]=mw(r,s);Yr(t,c,u,l)}else o&&(uw(t,c,o,l),i[e]=void 0)}}const pd=/(?:Once|Passive|Capture)$/;function fw(t){let e;if(pd.test(t)){e={};let r;for(;r=t.match(pd);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):kr(t.slice(2)),e]}let fl=0;const dw=Promise.resolve(),pw=()=>fl||(dw.then(()=>fl=0),fl=Date.now());function mw(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;cn(gw(r,n.value),e,5,[r])};return n.value=t,n.attached=pw(),n}function gw(t,e){if(ae(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const md=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,_w=(t,e,n,r,s,i)=>{const o=s==="svg";e==="class"?sw(t,r,o):e==="style"?cw(t,n,r):Xa(e)?wu(e)||hw(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):yw(t,e,r,o))?(fd(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&hd(t,e,r,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!We(r))?fd(t,Tr(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),hd(t,e,r,o))};function yw(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&md(e)&&de(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return md(e)&&We(n)?!1:e in t}const ka=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ae(e)?n=>ra(e,n):e};function Ew(t){t.target.composing=!0}function gd(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Cs=Symbol("_assign");function _d(t,e,n){return e&&(t=t.trim()),n&&(t=tc(t)),t}const Ik={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[Cs]=ka(s);const i=r||s.props&&s.props.type==="number";Yr(t,e?"change":"input",o=>{o.target.composing||t[Cs](_d(t.value,n,i))}),(n||i)&&Yr(t,"change",()=>{t.value=_d(t.value,n,i)}),e||(Yr(t,"compositionstart",Ew),Yr(t,"compositionend",gd),Yr(t,"change",gd))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},o){if(t[Cs]=ka(o),t.composing)return;const c=(i||t.type==="number")&&!/^0\d/.test(t.value)?tc(t.value):t.value,l=e??"";c!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||s&&t.value.trim()===l)||(t.value=l))}},Ak={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const s=Za(e);Yr(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?tc(Na(o)):Na(o));t[Cs](t.multiple?s?new Set(i):i:i[0]),t._assigning=!0,Eo(()=>{t._assigning=!1})}),t[Cs]=ka(r)},mounted(t,{value:e}){yd(t,e)},beforeUpdate(t,e,n){t[Cs]=ka(n)},updated(t,{value:e}){t._assigning||yd(t,e)}};function yd(t,e){const n=t.multiple,r=ae(e);if(!(n&&!r&&!Za(e))){for(let s=0,i=t.options.length;s<i;s++){const o=t.options[s],c=Na(o);if(n)if(r){const l=typeof c;l==="string"||l==="number"?o.selected=e.some(u=>String(u)===String(c)):o.selected=av(e,c)>-1}else o.selected=e.has(c);else if(rc(Na(o),e)){t.selectedIndex!==s&&(t.selectedIndex=s);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Na(t){return"_value"in t?t._value:t.value}const vw=["ctrl","shift","alt","meta"],Tw={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>vw.some(n=>t[`${n}Key`]&&!e.includes(n))},ww=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=((s,...i)=>{for(let o=0;o<e.length;o++){const c=Tw[e[o]];if(c&&c(s,e))return}return t(s,...i)}))},Iw={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},bk=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=(s=>{if(!("key"in s))return;const i=kr(s.key);if(e.some(o=>o===i||Iw[o]===i))return t(s)}))},Aw=at({patchProp:_w},YT);let Ed;function bw(){return Ed||(Ed=ET(Aw))}const Rw=((...t)=>{const e=bw().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=Pw(r);if(!s)return;const i=e._component;!de(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,Sw(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e});function Sw(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Pw(t){return We(t)?document.querySelector(t):t}let Ng;const hc=t=>Ng=t,xg=Symbol();function Hl(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Fi;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Fi||(Fi={}));function Cw(){const t=Rm(!0),e=t.run(()=>nn({}));let n=[],r=[];const s=Vu({install(i){hc(s),s._a=i,i.provide(xg,s),i.config.globalProperties.$pinia=s,r.forEach(o=>n.push(o)),r=[]},use(i){return this._a?n.push(i):r.push(i),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return s}const Vg=()=>{};function vd(t,e,n,r=Vg){t.add(e);const s=()=>{t.delete(e)&&r()};return!n&&Sm()&&cv(s),s}function ys(t,...e){t.forEach(n=>{n(...e)})}const kw=t=>t(),Td=Symbol(),dl=Symbol();function Gl(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,r)=>t.set(r,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],s=t[n];Hl(s)&&Hl(r)&&t.hasOwnProperty(n)&&!Ke(r)&&!dr(r)?t[n]=Gl(s,r):t[n]=r}return t}const Nw=Symbol();function xw(t){return!Hl(t)||!Object.prototype.hasOwnProperty.call(t,Nw)}const{assign:sr}=Object;function Vw(t){return!!(Ke(t)&&t.effect)}function Dw(t,e,n,r){const{state:s,actions:i,getters:o}=e,c=n.state.value[t];let l;function u(){c||(n.state.value[t]=s?s():{});const f=Nv(n.state.value[t]);return sr(f,i,Object.keys(o||{}).reduce((d,m)=>(d[m]=Vu(ft(()=>{hc(n);const _=n._s.get(t);return o[m].call(_,_)})),d),{}))}return l=Dg(t,u,e,n,r,!0),l}function Dg(t,e,n={},r,s,i){let o;const c=sr({actions:{}},n),l={deep:!0};let u,f,d=new Set,m=new Set,_;const S=r.state.value[t];!i&&!S&&(r.state.value[t]={}),nn({});let N;function P(E){let y;u=f=!1,typeof E=="function"?(E(r.state.value[t]),y={type:Fi.patchFunction,storeId:t,events:_}):(Gl(r.state.value[t],E),y={type:Fi.patchObject,payload:E,storeId:t,events:_});const w=N=Symbol();Eo().then(()=>{N===w&&(u=!0)}),f=!0,ys(d,y,r.state.value[t])}const x=i?function(){const{state:y}=n,w=y?y():{};this.$patch(A=>{sr(A,w)})}:Vg;function O(){o.stop(),d.clear(),m.clear(),r._s.delete(t)}const H=(E,y="")=>{if(Td in E)return E[dl]=y,E;const w=function(){hc(r);const A=Array.from(arguments),I=new Set,v=new Set;function ve(fe){I.add(fe)}function je(fe){v.add(fe)}ys(m,{args:A,name:w[dl],store:Z,after:ve,onError:je});let Ce;try{Ce=E.apply(this&&this.$id===t?this:Z,A)}catch(fe){throw ys(v,fe),fe}return Ce instanceof Promise?Ce.then(fe=>(ys(I,fe),fe)).catch(fe=>(ys(v,fe),Promise.reject(fe))):(ys(I,Ce),Ce)};return w[Td]=!0,w[dl]=y,w},W={_p:r,$id:t,$onAction:vd.bind(null,m),$patch:P,$reset:x,$subscribe(E,y={}){const w=vd(d,E,y.detached,()=>A()),A=o.run(()=>pr(()=>r.state.value[t],I=>{(y.flush==="sync"?f:u)&&E({storeId:t,type:Fi.direct,events:_},I)},sr({},l,y)));return w},$dispose:O},Z=_o(W);r._s.set(t,Z);const b=(r._a&&r._a.runWithContext||kw)(()=>r._e.run(()=>(o=Rm()).run(()=>e({action:H}))));for(const E in b){const y=b[E];if(Ke(y)&&!Vw(y)||dr(y))i||(S&&xw(y)&&(Ke(y)?y.value=S[E]:Gl(y,S[E])),r.state.value[t][E]=y);else if(typeof y=="function"){const w=H(y,E);b[E]=w,c.actions[E]=y}}return sr(Z,b),sr(Re(Z),b),Object.defineProperty(Z,"$state",{get:()=>r.state.value[t],set:E=>{P(y=>{sr(y,E)})}}),r._p.forEach(E=>{sr(Z,o.run(()=>E({store:Z,app:r._a,pinia:r,options:c})))}),S&&i&&n.hydrate&&n.hydrate(Z.$state,S),u=!0,f=!0,Z}function Og(t,e,n){let r;const s=typeof e=="function";r=s?n:e;function i(o,c){const l=fT();return o=o||(l?Yt(xg,null):null),o&&hc(o),o=Ng,o._s.has(t)||(s?Dg(t,e,r,o):Dw(t,r,o)),o._s.get(t)}return i.$id=t,i}const Ow="/logo.png";const vs=typeof document<"u";function Mg(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Mw(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&Mg(t.default)}const Se=Object.assign;function pl(t,e){const n={};for(const r in e){const s=e[r];n[r]=ln(s)?s.map(t):t(s)}return n}const Ui=()=>{},ln=Array.isArray;function wd(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}const Lg=/#/g,Lw=/&/g,Fw=/\//g,Uw=/=/g,Bw=/\?/g,Fg=/\+/g,jw=/%5B/g,qw=/%5D/g,Ug=/%5E/g,$w=/%60/g,Bg=/%7B/g,Hw=/%7C/g,jg=/%7D/g,Gw=/%20/g;function $u(t){return t==null?"":encodeURI(""+t).replace(Hw,"|").replace(jw,"[").replace(qw,"]")}function Ww(t){return $u(t).replace(Bg,"{").replace(jg,"}").replace(Ug,"^")}function Wl(t){return $u(t).replace(Fg,"%2B").replace(Gw,"+").replace(Lg,"%23").replace(Lw,"%26").replace($w,"`").replace(Bg,"{").replace(jg,"}").replace(Ug,"^")}function zw(t){return Wl(t).replace(Uw,"%3D")}function Kw(t){return $u(t).replace(Lg,"%23").replace(Bw,"%3F")}function Qw(t){return Kw(t).replace(Fw,"%2F")}function Zi(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const Yw=/\/$/,Jw=t=>t.replace(Yw,"");function ml(t,e,n="/"){let r,s={},i="",o="";const c=e.indexOf("#");let l=e.indexOf("?");return l=c>=0&&l>c?-1:l,l>=0&&(r=e.slice(0,l),i=e.slice(l,c>0?c:e.length),s=t(i.slice(1))),c>=0&&(r=r||e.slice(0,c),o=e.slice(c,e.length)),r=tI(r??e,n),{fullPath:r+i+o,path:r,query:s,hash:Zi(o)}}function Xw(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Id(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function Zw(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&Ls(e.matched[r],n.matched[s])&&qg(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Ls(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function qg(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!eI(t[n],e[n]))return!1;return!0}function eI(t,e){return ln(t)?Ad(t,e):ln(e)?Ad(e,t):t===e}function Ad(t,e){return ln(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function tI(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,c;for(o=0;o<r.length;o++)if(c=r[o],c!==".")if(c==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const nr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let zl=(function(t){return t.pop="pop",t.push="push",t})({}),gl=(function(t){return t.back="back",t.forward="forward",t.unknown="",t})({});function nI(t){if(!t)if(vs){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),Jw(t)}const rI=/^[^#]+#/;function sI(t,e){return t.replace(rI,"#")+e}function iI(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const fc=()=>({left:window.scrollX,top:window.scrollY});function oI(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=iI(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function bd(t,e){return(history.state?history.state.position-e:-1)+t}const Kl=new Map;function aI(t,e){Kl.set(t,e)}function cI(t){const e=Kl.get(t);return Kl.delete(t),e}function lI(t){return typeof t=="string"||t&&typeof t=="object"}function $g(t){return typeof t=="string"||typeof t=="symbol"}let He=(function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t})({});const Hg=Symbol("");He.MATCHER_NOT_FOUND+"",He.NAVIGATION_GUARD_REDIRECT+"",He.NAVIGATION_ABORTED+"",He.NAVIGATION_CANCELLED+"",He.NAVIGATION_DUPLICATED+"";function Fs(t,e){return Se(new Error,{type:t,[Hg]:!0},e)}function kn(t,e){return t instanceof Error&&Hg in t&&(e==null||!!(t.type&e))}const uI=["params","query","hash"];function hI(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of uI)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function fI(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<n.length;++r){const s=n[r].replace(Fg," "),i=s.indexOf("="),o=Zi(i<0?s:s.slice(0,i)),c=i<0?null:Zi(s.slice(i+1));if(o in e){let l=e[o];ln(l)||(l=e[o]=[l]),l.push(c)}else e[o]=c}return e}function Rd(t){let e="";for(let n in t){const r=t[n];if(n=zw(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(ln(r)?r.map(s=>s&&Wl(s)):[r&&Wl(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function dI(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=ln(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const pI=Symbol(""),Sd=Symbol(""),dc=Symbol(""),Hu=Symbol(""),Ql=Symbol("");function Ti(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function ar(t,e,n,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((c,l)=>{const u=m=>{m===!1?l(Fs(He.NAVIGATION_ABORTED,{from:n,to:e})):m instanceof Error?l(m):lI(m)?l(Fs(He.NAVIGATION_GUARD_REDIRECT,{from:e,to:m})):(o&&r.enterCallbacks[s]===o&&typeof m=="function"&&o.push(m),c())},f=i(()=>t.call(r&&r.instances[s],e,n,u));let d=Promise.resolve(f);t.length<3&&(d=d.then(u)),d.catch(m=>l(m))})}function _l(t,e,n,r,s=i=>i()){const i=[];for(const o of t)for(const c in o.components){let l=o.components[c];if(!(e!=="beforeRouteEnter"&&!o.instances[c]))if(Mg(l)){const u=(l.__vccOpts||l)[e];u&&i.push(ar(u,n,r,o,c,s))}else{let u=l();i.push(()=>u.then(f=>{if(!f)throw new Error(`Couldn't resolve component "${c}" at "${o.path}"`);const d=Mw(f)?f.default:f;o.mods[c]=f,o.components[c]=d;const m=(d.__vccOpts||d)[e];return m&&ar(m,n,r,o,c,s)()}))}}return i}function mI(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const c=e.matched[o];c&&(t.matched.find(u=>Ls(u,c))?r.push(c):n.push(c));const l=t.matched[o];l&&(e.matched.find(u=>Ls(u,l))||s.push(l))}return[n,r,s]}let gI=()=>location.protocol+"//"+location.host;function Gg(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let o=s.includes(t.slice(i))?t.slice(i).length:1,c=s.slice(o);return c[0]!=="/"&&(c="/"+c),Id(c,"")}return Id(n,t)+r+s}function _I(t,e,n,r){let s=[],i=[],o=null;const c=({state:m})=>{const _=Gg(t,location),S=n.value,N=e.value;let P=0;if(m){if(n.value=_,e.value=m,o&&o===S){o=null;return}P=N?m.position-N.position:0}else r(_);s.forEach(x=>{x(n.value,S,{delta:P,type:zl.pop,direction:P?P>0?gl.forward:gl.back:gl.unknown})})};function l(){o=n.value}function u(m){s.push(m);const _=()=>{const S=s.indexOf(m);S>-1&&s.splice(S,1)};return i.push(_),_}function f(){if(document.visibilityState==="hidden"){const{history:m}=window;if(!m.state)return;m.replaceState(Se({},m.state,{scroll:fc()}),"")}}function d(){for(const m of i)m();i=[],window.removeEventListener("popstate",c),window.removeEventListener("pagehide",f),document.removeEventListener("visibilitychange",f)}return window.addEventListener("popstate",c),window.addEventListener("pagehide",f),document.addEventListener("visibilitychange",f),{pauseListeners:l,listen:u,destroy:d}}function Pd(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?fc():null}}function yI(t){const{history:e,location:n}=window,r={value:Gg(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,u,f){const d=t.indexOf("#"),m=d>-1?(n.host&&document.querySelector("base")?t:t.slice(d))+l:gI()+t+l;try{e[f?"replaceState":"pushState"](u,"",m),s.value=u}catch(_){console.error(_),n[f?"replace":"assign"](m)}}function o(l,u){i(l,Se({},e.state,Pd(s.value.back,l,s.value.forward,!0),u,{position:s.value.position}),!0),r.value=l}function c(l,u){const f=Se({},s.value,e.state,{forward:l,scroll:fc()});i(f.current,f,!0),i(l,Se({},Pd(r.value,l,null),{position:f.position+1},u),!1),r.value=l}return{location:r,state:s,push:c,replace:o}}function EI(t){t=nI(t);const e=yI(t),n=_I(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=Se({location:"",base:t,go:r,createHref:sI.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}let Xr=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t})({});var tt=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t})(tt||{});const vI={type:Xr.Static,value:""},TI=/[a-zA-Z0-9_]/;function wI(t){if(!t)return[[]];if(t==="/")return[[vI]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(_){throw new Error(`ERR (${n})/"${u}": ${_}`)}let n=tt.Static,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let c=0,l,u="",f="";function d(){u&&(n===tt.Static?i.push({type:Xr.Static,value:u}):n===tt.Param||n===tt.ParamRegExp||n===tt.ParamRegExpEnd?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:Xr.Param,value:u,regexp:f,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function m(){u+=l}for(;c<t.length;){if(l=t[c++],l==="\\"&&n!==tt.ParamRegExp){r=n,n=tt.EscapeNext;continue}switch(n){case tt.Static:l==="/"?(u&&d(),o()):l===":"?(d(),n=tt.Param):m();break;case tt.EscapeNext:m(),n=r;break;case tt.Param:l==="("?n=tt.ParamRegExp:TI.test(l)?m():(d(),n=tt.Static,l!=="*"&&l!=="?"&&l!=="+"&&c--);break;case tt.ParamRegExp:l===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+l:n=tt.ParamRegExpEnd:f+=l;break;case tt.ParamRegExpEnd:d(),n=tt.Static,l!=="*"&&l!=="?"&&l!=="+"&&c--,f="";break;default:e("Unknown state");break}}return n===tt.ParamRegExp&&e(`Unfinished custom RegExp for param "${u}"`),d(),o(),s}const Cd="[^/]+?",II={sensitive:!1,strict:!1,start:!0,end:!0};var Ct=(function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t})(Ct||{});const AI=/[.+*?^${}()[\]/\\]/g;function bI(t,e){const n=Se({},II,e),r=[];let s=n.start?"^":"";const i=[];for(const u of t){const f=u.length?[]:[Ct.Root];n.strict&&!u.length&&(s+="/");for(let d=0;d<u.length;d++){const m=u[d];let _=Ct.Segment+(n.sensitive?Ct.BonusCaseSensitive:0);if(m.type===Xr.Static)d||(s+="/"),s+=m.value.replace(AI,"\\$&"),_+=Ct.Static;else if(m.type===Xr.Param){const{value:S,repeatable:N,optional:P,regexp:x}=m;i.push({name:S,repeatable:N,optional:P});const O=x||Cd;if(O!==Cd){_+=Ct.BonusCustomRegExp;try{`${O}`}catch(W){throw new Error(`Invalid custom RegExp for param "${S}" (${O}): `+W.message)}}let H=N?`((?:${O})(?:/(?:${O}))*)`:`(${O})`;d||(H=P&&u.length<2?`(?:/${H})`:"/"+H),P&&(H+="?"),s+=H,_+=Ct.Dynamic,P&&(_+=Ct.BonusOptional),N&&(_+=Ct.BonusRepeatable),O===".*"&&(_+=Ct.BonusWildcard)}f.push(_)}r.push(f)}if(n.strict&&n.end){const u=r.length-1;r[u][r[u].length-1]+=Ct.BonusStrict}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function c(u){const f=u.match(o),d={};if(!f)return null;for(let m=1;m<f.length;m++){const _=f[m]||"",S=i[m-1];d[S.name]=_&&S.repeatable?_.split("/"):_}return d}function l(u){let f="",d=!1;for(const m of t){(!d||!f.endsWith("/"))&&(f+="/"),d=!1;for(const _ of m)if(_.type===Xr.Static)f+=_.value;else if(_.type===Xr.Param){const{value:S,repeatable:N,optional:P}=_,x=S in u?u[S]:"";if(ln(x)&&!N)throw new Error(`Provided param "${S}" is an array but it is not repeatable (* or + modifiers)`);const O=ln(x)?x.join("/"):x;if(!O)if(P)m.length<2&&(f.endsWith("/")?f=f.slice(0,-1):d=!0);else throw new Error(`Missing required param "${S}"`);f+=O}}return f||"/"}return{re:o,score:r,keys:i,parse:c,stringify:l}}function RI(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===Ct.Static+Ct.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===Ct.Static+Ct.Segment?1:-1:0}function Wg(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=RI(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(kd(r))return 1;if(kd(s))return-1}return s.length-r.length}function kd(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const SI={strict:!1,end:!0,sensitive:!1};function PI(t,e,n){const r=bI(wI(t.path),n),s=Se(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function CI(t,e){const n=[],r=new Map;e=wd(SI,e);function s(d){return r.get(d)}function i(d,m,_){const S=!_,N=xd(d);N.aliasOf=_&&_.record;const P=wd(e,d),x=[N];if("alias"in d){const W=typeof d.alias=="string"?[d.alias]:d.alias;for(const Z of W)x.push(xd(Se({},N,{components:_?_.record.components:N.components,path:Z,aliasOf:_?_.record:N})))}let O,H;for(const W of x){const{path:Z}=W;if(m&&Z[0]!=="/"){const te=m.record.path,b=te[te.length-1]==="/"?"":"/";W.path=m.record.path+(Z&&b+Z)}if(O=PI(W,m,P),_?_.alias.push(O):(H=H||O,H!==O&&H.alias.push(O),S&&d.name&&!Vd(O)&&o(d.name)),zg(O)&&l(O),N.children){const te=N.children;for(let b=0;b<te.length;b++)i(te[b],O,_&&_.children[b])}_=_||O}return H?()=>{o(H)}:Ui}function o(d){if($g(d)){const m=r.get(d);m&&(r.delete(d),n.splice(n.indexOf(m),1),m.children.forEach(o),m.alias.forEach(o))}else{const m=n.indexOf(d);m>-1&&(n.splice(m,1),d.record.name&&r.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function c(){return n}function l(d){const m=xI(d,n);n.splice(m,0,d),d.record.name&&!Vd(d)&&r.set(d.record.name,d)}function u(d,m){let _,S={},N,P;if("name"in d&&d.name){if(_=r.get(d.name),!_)throw Fs(He.MATCHER_NOT_FOUND,{location:d});P=_.record.name,S=Se(Nd(m.params,_.keys.filter(H=>!H.optional).concat(_.parent?_.parent.keys.filter(H=>H.optional):[]).map(H=>H.name)),d.params&&Nd(d.params,_.keys.map(H=>H.name))),N=_.stringify(S)}else if(d.path!=null)N=d.path,_=n.find(H=>H.re.test(N)),_&&(S=_.parse(N),P=_.record.name);else{if(_=m.name?r.get(m.name):n.find(H=>H.re.test(m.path)),!_)throw Fs(He.MATCHER_NOT_FOUND,{location:d,currentLocation:m});P=_.record.name,S=Se({},m.params,d.params),N=_.stringify(S)}const x=[];let O=_;for(;O;)x.unshift(O.record),O=O.parent;return{name:P,path:N,params:S,matched:x,meta:NI(x)}}t.forEach(d=>i(d));function f(){n.length=0,r.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:f,getRoutes:c,getRecordMatcher:s}}function Nd(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function xd(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:kI(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function kI(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function Vd(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function NI(t){return t.reduce((e,n)=>Se(e,n.meta),{})}function xI(t,e){let n=0,r=e.length;for(;n!==r;){const i=n+r>>1;Wg(t,e[i])<0?r=i:n=i+1}const s=VI(t);return s&&(r=e.lastIndexOf(s,r-1)),r}function VI(t){let e=t;for(;e=e.parent;)if(zg(e)&&Wg(t,e)===0)return e}function zg({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function Dd(t){const e=Yt(dc),n=Yt(Hu),r=ft(()=>{const l=De(t.to);return e.resolve(l)}),s=ft(()=>{const{matched:l}=r.value,{length:u}=l,f=l[u-1],d=n.matched;if(!f||!d.length)return-1;const m=d.findIndex(Ls.bind(null,f));if(m>-1)return m;const _=Od(l[u-2]);return u>1&&Od(f)===_&&d[d.length-1].path!==_?d.findIndex(Ls.bind(null,l[u-2])):m}),i=ft(()=>s.value>-1&&LI(n.params,r.value.params)),o=ft(()=>s.value>-1&&s.value===n.matched.length-1&&qg(n.params,r.value.params));function c(l={}){if(MI(l)){const u=e[De(t.replace)?"replace":"push"](De(t.to)).catch(Ui);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:r,href:ft(()=>r.value.href),isActive:i,isExactActive:o,navigate:c}}function DI(t){return t.length===1?t[0]:t}const OI=Ks({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Dd,setup(t,{slots:e}){const n=_o(Dd(t)),{options:r}=Yt(dc),s=ft(()=>({[Md(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Md(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&DI(e.default(n));return t.custom?i:qu("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),zt=OI;function MI(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function LI(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!ln(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function Od(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Md=(t,e,n)=>t??e??n,FI=Ks({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Yt(Ql),s=ft(()=>t.route||r.value),i=Yt(Sd,0),o=ft(()=>{let u=De(i);const{matched:f}=s.value;let d;for(;(d=f[u])&&!d.components;)u++;return u}),c=ft(()=>s.value.matched[o.value]);ia(Sd,ft(()=>o.value+1)),ia(pI,c),ia(Ql,s);const l=nn();return pr(()=>[l.value,c.value,t.name],([u,f,d],[m,_,S])=>{f&&(f.instances[d]=u,_&&_!==f&&u&&u===m&&(f.leaveGuards.size||(f.leaveGuards=_.leaveGuards),f.updateGuards.size||(f.updateGuards=_.updateGuards))),u&&f&&(!_||!Ls(f,_)||!m)&&(f.enterCallbacks[d]||[]).forEach(N=>N(u))},{flush:"post"}),()=>{const u=s.value,f=t.name,d=c.value,m=d&&d.components[f];if(!m)return Ld(n.default,{Component:m,route:u});const _=d.props[f],S=_?_===!0?u.params:typeof _=="function"?_(u):_:null,P=qu(m,Se({},S,e,{onVnodeUnmounted:x=>{x.component.isUnmounted&&(d.instances[f]=null)},ref:l}));return Ld(n.default,{Component:P,route:u})||P}}});function Ld(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const Kg=FI;function UI(t){const e=CI(t.routes,t),n=t.parseQuery||fI,r=t.stringifyQuery||Rd,s=t.history,i=Ti(),o=Ti(),c=Ti(),l=Pv(nr);let u=nr;vs&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=pl.bind(null,L=>""+L),d=pl.bind(null,Qw),m=pl.bind(null,Zi);function _(L,J){let Q,ne;return $g(L)?(Q=e.getRecordMatcher(L),ne=J):ne=L,e.addRoute(ne,Q)}function S(L){const J=e.getRecordMatcher(L);J&&e.removeRoute(J)}function N(){return e.getRoutes().map(L=>L.record)}function P(L){return!!e.getRecordMatcher(L)}function x(L,J){if(J=Se({},J||l.value),typeof L=="string"){const C=ml(n,L,J.path),F=e.resolve({path:C.path},J),B=s.createHref(C.fullPath);return Se(C,F,{params:m(F.params),hash:Zi(C.hash),redirectedFrom:void 0,href:B})}let Q;if(L.path!=null)Q=Se({},L,{path:ml(n,L.path,J.path).path});else{const C=Se({},L.params);for(const F in C)C[F]==null&&delete C[F];Q=Se({},L,{params:d(C)}),J.params=d(J.params)}const ne=e.resolve(Q,J),ge=L.hash||"";ne.params=f(m(ne.params));const T=Xw(r,Se({},L,{hash:Ww(ge),path:ne.path})),R=s.createHref(T);return Se({fullPath:T,hash:ge,query:r===Rd?dI(L.query):L.query||{}},ne,{redirectedFrom:void 0,href:R})}function O(L){return typeof L=="string"?ml(n,L,l.value.path):Se({},L)}function H(L,J){if(u!==L)return Fs(He.NAVIGATION_CANCELLED,{from:J,to:L})}function W(L){return b(L)}function Z(L){return W(Se(O(L),{replace:!0}))}function te(L,J){const Q=L.matched[L.matched.length-1];if(Q&&Q.redirect){const{redirect:ne}=Q;let ge=typeof ne=="function"?ne(L,J):ne;return typeof ge=="string"&&(ge=ge.includes("?")||ge.includes("#")?ge=O(ge):{path:ge},ge.params={}),Se({query:L.query,hash:L.hash,params:ge.path!=null?{}:L.params},ge)}}function b(L,J){const Q=u=x(L),ne=l.value,ge=L.state,T=L.force,R=L.replace===!0,C=te(Q,ne);if(C)return b(Se(O(C),{state:typeof C=="object"?Se({},ge,C.state):ge,force:T,replace:R}),J||Q);const F=Q;F.redirectedFrom=J;let B;return!T&&Zw(r,ne,Q)&&(B=Fs(He.NAVIGATION_DUPLICATED,{to:F,from:ne}),Mt(ne,ne,!0,!1)),(B?Promise.resolve(B):w(F,ne)).catch(M=>kn(M)?kn(M,He.NAVIGATION_GUARD_REDIRECT)?M:hn(M):Te(M,F,ne)).then(M=>{if(M){if(kn(M,He.NAVIGATION_GUARD_REDIRECT))return b(Se({replace:R},O(M.to),{state:typeof M.to=="object"?Se({},ge,M.to.state):ge,force:T}),J||F)}else M=I(F,ne,!0,R,ge);return A(F,ne,M),M})}function E(L,J){const Q=H(L,J);return Q?Promise.reject(Q):Promise.resolve()}function y(L){const J=Zt.values().next().value;return J&&typeof J.runWithContext=="function"?J.runWithContext(L):L()}function w(L,J){let Q;const[ne,ge,T]=mI(L,J);Q=_l(ne.reverse(),"beforeRouteLeave",L,J);for(const C of ne)C.leaveGuards.forEach(F=>{Q.push(ar(F,L,J))});const R=E.bind(null,L,J);return Q.push(R),gt(Q).then(()=>{Q=[];for(const C of i.list())Q.push(ar(C,L,J));return Q.push(R),gt(Q)}).then(()=>{Q=_l(ge,"beforeRouteUpdate",L,J);for(const C of ge)C.updateGuards.forEach(F=>{Q.push(ar(F,L,J))});return Q.push(R),gt(Q)}).then(()=>{Q=[];for(const C of T)if(C.beforeEnter)if(ln(C.beforeEnter))for(const F of C.beforeEnter)Q.push(ar(F,L,J));else Q.push(ar(C.beforeEnter,L,J));return Q.push(R),gt(Q)}).then(()=>(L.matched.forEach(C=>C.enterCallbacks={}),Q=_l(T,"beforeRouteEnter",L,J,y),Q.push(R),gt(Q))).then(()=>{Q=[];for(const C of o.list())Q.push(ar(C,L,J));return Q.push(R),gt(Q)}).catch(C=>kn(C,He.NAVIGATION_CANCELLED)?C:Promise.reject(C))}function A(L,J,Q){c.list().forEach(ne=>y(()=>ne(L,J,Q)))}function I(L,J,Q,ne,ge){const T=H(L,J);if(T)return T;const R=J===nr,C=vs?history.state:{};Q&&(ne||R?s.replace(L.fullPath,Se({scroll:R&&C&&C.scroll},ge)):s.push(L.fullPath,ge)),l.value=L,Mt(L,J,Q,R),hn()}let v;function ve(){v||(v=s.listen((L,J,Q)=>{if(!en.listening)return;const ne=x(L),ge=te(ne,en.currentRoute.value);if(ge){b(Se(ge,{replace:!0,force:!0}),ne).catch(Ui);return}u=ne;const T=l.value;vs&&aI(bd(T.fullPath,Q.delta),fc()),w(ne,T).catch(R=>kn(R,He.NAVIGATION_ABORTED|He.NAVIGATION_CANCELLED)?R:kn(R,He.NAVIGATION_GUARD_REDIRECT)?(b(Se(O(R.to),{force:!0}),ne).then(C=>{kn(C,He.NAVIGATION_ABORTED|He.NAVIGATION_DUPLICATED)&&!Q.delta&&Q.type===zl.pop&&s.go(-1,!1)}).catch(Ui),Promise.reject()):(Q.delta&&s.go(-Q.delta,!1),Te(R,ne,T))).then(R=>{R=R||I(ne,T,!1),R&&(Q.delta&&!kn(R,He.NAVIGATION_CANCELLED)?s.go(-Q.delta,!1):Q.type===zl.pop&&kn(R,He.NAVIGATION_ABORTED|He.NAVIGATION_DUPLICATED)&&s.go(-1,!1)),A(ne,T,R)}).catch(Ui)}))}let je=Ti(),Ce=Ti(),fe;function Te(L,J,Q){hn(L);const ne=Ce.list();return ne.length?ne.forEach(ge=>ge(L,J,Q)):console.error(L),Promise.reject(L)}function Dt(){return fe&&l.value!==nr?Promise.resolve():new Promise((L,J)=>{je.add([L,J])})}function hn(L){return fe||(fe=!L,ve(),je.list().forEach(([J,Q])=>L?Q(L):J()),je.reset()),L}function Mt(L,J,Q,ne){const{scrollBehavior:ge}=t;if(!vs||!ge)return Promise.resolve();const T=!Q&&cI(bd(L.fullPath,0))||(ne||!Q)&&history.state&&history.state.scroll||null;return Eo().then(()=>ge(L,J,T)).then(R=>R&&oI(R)).catch(R=>Te(R,L,J))}const ct=L=>s.go(L);let Sn;const Zt=new Set,en={currentRoute:l,listening:!0,addRoute:_,removeRoute:S,clearRoutes:e.clearRoutes,hasRoute:P,getRoutes:N,resolve:x,options:t,push:W,replace:Z,go:ct,back:()=>ct(-1),forward:()=>ct(1),beforeEach:i.add,beforeResolve:o.add,afterEach:c.add,onError:Ce.add,isReady:Dt,install(L){L.component("RouterLink",zt),L.component("RouterView",Kg),L.config.globalProperties.$router=en,Object.defineProperty(L.config.globalProperties,"$route",{enumerable:!0,get:()=>De(l)}),vs&&!Sn&&l.value===nr&&(Sn=!0,W(s.location).catch(ne=>{}));const J={};for(const ne in nr)Object.defineProperty(J,ne,{get:()=>l.value[ne],enumerable:!0});L.provide(dc,en),L.provide(Hu,qm(J)),L.provide(Ql,l);const Q=L.unmount;Zt.add(L),L.unmount=function(){Zt.delete(L),Zt.size<1&&(u=nr,v&&v(),v=null,l.value=nr,Sn=!1,fe=!1),Q()}}};function gt(L){return L.reduce((J,Q)=>J.then(()=>y(Q)),Promise.resolve())}return en}function BI(){return Yt(dc)}function jI(t){return Yt(Hu)}const qI=()=>{};var Fd={};const Qg=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},$I=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],c=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Yg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,c=o?t[s+1]:0,l=s+2<t.length,u=l?t[s+2]:0,f=i>>2,d=(i&3)<<4|c>>4;let m=(c&15)<<2|u>>6,_=u&63;l||(_=64,o||(m=64)),r.push(n[f],n[d],n[m],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Qg(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):$I(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||u==null||d==null)throw new HI;const m=i<<2|c>>4;if(r.push(m),u!==64){const _=c<<4&240|u>>2;if(r.push(_),d!==64){const S=u<<6&192|d;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class HI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const GI=function(t){const e=Qg(t);return Yg.encodeByteArray(e,!0)},xa=function(t){return GI(t).replace(/\./g,"")},Jg=function(t){try{return Yg.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function WI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const zI=()=>WI().__FIREBASE_DEFAULTS__,KI=()=>{if(typeof process>"u"||typeof Fd>"u")return;const t=Fd.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},QI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Jg(t[1]);return e&&JSON.parse(e)},pc=()=>{try{return qI()||zI()||KI()||QI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Xg=t=>pc()?.emulatorHosts?.[t],YI=t=>{const e=Xg(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Zg=()=>pc()?.config,e_=t=>pc()?.[`_${t}`];class JI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function Qs(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function t_(t){return(await fetch(t,{credentials:"include"})).ok}function XI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[xa(JSON.stringify(n)),xa(JSON.stringify(o)),""].join(".")}const Bi={};function ZI(){const t={prod:[],emulator:[]};for(const e of Object.keys(Bi))Bi[e]?t.emulator.push(e):t.prod.push(e);return t}function eA(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Ud=!1;function n_(t,e){if(typeof window>"u"||typeof document>"u"||!Qs(window.location.host)||Bi[t]===e||Bi[t]||Ud)return;Bi[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",i=ZI().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function c(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function l(m,_){m.setAttribute("width","24"),m.setAttribute("id",_),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{Ud=!0,o()},m}function f(m,_){m.setAttribute("id",_),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function d(){const m=eA(r),_=n("text"),S=document.getElementById(_)||document.createElement("span"),N=n("learnmore"),P=document.getElementById(N)||document.createElement("a"),x=n("preprendIcon"),O=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const H=m.element;c(H),f(P,N);const W=u();l(O,x),H.append(O,S,P,W),document.body.appendChild(H)}i?(S.innerText="Preview backend disconnected.",O.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(O.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}function bt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(bt())}function nA(){const t=pc()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function rA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function sA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function iA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function oA(){const t=bt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function aA(){return!nA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function cA(){try{return typeof indexedDB=="object"}catch{return!1}}function lA(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(n){e(n)}})}const uA="FirebaseError";class Wn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=uA,Object.setPrototypeOf(this,Wn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,To.prototype.create)}}class To{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?hA(i,r):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new Wn(s,c,r)}}function hA(t,e){return t.replace(fA,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const fA=/\{\$([^}]+)}/g;function dA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ss(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Bd(i)&&Bd(o)){if(!ss(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Bd(t){return t!==null&&typeof t=="object"}function wo(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ai(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function bi(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function pA(t,e){const n=new mA(t,e);return n.subscribe.bind(n)}class mA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");gA(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=yl),s.error===void 0&&(s.error=yl),s.complete===void 0&&(s.complete=yl);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gA(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function yl(){}function Qe(t){return t&&t._delegate?t._delegate:t}class is{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const zr="[DEFAULT]";class _A{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new JI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(EA(e))try{this.getOrInitializeService({instanceIdentifier:zr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=zr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=zr){return this.instances.has(e)}getOptions(e=zr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:yA(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=zr){return this.component?this.component.multipleInstances?e:zr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yA(t){return t===zr?void 0:t}function EA(t){return t.instantiationMode==="EAGER"}class vA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new _A(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var _e;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(_e||(_e={}));const TA={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},wA=_e.INFO,IA={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},AA=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=IA[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Gu{constructor(e){this.name=e,this._logLevel=wA,this._logHandler=AA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?TA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...e),this._logHandler(this,_e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...e),this._logHandler(this,_e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...e),this._logHandler(this,_e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...e),this._logHandler(this,_e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...e),this._logHandler(this,_e.ERROR,...e)}}const bA=(t,e)=>e.some(n=>t instanceof n);let jd,qd;function RA(){return jd||(jd=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function SA(){return qd||(qd=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const r_=new WeakMap,Yl=new WeakMap,s_=new WeakMap,El=new WeakMap,Wu=new WeakMap;function PA(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(mr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&r_.set(n,t)}).catch(()=>{}),Wu.set(e,t),e}function CA(t){if(Yl.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Yl.set(t,e)}let Jl={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Yl.get(t);if(e==="objectStoreNames")return t.objectStoreNames||s_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return mr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function kA(t){Jl=t(Jl)}function NA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(vl(this),e,...n);return s_.set(r,e.sort?e.sort():[e]),mr(r)}:SA().includes(t)?function(...e){return t.apply(vl(this),e),mr(r_.get(this))}:function(...e){return mr(t.apply(vl(this),e))}}function xA(t){return typeof t=="function"?NA(t):(t instanceof IDBTransaction&&CA(t),bA(t,RA())?new Proxy(t,Jl):t)}function mr(t){if(t instanceof IDBRequest)return PA(t);if(El.has(t))return El.get(t);const e=xA(t);return e!==t&&(El.set(t,e),Wu.set(e,t)),e}const vl=t=>Wu.get(t);function VA(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),c=mr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(mr(o.result),l.oldVersion,l.newVersion,mr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),c.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),c}const DA=["get","getKey","getAll","getAllKeys","count"],OA=["put","add","delete","clear"],Tl=new Map;function $d(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Tl.get(e))return Tl.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=OA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||DA.includes(n)))return;const i=async function(o,...c){const l=this.transaction(o,s?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(c.shift())),(await Promise.all([u[n](...c),s&&l.done]))[0]};return Tl.set(e,i),i}kA(t=>({...t,get:(e,n,r)=>$d(e,n)||t.get(e,n,r),has:(e,n)=>!!$d(e,n)||t.has(e,n)}));class MA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(LA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function LA(t){return t.getComponent()?.type==="VERSION"}const Xl="@firebase/app",Hd="0.14.5";const jn=new Gu("@firebase/app"),FA="@firebase/app-compat",UA="@firebase/analytics-compat",BA="@firebase/analytics",jA="@firebase/app-check-compat",qA="@firebase/app-check",$A="@firebase/auth",HA="@firebase/auth-compat",GA="@firebase/database",WA="@firebase/data-connect",zA="@firebase/database-compat",KA="@firebase/functions",QA="@firebase/functions-compat",YA="@firebase/installations",JA="@firebase/installations-compat",XA="@firebase/messaging",ZA="@firebase/messaging-compat",eb="@firebase/performance",tb="@firebase/performance-compat",nb="@firebase/remote-config",rb="@firebase/remote-config-compat",sb="@firebase/storage",ib="@firebase/storage-compat",ob="@firebase/firestore",ab="@firebase/ai",cb="@firebase/firestore-compat",lb="firebase",ub="12.5.0";const Zl="[DEFAULT]",hb={[Xl]:"fire-core",[FA]:"fire-core-compat",[BA]:"fire-analytics",[UA]:"fire-analytics-compat",[qA]:"fire-app-check",[jA]:"fire-app-check-compat",[$A]:"fire-auth",[HA]:"fire-auth-compat",[GA]:"fire-rtdb",[WA]:"fire-data-connect",[zA]:"fire-rtdb-compat",[KA]:"fire-fn",[QA]:"fire-fn-compat",[YA]:"fire-iid",[JA]:"fire-iid-compat",[XA]:"fire-fcm",[ZA]:"fire-fcm-compat",[eb]:"fire-perf",[tb]:"fire-perf-compat",[nb]:"fire-rc",[rb]:"fire-rc-compat",[sb]:"fire-gcs",[ib]:"fire-gcs-compat",[ob]:"fire-fst",[cb]:"fire-fst-compat",[ab]:"fire-vertex","fire-js":"fire-js",[lb]:"fire-js-all"};const Va=new Map,fb=new Map,eu=new Map;function Gd(t,e){try{t.container.addComponent(e)}catch(n){jn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Us(t){const e=t.name;if(eu.has(e))return jn.debug(`There were multiple attempts to register component ${e}.`),!1;eu.set(e,t);for(const n of Va.values())Gd(n,t);for(const n of fb.values())Gd(n,t);return!0}function zu(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function jt(t){return t==null?!1:t.settings!==void 0}const db={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},gr=new To("app","Firebase",db);class pb{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new is("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw gr.create("app-deleted",{appName:this._name})}}const Ys=ub;function i_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Zl,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw gr.create("bad-app-name",{appName:String(s)});if(n||(n=Zg()),!n)throw gr.create("no-options");const i=Va.get(s);if(i){if(ss(n,i.options)&&ss(r,i.config))return i;throw gr.create("duplicate-app",{appName:s})}const o=new vA(s);for(const l of eu.values())o.addComponent(l);const c=new pb(n,r,o);return Va.set(s,c),c}function o_(t=Zl){const e=Va.get(t);if(!e&&t===Zl&&Zg())return i_();if(!e)throw gr.create("no-app",{appName:t});return e}function _r(t,e,n){let r=hb[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),jn.warn(o.join(" "));return}Us(new is(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const mb="firebase-heartbeat-database",gb=1,eo="firebase-heartbeat-store";let wl=null;function a_(){return wl||(wl=VA(mb,gb,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(eo)}catch(n){console.warn(n)}}}}).catch(t=>{throw gr.create("idb-open",{originalErrorMessage:t.message})})),wl}async function _b(t){try{const n=(await a_()).transaction(eo),r=await n.objectStore(eo).get(c_(t));return await n.done,r}catch(e){if(e instanceof Wn)jn.warn(e.message);else{const n=gr.create("idb-get",{originalErrorMessage:e?.message});jn.warn(n.message)}}}async function Wd(t,e){try{const r=(await a_()).transaction(eo,"readwrite");await r.objectStore(eo).put(e,c_(t)),await r.done}catch(n){if(n instanceof Wn)jn.warn(n.message);else{const r=gr.create("idb-set",{originalErrorMessage:n?.message});jn.warn(r.message)}}}function c_(t){return`${t.name}!${t.options.appId}`}const yb=1024,Eb=30;class vb{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new wb(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=zd();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>Eb){const s=Ib(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){jn.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=zd(),{heartbeatsToSend:n,unsentEntries:r}=Tb(this._heartbeatsCache.heartbeats),s=xa(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return jn.warn(e),""}}}function zd(){return new Date().toISOString().substring(0,10)}function Tb(t,e=yb){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Kd(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Kd(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class wb{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return cA()?lA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await _b(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Wd(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Wd(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Kd(t){return xa(JSON.stringify({version:2,heartbeats:t})).length}function Ib(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function Ab(t){Us(new is("platform-logger",e=>new MA(e),"PRIVATE")),Us(new is("heartbeat",e=>new vb(e),"PRIVATE")),_r(Xl,Hd,t),_r(Xl,Hd,"esm2020"),_r("fire-js","")}Ab("");function l_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const bb=l_,u_=new To("auth","Firebase",l_());const Da=new Gu("@firebase/auth");function Rb(t,...e){Da.logLevel<=_e.WARN&&Da.warn(`Auth (${Ys}): ${t}`,...e)}function la(t,...e){Da.logLevel<=_e.ERROR&&Da.error(`Auth (${Ys}): ${t}`,...e)}function Jt(t,...e){throw Qu(t,...e)}function on(t,...e){return Qu(t,...e)}function Ku(t,e,n){const r={...bb(),[e]:n};return new To("auth","Firebase",r).create(e,{appName:t.name})}function Fn(t){return Ku(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Sb(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Jt(t,"argument-error"),Ku(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Qu(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return u_.create(t,...e)}function ue(t,e,...n){if(!t)throw Qu(e,...n)}function Mn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw la(e),new Error(e)}function qn(t,e){t||Mn(e)}function tu(){return typeof self<"u"&&self.location?.href||""}function Pb(){return Qd()==="http:"||Qd()==="https:"}function Qd(){return typeof self<"u"&&self.location?.protocol||null}function Cb(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Pb()||sA()||"connection"in navigator)?navigator.onLine:!0}function kb(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class Io{constructor(e,n){this.shortDelay=e,this.longDelay=n,qn(n>e,"Short delay should be less than long delay!"),this.isMobile=tA()||iA()}get(){return Cb()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Yu(t,e){qn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class h_{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Mn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Mn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Mn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Nb={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const xb=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Vb=new Io(3e4,6e4);function Nr(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function xr(t,e,n,r,s={}){return f_(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const c=wo({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...i};return rA()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Qs(t.emulatorConfig.host)&&(u.credentials="include"),h_.fetch()(await d_(t,t.config.apiHost,n,c),u)})}async function f_(t,e,n){t._canInitEmulator=!1;const r={...Nb,...e};try{const s=new Ob(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Jo(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const c=i.ok?o.errorMessage:o.error.message,[l,u]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Jo(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Jo(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Jo(t,"user-disabled",o);const f=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Ku(t,f,u);Jt(t,f)}}catch(s){if(s instanceof Wn)throw s;Jt(t,"network-request-failed",{message:String(s)})}}async function Ao(t,e,n,r,s={}){const i=await xr(t,e,n,r,s);return"mfaPendingCredential"in i&&Jt(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function d_(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?Yu(t.config,s):`${t.config.apiScheme}://${s}`;return xb.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function Db(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Ob{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(on(this.auth,"network-request-failed")),Vb.get())})}}function Jo(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=on(t,e,r);return s.customData._tokenResponse=n,s}function Yd(t){return t!==void 0&&t.enterprise!==void 0}class Mb{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Db(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Lb(t,e){return xr(t,"GET","/v2/recaptchaConfig",Nr(t,e))}async function Fb(t,e){return xr(t,"POST","/v1/accounts:delete",e)}async function Oa(t,e){return xr(t,"POST","/v1/accounts:lookup",e)}function ji(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Ub(t,e=!1){const n=Qe(t),r=await n.getIdToken(e),s=Ju(r);ue(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i?.sign_in_provider;return{claims:s,token:r,authTime:ji(Il(s.auth_time)),issuedAtTime:ji(Il(s.iat)),expirationTime:ji(Il(s.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function Il(t){return Number(t)*1e3}function Ju(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return la("JWT malformed, contained fewer than 3 sections"),null;try{const s=Jg(n);return s?JSON.parse(s):(la("Failed to decode base64 JWT payload"),null)}catch(s){return la("Caught error parsing JWT payload as JSON",s?.toString()),null}}function Jd(t){const e=Ju(t);return ue(e,"internal-error"),ue(typeof e.exp<"u","internal-error"),ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function to(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Wn&&Bb(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Bb({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class jb{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class nu{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ji(this.lastLoginAt),this.creationTime=ji(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Ma(t){const e=t.auth,n=await t.getIdToken(),r=await to(t,Oa(e,{idToken:n}));ue(r?.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=s.providerUserInfo?.length?p_(s.providerUserInfo):[],o=$b(t.providerData,i),c=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!o?.length,u=c?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new nu(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,f)}async function qb(t){const e=Qe(t);await Ma(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function $b(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function p_(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function Hb(t,e){const n=await f_(t,{},async()=>{const r=wo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await d_(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:c,body:r};return t.emulatorConfig&&Qs(t.emulatorConfig.host)&&(l.credentials="include"),h_.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Gb(t,e){return xr(t,"POST","/v2/accounts:revokeToken",Nr(t,e))}class ks{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ue(e.idToken,"internal-error"),ue(typeof e.idToken<"u","internal-error"),ue(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Jd(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ue(e.length!==0,"internal-error");const n=Jd(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await Hb(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new ks;return r&&(ue(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ue(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ue(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ks,this.toJSON())}_performRefresh(){return Mn("not implemented")}}function rr(t,e){ue(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class rn{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new jb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new nu(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await to(this,this.stsTokenManager.getToken(this.auth,e));return ue(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Ub(this,e)}reload(){return qb(this)}_assign(e){this!==e&&(ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new rn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ma(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jt(this.auth.app))return Promise.reject(Fn(this.auth));const e=await this.getIdToken();return await to(this,Fb(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,c=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:d,emailVerified:m,isAnonymous:_,providerData:S,stsTokenManager:N}=n;ue(d&&N,e,"internal-error");const P=ks.fromJSON(this.name,N);ue(typeof d=="string",e,"internal-error"),rr(r,e.name),rr(s,e.name),ue(typeof m=="boolean",e,"internal-error"),ue(typeof _=="boolean",e,"internal-error"),rr(i,e.name),rr(o,e.name),rr(c,e.name),rr(l,e.name),rr(u,e.name),rr(f,e.name);const x=new rn({uid:d,auth:e,email:s,emailVerified:m,displayName:r,isAnonymous:_,photoURL:o,phoneNumber:i,tenantId:c,stsTokenManager:P,createdAt:u,lastLoginAt:f});return S&&Array.isArray(S)&&(x.providerData=S.map(O=>({...O}))),l&&(x._redirectEventId=l),x}static async _fromIdTokenResponse(e,n,r=!1){const s=new ks;s.updateFromServerResponse(n);const i=new rn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Ma(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ue(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?p_(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!i?.length,c=new ks;c.updateFromIdToken(r);const l=new rn({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new nu(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!i?.length};return Object.assign(l,u),l}}const Xd=new Map;function Ln(t){qn(t instanceof Function,"Expected a class definition");let e=Xd.get(t);return e?(qn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Xd.set(t,e),e)}class m_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}m_.type="NONE";const Zd=m_;function ua(t,e,n){return`firebase:${t}:${e}:${n}`}class Ns{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=ua(this.userKey,s.apiKey,i),this.fullPersistenceKey=ua("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Oa(this.auth,{idToken:e}).catch(()=>{});return n?rn._fromGetAccountInfoResponse(this.auth,n,e):null}return rn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ns(Ln(Zd),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||Ln(Zd);const o=ua(r,e.config.apiKey,e.name);let c=null;for(const u of n)try{const f=await u._get(o);if(f){let d;if(typeof f=="string"){const m=await Oa(e,{idToken:f}).catch(()=>{});if(!m)break;d=await rn._fromGetAccountInfoResponse(e,m,f)}else d=rn._fromJSON(e,f);u!==i&&(c=d),i=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Ns(i,e,r):(i=l[0],c&&await i._set(o,c.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Ns(i,e,r))}}function ep(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(E_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(g_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(T_(e))return"Blackberry";if(w_(e))return"Webos";if(__(e))return"Safari";if((e.includes("chrome/")||y_(e))&&!e.includes("edge/"))return"Chrome";if(v_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function g_(t=bt()){return/firefox\//i.test(t)}function __(t=bt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function y_(t=bt()){return/crios\//i.test(t)}function E_(t=bt()){return/iemobile/i.test(t)}function v_(t=bt()){return/android/i.test(t)}function T_(t=bt()){return/blackberry/i.test(t)}function w_(t=bt()){return/webos/i.test(t)}function Xu(t=bt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Wb(t=bt()){return Xu(t)&&!!window.navigator?.standalone}function zb(){return oA()&&document.documentMode===10}function I_(t=bt()){return Xu(t)||v_(t)||w_(t)||T_(t)||/windows phone/i.test(t)||E_(t)}function A_(t,e=[]){let n;switch(t){case"Browser":n=ep(bt());break;case"Worker":n=`${ep(bt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ys}/${r}`}class Kb{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,c)=>{try{const l=e(i);o(l)}catch(l){c(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function Qb(t,e={}){return xr(t,"GET","/v2/passwordPolicy",Nr(t,e))}const Yb=6;class Jb{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Yb,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Xb{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new tp(this),this.idTokenSubscription=new tp(this),this.beforeStateQueue=new Kb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=u_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ln(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ns.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Oa(this,{idToken:e}),r=await rn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(jt(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=r?._redirectEventId,c=await this.tryRedirectSignIn(e);(!i||i===o)&&c?.user&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(i){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ma(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=kb()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(jt(this.app))return Promise.reject(Fn(this));const n=e?Qe(e):null;return n&&ue(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return jt(this.app)?Promise.reject(Fn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return jt(this.app)?Promise.reject(Fn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ln(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Qb(this),n=new Jb(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new To("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Gb(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ln(e)||this._popupRedirectResolver;ue(n,this,"argument-error"),this.redirectPersistenceManager=await Ns.create(this,[Ln(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ue(c,this,"internal-error"),c.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=A_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(jt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Rb(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Vr(t){return Qe(t)}class tp{constructor(e){this.auth=e,this.observer=null,this.addObserver=pA(n=>this.observer=n)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let mc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Zb(t){mc=t}function b_(t){return mc.loadJS(t)}function e0(){return mc.recaptchaEnterpriseScript}function t0(){return mc.gapiScript}function n0(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class r0{constructor(){this.enterprise=new s0}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class s0{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const i0="recaptcha-enterprise",R_="NO_RECAPTCHA";class o0{constructor(e){this.type=i0,this.auth=Vr(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,c)=>{Lb(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const u=new Mb(l);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(l=>{c(l)})})}function s(i,o,c){const l=window.grecaptcha;Yd(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(R_)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new r0().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(c=>{if(!n&&Yd(window.grecaptcha))s(c,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=e0();l.length!==0&&(l+=c),b_(l).then(()=>{s(c,i,o)}).catch(u=>{o(u)})}}).catch(c=>{o(c)})})}}async function np(t,e,n,r=!1,s=!1){const i=new o0(t);let o;if(s)o=R_;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const c={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const l=c.phoneEnrollmentInfo.phoneNumber,u=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const l=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function ru(t,e,n,r,s){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await np(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await np(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}function a0(t,e){const n=zu(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(ss(i,e??{}))return s;Jt(s,"already-initialized")}return n.initialize({options:e})}function c0(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Ln);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function l0(t,e,n){const r=Vr(t);ue(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=S_(e),{host:o,port:c}=u0(e),l=c===null?"":`:${c}`,u={url:`${i}//${o}${l}/`},f=Object.freeze({host:o,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ue(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ue(ss(u,r.config.emulator)&&ss(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,Qs(o)?(t_(`${i}//${o}${l}`),n_("Auth",!0)):h0()}function S_(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function u0(t){const e=S_(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:rp(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:rp(o)}}}function rp(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function h0(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class Zu{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Mn("not implemented")}_getIdTokenResponse(e){return Mn("not implemented")}_linkToIdToken(e,n){return Mn("not implemented")}_getReauthenticationResolver(e){return Mn("not implemented")}}async function f0(t,e){return xr(t,"POST","/v1/accounts:signUp",e)}async function d0(t,e){return Ao(t,"POST","/v1/accounts:signInWithPassword",Nr(t,e))}async function p0(t,e){return Ao(t,"POST","/v1/accounts:signInWithEmailLink",Nr(t,e))}async function m0(t,e){return Ao(t,"POST","/v1/accounts:signInWithEmailLink",Nr(t,e))}class no extends Zu{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new no(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new no(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ru(e,n,"signInWithPassword",d0);case"emailLink":return p0(e,{email:this._email,oobCode:this._password});default:Jt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ru(e,r,"signUpPassword",f0);case"emailLink":return m0(e,{idToken:n,email:this._email,oobCode:this._password});default:Jt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function xs(t,e){return Ao(t,"POST","/v1/accounts:signInWithIdp",Nr(t,e))}const g0="http://localhost";class os extends Zu{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new os(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Jt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new os(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return xs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,xs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,xs(e,n)}buildRequest(){const e={requestUri:g0,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=wo(n)}return e}}function _0(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function y0(t){const e=Ai(bi(t)).link,n=e?Ai(bi(e)).deep_link_id:null,r=Ai(bi(t)).deep_link_id;return(r?Ai(bi(r)).link:null)||r||n||e||t}class eh{constructor(e){const n=Ai(bi(e)),r=n.apiKey??null,s=n.oobCode??null,i=_0(n.mode??null);ue(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=y0(e);try{return new eh(n)}catch{return null}}}class Js{constructor(){this.providerId=Js.PROVIDER_ID}static credential(e,n){return no._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=eh.parseLink(n);return ue(r,"argument-error"),no._fromEmailAndCode(e,r.code,r.tenantId)}}Js.PROVIDER_ID="password";Js.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Js.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class th{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class bo extends th{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class cr extends bo{constructor(){super("facebook.com")}static credential(e){return os._fromParams({providerId:cr.PROVIDER_ID,signInMethod:cr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cr.credentialFromTaggedObject(e)}static credentialFromError(e){return cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cr.credential(e.oauthAccessToken)}catch{return null}}}cr.FACEBOOK_SIGN_IN_METHOD="facebook.com";cr.PROVIDER_ID="facebook.com";class On extends bo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return os._fromParams({providerId:On.PROVIDER_ID,signInMethod:On.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return On.credentialFromTaggedObject(e)}static credentialFromError(e){return On.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return On.credential(n,r)}catch{return null}}}On.GOOGLE_SIGN_IN_METHOD="google.com";On.PROVIDER_ID="google.com";class lr extends bo{constructor(){super("github.com")}static credential(e){return os._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return lr.credential(e.oauthAccessToken)}catch{return null}}}lr.GITHUB_SIGN_IN_METHOD="github.com";lr.PROVIDER_ID="github.com";class ur extends bo{constructor(){super("twitter.com")}static credential(e,n){return os._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ur.credentialFromTaggedObject(e)}static credentialFromError(e){return ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ur.credential(n,r)}catch{return null}}}ur.TWITTER_SIGN_IN_METHOD="twitter.com";ur.PROVIDER_ID="twitter.com";async function E0(t,e){return Ao(t,"POST","/v1/accounts:signUp",Nr(t,e))}class as{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await rn._fromIdTokenResponse(e,r,s),o=sp(r);return new as({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=sp(r);return new as({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function sp(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class La extends Wn{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,La.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new La(e,n,r,s)}}function P_(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?La._fromErrorAndOperation(t,i,e,r):i})}async function v0(t,e,n=!1){const r=await to(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return as._forOperation(t,"link",r)}async function T0(t,e,n=!1){const{auth:r}=t;if(jt(r.app))return Promise.reject(Fn(r));const s="reauthenticate";try{const i=await to(t,P_(r,s,e,t),n);ue(i.idToken,r,"internal-error");const o=Ju(i.idToken);ue(o,r,"internal-error");const{sub:c}=o;return ue(t.uid===c,r,"user-mismatch"),as._forOperation(t,s,i)}catch(i){throw i?.code==="auth/user-not-found"&&Jt(r,"user-mismatch"),i}}async function C_(t,e,n=!1){if(jt(t.app))return Promise.reject(Fn(t));const r="signIn",s=await P_(t,r,e),i=await as._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function w0(t,e){return C_(Vr(t),e)}async function k_(t){const e=Vr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function I0(t,e,n){if(jt(t.app))return Promise.reject(Fn(t));const r=Vr(t),o=await ru(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",E0).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&k_(t),l}),c=await as._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(c.user),c}function A0(t,e,n){return jt(t.app)?Promise.reject(Fn(t)):w0(Qe(t),Js.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&k_(t),r})}function b0(t,e,n,r){return Qe(t).onIdTokenChanged(e,n,r)}function R0(t,e,n){return Qe(t).beforeAuthStateChanged(e,n)}function S0(t,e,n,r){return Qe(t).onAuthStateChanged(e,n,r)}function P0(t){return Qe(t).signOut()}const Fa="__sak";class N_{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Fa,"1"),this.storage.removeItem(Fa),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const C0=1e3,k0=10;class x_ extends N_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=I_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);zb()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,k0):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},C0)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}x_.type="LOCAL";const N0=x_;class V_ extends N_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}V_.type="SESSION";const D_=V_;function x0(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class gc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new gc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(o).map(async u=>u(n.origin,i)),l=await x0(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}gc.receivers=[];function nh(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class V0{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((c,l)=>{const u=nh("",20);s.port1.start();const f=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(d){const m=d;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(m.data.response);break;default:clearTimeout(f),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function En(){return window}function D0(t){En().location.href=t}function O_(){return typeof En().WorkerGlobalScope<"u"&&typeof En().importScripts=="function"}async function O0(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function M0(){return navigator?.serviceWorker?.controller||null}function L0(){return O_()?self:null}const M_="firebaseLocalStorageDb",F0=1,Ua="firebaseLocalStorage",L_="fbase_key";class Ro{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function _c(t,e){return t.transaction([Ua],e?"readwrite":"readonly").objectStore(Ua)}function U0(){const t=indexedDB.deleteDatabase(M_);return new Ro(t).toPromise()}function su(){const t=indexedDB.open(M_,F0);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ua,{keyPath:L_})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ua)?e(r):(r.close(),await U0(),e(await su()))})})}async function ip(t,e,n){const r=_c(t,!0).put({[L_]:e,value:n});return new Ro(r).toPromise()}async function B0(t,e){const n=_c(t,!1).get(e),r=await new Ro(n).toPromise();return r===void 0?null:r.value}function op(t,e){const n=_c(t,!0).delete(e);return new Ro(n).toPromise()}const j0=800,q0=3;class F_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await su(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>q0)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return O_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=gc._getInstance(L0()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await O0(),!this.activeServiceWorker)return;this.sender=new V0(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||M0()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await su();return await ip(e,Fa,"1"),await op(e,Fa),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>ip(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>B0(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>op(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=_c(s,!1).getAll();return new Ro(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),j0)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}F_.type="LOCAL";const $0=F_;new Io(3e4,6e4);function U_(t,e){return e?Ln(e):(ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class rh extends Zu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return xs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return xs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return xs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function H0(t){return C_(t.auth,new rh(t),t.bypassAuthState)}function G0(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),T0(n,new rh(t),t.bypassAuthState)}async function W0(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),v0(n,new rh(t),t.bypassAuthState)}class B_{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:c}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return H0;case"linkViaPopup":case"linkViaRedirect":return W0;case"reauthViaPopup":case"reauthViaRedirect":return G0;default:Jt(this.auth,"internal-error")}}resolve(e){qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const z0=new Io(2e3,1e4);async function K0(t,e,n){if(jt(t.app))return Promise.reject(on(t,"operation-not-supported-in-this-environment"));const r=Vr(t);Sb(t,e,th);const s=U_(r,n);return new Zr(r,"signInViaPopup",e,s).executeNotNull()}class Zr extends B_{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Zr.currentPopupAction&&Zr.currentPopupAction.cancel(),Zr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ue(e,this.auth,"internal-error"),e}async onExecution(){qn(this.filter.length===1,"Popup operations only handle one event");const e=nh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(on(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(on(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Zr.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(on(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,z0.get())};e()}}Zr.currentPopupAction=null;const Q0="pendingRedirect",ha=new Map;class Y0 extends B_{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ha.get(this.auth._key());if(!e){try{const r=await J0(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ha.set(this.auth._key(),e)}return this.bypassAuthState||ha.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function J0(t,e){const n=eR(e),r=Z0(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function X0(t,e){ha.set(t._key(),e)}function Z0(t){return Ln(t._redirectPersistence)}function eR(t){return ua(Q0,t.config.apiKey,t.name)}async function tR(t,e,n=!1){if(jt(t.app))return Promise.reject(Fn(t));const r=Vr(t),s=U_(r,e),o=await new Y0(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}const nR=600*1e3;class rR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!sR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!j_(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(on(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=nR&&this.cachedEventUids.clear(),this.cachedEventUids.has(ap(e))}saveEventToCache(e){this.cachedEventUids.add(ap(e)),this.lastProcessedEventTime=Date.now()}}function ap(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function j_({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function sR(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return j_(t);default:return!1}}async function iR(t,e={}){return xr(t,"GET","/v1/projects",e)}const oR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,aR=/^https?/;async function cR(t){if(t.config.emulator)return;const{authorizedDomains:e}=await iR(t);for(const n of e)try{if(lR(n))return}catch{}Jt(t,"unauthorized-domain")}function lR(t){const e=tu(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!aR.test(n))return!1;if(oR.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const uR=new Io(3e4,6e4);function cp(){const t=En().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function hR(t){return new Promise((e,n)=>{function r(){cp(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{cp(),n(on(t,"network-request-failed"))},timeout:uR.get()})}if(En().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(En().gapi?.load)r();else{const s=n0("iframefcb");return En()[s]=()=>{gapi.load?r():n(on(t,"network-request-failed"))},b_(`${t0()}?onload=${s}`).catch(i=>n(i))}}).catch(e=>{throw fa=null,e})}let fa=null;function fR(t){return fa=fa||hR(t),fa}const dR=new Io(5e3,15e3),pR="__/auth/iframe",mR="emulator/auth/iframe",gR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_R=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yR(t){const e=t.config;ue(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Yu(e,mR):`https://${t.config.authDomain}/${pR}`,r={apiKey:e.apiKey,appName:t.name,v:Ys},s=_R.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${wo(r).slice(1)}`}async function ER(t){const e=await fR(t),n=En().gapi;return ue(n,t,"internal-error"),e.open({where:document.body,url:yR(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gR,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=on(t,"network-request-failed"),c=En().setTimeout(()=>{i(o)},dR.get());function l(){En().clearTimeout(c),s(r)}r.ping(l).then(l,()=>{i(o)})}))}const vR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},TR=500,wR=600,IR="_blank",AR="http://localhost";class lp{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bR(t,e,n,r=TR,s=wR){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const l={...vR,width:r.toString(),height:s.toString(),top:i,left:o},u=bt().toLowerCase();n&&(c=y_(u)?IR:n),g_(u)&&(e=e||AR,l.scrollbars="yes");const f=Object.entries(l).reduce((m,[_,S])=>`${m}${_}=${S},`,"");if(Wb(u)&&c!=="_self")return RR(e||"",c),new lp(null);const d=window.open(e||"",c,f);ue(d,t,"popup-blocked");try{d.focus()}catch{}return new lp(d)}function RR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const SR="__/auth/handler",PR="emulator/auth/handler",CR=encodeURIComponent("fac");async function up(t,e,n,r,s,i){ue(t.config.authDomain,t,"auth-domain-config-required"),ue(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ys,eventId:s};if(e instanceof th){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",dA(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,d]of Object.entries({}))o[f]=d}if(e instanceof bo){const f=e.getScopes().filter(d=>d!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const l=await t._getAppCheckToken(),u=l?`#${CR}=${encodeURIComponent(l)}`:"";return`${kR(t)}?${wo(c).slice(1)}${u}`}function kR({config:t}){return t.emulator?Yu(t,PR):`https://${t.authDomain}/${SR}`}const Al="webStorageSupport";class NR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=D_,this._completeRedirectFn=tR,this._overrideRedirectResult=X0}async _openPopup(e,n,r,s){qn(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await up(e,n,r,tu(),s);return bR(e,i,nh())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await up(e,n,r,tu(),s);return D0(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(qn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await ER(e),r=new rR(e);return n.register("authEvent",s=>(ue(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Al,{type:Al},s=>{const i=s?.[0]?.[Al];i!==void 0&&n(!!i),Jt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=cR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return I_()||__()||Xu()}}const xR=NR;var hp="@firebase/auth",fp="1.11.1";class VR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function DR(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function OR(t){Us(new is("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;ue(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:A_(t)},u=new Xb(r,s,i,l);return c0(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Us(new is("auth-internal",e=>{const n=Vr(e.getProvider("auth").getImmediate());return(r=>new VR(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),_r(hp,fp,DR(t)),_r(hp,fp,"esm2020")}const MR=300,LR=e_("authIdTokenMaxAge")||MR;let dp=null;const FR=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>LR)return;const s=n?.token;dp!==s&&(dp=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function UR(t=o_()){const e=zu(t,"auth");if(e.isInitialized())return e.getImmediate();const n=a0(t,{popupRedirectResolver:xR,persistence:[$0,N0,D_]}),r=e_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=FR(i.toString());R0(n,o,()=>o(n.currentUser)),b0(n,c=>o(c))}}const s=Xg("auth");return s&&l0(n,`http://${s}`),n}function BR(){return document.getElementsByTagName("head")?.[0]??document}Zb({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=on("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",BR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});OR("Browser");var jR="firebase",qR="12.5.0";_r(jR,qR,"app");var pp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var yr,q_;(function(){var t;function e(b,E){function y(){}y.prototype=E.prototype,b.F=E.prototype,b.prototype=new y,b.prototype.constructor=b,b.D=function(w,A,I){for(var v=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)v[ve-2]=arguments[ve];return E.prototype[A].apply(w,v)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(b,E,y){y||(y=0);const w=Array(16);if(typeof E=="string")for(var A=0;A<16;++A)w[A]=E.charCodeAt(y++)|E.charCodeAt(y++)<<8|E.charCodeAt(y++)<<16|E.charCodeAt(y++)<<24;else for(A=0;A<16;++A)w[A]=E[y++]|E[y++]<<8|E[y++]<<16|E[y++]<<24;E=b.g[0],y=b.g[1],A=b.g[2];let I=b.g[3],v;v=E+(I^y&(A^I))+w[0]+3614090360&4294967295,E=y+(v<<7&4294967295|v>>>25),v=I+(A^E&(y^A))+w[1]+3905402710&4294967295,I=E+(v<<12&4294967295|v>>>20),v=A+(y^I&(E^y))+w[2]+606105819&4294967295,A=I+(v<<17&4294967295|v>>>15),v=y+(E^A&(I^E))+w[3]+3250441966&4294967295,y=A+(v<<22&4294967295|v>>>10),v=E+(I^y&(A^I))+w[4]+4118548399&4294967295,E=y+(v<<7&4294967295|v>>>25),v=I+(A^E&(y^A))+w[5]+1200080426&4294967295,I=E+(v<<12&4294967295|v>>>20),v=A+(y^I&(E^y))+w[6]+2821735955&4294967295,A=I+(v<<17&4294967295|v>>>15),v=y+(E^A&(I^E))+w[7]+4249261313&4294967295,y=A+(v<<22&4294967295|v>>>10),v=E+(I^y&(A^I))+w[8]+1770035416&4294967295,E=y+(v<<7&4294967295|v>>>25),v=I+(A^E&(y^A))+w[9]+2336552879&4294967295,I=E+(v<<12&4294967295|v>>>20),v=A+(y^I&(E^y))+w[10]+4294925233&4294967295,A=I+(v<<17&4294967295|v>>>15),v=y+(E^A&(I^E))+w[11]+2304563134&4294967295,y=A+(v<<22&4294967295|v>>>10),v=E+(I^y&(A^I))+w[12]+1804603682&4294967295,E=y+(v<<7&4294967295|v>>>25),v=I+(A^E&(y^A))+w[13]+4254626195&4294967295,I=E+(v<<12&4294967295|v>>>20),v=A+(y^I&(E^y))+w[14]+2792965006&4294967295,A=I+(v<<17&4294967295|v>>>15),v=y+(E^A&(I^E))+w[15]+1236535329&4294967295,y=A+(v<<22&4294967295|v>>>10),v=E+(A^I&(y^A))+w[1]+4129170786&4294967295,E=y+(v<<5&4294967295|v>>>27),v=I+(y^A&(E^y))+w[6]+3225465664&4294967295,I=E+(v<<9&4294967295|v>>>23),v=A+(E^y&(I^E))+w[11]+643717713&4294967295,A=I+(v<<14&4294967295|v>>>18),v=y+(I^E&(A^I))+w[0]+3921069994&4294967295,y=A+(v<<20&4294967295|v>>>12),v=E+(A^I&(y^A))+w[5]+3593408605&4294967295,E=y+(v<<5&4294967295|v>>>27),v=I+(y^A&(E^y))+w[10]+38016083&4294967295,I=E+(v<<9&4294967295|v>>>23),v=A+(E^y&(I^E))+w[15]+3634488961&4294967295,A=I+(v<<14&4294967295|v>>>18),v=y+(I^E&(A^I))+w[4]+3889429448&4294967295,y=A+(v<<20&4294967295|v>>>12),v=E+(A^I&(y^A))+w[9]+568446438&4294967295,E=y+(v<<5&4294967295|v>>>27),v=I+(y^A&(E^y))+w[14]+3275163606&4294967295,I=E+(v<<9&4294967295|v>>>23),v=A+(E^y&(I^E))+w[3]+4107603335&4294967295,A=I+(v<<14&4294967295|v>>>18),v=y+(I^E&(A^I))+w[8]+1163531501&4294967295,y=A+(v<<20&4294967295|v>>>12),v=E+(A^I&(y^A))+w[13]+2850285829&4294967295,E=y+(v<<5&4294967295|v>>>27),v=I+(y^A&(E^y))+w[2]+4243563512&4294967295,I=E+(v<<9&4294967295|v>>>23),v=A+(E^y&(I^E))+w[7]+1735328473&4294967295,A=I+(v<<14&4294967295|v>>>18),v=y+(I^E&(A^I))+w[12]+2368359562&4294967295,y=A+(v<<20&4294967295|v>>>12),v=E+(y^A^I)+w[5]+4294588738&4294967295,E=y+(v<<4&4294967295|v>>>28),v=I+(E^y^A)+w[8]+2272392833&4294967295,I=E+(v<<11&4294967295|v>>>21),v=A+(I^E^y)+w[11]+1839030562&4294967295,A=I+(v<<16&4294967295|v>>>16),v=y+(A^I^E)+w[14]+4259657740&4294967295,y=A+(v<<23&4294967295|v>>>9),v=E+(y^A^I)+w[1]+2763975236&4294967295,E=y+(v<<4&4294967295|v>>>28),v=I+(E^y^A)+w[4]+1272893353&4294967295,I=E+(v<<11&4294967295|v>>>21),v=A+(I^E^y)+w[7]+4139469664&4294967295,A=I+(v<<16&4294967295|v>>>16),v=y+(A^I^E)+w[10]+3200236656&4294967295,y=A+(v<<23&4294967295|v>>>9),v=E+(y^A^I)+w[13]+681279174&4294967295,E=y+(v<<4&4294967295|v>>>28),v=I+(E^y^A)+w[0]+3936430074&4294967295,I=E+(v<<11&4294967295|v>>>21),v=A+(I^E^y)+w[3]+3572445317&4294967295,A=I+(v<<16&4294967295|v>>>16),v=y+(A^I^E)+w[6]+76029189&4294967295,y=A+(v<<23&4294967295|v>>>9),v=E+(y^A^I)+w[9]+3654602809&4294967295,E=y+(v<<4&4294967295|v>>>28),v=I+(E^y^A)+w[12]+3873151461&4294967295,I=E+(v<<11&4294967295|v>>>21),v=A+(I^E^y)+w[15]+530742520&4294967295,A=I+(v<<16&4294967295|v>>>16),v=y+(A^I^E)+w[2]+3299628645&4294967295,y=A+(v<<23&4294967295|v>>>9),v=E+(A^(y|~I))+w[0]+4096336452&4294967295,E=y+(v<<6&4294967295|v>>>26),v=I+(y^(E|~A))+w[7]+1126891415&4294967295,I=E+(v<<10&4294967295|v>>>22),v=A+(E^(I|~y))+w[14]+2878612391&4294967295,A=I+(v<<15&4294967295|v>>>17),v=y+(I^(A|~E))+w[5]+4237533241&4294967295,y=A+(v<<21&4294967295|v>>>11),v=E+(A^(y|~I))+w[12]+1700485571&4294967295,E=y+(v<<6&4294967295|v>>>26),v=I+(y^(E|~A))+w[3]+2399980690&4294967295,I=E+(v<<10&4294967295|v>>>22),v=A+(E^(I|~y))+w[10]+4293915773&4294967295,A=I+(v<<15&4294967295|v>>>17),v=y+(I^(A|~E))+w[1]+2240044497&4294967295,y=A+(v<<21&4294967295|v>>>11),v=E+(A^(y|~I))+w[8]+1873313359&4294967295,E=y+(v<<6&4294967295|v>>>26),v=I+(y^(E|~A))+w[15]+4264355552&4294967295,I=E+(v<<10&4294967295|v>>>22),v=A+(E^(I|~y))+w[6]+2734768916&4294967295,A=I+(v<<15&4294967295|v>>>17),v=y+(I^(A|~E))+w[13]+1309151649&4294967295,y=A+(v<<21&4294967295|v>>>11),v=E+(A^(y|~I))+w[4]+4149444226&4294967295,E=y+(v<<6&4294967295|v>>>26),v=I+(y^(E|~A))+w[11]+3174756917&4294967295,I=E+(v<<10&4294967295|v>>>22),v=A+(E^(I|~y))+w[2]+718787259&4294967295,A=I+(v<<15&4294967295|v>>>17),v=y+(I^(A|~E))+w[9]+3951481745&4294967295,b.g[0]=b.g[0]+E&4294967295,b.g[1]=b.g[1]+(A+(v<<21&4294967295|v>>>11))&4294967295,b.g[2]=b.g[2]+A&4294967295,b.g[3]=b.g[3]+I&4294967295}r.prototype.v=function(b,E){E===void 0&&(E=b.length);const y=E-this.blockSize,w=this.C;let A=this.h,I=0;for(;I<E;){if(A==0)for(;I<=y;)s(this,b,I),I+=this.blockSize;if(typeof b=="string"){for(;I<E;)if(w[A++]=b.charCodeAt(I++),A==this.blockSize){s(this,w),A=0;break}}else for(;I<E;)if(w[A++]=b[I++],A==this.blockSize){s(this,w),A=0;break}}this.h=A,this.o+=E},r.prototype.A=function(){var b=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);b[0]=128;for(var E=1;E<b.length-8;++E)b[E]=0;E=this.o*8;for(var y=b.length-8;y<b.length;++y)b[y]=E&255,E/=256;for(this.v(b),b=Array(16),E=0,y=0;y<4;++y)for(let w=0;w<32;w+=8)b[E++]=this.g[y]>>>w&255;return b};function i(b,E){var y=c;return Object.prototype.hasOwnProperty.call(y,b)?y[b]:y[b]=E(b)}function o(b,E){this.h=E;const y=[];let w=!0;for(let A=b.length-1;A>=0;A--){const I=b[A]|0;w&&I==E||(y[A]=I,w=!1)}this.g=y}var c={};function l(b){return-128<=b&&b<128?i(b,function(E){return new o([E|0],E<0?-1:0)}):new o([b|0],b<0?-1:0)}function u(b){if(isNaN(b)||!isFinite(b))return d;if(b<0)return P(u(-b));const E=[];let y=1;for(let w=0;b>=y;w++)E[w]=b/y|0,y*=4294967296;return new o(E,0)}function f(b,E){if(b.length==0)throw Error("number format error: empty string");if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(b.charAt(0)=="-")return P(f(b.substring(1),E));if(b.indexOf("-")>=0)throw Error('number format error: interior "-" character');const y=u(Math.pow(E,8));let w=d;for(let I=0;I<b.length;I+=8){var A=Math.min(8,b.length-I);const v=parseInt(b.substring(I,I+A),E);A<8?(A=u(Math.pow(E,A)),w=w.j(A).add(u(v))):(w=w.j(y),w=w.add(u(v)))}return w}var d=l(0),m=l(1),_=l(16777216);t=o.prototype,t.m=function(){if(N(this))return-P(this).m();let b=0,E=1;for(let y=0;y<this.g.length;y++){const w=this.i(y);b+=(w>=0?w:4294967296+w)*E,E*=4294967296}return b},t.toString=function(b){if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(S(this))return"0";if(N(this))return"-"+P(this).toString(b);const E=u(Math.pow(b,6));var y=this;let w="";for(;;){const A=W(y,E).g;y=x(y,A.j(E));let I=((y.g.length>0?y.g[0]:y.h)>>>0).toString(b);if(y=A,S(y))return I+w;for(;I.length<6;)I="0"+I;w=I+w}},t.i=function(b){return b<0?0:b<this.g.length?this.g[b]:this.h};function S(b){if(b.h!=0)return!1;for(let E=0;E<b.g.length;E++)if(b.g[E]!=0)return!1;return!0}function N(b){return b.h==-1}t.l=function(b){return b=x(this,b),N(b)?-1:S(b)?0:1};function P(b){const E=b.g.length,y=[];for(let w=0;w<E;w++)y[w]=~b.g[w];return new o(y,~b.h).add(m)}t.abs=function(){return N(this)?P(this):this},t.add=function(b){const E=Math.max(this.g.length,b.g.length),y=[];let w=0;for(let A=0;A<=E;A++){let I=w+(this.i(A)&65535)+(b.i(A)&65535),v=(I>>>16)+(this.i(A)>>>16)+(b.i(A)>>>16);w=v>>>16,I&=65535,v&=65535,y[A]=v<<16|I}return new o(y,y[y.length-1]&-2147483648?-1:0)};function x(b,E){return b.add(P(E))}t.j=function(b){if(S(this)||S(b))return d;if(N(this))return N(b)?P(this).j(P(b)):P(P(this).j(b));if(N(b))return P(this.j(P(b)));if(this.l(_)<0&&b.l(_)<0)return u(this.m()*b.m());const E=this.g.length+b.g.length,y=[];for(var w=0;w<2*E;w++)y[w]=0;for(w=0;w<this.g.length;w++)for(let A=0;A<b.g.length;A++){const I=this.i(w)>>>16,v=this.i(w)&65535,ve=b.i(A)>>>16,je=b.i(A)&65535;y[2*w+2*A]+=v*je,O(y,2*w+2*A),y[2*w+2*A+1]+=I*je,O(y,2*w+2*A+1),y[2*w+2*A+1]+=v*ve,O(y,2*w+2*A+1),y[2*w+2*A+2]+=I*ve,O(y,2*w+2*A+2)}for(b=0;b<E;b++)y[b]=y[2*b+1]<<16|y[2*b];for(b=E;b<2*E;b++)y[b]=0;return new o(y,0)};function O(b,E){for(;(b[E]&65535)!=b[E];)b[E+1]+=b[E]>>>16,b[E]&=65535,E++}function H(b,E){this.g=b,this.h=E}function W(b,E){if(S(E))throw Error("division by zero");if(S(b))return new H(d,d);if(N(b))return E=W(P(b),E),new H(P(E.g),P(E.h));if(N(E))return E=W(b,P(E)),new H(P(E.g),E.h);if(b.g.length>30){if(N(b)||N(E))throw Error("slowDivide_ only works with positive integers.");for(var y=m,w=E;w.l(b)<=0;)y=Z(y),w=Z(w);var A=te(y,1),I=te(w,1);for(w=te(w,2),y=te(y,2);!S(w);){var v=I.add(w);v.l(b)<=0&&(A=A.add(y),I=v),w=te(w,1),y=te(y,1)}return E=x(b,A.j(E)),new H(A,E)}for(A=d;b.l(E)>=0;){for(y=Math.max(1,Math.floor(b.m()/E.m())),w=Math.ceil(Math.log(y)/Math.LN2),w=w<=48?1:Math.pow(2,w-48),I=u(y),v=I.j(E);N(v)||v.l(b)>0;)y-=w,I=u(y),v=I.j(E);S(I)&&(I=m),A=A.add(I),b=x(b,v)}return new H(A,b)}t.B=function(b){return W(this,b).h},t.and=function(b){const E=Math.max(this.g.length,b.g.length),y=[];for(let w=0;w<E;w++)y[w]=this.i(w)&b.i(w);return new o(y,this.h&b.h)},t.or=function(b){const E=Math.max(this.g.length,b.g.length),y=[];for(let w=0;w<E;w++)y[w]=this.i(w)|b.i(w);return new o(y,this.h|b.h)},t.xor=function(b){const E=Math.max(this.g.length,b.g.length),y=[];for(let w=0;w<E;w++)y[w]=this.i(w)^b.i(w);return new o(y,this.h^b.h)};function Z(b){const E=b.g.length+1,y=[];for(let w=0;w<E;w++)y[w]=b.i(w)<<1|b.i(w-1)>>>31;return new o(y,b.h)}function te(b,E){const y=E>>5;E%=32;const w=b.g.length-y,A=[];for(let I=0;I<w;I++)A[I]=E>0?b.i(I+y)>>>E|b.i(I+y+1)<<32-E:b.i(I+y);return new o(A,b.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,q_=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=f,yr=o}).apply(typeof pp<"u"?pp:typeof self<"u"?self:typeof window<"u"?window:{});var Xo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var $_,Ri,H_,da,iu,G_,W_,z_;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xo=="object"&&Xo];for(var h=0;h<a.length;++h){var p=a[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var p=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var k=a[g];if(!(k in p))break e;p=p[k]}a=a[a.length-1],g=p[a],h=h(g),h!=g&&h!=null&&e(p,a,{configurable:!0,writable:!0,value:h})}}s("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(a){return a||function(h){var p=[],g;for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&p.push([g,h[g]]);return p}});var i=i||{},o=this||self;function c(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function l(a,h,p){return a.call.apply(a.bind,arguments)}function u(a,h,p){return u=l,u.apply(null,arguments)}function f(a,h){var p=Array.prototype.slice.call(arguments,1);return function(){var g=p.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function d(a,h){function p(){}p.prototype=h.prototype,a.Z=h.prototype,a.prototype=new p,a.prototype.constructor=a,a.Ob=function(g,k,V){for(var z=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)z[pe-2]=arguments[pe];return h.prototype[k].apply(g,z)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function _(a){const h=a.length;if(h>0){const p=Array(h);for(let g=0;g<h;g++)p[g]=a[g];return p}return[]}function S(a,h){for(let g=1;g<arguments.length;g++){const k=arguments[g];var p=typeof k;if(p=p!="object"?p:k?Array.isArray(k)?"array":p:"null",p=="array"||p=="object"&&typeof k.length=="number"){p=a.length||0;const V=k.length||0;a.length=p+V;for(let z=0;z<V;z++)a[p+z]=k[z]}else a.push(k)}}class N{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function P(a){o.setTimeout(()=>{throw a},0)}function x(){var a=b;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class O{constructor(){this.h=this.g=null}add(h,p){const g=H.get();g.set(h,p),this.h?this.h.next=g:this.g=g,this.h=g}}var H=new N(()=>new W,a=>a.reset());class W{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,te=!1,b=new O,E=()=>{const a=Promise.resolve(void 0);Z=()=>{a.then(y)}};function y(){for(var a;a=x();){try{a.h.call(a.g)}catch(p){P(p)}var h=H;h.j(a),h.h<100&&(h.h++,a.next=h.g,h.g=a)}te=!1}function w(){this.u=this.u,this.C=this.C}w.prototype.u=!1,w.prototype.dispose=function(){this.u||(this.u=!0,this.N())},w.prototype[Symbol.dispose]=function(){this.dispose()},w.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var I=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const p=()=>{};o.addEventListener("test",p,h),o.removeEventListener("test",p,h)}catch{}return a})();function v(a){return/^[\s\xa0]*$/.test(a)}function ve(a,h){A.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,h)}d(ve,A),ve.prototype.init=function(a,h){const p=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget,h||(p=="mouseover"?h=a.fromElement:p=="mouseout"&&(h=a.toElement)),this.relatedTarget=h,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&ve.Z.h.call(this)},ve.prototype.h=function(){ve.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var je="closure_listenable_"+(Math.random()*1e6|0),Ce=0;function fe(a,h,p,g,k){this.listener=a,this.proxy=null,this.src=h,this.type=p,this.capture=!!g,this.ha=k,this.key=++Ce,this.da=this.fa=!1}function Te(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Dt(a,h,p){for(const g in a)h.call(p,a[g],g,a)}function hn(a,h){for(const p in a)h.call(void 0,a[p],p,a)}function Mt(a){const h={};for(const p in a)h[p]=a[p];return h}const ct="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Sn(a,h){let p,g;for(let k=1;k<arguments.length;k++){g=arguments[k];for(p in g)a[p]=g[p];for(let V=0;V<ct.length;V++)p=ct[V],Object.prototype.hasOwnProperty.call(g,p)&&(a[p]=g[p])}}function Zt(a){this.src=a,this.g={},this.h=0}Zt.prototype.add=function(a,h,p,g,k){const V=a.toString();a=this.g[V],a||(a=this.g[V]=[],this.h++);const z=gt(a,h,g,k);return z>-1?(h=a[z],p||(h.fa=!1)):(h=new fe(h,this.src,V,!!g,k),h.fa=p,a.push(h)),h};function en(a,h){const p=h.type;if(p in a.g){var g=a.g[p],k=Array.prototype.indexOf.call(g,h,void 0),V;(V=k>=0)&&Array.prototype.splice.call(g,k,1),V&&(Te(h),a.g[p].length==0&&(delete a.g[p],a.h--))}}function gt(a,h,p,g){for(let k=0;k<a.length;++k){const V=a[k];if(!V.da&&V.listener==h&&V.capture==!!p&&V.ha==g)return k}return-1}var L="closure_lm_"+(Math.random()*1e6|0),J={};function Q(a,h,p,g,k){if(Array.isArray(h)){for(let V=0;V<h.length;V++)Q(a,h[V],p,g,k);return null}return p=K(p),a&&a[je]?a.J(h,p,c(g)?!!g.capture:!1,k):ne(a,h,p,!1,g,k)}function ne(a,h,p,g,k,V){if(!h)throw Error("Invalid event type");const z=c(k)?!!k.capture:!!k;let pe=B(a);if(pe||(a[L]=pe=new Zt(a)),p=pe.add(h,p,g,z,V),p.proxy)return p;if(g=ge(),p.proxy=g,g.src=a,g.listener=p,a.addEventListener)I||(k=z),k===void 0&&(k=!1),a.addEventListener(h.toString(),g,k);else if(a.attachEvent)a.attachEvent(C(h.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return p}function ge(){function a(p){return h.call(a.src,a.listener,p)}const h=F;return a}function T(a,h,p,g,k){if(Array.isArray(h))for(var V=0;V<h.length;V++)T(a,h[V],p,g,k);else g=c(g)?!!g.capture:!!g,p=K(p),a&&a[je]?(a=a.i,V=String(h).toString(),V in a.g&&(h=a.g[V],p=gt(h,p,g,k),p>-1&&(Te(h[p]),Array.prototype.splice.call(h,p,1),h.length==0&&(delete a.g[V],a.h--)))):a&&(a=B(a))&&(h=a.g[h.toString()],a=-1,h&&(a=gt(h,p,g,k)),(p=a>-1?h[a]:null)&&R(p))}function R(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[je])en(h.i,a);else{var p=a.type,g=a.proxy;h.removeEventListener?h.removeEventListener(p,g,a.capture):h.detachEvent?h.detachEvent(C(p),g):h.addListener&&h.removeListener&&h.removeListener(g),(p=B(h))?(en(p,a),p.h==0&&(p.src=null,h[L]=null)):Te(a)}}}function C(a){return a in J?J[a]:J[a]="on"+a}function F(a,h){if(a.da)a=!0;else{h=new ve(h,this);const p=a.listener,g=a.ha||a.src;a.fa&&R(a),a=p.call(g,h)}return a}function B(a){return a=a[L],a instanceof Zt?a:null}var M="__closure_events_fn_"+(Math.random()*1e9>>>0);function K(a){return typeof a=="function"?a:(a[M]||(a[M]=function(h){return a.handleEvent(h)}),a[M])}function $(){w.call(this),this.i=new Zt(this),this.M=this,this.G=null}d($,w),$.prototype[je]=!0,$.prototype.removeEventListener=function(a,h,p,g){T(this,a,h,p,g)};function q(a,h){var p,g=a.G;if(g)for(p=[];g;g=g.G)p.push(g);if(a=a.M,g=h.type||h,typeof h=="string")h=new A(h,a);else if(h instanceof A)h.target=h.target||a;else{var k=h;h=new A(g,a),Sn(h,k)}k=!0;let V,z;if(p)for(z=p.length-1;z>=0;z--)V=h.g=p[z],k=j(V,g,!0,h)&&k;if(V=h.g=a,k=j(V,g,!0,h)&&k,k=j(V,g,!1,h)&&k,p)for(z=0;z<p.length;z++)V=h.g=p[z],k=j(V,g,!1,h)&&k}$.prototype.N=function(){if($.Z.N.call(this),this.i){var a=this.i;for(const h in a.g){const p=a.g[h];for(let g=0;g<p.length;g++)Te(p[g]);delete a.g[h],a.h--}}this.G=null},$.prototype.J=function(a,h,p,g){return this.i.add(String(a),h,!1,p,g)},$.prototype.K=function(a,h,p,g){return this.i.add(String(a),h,!0,p,g)};function j(a,h,p,g){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();let k=!0;for(let V=0;V<h.length;++V){const z=h[V];if(z&&!z.da&&z.capture==p){const pe=z.listener,et=z.ha||z.src;z.fa&&en(a.i,z),k=pe.call(et,g)!==!1&&k}}return k&&!g.defaultPrevented}function oe(a,h){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=u(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:o.setTimeout(a,h||0)}function Y(a){a.g=oe(()=>{a.g=null,a.i&&(a.i=!1,Y(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class re extends w{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Y(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ce(a){w.call(this),this.h=a,this.g={}}d(ce,w);var me=[];function ke(a){Dt(a.g,function(h,p){this.g.hasOwnProperty(p)&&R(h)},a),a.g={}}ce.prototype.N=function(){ce.Z.N.call(this),ke(this)},ce.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ae=o.JSON.stringify,_t=o.JSON.parse,yt=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function Lt(){}function Ft(){}var tn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ds(){A.call(this,"d")}d(ds,A);function lt(){A.call(this,"c")}d(lt,A);var rt={},ri=null;function Lr(){return ri=ri||new $}rt.Ia="serverreachability";function Gh(a){A.call(this,rt.Ia,a)}d(Gh,A);function si(a){const h=Lr();q(h,new Gh(h))}rt.STAT_EVENT="statevent";function Wh(a,h){A.call(this,rt.STAT_EVENT,a),this.stat=h}d(Wh,A);function Rt(a){const h=Lr();q(h,new Wh(h,a))}rt.Ja="timingevent";function zh(a,h){A.call(this,rt.Ja,a),this.size=h}d(zh,A);function ii(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},h)}function oi(){this.g=!0}oi.prototype.ua=function(){this.g=!1};function SE(a,h,p,g,k,V){a.info(function(){if(a.g)if(V){var z="",pe=V.split("&");for(let Ve=0;Ve<pe.length;Ve++){var et=pe[Ve].split("=");if(et.length>1){const st=et[0];et=et[1];const dn=st.split("_");z=dn.length>=2&&dn[1]=="type"?z+(st+"="+et+"&"):z+(st+"=redacted&")}}}else z=null;else z=V;return"XMLHTTP REQ ("+g+") [attempt "+k+"]: "+h+`
`+p+`
`+z})}function PE(a,h,p,g,k,V,z){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+k+"]: "+h+`
`+p+`
`+V+" "+z})}function ps(a,h,p,g){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+kE(a,p)+(g?" "+g:"")})}function CE(a,h){a.info(function(){return"TIMEOUT: "+h})}oi.prototype.info=function(){};function kE(a,h){if(!a.g)return h;if(!h)return null;try{const V=JSON.parse(h);if(V){for(a=0;a<V.length;a++)if(Array.isArray(V[a])){var p=V[a];if(!(p.length<2)){var g=p[1];if(Array.isArray(g)&&!(g.length<1)){var k=g[0];if(k!="noop"&&k!="stop"&&k!="close")for(let z=1;z<g.length;z++)g[z]=""}}}}return Ae(V)}catch{return h}}var Mo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Kh={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Qh;function qc(){}d(qc,Lt),qc.prototype.g=function(){return new XMLHttpRequest},Qh=new qc;function ai(a){return encodeURIComponent(String(a))}function NE(a){var h=1;a=a.split(":");const p=[];for(;h>0&&a.length;)p.push(a.shift()),h--;return a.length&&p.push(a.join(":")),p}function Qn(a,h,p,g){this.j=a,this.i=h,this.l=p,this.S=g||1,this.V=new ce(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Yh}function Yh(){this.i=null,this.g="",this.h=!1}var Jh={},$c={};function Hc(a,h,p){a.M=1,a.A=Fo(fn(h)),a.u=p,a.R=!0,Xh(a,null)}function Xh(a,h){a.F=Date.now(),Lo(a),a.B=fn(a.A);var p=a.B,g=a.S;Array.isArray(g)||(g=[String(g)]),ff(p.i,"t",g),a.C=0,p=a.j.L,a.h=new Yh,a.g=kf(a.j,p?h:null,!a.u),a.P>0&&(a.O=new re(u(a.Y,a,a.g),a.P)),h=a.V,p=a.g,g=a.ba;var k="readystatechange";Array.isArray(k)||(k&&(me[0]=k.toString()),k=me);for(let V=0;V<k.length;V++){const z=Q(p,k[V],g||h.handleEvent,!1,h.h||h);if(!z)break;h.g[z.key]=z}h=a.J?Mt(a.J):{},a.u?(a.v||(a.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,h)):(a.v="GET",a.g.ea(a.B,a.v,null,h)),si(),SE(a.i,a.v,a.B,a.l,a.S,a.u)}Qn.prototype.ba=function(a){a=a.target;const h=this.O;h&&Xn(a)==3?h.j():this.Y(a)},Qn.prototype.Y=function(a){try{if(a==this.g)e:{const pe=Xn(this.g),et=this.g.ya(),Ve=this.g.ca();if(!(pe<3)&&(pe!=3||this.g&&(this.h.h||this.g.la()||Ef(this.g)))){this.K||pe!=4||et==7||(et==8||Ve<=0?si(3):si(2)),Gc(this);var h=this.g.ca();this.X=h;var p=xE(this);if(this.o=h==200,PE(this.i,this.v,this.B,this.l,this.S,pe,h),this.o){if(this.U&&!this.L){t:{if(this.g){var g,k=this.g;if((g=k.g?k.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(g)){var V=g;break t}}V=null}if(a=V)ps(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Wc(this,a);else{this.o=!1,this.m=3,Rt(12),Fr(this),ci(this);break e}}if(this.R){a=!0;let st;for(;!this.K&&this.C<p.length;)if(st=VE(this,p),st==$c){pe==4&&(this.m=4,Rt(14),a=!1),ps(this.i,this.l,null,"[Incomplete Response]");break}else if(st==Jh){this.m=4,Rt(15),ps(this.i,this.l,p,"[Invalid Chunk]"),a=!1;break}else ps(this.i,this.l,st,null),Wc(this,st);if(Zh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pe!=4||p.length!=0||this.h.h||(this.m=1,Rt(16),a=!1),this.o=this.o&&a,!a)ps(this.i,this.l,p,"[Invalid Chunked Response]"),Fr(this),ci(this);else if(p.length>0&&!this.W){this.W=!0;var z=this.j;z.g==this&&z.aa&&!z.P&&(z.j.info("Great, no buffering proxy detected. Bytes received: "+p.length),el(z),z.P=!0,Rt(11))}}else ps(this.i,this.l,p,null),Wc(this,p);pe==4&&Fr(this),this.o&&!this.K&&(pe==4?Rf(this.j,this):(this.o=!1,Lo(this)))}else zE(this.g),h==400&&p.indexOf("Unknown SID")>0?(this.m=3,Rt(12)):(this.m=0,Rt(13)),Fr(this),ci(this)}}}catch{}finally{}};function xE(a){if(!Zh(a))return a.g.la();const h=Ef(a.g);if(h==="")return"";let p="";const g=h.length,k=Xn(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return Fr(a),ci(a),"";a.h.i=new o.TextDecoder}for(let V=0;V<g;V++)a.h.h=!0,p+=a.h.i.decode(h[V],{stream:!(k&&V==g-1)});return h.length=0,a.h.g+=p,a.C=0,a.h.g}function Zh(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function VE(a,h){var p=a.C,g=h.indexOf(`
`,p);return g==-1?$c:(p=Number(h.substring(p,g)),isNaN(p)?Jh:(g+=1,g+p>h.length?$c:(h=h.slice(g,g+p),a.C=g+p,h)))}Qn.prototype.cancel=function(){this.K=!0,Fr(this)};function Lo(a){a.T=Date.now()+a.H,ef(a,a.H)}function ef(a,h){if(a.D!=null)throw Error("WatchDog timer not null");a.D=ii(u(a.aa,a),h)}function Gc(a){a.D&&(o.clearTimeout(a.D),a.D=null)}Qn.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(CE(this.i,this.B),this.M!=2&&(si(),Rt(17)),Fr(this),this.m=2,ci(this)):ef(this,this.T-a)};function ci(a){a.j.I==0||a.K||Rf(a.j,a)}function Fr(a){Gc(a);var h=a.O;h&&typeof h.dispose=="function"&&h.dispose(),a.O=null,ke(a.V),a.g&&(h=a.g,a.g=null,h.abort(),h.dispose())}function Wc(a,h){try{var p=a.j;if(p.I!=0&&(p.g==a||zc(p.h,a))){if(!a.L&&zc(p.h,a)&&p.I==3){try{var g=p.Ba.g.parse(h)}catch{g=null}if(Array.isArray(g)&&g.length==3){var k=g;if(k[0]==0){e:if(!p.v){if(p.g)if(p.g.F+3e3<a.F)$o(p),jo(p);else break e;Zc(p),Rt(18)}}else p.xa=k[1],0<p.xa-p.K&&k[2]<37500&&p.F&&p.A==0&&!p.C&&(p.C=ii(u(p.Va,p),6e3));rf(p.h)<=1&&p.ta&&(p.ta=void 0)}else Br(p,11)}else if((a.L||p.g==a)&&$o(p),!v(h))for(k=p.Ba.g.parse(h),h=0;h<k.length;h++){let Ve=k[h];const st=Ve[0];if(!(st<=p.K))if(p.K=st,Ve=Ve[1],p.I==2)if(Ve[0]=="c"){p.M=Ve[1],p.ba=Ve[2];const dn=Ve[3];dn!=null&&(p.ka=dn,p.j.info("VER="+p.ka));const jr=Ve[4];jr!=null&&(p.za=jr,p.j.info("SVER="+p.za));const Zn=Ve[5];Zn!=null&&typeof Zn=="number"&&Zn>0&&(g=1.5*Zn,p.O=g,p.j.info("backChannelRequestTimeoutMs_="+g)),g=p;const er=a.g;if(er){const Go=er.g?er.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Go){var V=g.h;V.g||Go.indexOf("spdy")==-1&&Go.indexOf("quic")==-1&&Go.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(Kc(V,V.h),V.h=null))}if(g.G){const tl=er.g?er.g.getResponseHeader("X-HTTP-Session-Id"):null;tl&&(g.wa=tl,Fe(g.J,g.G,tl))}}p.I=3,p.l&&p.l.ra(),p.aa&&(p.T=Date.now()-a.F,p.j.info("Handshake RTT: "+p.T+"ms")),g=p;var z=a;if(g.na=Cf(g,g.L?g.ba:null,g.W),z.L){sf(g.h,z);var pe=z,et=g.O;et&&(pe.H=et),pe.D&&(Gc(pe),Lo(pe)),g.g=z}else Af(g);p.i.length>0&&qo(p)}else Ve[0]!="stop"&&Ve[0]!="close"||Br(p,7);else p.I==3&&(Ve[0]=="stop"||Ve[0]=="close"?Ve[0]=="stop"?Br(p,7):Xc(p):Ve[0]!="noop"&&p.l&&p.l.qa(Ve),p.A=0)}}si(4)}catch{}}var DE=class{constructor(a,h){this.g=a,this.map=h}};function tf(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function nf(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function rf(a){return a.h?1:a.g?a.g.size:0}function zc(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function Kc(a,h){a.g?a.g.add(h):a.h=h}function sf(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}tf.prototype.cancel=function(){if(this.i=of(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function of(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const p of a.g.values())h=h.concat(p.G);return h}return _(a.i)}var af=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function OE(a,h){if(a){a=a.split("&");for(let p=0;p<a.length;p++){const g=a[p].indexOf("=");let k,V=null;g>=0?(k=a[p].substring(0,g),V=a[p].substring(g+1)):k=a[p],h(k,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Yn(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;a instanceof Yn?(this.l=a.l,li(this,a.j),this.o=a.o,this.g=a.g,ui(this,a.u),this.h=a.h,Qc(this,df(a.i)),this.m=a.m):a&&(h=String(a).match(af))?(this.l=!1,li(this,h[1]||"",!0),this.o=hi(h[2]||""),this.g=hi(h[3]||"",!0),ui(this,h[4]),this.h=hi(h[5]||"",!0),Qc(this,h[6]||"",!0),this.m=hi(h[7]||"")):(this.l=!1,this.i=new di(null,this.l))}Yn.prototype.toString=function(){const a=[];var h=this.j;h&&a.push(fi(h,cf,!0),":");var p=this.g;return(p||h=="file")&&(a.push("//"),(h=this.o)&&a.push(fi(h,cf,!0),"@"),a.push(ai(p).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.u,p!=null&&a.push(":",String(p))),(p=this.h)&&(this.g&&p.charAt(0)!="/"&&a.push("/"),a.push(fi(p,p.charAt(0)=="/"?FE:LE,!0))),(p=this.i.toString())&&a.push("?",p),(p=this.m)&&a.push("#",fi(p,BE)),a.join("")},Yn.prototype.resolve=function(a){const h=fn(this);let p=!!a.j;p?li(h,a.j):p=!!a.o,p?h.o=a.o:p=!!a.g,p?h.g=a.g:p=a.u!=null;var g=a.h;if(p)ui(h,a.u);else if(p=!!a.h){if(g.charAt(0)!="/")if(this.g&&!this.h)g="/"+g;else{var k=h.h.lastIndexOf("/");k!=-1&&(g=h.h.slice(0,k+1)+g)}if(k=g,k==".."||k==".")g="";else if(k.indexOf("./")!=-1||k.indexOf("/.")!=-1){g=k.lastIndexOf("/",0)==0,k=k.split("/");const V=[];for(let z=0;z<k.length;){const pe=k[z++];pe=="."?g&&z==k.length&&V.push(""):pe==".."?((V.length>1||V.length==1&&V[0]!="")&&V.pop(),g&&z==k.length&&V.push("")):(V.push(pe),g=!0)}g=V.join("/")}else g=k}return p?h.h=g:p=a.i.toString()!=="",p?Qc(h,df(a.i)):p=!!a.m,p&&(h.m=a.m),h};function fn(a){return new Yn(a)}function li(a,h,p){a.j=p?hi(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function ui(a,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);a.u=h}else a.u=null}function Qc(a,h,p){h instanceof di?(a.i=h,jE(a.i,a.l)):(p||(h=fi(h,UE)),a.i=new di(h,a.l))}function Fe(a,h,p){a.i.set(h,p)}function Fo(a){return Fe(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function hi(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function fi(a,h,p){return typeof a=="string"?(a=encodeURI(a).replace(h,ME),p&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function ME(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var cf=/[#\/\?@]/g,LE=/[#\?:]/g,FE=/[#\?]/g,UE=/[#\?@]/g,BE=/#/g;function di(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function Ur(a){a.g||(a.g=new Map,a.h=0,a.i&&OE(a.i,function(h,p){a.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=di.prototype,t.add=function(a,h){Ur(this),this.i=null,a=ms(this,a);let p=this.g.get(a);return p||this.g.set(a,p=[]),p.push(h),this.h+=1,this};function lf(a,h){Ur(a),h=ms(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function uf(a,h){return Ur(a),h=ms(a,h),a.g.has(h)}t.forEach=function(a,h){Ur(this),this.g.forEach(function(p,g){p.forEach(function(k){a.call(h,k,g,this)},this)},this)};function hf(a,h){Ur(a);let p=[];if(typeof h=="string")uf(a,h)&&(p=p.concat(a.g.get(ms(a,h))));else for(a=Array.from(a.g.values()),h=0;h<a.length;h++)p=p.concat(a[h]);return p}t.set=function(a,h){return Ur(this),this.i=null,a=ms(this,a),uf(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=hf(this,a),a.length>0?String(a[0]):h):h};function ff(a,h,p){lf(a,h),p.length>0&&(a.i=null,a.g.set(ms(a,h),_(p)),a.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(let g=0;g<h.length;g++){var p=h[g];const k=ai(p);p=hf(this,p);for(let V=0;V<p.length;V++){let z=k;p[V]!==""&&(z+="="+ai(p[V])),a.push(z)}}return this.i=a.join("&")};function df(a){const h=new di;return h.i=a.i,a.g&&(h.g=new Map(a.g),h.h=a.h),h}function ms(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function jE(a,h){h&&!a.j&&(Ur(a),a.i=null,a.g.forEach(function(p,g){const k=g.toLowerCase();g!=k&&(lf(this,g),ff(this,k,p))},a)),a.j=h}function qE(a,h){const p=new oi;if(o.Image){const g=new Image;g.onload=f(Jn,p,"TestLoadImage: loaded",!0,h,g),g.onerror=f(Jn,p,"TestLoadImage: error",!1,h,g),g.onabort=f(Jn,p,"TestLoadImage: abort",!1,h,g),g.ontimeout=f(Jn,p,"TestLoadImage: timeout",!1,h,g),o.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else h(!1)}function $E(a,h){const p=new oi,g=new AbortController,k=setTimeout(()=>{g.abort(),Jn(p,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:g.signal}).then(V=>{clearTimeout(k),V.ok?Jn(p,"TestPingServer: ok",!0,h):Jn(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(k),Jn(p,"TestPingServer: error",!1,h)})}function Jn(a,h,p,g,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),g(p)}catch{}}function HE(){this.g=new yt}function Yc(a){this.i=a.Sb||null,this.h=a.ab||!1}d(Yc,Lt),Yc.prototype.g=function(){return new Uo(this.i,this.h)};function Uo(a,h){$.call(this),this.H=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(Uo,$),t=Uo.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=h,this.readyState=1,mi(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(h.body=a),(this.H||o).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,pi(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,mi(this)),this.g&&(this.readyState=3,mi(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;pf(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function pf(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?pi(this):mi(this),this.readyState==3&&pf(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,pi(this))},t.Na=function(a){this.g&&(this.response=a,pi(this))},t.ga=function(){this.g&&pi(this)};function pi(a){a.readyState=4,a.l=null,a.j=null,a.B=null,mi(a)}t.setRequestHeader=function(a,h){this.A.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,a.push(p[0]+": "+p[1]),p=h.next();return a.join(`\r
`)};function mi(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Uo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function mf(a){let h="";return Dt(a,function(p,g){h+=g,h+=":",h+=p,h+=`\r
`}),h}function Jc(a,h,p){e:{for(g in p){var g=!1;break e}g=!0}g||(p=mf(p),typeof a=="string"?p!=null&&ai(p):Fe(a,h,p))}function $e(a){$.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d($e,$);var GE=/^https?$/i,WE=["POST","PUT"];t=$e.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,h,p,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Qh.g(),this.g.onreadystatechange=m(u(this.Ca,this));try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(V){gf(this,V);return}if(a=p||"",p=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var k in g)p.set(k,g[k]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const V of g.keys())p.set(V,g.get(V));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(p.keys()).find(V=>V.toLowerCase()=="content-type"),k=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(WE,h,void 0)>=0)||g||k||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,z]of p)this.g.setRequestHeader(V,z);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(V){gf(this,V)}};function gf(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.o=5,_f(a),Bo(a)}function _f(a){a.A||(a.A=!0,q(a,"complete"),q(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,q(this,"complete"),q(this,"abort"),Bo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bo(this,!0)),$e.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?yf(this):this.Xa())},t.Xa=function(){yf(this)};function yf(a){if(a.h&&typeof i<"u"){if(a.v&&Xn(a)==4)setTimeout(a.Ca.bind(a),0);else if(q(a,"readystatechange"),Xn(a)==4){a.h=!1;try{const V=a.ca();e:switch(V){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var g;if(g=V===0){let z=String(a.D).match(af)[1]||null;!z&&o.self&&o.self.location&&(z=o.self.location.protocol.slice(0,-1)),g=!GE.test(z?z.toLowerCase():"")}p=g}if(p)q(a,"complete"),q(a,"success");else{a.o=6;try{var k=Xn(a)>2?a.g.statusText:""}catch{k=""}a.l=k+" ["+a.ca()+"]",_f(a)}}finally{Bo(a)}}}}function Bo(a,h){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const p=a.g;a.g=null,h||q(a,"ready");try{p.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Xn(a){return a.g?a.g.readyState:0}t.ca=function(){try{return Xn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),_t(h)}};function Ef(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function zE(a){const h={};a=(a.g&&Xn(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(v(a[g]))continue;var p=NE(a[g]);const k=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const V=h[k]||[];h[k]=V,V.push(p)}hn(h,function(g){return g.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function gi(a,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[a]||h}function vf(a){this.za=0,this.i=[],this.j=new oi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=gi("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=gi("baseRetryDelayMs",5e3,a),this.Za=gi("retryDelaySeedMs",1e4,a),this.Ta=gi("forwardChannelMaxRetries",2,a),this.va=gi("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new tf(a&&a.concurrentRequestLimit),this.Ba=new HE,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=vf.prototype,t.ka=8,t.I=1,t.connect=function(a,h,p,g){Rt(0),this.W=a,this.H=h||{},p&&g!==void 0&&(this.H.OSID=p,this.H.OAID=g),this.F=this.X,this.J=Cf(this,null,this.W),qo(this)};function Xc(a){if(Tf(a),a.I==3){var h=a.V++,p=fn(a.J);if(Fe(p,"SID",a.M),Fe(p,"RID",h),Fe(p,"TYPE","terminate"),_i(a,p),h=new Qn(a,a.j,h),h.M=2,h.A=Fo(fn(p)),p=!1,o.navigator&&o.navigator.sendBeacon)try{p=o.navigator.sendBeacon(h.A.toString(),"")}catch{}!p&&o.Image&&(new Image().src=h.A,p=!0),p||(h.g=kf(h.j,null),h.g.ea(h.A)),h.F=Date.now(),Lo(h)}Pf(a)}function jo(a){a.g&&(el(a),a.g.cancel(),a.g=null)}function Tf(a){jo(a),a.v&&(o.clearTimeout(a.v),a.v=null),$o(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function qo(a){if(!nf(a.h)&&!a.m){a.m=!0;var h=a.Ea;Z||E(),te||(Z(),te=!0),b.add(h,a),a.D=0}}function KE(a,h){return rf(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=h.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=ii(u(a.Ea,a,h),Sf(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const k=new Qn(this,this.j,a);let V=this.o;if(this.U&&(V?(V=Mt(V),Sn(V,this.U)):V=this.U),this.u!==null||this.R||(k.J=V,V=null),this.S)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var g=this.i[p];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(h+=g,h>4096){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=If(this,k,h),p=fn(this.J),Fe(p,"RID",a),Fe(p,"CVER",22),this.G&&Fe(p,"X-HTTP-Session-Id",this.G),_i(this,p),V&&(this.R?h="headers="+ai(mf(V))+"&"+h:this.u&&Jc(p,this.u,V)),Kc(this.h,k),this.Ra&&Fe(p,"TYPE","init"),this.S?(Fe(p,"$req",h),Fe(p,"SID","null"),k.U=!0,Hc(k,p,null)):Hc(k,p,h),this.I=2}}else this.I==3&&(a?wf(this,a):this.i.length==0||nf(this.h)||wf(this))};function wf(a,h){var p;h?p=h.l:p=a.V++;const g=fn(a.J);Fe(g,"SID",a.M),Fe(g,"RID",p),Fe(g,"AID",a.K),_i(a,g),a.u&&a.o&&Jc(g,a.u,a.o),p=new Qn(a,a.j,p,a.D+1),a.u===null&&(p.J=a.o),h&&(a.i=h.G.concat(a.i)),h=If(a,p,1e3),p.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),Kc(a.h,p),Hc(p,g,h)}function _i(a,h){a.H&&Dt(a.H,function(p,g){Fe(h,g,p)}),a.l&&Dt({},function(p,g){Fe(h,g,p)})}function If(a,h,p){p=Math.min(a.i.length,p);const g=a.l?u(a.l.Ka,a.l,a):null;e:{var k=a.i;let pe=-1;for(;;){const et=["count="+p];pe==-1?p>0?(pe=k[0].g,et.push("ofs="+pe)):pe=0:et.push("ofs="+pe);let Ve=!0;for(let st=0;st<p;st++){var V=k[st].g;const dn=k[st].map;if(V-=pe,V<0)pe=Math.max(0,k[st].g-100),Ve=!1;else try{V="req"+V+"_"||"";try{var z=dn instanceof Map?dn:Object.entries(dn);for(const[jr,Zn]of z){let er=Zn;c(Zn)&&(er=Ae(Zn)),et.push(V+jr+"="+encodeURIComponent(er))}}catch(jr){throw et.push(V+"type="+encodeURIComponent("_badmap")),jr}}catch{g&&g(dn)}}if(Ve){z=et.join("&");break e}}z=void 0}return a=a.i.splice(0,p),h.G=a,z}function Af(a){if(!a.g&&!a.v){a.Y=1;var h=a.Da;Z||E(),te||(Z(),te=!0),b.add(h,a),a.A=0}}function Zc(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=ii(u(a.Da,a),Sf(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,bf(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=ii(u(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Rt(10),jo(this),bf(this))};function el(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function bf(a){a.g=new Qn(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var h=fn(a.na);Fe(h,"RID","rpc"),Fe(h,"SID",a.M),Fe(h,"AID",a.K),Fe(h,"CI",a.F?"0":"1"),!a.F&&a.ia&&Fe(h,"TO",a.ia),Fe(h,"TYPE","xmlhttp"),_i(a,h),a.u&&a.o&&Jc(h,a.u,a.o),a.O&&(a.g.H=a.O);var p=a.g;a=a.ba,p.M=1,p.A=Fo(fn(h)),p.u=null,p.R=!0,Xh(p,a)}t.Va=function(){this.C!=null&&(this.C=null,jo(this),Zc(this),Rt(19))};function $o(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function Rf(a,h){var p=null;if(a.g==h){$o(a),el(a),a.g=null;var g=2}else if(zc(a.h,h))p=h.G,sf(a.h,h),g=1;else return;if(a.I!=0){if(h.o)if(g==1){p=h.u?h.u.length:0,h=Date.now()-h.F;var k=a.D;g=Lr(),q(g,new zh(g,p)),qo(a)}else Af(a);else if(k=h.m,k==3||k==0&&h.X>0||!(g==1&&KE(a,h)||g==2&&Zc(a)))switch(p&&p.length>0&&(h=a.h,h.i=h.i.concat(p)),k){case 1:Br(a,5);break;case 4:Br(a,10);break;case 3:Br(a,6);break;default:Br(a,2)}}}function Sf(a,h){let p=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(p*=2),p*h}function Br(a,h){if(a.j.info("Error code "+h),h==2){var p=u(a.bb,a),g=a.Ua;const k=!g;g=new Yn(g||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||li(g,"https"),Fo(g),k?qE(g.toString(),p):$E(g.toString(),p)}else Rt(2);a.I=0,a.l&&a.l.pa(h),Pf(a),Tf(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))};function Pf(a){if(a.I=0,a.ja=[],a.l){const h=of(a.h);(h.length!=0||a.i.length!=0)&&(S(a.ja,h),S(a.ja,a.i),a.h.i.length=0,_(a.i),a.i.length=0),a.l.oa()}}function Cf(a,h,p){var g=p instanceof Yn?fn(p):new Yn(p);if(g.g!="")h&&(g.g=h+"."+g.g),ui(g,g.u);else{var k=o.location;g=k.protocol,h=h?h+"."+k.hostname:k.hostname,k=+k.port;const V=new Yn(null);g&&li(V,g),h&&(V.g=h),k&&ui(V,k),p&&(V.h=p),g=V}return p=a.G,h=a.wa,p&&h&&Fe(g,p,h),Fe(g,"VER",a.ka),_i(a,g),g}function kf(a,h,p){if(h&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Aa&&!a.ma?new $e(new Yc({ab:p})):new $e(a.ma),h.Fa(a.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Nf(){}t=Nf.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Ho(){}Ho.prototype.g=function(a,h){return new Ut(a,h)};function Ut(a,h){$.call(this),this.g=new vf(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(a?a["X-WebChannel-Client-Profile"]=h.sa:a={"X-WebChannel-Client-Profile":h.sa}),this.g.U=a,(a=h&&h.Qb)&&!v(a)&&(this.g.u=a),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!v(h)&&(this.g.G=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new gs(this)}d(Ut,$),Ut.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ut.prototype.close=function(){Xc(this.g)},Ut.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var p={};p.__data__=a,a=p}else this.v&&(p={},p.__data__=Ae(a),a=p);h.i.push(new DE(h.Ya++,a)),h.I==3&&qo(h)},Ut.prototype.N=function(){this.g.l=null,delete this.j,Xc(this.g),delete this.g,Ut.Z.N.call(this)};function xf(a){ds.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const p in h){a=p;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}d(xf,ds);function Vf(){lt.call(this),this.status=1}d(Vf,lt);function gs(a){this.g=a}d(gs,Nf),gs.prototype.ra=function(){q(this.g,"a")},gs.prototype.qa=function(a){q(this.g,new xf(a))},gs.prototype.pa=function(a){q(this.g,new Vf)},gs.prototype.oa=function(){q(this.g,"b")},Ho.prototype.createWebChannel=Ho.prototype.g,Ut.prototype.send=Ut.prototype.o,Ut.prototype.open=Ut.prototype.m,Ut.prototype.close=Ut.prototype.close,z_=function(){return new Ho},W_=function(){return Lr()},G_=rt,iu={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Mo.NO_ERROR=0,Mo.TIMEOUT=8,Mo.HTTP_ERROR=6,da=Mo,Kh.COMPLETE="complete",H_=Kh,Ft.EventType=tn,tn.OPEN="a",tn.CLOSE="b",tn.ERROR="c",tn.MESSAGE="d",$.prototype.listen=$.prototype.J,Ri=Ft,$e.prototype.listenOnce=$e.prototype.K,$e.prototype.getLastError=$e.prototype.Ha,$e.prototype.getLastErrorCode=$e.prototype.ya,$e.prototype.getStatus=$e.prototype.ca,$e.prototype.getResponseJson=$e.prototype.La,$e.prototype.getResponseText=$e.prototype.la,$e.prototype.send=$e.prototype.ea,$e.prototype.setWithCredentials=$e.prototype.Fa,$_=$e}).apply(typeof Xo<"u"?Xo:typeof self<"u"?self:typeof window<"u"?window:{});const mp="@firebase/firestore",gp="4.9.2";class wt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}wt.UNAUTHENTICATED=new wt(null),wt.GOOGLE_CREDENTIALS=new wt("google-credentials-uid"),wt.FIRST_PARTY=new wt("first-party-uid"),wt.MOCK_USER=new wt("mock-user");let Xs="12.3.0";const cs=new Gu("@firebase/firestore");function Ts(){return cs.logLevel}function X(t,...e){if(cs.logLevel<=_e.DEBUG){const n=e.map(sh);cs.debug(`Firestore (${Xs}): ${t}`,...n)}}function $n(t,...e){if(cs.logLevel<=_e.ERROR){const n=e.map(sh);cs.error(`Firestore (${Xs}): ${t}`,...n)}}function Bs(t,...e){if(cs.logLevel<=_e.WARN){const n=e.map(sh);cs.warn(`Firestore (${Xs}): ${t}`,...n)}}function sh(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function ie(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,K_(t,r,n)}function K_(t,e,n){let r=`FIRESTORE (${Xs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw $n(r),new Error(r)}function Ie(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||K_(e,s,r)}function he(t,e){return t}const D={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends Wn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class vn{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class Q_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $R{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(wt.UNAUTHENTICATED)))}shutdown(){}}class HR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class GR{constructor(e){this.t=e,this.currentUser=wt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ie(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new vn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new vn,e.enqueueRetryable((()=>s(this.currentUser)))};const o=()=>{const l=i;e.enqueueRetryable((async()=>{await l.promise,await s(this.currentUser)}))},c=l=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((l=>c(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?c(l):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new vn)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ie(typeof r.accessToken=="string",31837,{l:r}),new Q_(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ie(e===null||typeof e=="string",2055,{h:e}),new wt(e)}}class WR{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=wt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class zR{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new WR(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(wt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class _p{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class KR{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,jt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ie(this.o===void 0,3512);const r=i=>{i.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,X("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>r(i)))};const s=i=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>s(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new _p(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ie(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new _p(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function QR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class ih{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=QR(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function ye(t,e){return t<e?-1:t>e?1:0}function ou(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return bl(s)===bl(i)?ye(s,i):bl(s)?1:-1}return ye(t.length,e.length)}const YR=55296,JR=57343;function bl(t){const e=t.charCodeAt(0);return e>=YR&&e<=JR}function js(t,e,n){return t.length===e.length&&t.every(((r,s)=>n(r,e[s])))}const yp="__name__";class gn{constructor(e,n,r){n===void 0?n=0:n>e.length&&ie(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ie(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return gn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof gn?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=gn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return ye(e.length,n.length)}static compareSegments(e,n){const r=gn.isNumericId(e),s=gn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?gn.extractNumericId(e).compare(gn.extractNumericId(n)):ou(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return yr.fromString(e.substring(4,e.length-2))}}class Ne extends gn{construct(e,n,r){return new Ne(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new G(D.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new Ne(n)}static emptyPath(){return new Ne([])}}const XR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dt extends gn{construct(e,n,r){return new dt(e,n,r)}static isValidIdentifier(e){return XR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===yp}static keyField(){return new dt([yp])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new G(D.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new G(D.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new G(D.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(r+=c,s++):(i(),s++)}if(i(),o)throw new G(D.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dt(n)}static emptyPath(){return new dt([])}}class ee{constructor(e){this.path=e}static fromPath(e){return new ee(Ne.fromString(e))}static fromName(e){return new ee(Ne.fromString(e).popFirst(5))}static empty(){return new ee(Ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ne.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ne.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ee(new Ne(e.slice()))}}function Y_(t,e,n){if(!n)throw new G(D.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function ZR(t,e,n,r){if(e===!0&&r===!0)throw new G(D.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Ep(t){if(!ee.isDocumentKey(t))throw new G(D.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function vp(t){if(ee.isDocumentKey(t))throw new G(D.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function J_(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function yc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ie(12329,{type:typeof t})}function Xt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new G(D.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=yc(t);throw new G(D.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function eS(t,e){if(e<=0)throw new G(D.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}function Ze(t,e){const n={typeString:t};return e&&(n.value=e),n}function So(t,e){if(!J_(t))throw new G(D.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new G(D.INVALID_ARGUMENT,n);return!0}const Tp=-62135596800,wp=1e6;class Be{static now(){return Be.fromMillis(Date.now())}static fromDate(e){return Be.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*wp);return new Be(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new G(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Tp)throw new G(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/wp}_compareTo(e){return this.seconds===e.seconds?ye(this.nanoseconds,e.nanoseconds):ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Be._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(So(e,Be._jsonSchema))return new Be(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Tp;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Be._jsonSchemaVersion="firestore/timestamp/1.0",Be._jsonSchema={type:Ze("string",Be._jsonSchemaVersion),seconds:Ze("number"),nanoseconds:Ze("number")};class le{static fromTimestamp(e){return new le(e)}static min(){return new le(new Be(0,0))}static max(){return new le(new Be(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ro=-1;function tS(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=le.fromTimestamp(r===1e9?new Be(n+1,0):new Be(n,r));return new Ar(s,ee.empty(),e)}function nS(t){return new Ar(t.readTime,t.key,ro)}class Ar{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ar(le.min(),ee.empty(),ro)}static max(){return new Ar(le.max(),ee.empty(),ro)}}function rS(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ee.comparator(t.documentKey,e.documentKey),n!==0?n:ye(t.largestBatchId,e.largestBatchId))}const sS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class iS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Zs(t){if(t.code!==D.FAILED_PRECONDITION||t.message!==sS)throw t;X("LocalStore","Unexpectedly lost primary lease")}class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U(((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):U.reject(n)}static resolve(e){return new U(((n,r)=>{n(e)}))}static reject(e){return new U(((n,r)=>{r(e)}))}static waitFor(e){return new U(((n,r)=>{let s=0,i=0,o=!1;e.forEach((c=>{++s,c.next((()=>{++i,o&&i===s&&n()}),(l=>r(l)))})),o=!0,i===s&&n()}))}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next((s=>s?U.resolve(s):r()));return n}static forEach(e,n){const r=[];return e.forEach(((s,i)=>{r.push(n.call(this,s,i))})),this.waitFor(r)}static mapArray(e,n){return new U(((r,s)=>{const i=e.length,o=new Array(i);let c=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next((f=>{o[u]=f,++c,c===i&&r(o)}),(f=>s(f)))}}))}static doWhile(e,n){return new U(((r,s)=>{const i=()=>{e()===!0?n().next((()=>{i()}),s):r()};i()}))}}function oS(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ei(t){return t.name==="IndexedDbTransactionError"}class Ec{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ec.ce=-1;const oh=-1;function Po(t){return t==null}function Ba(t){return t===0&&1/t==-1/0}function aS(t){return typeof t=="number"&&Number.isInteger(t)&&!Ba(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const X_="";function cS(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Ip(e)),e=lS(t.get(n),e);return Ip(e)}function lS(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case X_:n+="";break;default:n+=i}}return n}function Ip(t){return t+X_+""}function Ap(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Dr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Z_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class qe{constructor(e,n){this.comparator=e,this.root=n||ut.EMPTY}insert(e,n){return new qe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ut.BLACK,null,null))}remove(e){return new qe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ut.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zo(this.root,e,this.comparator,!0)}}class Zo{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ut{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??ut.RED,this.left=s??ut.EMPTY,this.right=i??ut.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new ut(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ut.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return ut.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ut.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ut.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ie(27949);return e+(this.isRed()?0:1)}}ut.EMPTY=null,ut.RED=!0,ut.BLACK=!1;ut.EMPTY=new class{constructor(){this.size=0}get key(){throw ie(57766)}get value(){throw ie(16141)}get color(){throw ie(16727)}get left(){throw ie(29726)}get right(){throw ie(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new ut(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class nt{constructor(e){this.comparator=e,this.data=new qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new bp(this.data.getIterator())}getIteratorFrom(e){return new bp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof nt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new nt(this.comparator);return n.data=e,n}}class bp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ht{constructor(e){this.fields=e,e.sort(dt.comparator)}static empty(){return new Ht([])}unionWith(e){let n=new nt(dt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ht(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return js(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class ey extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class mt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new ey("Invalid base64 string: "+i):i}})(e);return new mt(n)}static fromUint8Array(e){const n=(function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i})(e);return new mt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mt.EMPTY_BYTE_STRING=new mt("");const uS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function br(t){if(Ie(!!t,39018),typeof t=="string"){let e=0;const n=uS.exec(t);if(Ie(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ze(t.seconds),nanos:ze(t.nanos)}}function ze(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Rr(t){return typeof t=="string"?mt.fromBase64String(t):mt.fromUint8Array(t)}const ty="server_timestamp",ny="__type__",ry="__previous_value__",sy="__local_write_time__";function vc(t){return(t?.mapValue?.fields||{})[ny]?.stringValue===ty}function Tc(t){const e=t.mapValue.fields[ry];return vc(e)?Tc(e):e}function so(t){const e=br(t.mapValue.fields[sy].timestampValue);return new Be(e.seconds,e.nanos)}class hS{constructor(e,n,r,s,i,o,c,l,u,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=f}}const ja="(default)";class io{constructor(e,n){this.projectId=e,this.database=n||ja}static empty(){return new io("","")}get isDefaultDatabase(){return this.database===ja}isEqual(e){return e instanceof io&&e.projectId===this.projectId&&e.database===this.database}}const iy="__type__",fS="__max__",ea={mapValue:{}},oy="__vector__",qa="value";function Sr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?vc(t)?4:pS(t)?9007199254740991:dS(t)?10:11:ie(28295,{value:t})}function bn(t,e){if(t===e)return!0;const n=Sr(t);if(n!==Sr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return so(t).isEqual(so(e));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=br(s.timestampValue),c=br(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,i){return Rr(s.bytesValue).isEqual(Rr(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,i){return ze(s.geoPointValue.latitude)===ze(i.geoPointValue.latitude)&&ze(s.geoPointValue.longitude)===ze(i.geoPointValue.longitude)})(t,e);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return ze(s.integerValue)===ze(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=ze(s.doubleValue),c=ze(i.doubleValue);return o===c?Ba(o)===Ba(c):isNaN(o)&&isNaN(c)}return!1})(t,e);case 9:return js(t.arrayValue.values||[],e.arrayValue.values||[],bn);case 10:case 11:return(function(s,i){const o=s.mapValue.fields||{},c=i.mapValue.fields||{};if(Ap(o)!==Ap(c))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(c[l]===void 0||!bn(o[l],c[l])))return!1;return!0})(t,e);default:return ie(52216,{left:t})}}function oo(t,e){return(t.values||[]).find((n=>bn(n,e)))!==void 0}function qs(t,e){if(t===e)return 0;const n=Sr(t),r=Sr(e);if(n!==r)return ye(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ye(t.booleanValue,e.booleanValue);case 2:return(function(i,o){const c=ze(i.integerValue||i.doubleValue),l=ze(o.integerValue||o.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1})(t,e);case 3:return Rp(t.timestampValue,e.timestampValue);case 4:return Rp(so(t),so(e));case 5:return ou(t.stringValue,e.stringValue);case 6:return(function(i,o){const c=Rr(i),l=Rr(o);return c.compareTo(l)})(t.bytesValue,e.bytesValue);case 7:return(function(i,o){const c=i.split("/"),l=o.split("/");for(let u=0;u<c.length&&u<l.length;u++){const f=ye(c[u],l[u]);if(f!==0)return f}return ye(c.length,l.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,o){const c=ye(ze(i.latitude),ze(o.latitude));return c!==0?c:ye(ze(i.longitude),ze(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return Sp(t.arrayValue,e.arrayValue);case 10:return(function(i,o){const c=i.fields||{},l=o.fields||{},u=c[qa]?.arrayValue,f=l[qa]?.arrayValue,d=ye(u?.values?.length||0,f?.values?.length||0);return d!==0?d:Sp(u,f)})(t.mapValue,e.mapValue);case 11:return(function(i,o){if(i===ea.mapValue&&o===ea.mapValue)return 0;if(i===ea.mapValue)return 1;if(o===ea.mapValue)return-1;const c=i.fields||{},l=Object.keys(c),u=o.fields||{},f=Object.keys(u);l.sort(),f.sort();for(let d=0;d<l.length&&d<f.length;++d){const m=ou(l[d],f[d]);if(m!==0)return m;const _=qs(c[l[d]],u[f[d]]);if(_!==0)return _}return ye(l.length,f.length)})(t.mapValue,e.mapValue);default:throw ie(23264,{he:n})}}function Rp(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ye(t,e);const n=br(t),r=br(e),s=ye(n.seconds,r.seconds);return s!==0?s:ye(n.nanos,r.nanos)}function Sp(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=qs(n[s],r[s]);if(i)return i}return ye(n.length,r.length)}function $s(t){return au(t)}function au(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=br(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Rr(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return ee.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=au(i);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${au(n.fields[o])}`;return s+"}"})(t.mapValue):ie(61005,{value:t})}function pa(t){switch(Sr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Tc(t);return e?16+pa(e):16;case 5:return 2*t.stringValue.length;case 6:return Rr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,i)=>s+pa(i)),0)})(t.arrayValue);case 10:case 11:return(function(r){let s=0;return Dr(r.fields,((i,o)=>{s+=i.length+pa(o)})),s})(t.mapValue);default:throw ie(13486,{value:t})}}function $a(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function cu(t){return!!t&&"integerValue"in t}function ah(t){return!!t&&"arrayValue"in t}function Pp(t){return!!t&&"nullValue"in t}function Cp(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ma(t){return!!t&&"mapValue"in t}function dS(t){return(t?.mapValue?.fields||{})[iy]?.stringValue===oy}function qi(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Dr(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=qi(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=qi(t.arrayValue.values[n]);return e}return{...t}}function pS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===fS}class Vt{constructor(e){this.value=e}static empty(){return new Vt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ma(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=qi(n)}setAll(e){let n=dt.emptyPath(),r={},s=[];e.forEach(((o,c)=>{if(!n.isImmediateParentOf(c)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=c.popLast()}o?r[c.lastSegment()]=qi(o):s.push(c.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());ma(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return bn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];ma(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Dr(n,((s,i)=>e[s]=i));for(const s of r)delete e[s]}clone(){return new Vt(qi(this.value))}}function ay(t){const e=[];return Dr(t.fields,((n,r)=>{const s=new dt([n]);if(ma(r)){const i=ay(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)})),new Ht(e)}class ot{constructor(e,n,r,s,i,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=c}static newInvalidDocument(e){return new ot(e,0,le.min(),le.min(),le.min(),Vt.empty(),0)}static newFoundDocument(e,n,r,s){return new ot(e,1,n,le.min(),r,s,0)}static newNoDocument(e,n){return new ot(e,2,n,le.min(),le.min(),Vt.empty(),0)}static newUnknownDocument(e,n){return new ot(e,3,n,le.min(),le.min(),Vt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ot&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ot(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Hs{constructor(e,n){this.position=e,this.inclusive=n}}function kp(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ee.comparator(ee.fromName(o.referenceValue),n.key):r=qs(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Np(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!bn(t.position[n],e.position[n]))return!1;return!0}class ao{constructor(e,n="asc"){this.field=e,this.dir=n}}function mS(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class cy{}class Xe extends cy{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new _S(e,n,r):n==="array-contains"?new vS(e,r):n==="in"?new TS(e,r):n==="not-in"?new wS(e,r):n==="array-contains-any"?new IS(e,r):new Xe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new yS(e,r):new ES(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(qs(n,this.value)):n!==null&&Sr(this.value)===Sr(n)&&this.matchesComparison(qs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class un extends cy{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new un(e,n)}matches(e){return ly(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ly(t){return t.op==="and"}function uy(t){return gS(t)&&ly(t)}function gS(t){for(const e of t.filters)if(e instanceof un)return!1;return!0}function lu(t){if(t instanceof Xe)return t.field.canonicalString()+t.op.toString()+$s(t.value);if(uy(t))return t.filters.map((e=>lu(e))).join(",");{const e=t.filters.map((n=>lu(n))).join(",");return`${t.op}(${e})`}}function hy(t,e){return t instanceof Xe?(function(r,s){return s instanceof Xe&&r.op===s.op&&r.field.isEqual(s.field)&&bn(r.value,s.value)})(t,e):t instanceof un?(function(r,s){return s instanceof un&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((i,o,c)=>i&&hy(o,s.filters[c])),!0):!1})(t,e):void ie(19439)}function fy(t){return t instanceof Xe?(function(n){return`${n.field.canonicalString()} ${n.op} ${$s(n.value)}`})(t):t instanceof un?(function(n){return n.op.toString()+" {"+n.getFilters().map(fy).join(" ,")+"}"})(t):"Filter"}class _S extends Xe{constructor(e,n,r){super(e,n,r),this.key=ee.fromName(r.referenceValue)}matches(e){const n=ee.comparator(e.key,this.key);return this.matchesComparison(n)}}class yS extends Xe{constructor(e,n){super(e,"in",n),this.keys=dy("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class ES extends Xe{constructor(e,n){super(e,"not-in",n),this.keys=dy("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function dy(t,e){return(e.arrayValue?.values||[]).map((n=>ee.fromName(n.referenceValue)))}class vS extends Xe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ah(n)&&oo(n.arrayValue,this.value)}}class TS extends Xe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&oo(this.value.arrayValue,n)}}class wS extends Xe{constructor(e,n){super(e,"not-in",n)}matches(e){if(oo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!oo(this.value.arrayValue,n)}}class IS extends Xe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ah(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>oo(this.value.arrayValue,r)))}}class AS{constructor(e,n=null,r=[],s=[],i=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=c,this.Te=null}}function xp(t,e=null,n=[],r=[],s=null,i=null,o=null){return new AS(t,e,n,r,s,i,o)}function ch(t){const e=he(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>lu(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(i){return i.field.canonicalString()+i.dir})(r))).join(","),Po(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>$s(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>$s(r))).join(",")),e.Te=n}return e.Te}function lh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!mS(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!hy(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Np(t.startAt,e.startAt)&&Np(t.endAt,e.endAt)}function uu(t){return ee.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class us{constructor(e,n=null,r=[],s=[],i=null,o="F",c=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function bS(t,e,n,r,s,i,o,c){return new us(t,e,n,r,s,i,o,c)}function uh(t){return new us(t)}function Vp(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function hh(t){return t.collectionGroup!==null}function Vs(t){const e=he(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new nt(dt.comparator);return o.filters.forEach((l=>{l.getFlattenedFilters().forEach((u=>{u.isInequality()&&(c=c.add(u.field))}))})),c})(e).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new ao(i,r))})),n.has(dt.keyField().canonicalString())||e.Ie.push(new ao(dt.keyField(),r))}return e.Ie}function Tn(t){const e=he(t);return e.Ee||(e.Ee=RS(e,Vs(t))),e.Ee}function RS(t,e){if(t.limitType==="F")return xp(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const i=s.dir==="desc"?"asc":"desc";return new ao(s.field,i)}));const n=t.endAt?new Hs(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Hs(t.startAt.position,t.startAt.inclusive):null;return xp(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function hu(t,e){const n=t.filters.concat([e]);return new us(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Ha(t,e,n){return new us(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function wc(t,e){return lh(Tn(t),Tn(e))&&t.limitType===e.limitType}function py(t){return`${ch(Tn(t))}|lt:${t.limitType}`}function ws(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>fy(s))).join(", ")}]`),Po(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>$s(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>$s(s))).join(",")),`Target(${r})`})(Tn(t))}; limitType=${t.limitType})`}function Ic(t,e){return e.isFoundDocument()&&(function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ee.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)})(t,e)&&(function(r,s){for(const i of Vs(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0})(t,e)&&(function(r,s){return!(r.startAt&&!(function(o,c,l){const u=kp(o,c,l);return o.inclusive?u<=0:u<0})(r.startAt,Vs(r),s)||r.endAt&&!(function(o,c,l){const u=kp(o,c,l);return o.inclusive?u>=0:u>0})(r.endAt,Vs(r),s))})(t,e)}function SS(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function my(t){return(e,n)=>{let r=!1;for(const s of Vs(t)){const i=PS(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function PS(t,e,n){const r=t.field.isKeyField()?ee.comparator(e.key,n.key):(function(i,o,c){const l=o.data.field(i),u=c.data.field(i);return l!==null&&u!==null?qs(l,u):ie(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ie(19790,{direction:t.dir})}}class hs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Dr(this.inner,((n,r)=>{for(const[s,i]of r)e(s,i)}))}isEmpty(){return Z_(this.inner)}size(){return this.innerSize}}const CS=new qe(ee.comparator);function Hn(){return CS}const gy=new qe(ee.comparator);function Si(...t){let e=gy;for(const n of t)e=e.insert(n.key,n);return e}function _y(t){let e=gy;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function es(){return $i()}function yy(){return $i()}function $i(){return new hs((t=>t.toString()),((t,e)=>t.isEqual(e)))}const kS=new qe(ee.comparator),NS=new nt(ee.comparator);function Ee(...t){let e=NS;for(const n of t)e=e.add(n);return e}const xS=new nt(ye);function VS(){return xS}function fh(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ba(e)?"-0":e}}function Ey(t){return{integerValue:""+t}}function vy(t,e){return aS(e)?Ey(e):fh(t,e)}class Ac{constructor(){this._=void 0}}function DS(t,e,n){return t instanceof co?(function(s,i){const o={fields:{[ny]:{stringValue:ty},[sy]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&vc(i)&&(i=Tc(i)),i&&(o.fields[ry]=i),{mapValue:o}})(n,e):t instanceof lo?wy(t,e):t instanceof uo?Iy(t,e):(function(s,i){const o=Ty(s,i),c=Dp(o)+Dp(s.Ae);return cu(o)&&cu(s.Ae)?Ey(c):fh(s.serializer,c)})(t,e)}function OS(t,e,n){return t instanceof lo?wy(t,e):t instanceof uo?Iy(t,e):n}function Ty(t,e){return t instanceof ho?(function(r){return cu(r)||(function(i){return!!i&&"doubleValue"in i})(r)})(e)?e:{integerValue:0}:null}class co extends Ac{}class lo extends Ac{constructor(e){super(),this.elements=e}}function wy(t,e){const n=Ay(e);for(const r of t.elements)n.some((s=>bn(s,r)))||n.push(r);return{arrayValue:{values:n}}}class uo extends Ac{constructor(e){super(),this.elements=e}}function Iy(t,e){let n=Ay(e);for(const r of t.elements)n=n.filter((s=>!bn(s,r)));return{arrayValue:{values:n}}}class ho extends Ac{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Dp(t){return ze(t.integerValue||t.doubleValue)}function Ay(t){return ah(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class by{constructor(e,n){this.field=e,this.transform=n}}function MS(t,e){return t.field.isEqual(e.field)&&(function(r,s){return r instanceof lo&&s instanceof lo||r instanceof uo&&s instanceof uo?js(r.elements,s.elements,bn):r instanceof ho&&s instanceof ho?bn(r.Ae,s.Ae):r instanceof co&&s instanceof co})(t.transform,e.transform)}class LS{constructor(e,n){this.version=e,this.transformResults=n}}class pt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new pt}static exists(e){return new pt(void 0,e)}static updateTime(e){return new pt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ga(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class bc{}function Ry(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Rc(t.key,pt.none()):new Co(t.key,t.data,pt.none());{const n=t.data,r=Vt.empty();let s=new nt(dt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Or(t.key,r,new Ht(s.toArray()),pt.none())}}function FS(t,e,n){t instanceof Co?(function(s,i,o){const c=s.value.clone(),l=Mp(s.fieldTransforms,i,o.transformResults);c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,n):t instanceof Or?(function(s,i,o){if(!ga(s.precondition,i))return void i.convertToUnknownDocument(o.version);const c=Mp(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(Sy(s)),l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(t,e,n):(function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function Hi(t,e,n,r){return t instanceof Co?(function(i,o,c,l){if(!ga(i.precondition,o))return c;const u=i.value.clone(),f=Lp(i.fieldTransforms,l,o);return u.setAll(f),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null})(t,e,n,r):t instanceof Or?(function(i,o,c,l){if(!ga(i.precondition,o))return c;const u=Lp(i.fieldTransforms,l,o),f=o.data;return f.setAll(Sy(i)),f.setAll(u),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((d=>d.field)))})(t,e,n,r):(function(i,o,c){return ga(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c})(t,e,n)}function US(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Ty(r.transform,s||null);i!=null&&(n===null&&(n=Vt.empty()),n.set(r.field,i))}return n||null}function Op(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&js(r,s,((i,o)=>MS(i,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Co extends bc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Or extends bc{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Sy(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function Mp(t,e,n){const r=new Map;Ie(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,c=e.data.field(i.field);r.set(i.field,OS(o,c,n[s]))}return r}function Lp(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,DS(i,o,e))}return r}class Rc extends bc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Py extends bc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class BS{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&FS(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Hi(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Hi(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=yy();return this.mutations.forEach((s=>{const i=e.get(s.key),o=i.overlayedDocument;let c=this.applyToLocalView(o,i.mutatedFields);c=n.has(s.key)?null:c;const l=Ry(o,c);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(le.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ee())}isEqual(e){return this.batchId===e.batchId&&js(this.mutations,e.mutations,((n,r)=>Op(n,r)))&&js(this.baseMutations,e.baseMutations,((n,r)=>Op(n,r)))}}class dh{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ie(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return kS})();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new dh(e,n,r,s)}}class jS{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class qS{constructor(e,n){this.count=e,this.unchangedNames=n}}var Ye,we;function Cy(t){switch(t){case D.OK:return ie(64938);case D.CANCELLED:case D.UNKNOWN:case D.DEADLINE_EXCEEDED:case D.RESOURCE_EXHAUSTED:case D.INTERNAL:case D.UNAVAILABLE:case D.UNAUTHENTICATED:return!1;case D.INVALID_ARGUMENT:case D.NOT_FOUND:case D.ALREADY_EXISTS:case D.PERMISSION_DENIED:case D.FAILED_PRECONDITION:case D.ABORTED:case D.OUT_OF_RANGE:case D.UNIMPLEMENTED:case D.DATA_LOSS:return!0;default:return ie(15467,{code:t})}}function ky(t){if(t===void 0)return $n("GRPC error has no .code"),D.UNKNOWN;switch(t){case Ye.OK:return D.OK;case Ye.CANCELLED:return D.CANCELLED;case Ye.UNKNOWN:return D.UNKNOWN;case Ye.DEADLINE_EXCEEDED:return D.DEADLINE_EXCEEDED;case Ye.RESOURCE_EXHAUSTED:return D.RESOURCE_EXHAUSTED;case Ye.INTERNAL:return D.INTERNAL;case Ye.UNAVAILABLE:return D.UNAVAILABLE;case Ye.UNAUTHENTICATED:return D.UNAUTHENTICATED;case Ye.INVALID_ARGUMENT:return D.INVALID_ARGUMENT;case Ye.NOT_FOUND:return D.NOT_FOUND;case Ye.ALREADY_EXISTS:return D.ALREADY_EXISTS;case Ye.PERMISSION_DENIED:return D.PERMISSION_DENIED;case Ye.FAILED_PRECONDITION:return D.FAILED_PRECONDITION;case Ye.ABORTED:return D.ABORTED;case Ye.OUT_OF_RANGE:return D.OUT_OF_RANGE;case Ye.UNIMPLEMENTED:return D.UNIMPLEMENTED;case Ye.DATA_LOSS:return D.DATA_LOSS;default:return ie(39323,{code:t})}}(we=Ye||(Ye={}))[we.OK=0]="OK",we[we.CANCELLED=1]="CANCELLED",we[we.UNKNOWN=2]="UNKNOWN",we[we.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",we[we.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",we[we.NOT_FOUND=5]="NOT_FOUND",we[we.ALREADY_EXISTS=6]="ALREADY_EXISTS",we[we.PERMISSION_DENIED=7]="PERMISSION_DENIED",we[we.UNAUTHENTICATED=16]="UNAUTHENTICATED",we[we.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",we[we.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",we[we.ABORTED=10]="ABORTED",we[we.OUT_OF_RANGE=11]="OUT_OF_RANGE",we[we.UNIMPLEMENTED=12]="UNIMPLEMENTED",we[we.INTERNAL=13]="INTERNAL",we[we.UNAVAILABLE=14]="UNAVAILABLE",we[we.DATA_LOSS=15]="DATA_LOSS";function $S(){return new TextEncoder}const HS=new yr([4294967295,4294967295],0);function Fp(t){const e=$S().encode(t),n=new q_;return n.update(e),new Uint8Array(n.digest())}function Up(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new yr([n,r],0),new yr([s,i],0)]}class ph{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Pi(`Invalid padding: ${n}`);if(r<0)throw new Pi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Pi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Pi(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=yr.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(yr.fromNumber(r)));return s.compare(HS)===1&&(s=new yr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Fp(e),[r,s]=Up(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new ph(i,s,n);return r.forEach((c=>o.insert(c))),o}insert(e){if(this.ge===0)return;const n=Fp(e),[r,s]=Up(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Pi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Sc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,ko.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Sc(le.min(),s,new qe(ye),Hn(),Ee())}}class ko{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ko(r,n,Ee(),Ee(),Ee())}}class _a{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class Ny{constructor(e,n){this.targetId=e,this.Ce=n}}class xy{constructor(e,n,r=mt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Bp{constructor(){this.ve=0,this.Fe=jp(),this.Me=mt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ee(),n=Ee(),r=Ee();return this.Fe.forEach(((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ie(38017,{changeType:i})}})),new ko(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=jp()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ie(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class GS{constructor(e){this.Ge=e,this.ze=new Map,this.je=Hn(),this.Je=ta(),this.He=ta(),this.Ye=new qe(ye)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ie(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,s)=>{this.rt(s)&&n(s)}))}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(uu(i))if(r===0){const o=new ee(i.path);this.et(n,o,ot.newNoDocument(o,le.min()))}else Ie(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const c=this.ut(e),l=c?this.ct(c,e,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,c;try{o=Rr(r).toUint8Array()}catch(l){if(l instanceof ey)return Bs("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new ph(o,s,i)}catch(l){return Bs(l instanceof Pi?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach((i=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.et(n,i,null),s++)})),s}Tt(e){const n=new Map;this.ze.forEach(((i,o)=>{const c=this.ot(o);if(c){if(i.current&&uu(c.target)){const l=new ee(c.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,ot.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}}));let r=Ee();this.He.forEach(((i,o)=>{let c=!0;o.forEachWhile((l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(r=r.add(i))})),this.je.forEach(((i,o)=>o.setReadTime(e)));const s=new Sc(e,n,this.Ye,this.je,r);return this.je=Hn(),this.Je=ta(),this.He=ta(),this.Ye=new qe(ye),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Bp,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new nt(ye),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new nt(ye),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||X("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Bp),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function ta(){return new qe(ee.comparator)}function jp(){return new qe(ee.comparator)}const WS={asc:"ASCENDING",desc:"DESCENDING"},zS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},KS={and:"AND",or:"OR"};class QS{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function fu(t,e){return t.useProto3Json||Po(e)?e:{value:e}}function Ga(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Vy(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function YS(t,e){return Ga(t,e.toTimestamp())}function Gt(t){return Ie(!!t,49232),le.fromTimestamp((function(n){const r=br(n);return new Be(r.seconds,r.nanos)})(t))}function mh(t,e){return du(t,e).canonicalString()}function du(t,e){const n=(function(s){return new Ne(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function Dy(t){const e=Ne.fromString(t);return Ie(By(e),10190,{key:e.toString()}),e}function Wa(t,e){return mh(t.databaseId,e.path)}function Gi(t,e){const n=Dy(e);if(n.get(1)!==t.databaseId.projectId)throw new G(D.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new G(D.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ee(My(n))}function Oy(t,e){return mh(t.databaseId,e)}function JS(t){const e=Dy(t);return e.length===4?Ne.emptyPath():My(e)}function pu(t){return new Ne(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function My(t){return Ie(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function qp(t,e,n){return{name:Wa(t,e),fields:n.value.mapValue.fields}}function XS(t,e){return"found"in e?(function(r,s){Ie(!!s.found,43571),s.found.name,s.found.updateTime;const i=Gi(r,s.found.name),o=Gt(s.found.updateTime),c=s.found.createTime?Gt(s.found.createTime):le.min(),l=new Vt({mapValue:{fields:s.found.fields}});return ot.newFoundDocument(i,o,c,l)})(t,e):"missing"in e?(function(r,s){Ie(!!s.missing,3894),Ie(!!s.readTime,22933);const i=Gi(r,s.missing),o=Gt(s.readTime);return ot.newNoDocument(i,o)})(t,e):ie(7234,{result:e})}function ZS(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ie(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=(function(u,f){return u.useProto3Json?(Ie(f===void 0||typeof f=="string",58123),mt.fromBase64String(f||"")):(Ie(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),mt.fromUint8Array(f||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&(function(u){const f=u.code===void 0?D.UNKNOWN:ky(u.code);return new G(f,u.message||"")})(o);n=new xy(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Gi(t,r.document.name),i=Gt(r.document.updateTime),o=r.document.createTime?Gt(r.document.createTime):le.min(),c=new Vt({mapValue:{fields:r.document.fields}}),l=ot.newFoundDocument(s,i,o,c),u=r.targetIds||[],f=r.removedTargetIds||[];n=new _a(u,f,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Gi(t,r.document),i=r.readTime?Gt(r.readTime):le.min(),o=ot.newNoDocument(s,i),c=r.removedTargetIds||[];n=new _a([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Gi(t,r.document),i=r.removedTargetIds||[];n=new _a([],i,s,null)}else{if(!("filter"in e))return ie(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new qS(s,i),c=r.targetId;n=new Ny(c,o)}}return n}function Ly(t,e){let n;if(e instanceof Co)n={update:qp(t,e.key,e.value)};else if(e instanceof Rc)n={delete:Wa(t,e.key)};else if(e instanceof Or)n={update:qp(t,e.key,e.data),updateMask:cP(e.fieldMask)};else{if(!(e instanceof Py))return ie(16599,{Vt:e.type});n={verify:Wa(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(i,o){const c=o.transform;if(c instanceof co)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof lo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof uo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof ho)return{fieldPath:o.field.canonicalString(),increment:c.Ae};throw ie(20930,{transform:o.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:YS(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ie(27497)})(t,e.precondition)),n}function eP(t,e){return t&&t.length>0?(Ie(e!==void 0,14353),t.map((n=>(function(s,i){let o=s.updateTime?Gt(s.updateTime):Gt(i);return o.isEqual(le.min())&&(o=Gt(i)),new LS(o,s.transformResults||[])})(n,e)))):[]}function tP(t,e){return{documents:[Oy(t,e.path)]}}function nP(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Oy(t,s);const i=(function(u){if(u.length!==0)return Uy(un.create(u,"and"))})(e.filters);i&&(n.structuredQuery.where=i);const o=(function(u){if(u.length!==0)return u.map((f=>(function(m){return{field:Is(m.field),direction:iP(m.dir)}})(f)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=fu(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:n,parent:s}}function rP(t){let e=JS(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ie(r===1,65062);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=(function(d){const m=Fy(d);return m instanceof un&&uy(m)?m.getFilters():[m]})(n.where));let o=[];n.orderBy&&(o=(function(d){return d.map((m=>(function(S){return new ao(As(S.field),(function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(m)))})(n.orderBy));let c=null;n.limit&&(c=(function(d){let m;return m=typeof d=="object"?d.value:d,Po(m)?null:m})(n.limit));let l=null;n.startAt&&(l=(function(d){const m=!!d.before,_=d.values||[];return new Hs(_,m)})(n.startAt));let u=null;return n.endAt&&(u=(function(d){const m=!d.before,_=d.values||[];return new Hs(_,m)})(n.endAt)),bS(e,s,o,i,c,"F",l,u)}function sP(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ie(28987,{purpose:s})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Fy(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=As(n.unaryFilter.field);return Xe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=As(n.unaryFilter.field);return Xe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=As(n.unaryFilter.field);return Xe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=As(n.unaryFilter.field);return Xe.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ie(61313);default:return ie(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Xe.create(As(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ie(58110);default:return ie(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return un.create(n.compositeFilter.filters.map((r=>Fy(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ie(1026)}})(n.compositeFilter.op))})(t):ie(30097,{filter:t})}function iP(t){return WS[t]}function oP(t){return zS[t]}function aP(t){return KS[t]}function Is(t){return{fieldPath:t.canonicalString()}}function As(t){return dt.fromServerFormat(t.fieldPath)}function Uy(t){return t instanceof Xe?(function(n){if(n.op==="=="){if(Cp(n.value))return{unaryFilter:{field:Is(n.field),op:"IS_NAN"}};if(Pp(n.value))return{unaryFilter:{field:Is(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Cp(n.value))return{unaryFilter:{field:Is(n.field),op:"IS_NOT_NAN"}};if(Pp(n.value))return{unaryFilter:{field:Is(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Is(n.field),op:oP(n.op),value:n.value}}})(t):t instanceof un?(function(n){const r=n.getFilters().map((s=>Uy(s)));return r.length===1?r[0]:{compositeFilter:{op:aP(n.op),filters:r}}})(t):ie(54877,{filter:t})}function cP(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function By(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class hr{constructor(e,n,r,s,i=le.min(),o=le.min(),c=mt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new hr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new hr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class lP{constructor(e){this.yt=e}}function uP(t){const e=rP({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ha(e,e.limit,"L"):e}class hP{constructor(){this.Cn=new fP}addToCollectionParentIndex(e,n){return this.Cn.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(Ar.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(Ar.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class fP{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new nt(Ne.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new nt(Ne.comparator)).toArray()}}const $p={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},jy=41943040;class Ot{static withCacheSize(e){return new Ot(e,Ot.DEFAULT_COLLECTION_PERCENTILE,Ot.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}Ot.DEFAULT_COLLECTION_PERCENTILE=10,Ot.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ot.DEFAULT=new Ot(jy,Ot.DEFAULT_COLLECTION_PERCENTILE,Ot.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ot.DISABLED=new Ot(-1,0,0);class Gs{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Gs(0)}static cr(){return new Gs(-1)}}const Hp="LruGarbageCollector",dP=1048576;function Gp([t,e],[n,r]){const s=ye(t,n);return s===0?ye(e,r):s}class pP{constructor(e){this.Ir=e,this.buffer=new nt(Gp),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Gp(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class mP{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){X(Hp,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ei(n)?X(Hp,"Ignoring IndexedDB error during garbage collection: ",n):await Zs(n)}await this.Vr(3e5)}))}}class gP{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return U.resolve(Ec.ce);const r=new pP(n);return this.mr.forEachTarget(e,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(X("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve($p)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(X("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$p):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,c,l,u;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((d=>(d>this.params.maximumSequenceNumbersToCollect?(X("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),s=this.params.maximumSequenceNumbersToCollect):s=d,o=Date.now(),this.nthSequenceNumber(e,s)))).next((d=>(r=d,c=Date.now(),this.removeTargets(e,r,n)))).next((d=>(i=d,l=Date.now(),this.removeOrphanedDocuments(e,r)))).next((d=>(u=Date.now(),Ts()<=_e.DEBUG&&X("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${s} in `+(c-o)+`ms
	Removed ${i} targets in `+(l-c)+`ms
	Removed ${d} documents in `+(u-l)+`ms
Total Duration: ${u-f}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:d}))))}}function _P(t,e){return new gP(t,e)}class yP{constructor(){this.changes=new hs((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ot.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class EP{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class vP{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(r!==null&&Hi(r.mutation,s,Ht.empty(),Be.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Ee()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Ee()){const s=es();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,r).next((i=>{let o=Si();return i.forEach(((c,l)=>{o=o.insert(c,l.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const r=es();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Ee())))}populateOverlays(e,n,r){const s=[];return r.forEach((i=>{n.has(i)||s.push(i)})),this.documentOverlayCache.getOverlays(e,s).next((i=>{i.forEach(((o,c)=>{n.set(o,c)}))}))}computeViews(e,n,r,s){let i=Hn();const o=$i(),c=(function(){return $i()})();return n.forEach(((l,u)=>{const f=r.get(u.key);s.has(u.key)&&(f===void 0||f.mutation instanceof Or)?i=i.insert(u.key,u):f!==void 0?(o.set(u.key,f.mutation.getFieldMask()),Hi(f.mutation,u,f.mutation.getFieldMask(),Be.now())):o.set(u.key,Ht.empty())})),this.recalculateAndSaveOverlays(e,i).next((l=>(l.forEach(((u,f)=>o.set(u,f))),n.forEach(((u,f)=>c.set(u,new EP(f,o.get(u)??null)))),c)))}recalculateAndSaveOverlays(e,n){const r=$i();let s=new qe(((o,c)=>o-c)),i=Ee();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const c of o)c.keys().forEach((l=>{const u=n.get(l);if(u===null)return;let f=r.get(l)||Ht.empty();f=c.applyToLocalView(u,f),r.set(l,f);const d=(s.get(c.batchId)||Ee()).add(l);s=s.insert(c.batchId,d)}))})).next((()=>{const o=[],c=s.getReverseIterator();for(;c.hasNext();){const l=c.getNext(),u=l.key,f=l.value,d=yy();f.forEach((m=>{if(!i.has(m)){const _=Ry(n.get(m),r.get(m));_!==null&&d.set(m,_),i=i.add(m)}})),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return U.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,s){return(function(o){return ee.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):hh(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next((i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):U.resolve(es());let c=ro,l=i;return o.next((u=>U.forEach(u,((f,d)=>(c<d.largestBatchId&&(c=d.largestBatchId),i.get(f)?U.resolve():this.remoteDocumentCache.getEntry(e,f).next((m=>{l=l.insert(f,m)}))))).next((()=>this.populateOverlays(e,u,i))).next((()=>this.computeViews(e,l,u,Ee()))).next((f=>({batchId:c,changes:_y(f)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ee(n)).next((r=>{let s=Si();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Si();return this.indexManager.getCollectionParents(e,i).next((c=>U.forEach(c,(l=>{const u=(function(d,m){return new us(m,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)})(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next((f=>{f.forEach(((d,m)=>{o=o.insert(d,m)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s)))).next((o=>{i.forEach(((l,u)=>{const f=u.getKey();o.get(f)===null&&(o=o.insert(f,ot.newInvalidDocument(f)))}));let c=Si();return o.forEach(((l,u)=>{const f=i.get(l);f!==void 0&&Hi(f.mutation,u,Ht.empty(),Be.now()),Ic(n,u)&&(c=c.insert(l,u))})),c}))}}class TP{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return U.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:Gt(s.createTime)}})(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(s){return{name:s.name,query:uP(s.bundledQuery),readTime:Gt(s.readTime)}})(n)),U.resolve()}}class wP{constructor(){this.overlays=new qe(ee.comparator),this.qr=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=es();return U.forEach(n,(s=>this.getOverlay(e,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((s,i)=>{this.St(e,n,i)})),U.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((i=>this.overlays=this.overlays.remove(i))),this.qr.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const s=es(),i=n.length+1,o=new ee(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const l=c.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return U.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new qe(((u,f)=>u-f));const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let f=i.get(u.largestBatchId);f===null&&(f=es(),i=i.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}const c=es(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((u,f)=>c.set(u,f))),!(c.size()>=s)););return U.resolve(c)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new jS(n,r));let i=this.qr.get(n);i===void 0&&(i=Ee(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}class IP{constructor(){this.sessionToken=mt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}class gh{constructor(){this.Qr=new nt(it.$r),this.Ur=new nt(it.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new it(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new it(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new ee(new Ne([])),r=new it(n,e),s=new it(n,e+1),i=[];return this.Ur.forEachInRange([r,s],(o=>{this.Gr(o),i.push(o.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ee(new Ne([])),r=new it(n,e),s=new it(n,e+1);let i=Ee();return this.Ur.forEachInRange([r,s],(o=>{i=i.add(o.key)})),i}containsKey(e){const n=new it(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class it{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ee.comparator(e.key,n.key)||ye(e.Yr,n.Yr)}static Kr(e,n){return ye(e.Yr,n.Yr)||ee.comparator(e.key,n.key)}}class AP{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new nt(it.$r)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new BS(i,n,r,s);this.mutationQueue.push(o);for(const c of s)this.Zr=this.Zr.add(new it(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return U.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?oh:this.tr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new it(n,0),s=new it(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],(o=>{const c=this.Xr(o.Yr);i.push(c)})),U.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new nt(ye);return n.forEach((s=>{const i=new it(s,0),o=new it(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],(c=>{r=r.add(c.Yr)}))})),U.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ee.isDocumentKey(i)||(i=i.child(""));const o=new it(new ee(i),0);let c=new nt(ye);return this.Zr.forEachWhile((l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(c=c.add(l.Yr)),!0)}),o),U.resolve(this.ti(c))}ti(e){const n=[];return e.forEach((r=>{const s=this.Xr(r);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){Ie(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return U.forEach(n.mutations,(s=>{const i=new it(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new it(n,0),s=this.Zr.firstAfterOrEqual(r);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class bP{constructor(e){this.ri=e,this.docs=(function(){return new qe(ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():ot.newInvalidDocument(n))}getEntries(e,n){let r=Hn();return n.forEach((s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ot.newInvalidDocument(s))})),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Hn();const o=n.path,c=new ee(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){const{key:u,value:{document:f}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||rS(nS(f),r)<=0||(s.has(f.key)||Ic(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return U.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ie(9500)}ii(e,n){return U.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new RP(this)}getSize(e){return U.resolve(this.size)}}class RP extends yP{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)})),U.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class SP{constructor(e){this.persistence=e,this.si=new hs((n=>ch(n)),lh),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.oi=0,this._i=new gh,this.targetCount=0,this.ai=Gs.ur()}forEachTarget(e,n){return this.si.forEach(((r,s)=>n(s))),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),U.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Gs(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Pr(n),U.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach(((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)})),U.waitFor(i).next((()=>s))}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach((o=>{i.push(s.markPotentiallyOrphaned(e,o))})),U.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this._i.containsKey(n))}}class qy{constructor(e,n){this.ui={},this.overlays={},this.ci=new Ec(0),this.li=!1,this.li=!0,this.hi=new IP,this.referenceDelegate=e(this),this.Pi=new SP(this),this.indexManager=new hP,this.remoteDocumentCache=(function(s){return new bP(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new lP(n),this.Ii=new TP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new wP,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new AP(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){X("MemoryPersistence","Starting transaction:",e);const s=new PP(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((i=>this.referenceDelegate.di(s).next((()=>i)))).toPromise().then((i=>(s.raiseOnCommittedEvent(),i)))}Ai(e,n){return U.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class PP extends iS{constructor(e){super(),this.currentSequenceNumber=e}}class _h{constructor(e){this.persistence=e,this.Ri=new gh,this.Vi=null}static mi(e){return new _h(e)}get fi(){if(this.Vi)return this.Vi;throw ie(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),U.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((i=>this.fi.add(i.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.fi,(r=>{const s=ee.fromPath(r);return this.gi(e,s).next((i=>{i||n.removeEntry(s,le.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return U.or([()=>U.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class za{constructor(e,n){this.persistence=e,this.pi=new hs((r=>cS(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=_P(this,n)}static mi(e,n){return new za(e,n)}Ei(){}di(e){return U.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((s=>r+s))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return U.forEach(this.pi,((r,s)=>this.br(e,r,s).next((i=>i?U.resolve():n(s)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,(o=>this.br(e,o,n).next((c=>{c||(r++,i.removeEntry(o,le.min()))})))).next((()=>i.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),U.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),U.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),U.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=pa(e.data.value)),n}br(e,n,r){return U.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return U.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class yh{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Ee(),s=Ee();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new yh(e,n.fromCache,r,s)}}class CP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class kP{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return aA()?8:oS(bt())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.ws(e,n,s,r).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new CP;return this.Ss(e,n,o).next((c=>{if(i.result=c,this.Vs)return this.bs(e,n,o,c.size)}))})).next((()=>i.result))}bs(e,n,r,s){return r.documentReadCount<this.fs?(Ts()<=_e.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",ws(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),U.resolve()):(Ts()<=_e.DEBUG&&X("QueryEngine","Query:",ws(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Ts()<=_e.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",ws(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Tn(n))):U.resolve())}ys(e,n){if(Vp(n))return U.resolve(null);let r=Tn(n);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=Ha(n,null,"F"),r=Tn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((i=>{const o=Ee(...i);return this.ps.getDocuments(e,o).next((c=>this.indexManager.getMinOffset(e,r).next((l=>{const u=this.Ds(n,c);return this.Cs(n,u,o,l.readTime)?this.ys(e,Ha(n,null,"F")):this.vs(e,u,n,l)}))))})))))}ws(e,n,r,s){return Vp(n)||s.isEqual(le.min())?U.resolve(null):this.ps.getDocuments(e,r).next((i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?U.resolve(null):(Ts()<=_e.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ws(n)),this.vs(e,o,n,tS(s,ro)).next((c=>c)))}))}Ds(e,n){let r=new nt(my(e));return n.forEach(((s,i)=>{Ic(e,i)&&(r=r.add(i))})),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return Ts()<=_e.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",ws(n)),this.ps.getDocumentsMatchingQuery(e,n,Ar.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next((i=>(n.forEach((o=>{i=i.insert(o.key,o)})),i)))}}const Eh="LocalStore",NP=3e8;class xP{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new qe(ye),this.xs=new hs((i=>ch(i)),lh),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new vP(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function VP(t,e,n,r){return new xP(t,e,n,r)}async function $y(t,e){const n=he(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((i=>{const o=[],c=[];let l=Ee();for(const u of s){o.push(u.batchId);for(const f of u.mutations)l=l.add(f.key)}for(const u of i){c.push(u.batchId);for(const f of u.mutations)l=l.add(f.key)}return n.localDocuments.getDocuments(r,l).next((u=>({Ls:u,removedBatchIds:o,addedBatchIds:c})))}))}))}function DP(t,e){const n=he(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,l,u,f){const d=u.batch,m=d.keys();let _=U.resolve();return m.forEach((S=>{_=_.next((()=>f.getEntry(l,S))).next((N=>{const P=u.docVersions.get(S);Ie(P!==null,48541),N.version.compareTo(P)<0&&(d.applyToRemoteDocument(N,u),N.isValidDocument()&&(N.setReadTime(u.commitVersion),f.addEntry(N)))}))})),_.next((()=>c.mutationQueue.removeMutationBatch(l,d)))})(n,r,e,i).next((()=>i.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let l=Ee();for(let u=0;u<c.mutationResults.length;++u)c.mutationResults[u].transformResults.length>0&&(l=l.add(c.batch.mutations[u].key));return l})(e)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function Hy(t){const e=he(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function OP(t,e){const n=he(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const c=[];e.targetChanges.forEach(((f,d)=>{const m=s.get(d);if(!m)return;c.push(n.Pi.removeMatchingKeys(i,f.removedDocuments,d).next((()=>n.Pi.addMatchingKeys(i,f.addedDocuments,d))));let _=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?_=_.withResumeToken(mt.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):f.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(f.resumeToken,r)),s=s.insert(d,_),(function(N,P,x){return N.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=NP?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0})(m,_,f)&&c.push(n.Pi.updateTargetData(i,_))}));let l=Hn(),u=Ee();if(e.documentUpdates.forEach((f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))})),c.push(MP(i,o,e.documentUpdates).next((f=>{l=f.ks,u=f.qs}))),!r.isEqual(le.min())){const f=n.Pi.getLastRemoteSnapshotVersion(i).next((d=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r)));c.push(f)}return U.waitFor(c).next((()=>o.apply(i))).next((()=>n.localDocuments.getLocalViewOfDocuments(i,l,u))).next((()=>l))})).then((i=>(n.Ms=s,i)))}function MP(t,e,n){let r=Ee(),s=Ee();return n.forEach((i=>r=r.add(i))),e.getEntries(t,r).next((i=>{let o=Hn();return n.forEach(((c,l)=>{const u=i.get(c);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(c)),l.isNoDocument()&&l.version.isEqual(le.min())?(e.removeEntry(c,l.readTime),o=o.insert(c,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(c,l)):X(Eh,"Ignoring outdated watch update for ",c,". Current version:",u.version," Watch version:",l.version)})),{ks:o,qs:s}}))}function LP(t,e){const n=he(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=oh),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function FP(t,e){const n=he(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.Pi.getTargetData(r,e).next((i=>i?(s=i,U.resolve(s)):n.Pi.allocateTargetId(r).next((o=>(s=new hr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function mu(t,e,n){const r=he(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,(o=>r.persistence.referenceDelegate.removeTarget(o,s)))}catch(o){if(!ei(o))throw o;X(Eh,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function Wp(t,e,n){const r=he(t);let s=le.min(),i=Ee();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(l,u,f){const d=he(l),m=d.xs.get(f);return m!==void 0?U.resolve(d.Ms.get(m)):d.Pi.getTargetData(u,f)})(r,o,Tn(e)).next((c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,c.targetId).next((l=>{i=l}))})).next((()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:le.min(),n?i:Ee()))).next((c=>(UP(r,SS(e),c),{documents:c,Qs:i})))))}function UP(t,e,n){let r=t.Os.get(e)||le.min();n.forEach(((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)})),t.Os.set(e,r)}class zp{constructor(){this.activeTargetIds=VS()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class BP{constructor(){this.Mo=new zp,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new zp,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class jP{Oo(e){}shutdown(){}}const Kp="ConnectivityMonitor";class Qp{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){X(Kp,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){X(Kp,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let na=null;function gu(){return na===null?na=(function(){return 268435456+Math.round(2147483648*Math.random())})():na++,"0x"+na.toString(16)}const Rl="RestConnection",qP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $P{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===ja?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=gu(),c=this.zo(e,n.toUriEncodedString());X(Rl,`Sending RPC '${e}' ${o}:`,c,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,i);const{host:u}=new URL(c),f=Qs(u);return this.Jo(e,c,l,r,f).then((d=>(X(Rl,`Received RPC '${e}' ${o}: `,d),d)),(d=>{throw Bs(Rl,`RPC '${e}' ${o} failed with error: `,d,"url: ",c,"request:",r),d}))}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Xs})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,i)=>e[i]=s)),r&&r.headers.forEach(((s,i)=>e[i]=s))}zo(e,n){const r=qP[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}class HP{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Et="WebChannelConnection";class GP extends $P{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=gu();return new Promise(((c,l)=>{const u=new $_;u.setWithCredentials(!0),u.listenOnce(H_.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case da.NO_ERROR:const d=u.getResponseJson();X(Et,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),c(d);break;case da.TIMEOUT:X(Et,`RPC '${e}' ${o} timed out`),l(new G(D.DEADLINE_EXCEEDED,"Request time out"));break;case da.HTTP_ERROR:const m=u.getStatus();if(X(Et,`RPC '${e}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let _=u.getResponseJson();Array.isArray(_)&&(_=_[0]);const S=_?.error;if(S&&S.status&&S.message){const N=(function(x){const O=x.toLowerCase().replace(/_/g,"-");return Object.values(D).indexOf(O)>=0?O:D.UNKNOWN})(S.status);l(new G(N,S.message))}else l(new G(D.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new G(D.UNAVAILABLE,"Connection failed."));break;default:ie(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{X(Et,`RPC '${e}' ${o} completed.`)}}));const f=JSON.stringify(s);X(Et,`RPC '${e}' ${o} sending request:`,s),u.send(n,"POST",f,r,15)}))}T_(e,n,r){const s=gu(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=z_(),c=W_(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const f=i.join("");X(Et,`Creating RPC '${e}' stream ${s}: ${f}`,l);const d=o.createWebChannel(f,l);this.I_(d);let m=!1,_=!1;const S=new HP({Yo:P=>{_?X(Et,`Not sending because RPC '${e}' stream ${s} is closed:`,P):(m||(X(Et,`Opening RPC '${e}' stream ${s} transport.`),d.open(),m=!0),X(Et,`RPC '${e}' stream ${s} sending:`,P),d.send(P))},Zo:()=>d.close()}),N=(P,x,O)=>{P.listen(x,(H=>{try{O(H)}catch(W){setTimeout((()=>{throw W}),0)}}))};return N(d,Ri.EventType.OPEN,(()=>{_||(X(Et,`RPC '${e}' stream ${s} transport opened.`),S.o_())})),N(d,Ri.EventType.CLOSE,(()=>{_||(_=!0,X(Et,`RPC '${e}' stream ${s} transport closed`),S.a_(),this.E_(d))})),N(d,Ri.EventType.ERROR,(P=>{_||(_=!0,Bs(Et,`RPC '${e}' stream ${s} transport errored. Name:`,P.name,"Message:",P.message),S.a_(new G(D.UNAVAILABLE,"The operation could not be completed")))})),N(d,Ri.EventType.MESSAGE,(P=>{if(!_){const x=P.data[0];Ie(!!x,16349);const O=x,H=O?.error||O[0]?.error;if(H){X(Et,`RPC '${e}' stream ${s} received error:`,H);const W=H.status;let Z=(function(E){const y=Ye[E];if(y!==void 0)return ky(y)})(W),te=H.message;Z===void 0&&(Z=D.INTERNAL,te="Unknown error status: "+W+" with message "+H.message),_=!0,S.a_(new G(Z,te)),d.close()}else X(Et,`RPC '${e}' stream ${s} received:`,x),S.u_(x)}})),N(c,G_.STAT_EVENT,(P=>{P.stat===iu.PROXY?X(Et,`RPC '${e}' stream ${s} detected buffering proxy`):P.stat===iu.NOPROXY&&X(Et,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{S.__()}),0),S}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Sl(){return typeof document<"u"?document:null}function Pc(t){return new QS(t,!0)}class vh{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&X("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Yp="PersistentStream";class Gy{constructor(e,n,r,s,i,o,c,l){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new vh(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===D.RESOURCE_EXHAUSTED?($n(n.toString()),$n("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===D.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===n&&this.G_(r,s)}),(r=>{e((()=>{const s=new G(D.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return X(Yp,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(X(Yp,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class WP extends Gy{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=ZS(this.serializer,e),r=(function(i){if(!("targetChange"in i))return le.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?le.min():o.readTime?Gt(o.readTime):le.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=pu(this.serializer),n.addTarget=(function(i,o){let c;const l=o.target;if(c=uu(l)?{documents:tP(i,l)}:{query:nP(i,l).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=Vy(i,o.resumeToken);const u=fu(i,o.expectedCount);u!==null&&(c.expectedCount=u)}else if(o.snapshotVersion.compareTo(le.min())>0){c.readTime=Ga(i,o.snapshotVersion.toTimestamp());const u=fu(i,o.expectedCount);u!==null&&(c.expectedCount=u)}return c})(this.serializer,e);const r=sP(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=pu(this.serializer),n.removeTarget=e,this.q_(n)}}class zP extends Gy{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ie(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ie(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ie(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=eP(e.writeResults,e.commitTime),r=Gt(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=pu(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>Ly(this.serializer,r)))};this.q_(n)}}class KP{}class QP extends KP{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new G(D.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Go(e,du(n,r),s,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new G(D.UNKNOWN,i.toString())}))}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Ho(e,du(n,r),s,o,c,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(D.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class YP{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?($n(n),this.aa=!1):X("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const ls="RemoteStore";class JP{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((o=>{r.enqueueAndForget((async()=>{fs(this)&&(X(ls,"Restarting streams for network reachability change."),await(async function(l){const u=he(l);u.Ea.add(4),await No(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Cc(u)})(this))}))})),this.Ra=new YP(r,s)}}async function Cc(t){if(fs(t))for(const e of t.da)await e(!0)}async function No(t){for(const e of t.da)await e(!1)}function Wy(t,e){const n=he(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Ah(n)?Ih(n):ti(n).O_()&&wh(n,e))}function Th(t,e){const n=he(t),r=ti(n);n.Ia.delete(e),r.O_()&&zy(n,e),n.Ia.size===0&&(r.O_()?r.L_():fs(n)&&n.Ra.set("Unknown"))}function wh(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ti(t).Y_(e)}function zy(t,e){t.Va.Ue(e),ti(t).Z_(e)}function Ih(t){t.Va=new GS({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),ti(t).start(),t.Ra.ua()}function Ah(t){return fs(t)&&!ti(t).x_()&&t.Ia.size>0}function fs(t){return he(t).Ea.size===0}function Ky(t){t.Va=void 0}async function XP(t){t.Ra.set("Online")}async function ZP(t){t.Ia.forEach(((e,n)=>{wh(t,e)}))}async function eC(t,e){Ky(t),Ah(t)?(t.Ra.ha(e),Ih(t)):t.Ra.set("Unknown")}async function tC(t,e,n){if(t.Ra.set("Online"),e instanceof xy&&e.state===2&&e.cause)try{await(async function(s,i){const o=i.cause;for(const c of i.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,o),s.Ia.delete(c),s.Va.removeTarget(c))})(t,e)}catch(r){X(ls,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ka(t,r)}else if(e instanceof _a?t.Va.Ze(e):e instanceof Ny?t.Va.st(e):t.Va.tt(e),!n.isEqual(le.min()))try{const r=await Hy(t.localStore);n.compareTo(r)>=0&&await(function(i,o){const c=i.Va.Tt(o);return c.targetChanges.forEach(((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const f=i.Ia.get(u);f&&i.Ia.set(u,f.withResumeToken(l.resumeToken,o))}})),c.targetMismatches.forEach(((l,u)=>{const f=i.Ia.get(l);if(!f)return;i.Ia.set(l,f.withResumeToken(mt.EMPTY_BYTE_STRING,f.snapshotVersion)),zy(i,l);const d=new hr(f.target,l,u,f.sequenceNumber);wh(i,d)})),i.remoteSyncer.applyRemoteEvent(c)})(t,n)}catch(r){X(ls,"Failed to raise snapshot:",r),await Ka(t,r)}}async function Ka(t,e,n){if(!ei(e))throw e;t.Ea.add(1),await No(t),t.Ra.set("Offline"),n||(n=()=>Hy(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{X(ls,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Cc(t)}))}function Qy(t,e){return e().catch((n=>Ka(t,n,e)))}async function kc(t){const e=he(t),n=Pr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:oh;for(;nC(e);)try{const s=await LP(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,rC(e,s)}catch(s){await Ka(e,s)}Yy(e)&&Jy(e)}function nC(t){return fs(t)&&t.Ta.length<10}function rC(t,e){t.Ta.push(e);const n=Pr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function Yy(t){return fs(t)&&!Pr(t).x_()&&t.Ta.length>0}function Jy(t){Pr(t).start()}async function sC(t){Pr(t).ra()}async function iC(t){const e=Pr(t);for(const n of t.Ta)e.ea(n.mutations)}async function oC(t,e,n){const r=t.Ta.shift(),s=dh.from(r,e,n);await Qy(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await kc(t)}async function aC(t,e){e&&Pr(t).X_&&await(async function(r,s){if((function(o){return Cy(o)&&o!==D.ABORTED})(s.code)){const i=r.Ta.shift();Pr(r).B_(),await Qy(r,(()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s))),await kc(r)}})(t,e),Yy(t)&&Jy(t)}async function Jp(t,e){const n=he(t);n.asyncQueue.verifyOperationInProgress(),X(ls,"RemoteStore received new credentials");const r=fs(n);n.Ea.add(3),await No(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Cc(n)}async function cC(t,e){const n=he(t);e?(n.Ea.delete(2),await Cc(n)):e||(n.Ea.add(2),await No(n),n.Ra.set("Unknown"))}function ti(t){return t.ma||(t.ma=(function(n,r,s){const i=he(n);return i.sa(),new WP(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Xo:XP.bind(null,t),t_:ZP.bind(null,t),r_:eC.bind(null,t),H_:tC.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),Ah(t)?Ih(t):t.Ra.set("Unknown")):(await t.ma.stop(),Ky(t))}))),t.ma}function Pr(t){return t.fa||(t.fa=(function(n,r,s){const i=he(n);return i.sa(),new zP(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:sC.bind(null,t),r_:aC.bind(null,t),ta:iC.bind(null,t),na:oC.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await kc(t)):(await t.fa.stop(),t.Ta.length>0&&(X(ls,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class bh{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new vn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,c=new bh(e,n,o,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(D.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Rh(t,e){if($n("AsyncQueue",`${e}: ${t}`),ei(t))return new G(D.UNAVAILABLE,`${e}: ${t}`);throw t}class Ds{static emptySet(e){return new Ds(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ee.comparator(n.key,r.key):(n,r)=>ee.comparator(n.key,r.key),this.keyedMap=Si(),this.sortedSet=new qe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ds)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ds;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class Xp{constructor(){this.ga=new qe(ee.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ie(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Ws{constructor(e,n,r,s,i,o,c,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach((c=>{o.push({type:0,doc:c})})),new Ws(e,n,Ds.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}class lC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class uC{constructor(){this.queries=Zp(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=he(n),i=s.queries;s.queries=Zp(),i.forEach(((o,c)=>{for(const l of c.Sa)l.onError(r)}))})(this,new G(D.ABORTED,"Firestore shutting down"))}}function Zp(){return new hs((t=>py(t)),wc)}async function Xy(t,e){const n=he(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new lC,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const c=Rh(o,`Initialization of query '${ws(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Sh(n)}async function Zy(t,e){const n=he(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function hC(t,e){const n=he(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const c of o.Sa)c.Fa(s)&&(r=!0);o.wa=s}}r&&Sh(n)}function fC(t,e,n){const r=he(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function Sh(t){t.Ca.forEach((e=>{e.next()}))}var _u,em;(em=_u||(_u={})).Ma="default",em.Cache="cache";class eE{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ws(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ws.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==_u.Cache}}class tE{constructor(e){this.key=e}}class nE{constructor(e){this.key=e}}class dC{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ee(),this.mutatedKeys=Ee(),this.eu=my(e),this.tu=new Ds(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Xp,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,c=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((f,d)=>{const m=s.get(f),_=Ic(this.query,d)?d:null,S=!!m&&this.mutatedKeys.has(m.key),N=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let P=!1;m&&_?m.data.isEqual(_.data)?S!==N&&(r.track({type:3,doc:_}),P=!0):this.su(m,_)||(r.track({type:2,doc:_}),P=!0,(l&&this.eu(_,l)>0||u&&this.eu(_,u)<0)&&(c=!0)):!m&&_?(r.track({type:0,doc:_}),P=!0):m&&!_&&(r.track({type:1,doc:m}),P=!0,(l||u)&&(c=!0)),P&&(_?(o=o.add(_),i=N?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{tu:o,iu:r,Cs:c,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((f,d)=>(function(_,S){const N=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ie(20277,{Rt:P})}};return N(_)-N(S)})(f.type,d.type)||this.eu(f.doc,d.doc))),this.ou(r),s=s??!1;const c=n&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new Ws(this.query,e.tu,i,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Xp,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ee(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new nE(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new tE(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=Ee();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ws.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ph="SyncEngine";class pC{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class mC{constructor(e){this.key=e,this.hu=!1}}class gC{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new hs((c=>py(c)),wc),this.Iu=new Map,this.Eu=new Set,this.du=new qe(ee.comparator),this.Au=new Map,this.Ru=new gh,this.Vu={},this.mu=new Map,this.fu=Gs.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function _C(t,e,n=!0){const r=cE(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await rE(r,e,n,!0),s}async function yC(t,e){const n=cE(t);await rE(n,e,!0,!1)}async function rE(t,e,n,r){const s=await FP(t.localStore,Tn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let c;return r&&(c=await EC(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Wy(t.remoteStore,s),c}async function EC(t,e,n,r,s){t.pu=(d,m,_)=>(async function(N,P,x,O){let H=P.view.ru(x);H.Cs&&(H=await Wp(N.localStore,P.query,!1).then((({documents:b})=>P.view.ru(b,H))));const W=O&&O.targetChanges.get(P.targetId),Z=O&&O.targetMismatches.get(P.targetId)!=null,te=P.view.applyChanges(H,N.isPrimaryClient,W,Z);return nm(N,P.targetId,te.au),te.snapshot})(t,d,m,_);const i=await Wp(t.localStore,e,!0),o=new dC(e,i.Qs),c=o.ru(i.documents),l=ko.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(c,t.isPrimaryClient,l);nm(t,n,u.au);const f=new pC(e,n,o);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function vC(t,e,n){const r=he(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter((o=>!wc(o,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await mu(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Th(r.remoteStore,s.targetId),yu(r,s.targetId)})).catch(Zs)):(yu(r,s.targetId),await mu(r.localStore,s.targetId,!0))}async function TC(t,e){const n=he(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Th(n.remoteStore,r.targetId))}async function wC(t,e,n){const r=CC(t);try{const s=await(function(o,c){const l=he(o),u=Be.now(),f=c.reduce(((_,S)=>_.add(S.key)),Ee());let d,m;return l.persistence.runTransaction("Locally write mutations","readwrite",(_=>{let S=Hn(),N=Ee();return l.Ns.getEntries(_,f).next((P=>{S=P,S.forEach(((x,O)=>{O.isValidDocument()||(N=N.add(x))}))})).next((()=>l.localDocuments.getOverlayedDocuments(_,S))).next((P=>{d=P;const x=[];for(const O of c){const H=US(O,d.get(O.key).overlayedDocument);H!=null&&x.push(new Or(O.key,H,ay(H.value.mapValue),pt.exists(!0)))}return l.mutationQueue.addMutationBatch(_,u,x,c)})).next((P=>{m=P;const x=P.applyToLocalDocumentSet(d,N);return l.documentOverlayCache.saveOverlays(_,P.batchId,x)}))})).then((()=>({batchId:m.batchId,changes:_y(d)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(o,c,l){let u=o.Vu[o.currentUser.toKey()];u||(u=new qe(ye)),u=u.insert(c,l),o.Vu[o.currentUser.toKey()]=u})(r,s.batchId,n),await xo(r,s.changes),await kc(r.remoteStore)}catch(s){const i=Rh(s,"Failed to persist write");n.reject(i)}}async function sE(t,e){const n=he(t);try{const r=await OP(n.localStore,e);e.targetChanges.forEach(((s,i)=>{const o=n.Au.get(i);o&&(Ie(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?Ie(o.hu,14607):s.removedDocuments.size>0&&(Ie(o.hu,42227),o.hu=!1))})),await xo(n,r,e)}catch(r){await Zs(r)}}function tm(t,e,n){const r=he(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach(((i,o)=>{const c=o.view.va(e);c.snapshot&&s.push(c.snapshot)})),(function(o,c){const l=he(o);l.onlineState=c;let u=!1;l.queries.forEach(((f,d)=>{for(const m of d.Sa)m.va(c)&&(u=!0)})),u&&Sh(l)})(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function IC(t,e,n){const r=he(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new qe(ee.comparator);o=o.insert(i,ot.newNoDocument(i,le.min()));const c=Ee().add(i),l=new Sc(le.min(),new Map,new qe(ye),o,c);await sE(r,l),r.du=r.du.remove(i),r.Au.delete(e),Ch(r)}else await mu(r.localStore,e,!1).then((()=>yu(r,e,n))).catch(Zs)}async function AC(t,e){const n=he(t),r=e.batch.batchId;try{const s=await DP(n.localStore,e);oE(n,r,null),iE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await xo(n,s)}catch(s){await Zs(s)}}async function bC(t,e,n){const r=he(t);try{const s=await(function(o,c){const l=he(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let f;return l.mutationQueue.lookupMutationBatch(u,c).next((d=>(Ie(d!==null,37113),f=d.keys(),l.mutationQueue.removeMutationBatch(u,d)))).next((()=>l.mutationQueue.performConsistencyCheck(u))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(u,f,c))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f))).next((()=>l.localDocuments.getDocuments(u,f)))}))})(r.localStore,e);oE(r,e,n),iE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await xo(r,s)}catch(s){await Zs(s)}}function iE(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function oE(t,e,n){const r=he(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function yu(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||aE(t,r)}))}function aE(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Th(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Ch(t))}function nm(t,e,n){for(const r of n)r instanceof tE?(t.Ru.addReference(r.key,e),RC(t,r)):r instanceof nE?(X(Ph,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||aE(t,r.key)):ie(19791,{wu:r})}function RC(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(X(Ph,"New document in limbo: "+n),t.Eu.add(r),Ch(t))}function Ch(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ee(Ne.fromString(e)),r=t.fu.next();t.Au.set(r,new mC(n)),t.du=t.du.insert(n,r),Wy(t.remoteStore,new hr(Tn(uh(n.path)),r,"TargetPurposeLimboResolution",Ec.ce))}}async function xo(t,e,n){const r=he(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((c,l)=>{o.push(r.pu(l,e,n).then((u=>{if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:n?.targetChanges.get(l.targetId)?.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){s.push(u);const f=yh.As(l.targetId,u);i.push(f)}})))})),await Promise.all(o),r.Pu.H_(s),await(async function(l,u){const f=he(l);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",(d=>U.forEach(u,(m=>U.forEach(m.Es,(_=>f.persistence.referenceDelegate.addReference(d,m.targetId,_))).next((()=>U.forEach(m.ds,(_=>f.persistence.referenceDelegate.removeReference(d,m.targetId,_)))))))))}catch(d){if(!ei(d))throw d;X(Eh,"Failed to update sequence numbers: "+d)}for(const d of u){const m=d.targetId;if(!d.fromCache){const _=f.Ms.get(m),S=_.snapshotVersion,N=_.withLastLimboFreeSnapshotVersion(S);f.Ms=f.Ms.insert(m,N)}}})(r.localStore,i))}async function SC(t,e){const n=he(t);if(!n.currentUser.isEqual(e)){X(Ph,"User change. New user:",e.toKey());const r=await $y(n.localStore,e);n.currentUser=e,(function(i,o){i.mu.forEach((c=>{c.forEach((l=>{l.reject(new G(D.CANCELLED,o))}))})),i.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await xo(n,r.Ls)}}function PC(t,e){const n=he(t),r=n.Au.get(e);if(r&&r.hu)return Ee().add(r.key);{let s=Ee();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const c=n.Tu.get(o);s=s.unionWith(c.view.nu)}return s}}function cE(t){const e=he(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=sE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=PC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=IC.bind(null,e),e.Pu.H_=hC.bind(null,e.eventManager),e.Pu.yu=fC.bind(null,e.eventManager),e}function CC(t){const e=he(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=AC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bC.bind(null,e),e}class Qa{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Pc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return VP(this.persistence,new kP,e.initialUser,this.serializer)}Cu(e){return new qy(_h.mi,this.serializer)}Du(e){return new BP}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Qa.provider={build:()=>new Qa};class kC extends Qa{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ie(this.persistence.referenceDelegate instanceof za,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new mP(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Ot.withCacheSize(this.cacheSizeBytes):Ot.DEFAULT;return new qy((r=>za.mi(r,n)),this.serializer)}}class Eu{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>tm(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=SC.bind(null,this.syncEngine),await cC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new uC})()}createDatastore(e){const n=Pc(e.databaseInfo.databaseId),r=(function(i){return new GP(i)})(e.databaseInfo);return(function(i,o,c,l){return new QP(i,o,c,l)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,s,i,o,c){return new JP(r,s,i,o,c)})(this.localStore,this.datastore,e.asyncQueue,(n=>tm(this.syncEngine,n,0)),(function(){return Qp.v()?new Qp:new jP})())}createSyncEngine(e,n){return(function(s,i,o,c,l,u,f){const d=new gC(s,i,o,c,l,u);return f&&(d.gu=!0),d})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=he(n);X(ls,"RemoteStore shutting down."),r.Ea.add(5),await No(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Eu.provider={build:()=>new Eu};class lE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):$n("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}class NC{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new G(D.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await(async function(s,i){const o=he(s),c={documents:i.map((d=>Wa(o.serializer,d)))},l=await o.Ho("BatchGetDocuments",o.serializer.databaseId,Ne.emptyPath(),c,i.length),u=new Map;l.forEach((d=>{const m=XS(o.serializer,d);u.set(m.key.toString(),m)}));const f=[];return i.forEach((d=>{const m=u.get(d.toString());Ie(!!m,55234,{key:d}),f.push(m)})),f})(this.datastore,e);return n.forEach((r=>this.recordVersion(r))),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Rc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((n=>{e.delete(n.key.toString())})),e.forEach(((n,r)=>{const s=ee.fromPath(r);this.mutations.push(new Py(s,this.precondition(s)))})),await(async function(r,s){const i=he(r),o={writes:s.map((c=>Ly(i.serializer,c)))};await i.Go("Commit",i.serializer.databaseId,Ne.emptyPath(),o)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw ie(50498,{Gu:e.constructor.name});n=le.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new G(D.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(le.min())?pt.exists(!1):pt.updateTime(n):pt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(le.min()))throw new G(D.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return pt.updateTime(n)}return pt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class xC{constructor(e,n,r,s,i){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=s,this.deferred=i,this.zu=r.maxAttempts,this.M_=new vh(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new NC(this.datastore),n=this.Hu(e);n&&n.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((s=>{this.Yu(s)}))))})).catch((r=>{this.Yu(r)}))}))}Hu(e){try{const n=this.updateFunction(e);return!Po(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!Cy(n)}return!1}}const Cr="FirestoreClient";class VC{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=wt.UNAUTHENTICATED,this.clientId=ih.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,(async o=>{X(Cr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(X(Cr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Rh(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Pl(t,e){t.asyncQueue.verifyOperationInProgress(),X(Cr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async s=>{r.isEqual(s)||(await $y(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function rm(t,e){t.asyncQueue.verifyOperationInProgress();const n=await DC(t);X(Cr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>Jp(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,s)=>Jp(e.remoteStore,s))),t._onlineComponents=e}async function DC(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){X(Cr,"Using user provided OfflineComponentProvider");try{await Pl(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===D.FAILED_PRECONDITION||s.code===D.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;Bs("Error using user provided cache. Falling back to memory cache: "+n),await Pl(t,new Qa)}}else X(Cr,"Using default OfflineComponentProvider"),await Pl(t,new kC(void 0));return t._offlineComponents}async function kh(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(X(Cr,"Using user provided OnlineComponentProvider"),await rm(t,t._uninitializedComponentsProvider._online)):(X(Cr,"Using default OnlineComponentProvider"),await rm(t,new Eu))),t._onlineComponents}function OC(t){return kh(t).then((e=>e.syncEngine))}function MC(t){return kh(t).then((e=>e.datastore))}async function uE(t){const e=await kh(t),n=e.eventManager;return n.onListen=_C.bind(null,e.syncEngine),n.onUnlisten=vC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=yC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=TC.bind(null,e.syncEngine),n}function LC(t,e,n={}){const r=new vn;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,c,l,u){const f=new lE({next:m=>{f.Nu(),o.enqueueAndForget((()=>Zy(i,d)));const _=m.docs.has(c);!_&&m.fromCache?u.reject(new G(D.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&m.fromCache&&l&&l.source==="server"?u.reject(new G(D.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),d=new eE(uh(c.path),f,{includeMetadataChanges:!0,qa:!0});return Xy(i,d)})(await uE(t),t.asyncQueue,e,n,r))),r.promise}function FC(t,e,n={}){const r=new vn;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,c,l,u){const f=new lE({next:m=>{f.Nu(),o.enqueueAndForget((()=>Zy(i,d))),m.fromCache&&l.source==="server"?u.reject(new G(D.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),d=new eE(c,f,{includeMetadataChanges:!0,qa:!0});return Xy(i,d)})(await uE(t),t.asyncQueue,e,n,r))),r.promise}function hE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const sm=new Map;const fE="firestore.googleapis.com",im=!0;class om{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new G(D.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=fE,this.ssl=im}else this.host=e.host,this.ssl=e.ssl??im;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=jy;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<dP)throw new G(D.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ZR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hE(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new G(D.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new G(D.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new G(D.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Nc{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new om({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(D.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(D.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new om(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new $R;switch(r.type){case"firstParty":return new zR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(D.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=sm.get(n);r&&(X("ComponentProvider","Removing Datastore"),sm.delete(n),r.terminate())})(this),Promise.resolve()}}function UC(t,e,n,r={}){t=Xt(t,Nc);const s=Qs(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;s&&(t_(`https://${c}`),n_("Firestore",!0)),i.host!==fE&&i.host!==c&&Bs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:c,ssl:s,emulatorOptions:r};if(!ss(l,o)&&(t._setSettings(l),r.mockUserToken)){let u,f;if(typeof r.mockUserToken=="string")u=r.mockUserToken,f=wt.MOCK_USER;else{u=XI(r.mockUserToken,t._app?.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new G(D.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new wt(d)}t._authCredentials=new HR(new Q_(u,f))}}class zn{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new zn(this.firestore,e,this._query)}}class Ge{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Er(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ge(this.firestore,e,this._key)}toJSON(){return{type:Ge._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(So(n,Ge._jsonSchema))return new Ge(e,r||null,new ee(Ne.fromString(n.referencePath)))}}Ge._jsonSchemaVersion="firestore/documentReference/1.0",Ge._jsonSchema={type:Ze("string",Ge._jsonSchemaVersion),referencePath:Ze("string")};class Er extends zn{constructor(e,n,r){super(e,n,uh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ge(this.firestore,null,new ee(e))}withConverter(e){return new Er(this.firestore,e,this._path)}}function BC(t,e,...n){if(t=Qe(t),Y_("collection","path",e),t instanceof Nc){const r=Ne.fromString(e,...n);return vp(r),new Er(t,null,r)}{if(!(t instanceof Ge||t instanceof Er))throw new G(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ne.fromString(e,...n));return vp(r),new Er(t.firestore,null,r)}}function Rn(t,e,...n){if(t=Qe(t),arguments.length===1&&(e=ih.newId()),Y_("doc","path",e),t instanceof Nc){const r=Ne.fromString(e,...n);return Ep(r),new Ge(t,null,new ee(r))}{if(!(t instanceof Ge||t instanceof Er))throw new G(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ne.fromString(e,...n));return Ep(r),new Ge(t.firestore,t instanceof Er?t.converter:null,new ee(r))}}const am="AsyncQueue";class cm{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new vh(this,"async_queue_retry"),this._c=()=>{const r=Sl();r&&X(am,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Sl();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Sl();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new vn;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ei(e))throw e;X(am,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,$n("INTERNAL UNHANDLED ERROR: ",lm(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=bh.createAndSchedule(this,e,n,r,(i=>this.hc(i)));return this.tc.push(s),s}uc(){this.nc&&ie(47125,{Pc:lm(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function lm(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Mr extends Nc{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new cm,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new cm(e),this._firestoreClient=void 0,await e}}}function jC(t,e){const n=typeof t=="object"?t:o_(),r=typeof t=="string"?t:ja,s=zu(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=YI("firestore");i&&UC(s,...i)}return s}function xc(t){if(t._terminated)throw new G(D.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||qC(t),t._firestoreClient}function qC(t){const e=t._freezeSettings(),n=(function(s,i,o,c){return new hS(s,i,o,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,hE(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new VC(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(s){const i=s?._online.build();return{_offline:s?._offline.build(i),_online:i}})(t._componentsProvider))}class qt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qt(mt.fromBase64String(e))}catch(n){throw new G(D.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new qt(mt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:qt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(So(e,qt._jsonSchema))return qt.fromBase64String(e.bytes)}}qt._jsonSchemaVersion="firestore/bytes/1.0",qt._jsonSchema={type:Ze("string",qt._jsonSchemaVersion),bytes:Ze("string")};class Vo{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new G(D.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Do{constructor(e){this._methodName=e}}class wn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new G(D.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new G(D.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ye(this._lat,e._lat)||ye(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:wn._jsonSchemaVersion}}static fromJSON(e){if(So(e,wn._jsonSchema))return new wn(e.latitude,e.longitude)}}wn._jsonSchemaVersion="firestore/geoPoint/1.0",wn._jsonSchema={type:Ze("string",wn._jsonSchemaVersion),latitude:Ze("number"),longitude:Ze("number")};class In{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:In._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(So(e,In._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new In(e.vectorValues);throw new G(D.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}In._jsonSchemaVersion="firestore/vectorValue/1.0",In._jsonSchema={type:Ze("string",In._jsonSchemaVersion),vectorValues:Ze("object")};const $C=/^__.*__$/;class HC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Or(e,this.data,this.fieldMask,n,this.fieldTransforms):new Co(e,this.data,n,this.fieldTransforms)}}class dE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Or(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function pE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ie(40011,{Ac:t})}}class Nh{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Nh({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Ya(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(pE(this.Ac)&&$C.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class GC{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Pc(e)}Cc(e,n,r,s=!1){return new Nh({Ac:e,methodName:n,Dc:r,path:dt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ni(t){const e=t._freezeSettings(),n=Pc(t._databaseId);return new GC(t._databaseId,!!e.ignoreUndefinedProperties,n)}function xh(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);Oh("Data must be an object, but it was:",o,r);const c=yE(r,o);let l,u;if(i.merge)l=new Ht(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const d of i.mergeFields){const m=vu(e,d,n);if(!o.contains(m))throw new G(D.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);vE(f,m)||f.push(m)}l=new Ht(f),u=o.fieldTransforms.filter((d=>l.covers(d.field)))}else l=null,u=o.fieldTransforms;return new HC(new Vt(c),l,u)}class Vc extends Do{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Vc}}class Vh extends Do{_toFieldTransform(e){return new by(e.path,new co)}isEqual(e){return e instanceof Vh}}class Dh extends Do{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new ho(e.serializer,vy(e.serializer,this.Fc));return new by(e.path,n)}isEqual(e){return e instanceof Dh&&this.Fc===e.Fc}}function mE(t,e,n,r){const s=t.Cc(1,e,n);Oh("Data must be an object, but it was:",s,r);const i=[],o=Vt.empty();Dr(r,((l,u)=>{const f=Mh(e,l,n);u=Qe(u);const d=s.yc(f);if(u instanceof Vc)i.push(f);else{const m=Oo(u,d);m!=null&&(i.push(f),o.set(f,m))}}));const c=new Ht(i);return new dE(o,c,s.fieldTransforms)}function gE(t,e,n,r,s,i){const o=t.Cc(1,e,n),c=[vu(e,r,n)],l=[s];if(i.length%2!=0)throw new G(D.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)c.push(vu(e,i[m])),l.push(i[m+1]);const u=[],f=Vt.empty();for(let m=c.length-1;m>=0;--m)if(!vE(u,c[m])){const _=c[m];let S=l[m];S=Qe(S);const N=o.yc(_);if(S instanceof Vc)u.push(_);else{const P=Oo(S,N);P!=null&&(u.push(_),f.set(_,P))}}const d=new Ht(u);return new dE(f,d,o.fieldTransforms)}function _E(t,e,n,r=!1){return Oo(n,t.Cc(r?4:3,e))}function Oo(t,e){if(EE(t=Qe(t)))return Oh("Unsupported field value:",e,t),yE(t,e);if(t instanceof Do)return(function(r,s){if(!pE(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,s){const i=[];let o=0;for(const c of r){let l=Oo(c,s.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}})(t,e)}return(function(r,s){if((r=Qe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return vy(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Be.fromDate(r);return{timestampValue:Ga(s.serializer,i)}}if(r instanceof Be){const i=new Be(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ga(s.serializer,i)}}if(r instanceof wn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof qt)return{bytesValue:Vy(s.serializer,r._byteString)};if(r instanceof Ge){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:mh(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof In)return(function(o,c){return{mapValue:{fields:{[iy]:{stringValue:oy},[qa]:{arrayValue:{values:o.toArray().map((u=>{if(typeof u!="number")throw c.Sc("VectorValues must only contain numeric values.");return fh(c.serializer,u)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${yc(r)}`)})(t,e)}function yE(t,e){const n={};return Z_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Dr(t,((r,s)=>{const i=Oo(s,e.mc(r));i!=null&&(n[r]=i)})),{mapValue:{fields:n}}}function EE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Be||t instanceof wn||t instanceof qt||t instanceof Ge||t instanceof Do||t instanceof In)}function Oh(t,e,n){if(!EE(n)||!J_(n)){const r=yc(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function vu(t,e,n){if((e=Qe(e))instanceof Vo)return e._internalPath;if(typeof e=="string")return Mh(t,e);throw Ya("Field path arguments must be of type string or ",t,!1,void 0,n)}const WC=new RegExp("[~\\*/\\[\\]]");function Mh(t,e,n){if(e.search(WC)>=0)throw Ya(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Vo(...e.split("."))._internalPath}catch{throw Ya(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ya(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new G(D.INVALID_ARGUMENT,c+t+l)}function vE(t,e){return t.some((n=>n.isEqual(e)))}class fo{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ge(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new zC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Dc("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class zC extends fo{data(){return super.data()}}function Dc(t,e){return typeof e=="string"?Mh(t,e):e instanceof Vo?e._internalPath:e._delegate._internalPath}function KC(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new G(D.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Lh{}class Oc extends Lh{}function Os(t,e,...n){let r=[];e instanceof Lh&&r.push(e),r=r.concat(n),(function(i){const o=i.filter((l=>l instanceof Fh)).length,c=i.filter((l=>l instanceof Mc)).length;if(o>1||o>0&&c>0)throw new G(D.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)t=s._apply(t);return t}class Mc extends Oc{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Mc(e,n,r)}_apply(e){const n=this._parse(e);return TE(e._query,n),new zn(e.firestore,e.converter,hu(e._query,n))}_parse(e){const n=ni(e.firestore);return(function(i,o,c,l,u,f,d){let m;if(u.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new G(D.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){fm(d,f);const S=[];for(const N of d)S.push(hm(l,i,N));m={arrayValue:{values:S}}}else m=hm(l,i,d)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||fm(d,f),m=_E(c,o,d,f==="in"||f==="not-in");return Xe.create(u,f,m)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function rs(t,e,n){const r=e,s=Dc("where",t);return Mc._create(s,r,n)}class Fh extends Lh{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Fh(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:un.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(s,i){let o=s;const c=i.getFlattenedFilters();for(const l of c)TE(o,l),o=hu(o,l)})(e._query,n),new zn(e.firestore,e.converter,hu(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Uh extends Oc{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Uh(e,n)}_apply(e){const n=(function(s,i,o){if(s.startAt!==null)throw new G(D.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new G(D.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ao(i,o)})(e._query,this._field,this._direction);return new zn(e.firestore,e.converter,(function(s,i){const o=s.explicitOrderBy.concat([i]);return new us(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,n))}}function Ja(t,e="asc"){const n=e,r=Dc("orderBy",t);return Uh._create(r,n)}class Bh extends Oc{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Bh(e,n,r)}_apply(e){return new zn(e.firestore,e.converter,Ha(e._query,this._limit,this._limitType))}}function um(t){return eS("limit",t),Bh._create("limit",t,"F")}class jh extends Oc{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new jh(e,n,r)}_apply(e){const n=YC(e,this.type,this._docOrFields,this._inclusive);return new zn(e.firestore,e.converter,(function(s,i){return new us(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)})(e._query,n))}}function QC(...t){return jh._create("startAfter",t,!1)}function YC(t,e,n,r){if(n[0]=Qe(n[0]),n[0]instanceof fo)return(function(i,o,c,l,u){if(!l)throw new G(D.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const f=[];for(const d of Vs(i))if(d.field.isKeyField())f.push($a(o,l.key));else{const m=l.data.field(d.field);if(vc(m))throw new G(D.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){const _=d.field.canonicalString();throw new G(D.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${_}' (used as the orderBy) does not exist.`)}f.push(m)}return new Hs(f,u)})(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=ni(t.firestore);return(function(o,c,l,u,f,d){const m=o.explicitOrderBy;if(f.length>m.length)throw new G(D.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const _=[];for(let S=0;S<f.length;S++){const N=f[S];if(m[S].field.isKeyField()){if(typeof N!="string")throw new G(D.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof N}`);if(!hh(o)&&N.indexOf("/")!==-1)throw new G(D.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${N}' contains a slash.`);const P=o.path.child(Ne.fromString(N));if(!ee.isDocumentKey(P))throw new G(D.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${P}' is not because it contains an odd number of segments.`);const x=new ee(P);_.push($a(c,x))}else{const P=_E(l,u,N);_.push(P)}}return new Hs(_,d)})(t._query,t.firestore._databaseId,s,e,n,r)}}function hm(t,e,n){if(typeof(n=Qe(n))=="string"){if(n==="")throw new G(D.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!hh(e)&&n.indexOf("/")!==-1)throw new G(D.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ne.fromString(n));if(!ee.isDocumentKey(r))throw new G(D.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return $a(t,new ee(r))}if(n instanceof Ge)return $a(t,n._key);throw new G(D.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${yc(n)}.`)}function fm(t,e){if(!Array.isArray(t)||t.length===0)throw new G(D.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function TE(t,e){const n=(function(s,i){for(const o of s)for(const c of o.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new G(D.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(D.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class wE{convertValue(e,n="none"){switch(Sr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ze(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Rr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ie(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Dr(e,((s,i)=>{r[s]=this.convertValue(i,n)})),r}convertVectorValue(e){const n=e.fields?.[qa].arrayValue?.values?.map((r=>ze(r.doubleValue)));return new In(n)}convertGeoPoint(e){return new wn(ze(e.latitude),ze(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Tc(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(so(e));default:return null}}convertTimestamp(e){const n=br(e);return new Be(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ne.fromString(e);Ie(By(r),9688,{name:e});const s=new io(r.get(1),r.get(3)),i=new ee(r.popFirst(5));return s.isEqual(n)||$n(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}function qh(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class JC extends wE{constructor(e){super(),this.firestore=e}convertBytes(e){return new qt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ge(this.firestore,null,n)}}class bs{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vr extends fo{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ya(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Dc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new G(D.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=vr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}vr._jsonSchemaVersion="firestore/documentSnapshot/1.0",vr._jsonSchema={type:Ze("string",vr._jsonSchemaVersion),bundleSource:Ze("string","DocumentSnapshot"),bundleName:Ze("string"),bundle:Ze("string")};class ya extends vr{data(e={}){return super.data(e)}}class Ms{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new bs(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new ya(this._firestore,this._userDataWriter,r.key,r,new bs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(D.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map((c=>{const l=new ya(s._firestore,s._userDataWriter,c.doc.key,c.doc,new bs(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}}))}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((c=>i||c.type!==3)).map((c=>{const l=new ya(s._firestore,s._userDataWriter,c.doc.key,c.doc,new bs(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,f=-1;return c.type!==0&&(u=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:XC(c.type),doc:l,oldIndex:u,newIndex:f}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new G(D.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ms._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ih.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach((i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function XC(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ie(61501,{type:t})}}function Lc(t){t=Xt(t,Ge);const e=Xt(t.firestore,Mr);return LC(xc(e),t._key).then((n=>n1(e,t,n)))}Ms._jsonSchemaVersion="firestore/querySnapshot/1.0",Ms._jsonSchema={type:Ze("string",Ms._jsonSchemaVersion),bundleSource:Ze("string","QuerySnapshot"),bundleName:Ze("string"),bundle:Ze("string")};class $h extends wE{constructor(e){super(),this.firestore=e}convertBytes(e){return new qt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ge(this.firestore,null,n)}}function Fc(t){t=Xt(t,zn);const e=Xt(t.firestore,Mr),n=xc(e),r=new $h(e);return KC(t._query),FC(n,t._query).then((s=>new Ms(e,r,t,s)))}function ZC(t,e,n){t=Xt(t,Ge);const r=Xt(t.firestore,Mr),s=qh(t.converter,e,n);return Uc(r,[xh(ni(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,pt.none())])}function Hh(t,e,n,...r){t=Xt(t,Ge);const s=Xt(t.firestore,Mr),i=ni(s);let o;return o=typeof(e=Qe(e))=="string"||e instanceof Vo?gE(i,"updateDoc",t._key,e,n,r):mE(i,"updateDoc",t._key,e),Uc(s,[o.toMutation(t._key,pt.exists(!0))])}function e1(t){return Uc(Xt(t.firestore,Mr),[new Rc(t._key,pt.none())])}function t1(t,e){const n=Xt(t.firestore,Mr),r=Rn(t),s=qh(t.converter,e);return Uc(n,[xh(ni(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,pt.exists(!1))]).then((()=>r))}function Uc(t,e){return(function(r,s){const i=new vn;return r.asyncQueue.enqueueAndForget((async()=>wC(await OC(r),s,i))),i.promise})(xc(t),e)}function n1(t,e,n){const r=n.docs.get(e._key),s=new $h(t);return new vr(t,s,e._key,r,new bs(n.hasPendingWrites,n.fromCache),e.converter)}const r1={maxAttempts:5};function Ci(t,e){if((t=Qe(t)).firestore!==e)throw new G(D.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}class s1{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=ni(e)}get(e){const n=Ci(e,this._firestore),r=new JC(this._firestore);return this._transaction.lookup([n._key]).then((s=>{if(!s||s.length!==1)return ie(24041);const i=s[0];if(i.isFoundDocument())return new fo(this._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new fo(this._firestore,r,n._key,null,n.converter);throw ie(18433,{doc:i})}))}set(e,n,r){const s=Ci(e,this._firestore),i=qh(s.converter,n,r),o=xh(this._dataReader,"Transaction.set",s._key,i,s.converter!==null,r);return this._transaction.set(s._key,o),this}update(e,n,r,...s){const i=Ci(e,this._firestore);let o;return o=typeof(n=Qe(n))=="string"||n instanceof Vo?gE(this._dataReader,"Transaction.update",i._key,n,r,s):mE(this._dataReader,"Transaction.update",i._key,n),this._transaction.update(i._key,o),this}delete(e){const n=Ci(e,this._firestore);return this._transaction.delete(n._key),this}}class i1 extends s1{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Ci(e,this._firestore),r=new $h(this._firestore);return super.get(e).then((s=>new vr(this._firestore,r,n._key,s._document,new bs(!1,!1),n.converter)))}}function o1(t,e,n){t=Xt(t,Mr);const r={...r1,...n};return(function(i){if(i.maxAttempts<1)throw new G(D.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(i,o,c){const l=new vn;return i.asyncQueue.enqueueAndForget((async()=>{const u=await MC(i);new xC(i.asyncQueue,u,c,o,l).ju()})),l.promise})(xc(t),(s=>e(new i1(t,s))),r)}function po(){return new Vh("serverTimestamp")}function a1(t){return new Dh("increment",t)}(function(e,n=!0){(function(s){Xs=s})(Ys),Us(new is("firestore",((r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),c=new Mr(new GR(r.getProvider("auth-internal")),new KR(o,r.getProvider("app-check-internal")),(function(u,f){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new G(D.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new io(u.options.projectId,f)})(o,s),o);return i={useFetchStreams:n,...i},c._setSettings(i),c}),"PUBLIC").setMultipleInstances(!0)),_r(mp,gp,e),_r(mp,gp,"esm2020")})();const c1={apiKey:"AIzaSyBxWCMO2jovFoO2p0bRtjObLG6Wm_BUh3A",authDomain:"vue-blog-501c8.firebaseapp.com",projectId:"vue-blog-501c8",storageBucket:"vue-blog-501c8.firebasestorage.app",messagingSenderId:"453986197221",appId:"1:453986197221:web:822f170abbea04e29c7e0c"},IE=i_(c1),wi=UR(IE),an=jC(IE),dm="salcho5678@gmail.com";async function Cl(t){if(!t.email)return;const e=Rn(an,"users",t.uid),n=await Lc(e);if(n.exists()){const r=n.data();t.email===dm&&r.role!=="admin"&&await Hh(e,{role:"admin"})}else{const r=t.email===dm?"admin":"user",s={uid:t.uid,email:t.email,role:r,createdAt:po()},i={};t.displayName&&(i.displayName=t.displayName),t.photoURL&&(i.photoURL=t.photoURL),await ZC(e,{...s,...i})}}async function kl(t){const e=Rn(an,"users",t),n=await Lc(e);return n.exists()?n.data():null}const Bc=Og("auth",{state:()=>({user:null,profile:null,initialized:!1,_initPromise:null}),getters:{isLoggedIn:t=>!!t.user,canWrite:t=>t.profile?.role==="admin"||t.profile?.role==="master"},actions:{async init(){if(!this.initialized)return this._initPromise?this._initPromise:(this._initPromise=new Promise(t=>{S0(wi,async e=>{this.user=e,e?(await Cl({uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL}),this.profile=await kl(e.uid)):this.profile=null,this.initialized=!0,t()})}),this._initPromise)},async signup(t,e){const n=await I0(wi,t,e);this.user=n.user},async login(t,e){const n=await A0(wi,t,e);this.user=n?.user,await Cl({uid:n.user.uid,email:n.user.email,displayName:n.user.displayName,photoURL:n.user.photoURL}),this.profile=await kl(n.user.uid),this.initialized=!0},async loginWithGoogle(){const t=new On,e=await K0(wi,t);this.user=e.user,await Cl({uid:e.user.uid,email:e.user.email,displayName:e.user.displayName,photoURL:e.user.photoURL}),this.profile=await kl(e.user.uid),this.initialized=!0},async logout(){await P0(wi),this.user=null,this.profile=null,this.initialized=!1,this._initPromise=null}}}),zs=BC(an,"posts");async function Sk(t){return(await t1(zs,{title:t.title,content:t.content,summary:t.summary??"",thumbnailUrl:t.thumbnailUrl??null,category:t.category,tags:t.tags??[],authorId:t.authorId,authorName:t.authorName??"user",views:0,likes:0,isPublished:t.isPublished??!0,createdAt:po(),updatedAt:po()})).id}async function Pk(t,e){const n=Rn(an,"posts",t);await Hh(n,{...e,updatedAt:po()})}async function l1(){const t=Os(zs,rs("isPublished","==",!0),Ja("createdAt","desc"));return(await Fc(t)).docs.map(n=>({id:n.id,...n.data()}))}async function Ck(t){const e=Rn(an,"posts",t),n=await Lc(e);return n.exists()?{id:n.id,...n.data()}:null}async function u1(t){await e1(Rn(an,"posts",t))}const kk=u1;async function Nk(t){const e=Rn(an,"posts",t);await Hh(e,{views:a1(1)})}async function xk(t,e){if(!t||!e)return!1;const n=Rn(an,"posts",t,"likes",e);return(await Lc(n)).exists()}async function Vk(t,e){if(!t||!e)throw new Error("invalid postId or userId");const n=Rn(an,"posts",t),r=Rn(an,"posts",t,"likes",e);return o1(an,async s=>{const i=await s.get(n);if(!i.exists())throw new Error("Post not found");const o=i.data(),c=Number(o.likes||0);if((await s.get(r)).exists()){s.delete(r);const u=Math.max(c-1,0);return s.update(n,{likes:u}),{liked:!1,likes:u}}else{s.set(r,{createdAt:po()});const u=c+1;return s.update(n,{likes:u}),{liked:!0,likes:u}}})}async function Dk(t){const e=Os(zs,rs("isPublished","==",!0),rs("tags","array-contains",t),Ja("createdAt","desc"));return(await Fc(e)).docs.map(r=>({id:r.id,...r.data()}))}async function Ok(){const t=Os(zs,rs("isPublished","==",!0)),e=await Fc(t),n=new Map;return e.forEach(r=>{(r.data().tags||[]).forEach(i=>n.set(i,(n.get(i)??0)+1))}),[...n.entries()].map(([r,s])=>({name:r,count:s})).sort((r,s)=>s.count-r.count)}async function Mk(t){const e=t?.limit??10;let n=Os(zs,rs("isPublished","==",!0),Ja("createdAt","desc"),um(e));t?.tag&&(n=Os(zs,rs("isPublished","==",!0),rs("tags","array-contains",t.tag),Ja("createdAt","desc"),um(e))),t?.cursor&&(n=Os(n,QC(t.cursor)));const r=await Fc(n),s=r.docs.map(c=>({id:c.id,...c.data()})),i=r.docs.length?r.docs[r.docs.length-1]:null,o=r.docs.length<e;return{items:s,nextCursor:i,isEnd:o}}const h1={class:"w-full max-w-sm rounded-2xl border border-slate-200 bg-white px-4 py-3 shadow-xl dark:bg-slate-900 dark:border-slate-700"},f1={class:"flex items-start gap-3"},d1={class:"flex-1 space-y-1"},p1={class:"text-xs font-semibold text-slate-900 dark:text-slate-50"},m1={class:"text-[11px] leading-relaxed text-slate-600 dark:text-slate-300"},g1={class:"mt-3 flex justify-end gap-2"},_1=Ks({__name:"BaseModal",props:{open:{type:Boolean},title:{},message:{},type:{},variant:{}},emits:["close","confirm"],setup(t,{emit:e}){const n=t,r=e,s=ft(()=>{switch(n.type){case"success":return"";case"info":return"";default:return"!"}}),i=ft(()=>{switch(n.type){case"success":return"bg-white-500 text-white";case"info":return"bg-white-500 text-white";default:return"bg-red-500 text-white"}});return(o,c)=>(be(),Jr($v,{to:"body"},[t.open?(be(),Le("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",onClick:c[2]||(c[2]=ww(l=>r("close"),["self"]))},[se("div",h1,[se("div",f1,[se("div",{class:go(["mt-0.5 flex h-7 w-7 items-center justify-center rounded-full text-xs font-bold",i.value])},Je(s.value),3),se("div",d1,[se("h2",p1,Je(t.title||""),1),se("p",m1,Je(t.message),1)])]),se("div",g1,[t.variant==="confirm"?(be(),Le("button",{key:0,type:"button",class:"px-3 py-1.5 rounded-md text-[11px] border border-slate-300 dark:border-slate-600 text-slate-600 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",onClick:c[0]||(c[0]=l=>r("close"))},"  ")):Qr("",!0),se("button",{type:"button",class:"px-3 py-1.5 rounded-md text-[11px] font-semibold bg-slate-900 text-white hover:bg-slate-800 dark:bg-yellow-400 dark:text-slate-900 dark:hover:bg-yellow-300 transition-colors",onClick:c[1]||(c[1]=l=>t.variant==="confirm"?r("confirm"):r("close"))},Je(t.variant==="confirm"?"":""),1)])])])):Qr("",!0)]))}}),AE=Og("modal",{state:()=>({open:!1,title:"",message:"",type:"info",variant:"alert",onConfirm:null}),actions:{alert(t){this.open=!0,this.title=t.title??"",this.message=t.message,this.type=t.type??"info",this.variant="alert",this.onConfirm=null},confirm(t){this.open=!0,this.title=t.title??"",this.message=t.message,this.type=t.type??"error",this.variant="confirm",this.onConfirm=t.onConfirm??null},close(){this.open=!1,this.title="",this.message="",this.onConfirm=null},accept(){const t=this.onConfirm;this.close(),t&&t()}}}),y1=Ks({__name:"GlobalModal",setup(t){const e=AE(),n=()=>{e.close()},r=()=>{e.accept()};return(s,i)=>(be(),Jr(_1,{open:De(e).open,title:De(e).title,message:De(e).message,type:De(e).type,variant:De(e).variant,onClose:n,onConfirm:r},null,8,["open","title","message","type","variant"]))}}),E1={class:"hidden md:flex w-64 flex-col gap-2 rounded-2xl border border-slate-200 dark:border-slate-800 bg-white/95 dark:bg-slate-950/95 p-3 text-[11px] text-slate-600 dark:text-slate-400 sticky top-20 self-start max-h-[calc(100vh-6rem)]"},v1={key:0,class:"pl-1 text-[10px] text-slate-500"},T1={key:1,class:"pl-1 text-[10px] text-red-400"},w1=["onClick"],I1={class:"flex items-center gap-1"},A1={class:"inline-flex h-3 w-3 items-center justify-center rounded-sm border border-slate-400/60 text-[9px] text-slate-500"},b1={class:"text-[9px] text-slate-400"},R1={class:"pl-4 space-y-0.5"},S1=["onClick"],P1={class:"truncate"},C1={class:"text-[9px] text-slate-400"},k1={class:"mt-3 pt-2 border-t border-slate-200 dark:border-slate-800 text-[10px] text-slate-500 dark:text-slate-600"},N1={class:"font-semibold text-black dark:text-yellow-400"},x1={class:"ml-1 text-[11px] text-slate-500 dark:text-slate-300"},V1=Ks({__name:"ExplorerSidebar",props:{posts:{},activePostId:{},loading:{type:Boolean},error:{}},emits:["open-post"],setup(t,{emit:e}){const n=t,r=e,s=["Java","TypeScript","JavaScript","React","Vue","",""];Bc();const i=ft(()=>{const f=new Map;for(const m of n.posts){const _=m.category||"";f.has(_)||f.set(_,[]),f.get(_).push(m)}const d=[];for(const m of s){const _=f.get(m);_&&_.length&&(d.push({category:m,posts:_}),f.delete(m))}for(const[m,_]of f.entries())d.push({category:m,posts:_});return d}),o=nn({});pr(i,f=>{for(const d of f)o.value[d.category]===void 0&&(o.value[d.category]=!0)},{immediate:!0});const c=nn(null),l=nn({});function u(f,d){l.value[f]=d}return pr(()=>n.activePostId,async f=>{if(!f)return;await Eo();const d=l.value[f],m=c.value;if(d&&m){const _=d.getBoundingClientRect(),S=m.getBoundingClientRect(),N=_.top-S.top;(N<0||N>m.clientHeight-40)&&d.scrollIntoView({block:"nearest",behavior:"smooth"})}},{immediate:!0}),(f,d)=>(be(),Le("aside",E1,[d[2]||(d[2]=se("div",{class:"flex items-center justify-between mb-1"},[se("span",{class:"text-[10px] uppercase tracking-[0.14em]"},"explorer"),se("span",{class:"text-slate-500"},"")],-1)),d[3]||(d[3]=se("p",{class:"text-[10px] mb-1 text-slate-400 dark:text-slate-500"},"  ",-1)),t.loading?(be(),Le("div",v1," loading posts... ")):t.error?(be(),Le("div",T1,Je(t.error),1)):(be(),Le("div",{key:2,ref_key:"containerRef",ref:c,class:"pl-1 space-y-1 overflow-y-auto scroll-theme flex-1"},[(be(!0),Le(At,null,Ll(i.value,m=>(be(),Le("div",{key:m.category,class:"space-y-0.5"},[se("button",{type:"button",class:"flex w-full items-center justify-between px-1 py-1 text-[10px] font-medium text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200",onClick:_=>o.value[m.category]=!o.value[m.category]},[se("span",I1,[se("span",A1,Je(o.value[m.category]?"":"+"),1),se("span",null,Je(m.category),1)]),se("span",b1,Je(m.posts.length),1)],8,w1),Ue(ZT,{name:"fade"},{default:Bt(()=>[jv(se("div",R1,[(be(!0),Le(At,null,Ll(m.posts,_=>(be(),Le("button",{key:_.id,ref_for:!0,ref:S=>u(String(_.id),S),type:"button",onClick:S=>r("open-post",_),class:go(["flex w-full items-center justify-between gap-2 rounded-md px-2 py-1.5 text-left transition-colors",t.activePostId===String(_.id)?"bg-slate-200 text-black dark:bg-slate-800 dark:text-yellow-400":"hover:bg-slate-100 hover:text-black dark:hover:bg-slate-900 dark:hover:text-yellow-300"])},[se("span",P1,Je(_.title||"untitled.md"),1),se("span",C1,Je(_.views??0)+"v",1)],10,S1))),128))],512),[[iw,o.value[m.category]]])]),_:2},1024)]))),128))],512)),se("div",k1,[se("p",null,[d[0]||(d[0]=vt(" auth: ",-1)),se("span",N1,[f.$auth?.user?(be(),Le(At,{key:0},[vt(Je(f.$auth.user.email)+" ",1),se("span",x1," ("+Je(f.$auth.profile?.role||"user")+") ",1)],64)):(be(),Le(At,{key:1},[vt(" guest ")],64))])]),d[1]||(d[1]=se("p",null,[vt("env: "),se("span",null,"firebase")],-1))])]))}}),D1=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},O1=D1(V1,[["__scopeId","data-v-807ef6e8"]]),M1={class:"min-h-screen bg-white text-slate-900 dark:bg-slate-950 dark:text-slate-100 font-[system-ui] text-[14px] md:text-[15px] transition-colors duration-300"},L1={class:"sticky top-0 z-40 border-b border-slate-200 dark:border-slate-800 bg-white/90 dark:bg-slate-950/95 backdrop-blur-xl"},F1={class:"mx-auto max-w-6xl px-4 py-3 flex items-center justify-between gap-3"},U1={class:"flex items-center gap-3"},B1={class:"hidden md:flex items-center gap-2 text-[12px] md:text-[13px]"},j1={class:"flex items-center gap-2"},q1={key:0},$1={key:1},H1={key:0,class:"hidden md:flex items-center gap-2 text-[11px] md:text-[12px]"},G1={class:"max-w-[160px] truncate rounded bg-slate-100 dark:bg-slate-900 px-2 py-1 border border-slate-300 dark:border-slate-700 text-slate-700 dark:text-slate-300"},W1={key:1,class:"hidden md:flex items-center gap-2 text-[11px] md:text-[12px]"},z1={key:0},K1={key:1},Q1={key:0,class:"md:hidden border-t border-slate-200 dark:border-slate-800 bg-white/98 dark:bg-slate-950/98"},Y1={class:"mx-auto max-w-6xl px-4 py-2 flex flex-col gap-1 text-[12px]"},J1={key:2,class:"flex items-center justify-between px-2 pt-1"},X1={class:"text-slate-500 text-[11px] truncate"},Z1={key:3,class:"flex gap-2 px-2 pt-1"},ek={class:"mx-auto max-w-6xl px-4 py-4 flex flex-col gap-4 md:flex-row"},tk={class:"flex-1 rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-950 p-4 transition-colors duration-300"},nk={class:"mb-3 md:hidden"},rk=["value"],sk={class:"mb-3 flex items-center gap-2 border-b border-slate-200 dark:border-slate-800 pb-2 text-[10px] text-slate-500 dark:text-slate-600"},ik={class:"flex items-center gap-1 rounded-md bg-slate-100 dark:bg-slate-900 px-2 py-1 text-black dark:text-yellow-400"},ok={key:0},ak={class:"ml-2 text-[10px] text-slate-500 dark:text-slate-400"},ck={key:1},lk={class:"leading-relaxed"},uk=Ks({__name:"App",setup(t){const e=nn(!1),n=Bc(),r=BI(),s=jI(),i=nn(!0),o=nn([]),c=nn(!1),l=nn(""),u=async()=>{c.value=!0;try{o.value=await l1(),l.value=""}catch(P){l.value=P?.message||"   ."}finally{c.value=!1}},f=()=>{const P=document.documentElement;i.value?(P.classList.add("dark"),localStorage.setItem("theme","dark")):(P.classList.remove("dark"),localStorage.setItem("theme","light"))};Ou(async()=>{n.init?.();const P=localStorage.getItem("theme");P==="dark"?i.value=!0:P==="light"&&(i.value=!1),f(),await u(),window.addEventListener("posts-updated",u)}),Mu(()=>{window.removeEventListener("posts-updated",u)}),pr(i,f);const d=ft(()=>s.name==="post-detail"&&typeof s.params.id=="string"?s.params.id:null),m=ft(()=>{if(s.name==="post-detail"&&typeof s.params.id=="string"){const P=o.value.find(x=>String(x.id)===s.params.id);if(P){const x=P.createdAt?.toDate?.().toLocaleDateString?.("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit"})||"";return{title:P.title||"untitled.md",author:P.authorName||"",category:P.category||"other",createdAt:x}}}return null}),_=P=>{P?.id&&r.push({name:"post-detail",params:{id:String(P.id)}})},S=P=>{const O=P.target.value;if(!O){r.push({name:"home"});return}r.push({name:"post-detail",params:{id:O}})},N=async()=>{await n.logout(),r.push({name:"home"})};return(P,x)=>(be(),Le(At,null,[Ue(y1),se("div",M1,[se("header",L1,[se("div",F1,[se("div",U1,[Ue(De(zt),{to:{name:"home"},class:"flex items-center gap-2"},{default:Bt(()=>[...x[7]||(x[7]=[se("img",{src:Ow,alt:"SALCHO",class:"h-8 w-auto object-contain dark:invert dark:brightness-200"},null,-1)])]),_:1}),se("nav",B1,[Ue(De(zt),{to:{name:"home"},class:"rounded-t-md px-3 py-1.5 border border-transparent hover:bg-slate-100 dark:hover:bg-slate-900/70 hover:text-black dark:hover:text-yellow-400 transition-colors","active-class":"bg-slate-200 dark:bg-slate-900 text-black dark:text-yellow-400"},{default:Bt(()=>[...x[8]||(x[8]=[vt("  ",-1)])]),_:1}),P.$auth.profile?.role==="master"||P.$auth.profile?.role==="admin"?(be(),Jr(De(zt),{key:0,to:{name:"new-post"},class:"rounded-t-md px-3 py-1.5 hover:bg-slate-100 dark:hover:bg-slate-900/70 hover:text-black dark:hover:text-yellow-400 transition-colors","active-class":"bg-slate-200 dark:bg-slate-900 text-black dark:text-yellow-400"},{default:Bt(()=>[...x[9]||(x[9]=[vt("   ",-1)])]),_:1})):Qr("",!0),P.$auth.profile?.role==="master"?(be(),Jr(De(zt),{key:1,to:{name:"chat"},class:"rounded-t-md px-3 py-1.5 hover:bg-slate-100 dark:hover:bg-slate-900/70 hover:text-black dark:hover:text-yellow-400 transition-colors","active-class":"bg-slate-200 dark:bg-slate-900 text-black dark:text-yellow-400"},{default:Bt(()=>[...x[10]||(x[10]=[vt("  ",-1)])]),_:1})):Qr("",!0)])]),se("div",j1,[se("button",{onClick:x[0]||(x[0]=O=>i.value=!i.value),class:"flex h-8 w-8 items-center justify-center rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-950 text-[15px] hover:border-black hover:text-black dark:hover:border-yellow-400 dark:hover:text-yellow-400 transition-colors"},[i.value?(be(),Le("span",q1,"")):(be(),Le("span",$1,""))]),De(n).user?(be(),Le("div",H1,[se("span",G1,Je(De(n).user.email),1),se("button",{onClick:N,class:"rounded px-3 py-1.5 text-[11px] font-semibold bg-black text-white hover:bg-slate-800 dark:bg-yellow-400 dark:text-black dark:hover:bg-yellow-300 transition-colors"}," logout ")])):(be(),Le("div",W1,[Ue(De(zt),{to:{name:"login"},class:"rounded px-3 py-1.5 border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-950 hover:border-black hover:text-black dark:hover:border-yellow-400 dark:hover:text-yellow-400 transition-colors"},{default:Bt(()=>[...x[11]||(x[11]=[vt(" login ",-1)])]),_:1}),Ue(De(zt),{to:{name:"signup"},class:"rounded px-3 py-1.5 font-semibold bg-black text-white hover:bg-slate-800 dark:bg-yellow-400 dark:text-black dark:hover:bg-yellow-300 transition-colors"},{default:Bt(()=>[...x[12]||(x[12]=[vt(" sign up ",-1)])]),_:1})])),se("button",{class:"md:hidden flex h-8 w-8 items-center justify-center rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-950 text-[16px]",onClick:x[1]||(x[1]=O=>e.value=!e.value)},[e.value?(be(),Le("span",z1,"")):(be(),Le("span",K1,""))])])]),e.value?(be(),Le("div",Q1,[se("div",Y1,[Ue(De(zt),{to:{name:"home"},class:"px-2 py-1 rounded-md hover:bg-slate-100 dark:hover:bg-slate-900 transition-colors",onClick:x[2]||(x[2]=O=>e.value=!1)},{default:Bt(()=>[...x[13]||(x[13]=[vt("  ",-1)])]),_:1}),P.$auth.profile?.role==="master"||P.$auth.profile?.role==="admin"?(be(),Jr(De(zt),{key:0,to:{name:"new-post"},class:"px-2 py-1 rounded-md hover:bg-slate-100 dark:hover:bg-slate-900 transition-colors",onClick:x[3]||(x[3]=O=>e.value=!1)},{default:Bt(()=>[...x[14]||(x[14]=[vt("   ",-1)])]),_:1})):Qr("",!0),P.$auth.profile?.role==="master"?(be(),Jr(De(zt),{key:1,to:{name:"chat"},class:"rounded-t-md px-3 py-1.5 hover:bg-slate-100 dark:hover:bg-slate-900/70 hover:text-black dark:hover:text-yellow-400 transition-colors","active-class":"bg-slate-200 dark:bg-slate-900 text-black dark:text-yellow-400"},{default:Bt(()=>[...x[15]||(x[15]=[vt("  ",-1)])]),_:1})):Qr("",!0),De(n).user?(be(),Le("div",J1,[se("span",X1,Je(De(n).user.email),1),se("button",{onClick:x[4]||(x[4]=O=>{N(),e.value=!1}),class:"text-[11px] px-2 py-1 rounded bg-black text-white dark:bg-yellow-400 dark:text-black"}," logout ")])):(be(),Le("div",Z1,[Ue(De(zt),{to:{name:"login"},class:"flex-1 text-center text-[11px] px-2 py-1 rounded border border-slate-300 dark:border-slate-700 hover:border-black dark:hover:border-yellow-400",onClick:x[5]||(x[5]=O=>e.value=!1)},{default:Bt(()=>[...x[16]||(x[16]=[vt(" login ",-1)])]),_:1}),Ue(De(zt),{to:{name:"signup"},class:"flex-1 text-center text-[11px] px-2 py-1 rounded bg-black text-white dark:bg-yellow-400 dark:text-black",onClick:x[6]||(x[6]=O=>e.value=!1)},{default:Bt(()=>[...x[17]||(x[17]=[vt(" sign up ",-1)])]),_:1})]))])])):Qr("",!0)]),se("div",ek,[Ue(O1,{posts:o.value,"active-post-id":d.value,loading:c.value,error:l.value,onOpenPost:_},null,8,["posts","active-post-id","loading","error"]),se("main",tk,[se("div",nk,[x[19]||(x[19]=se("label",{class:"block text-[11px] text-slate-500 dark:text-slate-400 mb-1"}," select post ",-1)),se("select",{class:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-950 px-2 py-1.5 text-[12px]",onChange:S},[x[18]||(x[18]=se("option",{value:""},"router-view.tsx ( )",-1)),(be(!0),Le(At,null,Ll(o.value,O=>(be(),Le("option",{key:O.id,value:O.id},Je(O.title||"untitled.md"),9,rk))),128))],32)]),se("div",sk,[se("div",ik,[x[20]||(x[20]=se("span",{class:"h-1.5 w-1.5 rounded-full bg-black dark:bg-yellow-400"},null,-1)),m.value?(be(),Le("span",ok,[vt(Je(m.value.title)+" ",1),se("span",ak,"  "+Je(m.value.author)+"  "+Je(m.value.category)+"  "+Je(m.value.createdAt),1)])):(be(),Le("span",ck,"router-view.tsx"))]),x[21]||(x[21]=se("div",{class:"flex-1 text-right text-[9px]"}," Vue 3  Firebase  Tailwind ",-1))]),se("div",lk,[Ue(De(Kg))])])]),x[22]||(x[22]=LT('<footer class="mt-2 border-t border-slate-200 dark:border-slate-800 bg-white/95 dark:bg-slate-950/95 text-[10px] text-slate-500 dark:text-slate-600"><div class="mx-auto flex max-w-6xl items-center justify-between px-4 py-2 gap-4"><div class="flex items-center gap-2"><span class="h-1.5 w-1.5 rounded-full bg-black dark:bg-yellow-400"></span><span>connected: salcho-blog</span></div><div class="flex items-center gap-3"><span>Ln 42, Col 7</span><span>UTF-8</span><span>Spaces: 2</span><span>TS</span></div></div></footer>',1))])],64))}}),hk="modulepreload",fk=function(t){return"/"+t},pm={},Kn=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let l=function(u){return Promise.all(u.map(f=>Promise.resolve(f).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=o?.nonce||o?.getAttribute("nonce");s=l(n.map(u=>{if(u=fk(u),u in pm)return;pm[u]=!0;const f=u.endsWith(".css"),d=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const m=document.createElement("link");if(m.rel=f?"stylesheet":hk,f||(m.as="script"),m.crossOrigin="",m.href=u,c&&m.setAttribute("nonce",c),document.head.appendChild(m),f)return new Promise((_,S)=>{m.addEventListener("load",_),m.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return s.then(o=>{for(const c of o||[])c.status==="rejected"&&i(c.reason);return e().catch(i)})},mm=()=>Kn(()=>import("./HomeFeed-C68hBDny.js"),[]),dk=()=>Kn(()=>import("./PostDetailPage-BVxDMAwp.js"),__vite__mapDeps([0,1])),pk=()=>Kn(()=>import("./LoginPage-DLzFqCLA.js"),[]),mk=()=>Kn(()=>import("./SignupPage-B4J_M3cl.js"),[]),gk=()=>Kn(()=>import("./NewPostPage-wT4x2dyX.js"),__vite__mapDeps([2,3,4,1])),_k=()=>Kn(()=>import("./EditPostPage-B6E3B4Rn.js"),__vite__mapDeps([5,3,4,1])),yk=()=>Kn(()=>import("./AboutView-CsqaSCIm.js"),[]),Ek=()=>Kn(()=>import("./TagPage-Cw2FH9e4.js"),[]),vk=()=>Kn(()=>import("./Chat-ucrTG7e1.js"),__vite__mapDeps([6,4])),Tk=[{path:"/",name:"home",component:mm},{path:"/posts",name:"posts",component:mm},{path:"/posts/:id",name:"post-detail",component:dk},{path:"/t/:tag",name:"tag-view",props:!0,component:Ek},{path:"/about",name:"about",component:yk},{path:"/login",name:"login",component:pk},{path:"/signup",name:"signup",component:mk},{path:"/chat",name:"chat",component:vk,meta:{requiresAuth:!0,requiresWriter:!0}},{path:"/admin/new",name:"new-post",component:gk,meta:{requiresAuth:!0,requiresWriter:!0}},{path:"/admin/edit/:id",name:"edit-post",component:_k,meta:{requiresAuth:!0,requiresWriter:!0}}],bE=UI({history:EI("/"),routes:Tk,scrollBehavior(){return{top:0}}});bE.beforeEach(async t=>{const e=Bc(),n=AE();e.initialized||await e.init();const r=e.isLoggedIn,s=String(t.name||"");if(t.meta.requiresAuth&&!r)return{name:"login",query:{redirect:t.fullPath}};if(r&&(s==="login"||s==="signup"))return{name:"home"};if(t.meta.requiresWriter){if(!r)return n.alert({title:" ",message:"   .",type:"info"}),{name:"login",query:{redirect:t.fullPath}};if(!e.canWrite)return n.alert({title:" ",message:"   .(https://salcho.kro.kr  )",type:"error"}),{name:"home"}}return!0});const jc=Rw(uk),wk=Cw();jc.use(wk);jc.use(bE);const RE=Bc();RE.init?.();jc.config.globalProperties.$auth=RE;jc.mount("#app");export{LT as $,BC as A,Fc as B,e1 as C,Rn as D,an as E,At as F,po as G,AE as H,Bc as I,Jr as J,kk as K,BI as L,Vk as M,xk as N,Ck as O,Nk as P,Ak as Q,zt as R,iw as S,Sk as T,Eo as U,bk as V,ww as W,Pk as X,Dk as Y,_o as Z,D1 as _,ag as a,bu as a0,Le as b,ft as c,Ks as d,se as e,jv as f,Qr as g,Ll as h,vt as i,Ue as j,Bt as k,jI as l,Ok as m,go as n,Ou as o,Mk as p,be as q,nn as r,t1 as s,Je as t,De as u,Ik as v,pr as w,Os as x,Ja as y,rs as z};
