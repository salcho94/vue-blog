import{x as w,E as h,Q as k,S as _,G as V,T as L,U as N,V as R,d as U,r as n,I as C,b as p,e as a,g as G,f,v as g,t as D,i as m,j as P,k as T,u as q,R as A,l as B,L as S,q as b}from"./index-BTdDFXmU.js";async function E(e){if(!e.email)return;const l=w(h,"users",e.uid);if(!(await k(l)).exists()){const s={uid:e.uid,email:e.email,displayName:e.displayName||void 0,photoURL:e.photoURL||void 0,role:"user",createdAt:V()};await _(l,s)}}const I=new N;async function M(){const e=await L(R,I);return await E(e.user),e.user}const W={class:"max-w-sm mx-auto space-y-4"},j={class:"space-y-2 text-[11px]"},Q=["disabled"],z=["disabled"],F={key:0,class:"text-[10px] text-red-400"},H={class:"text-[10px] text-slate-500"},K=U({__name:"LoginPage",setup(e){const l=n(""),i=n(""),s=n(!1),r=n(""),x=C(),u=S(),c=B(),v=async()=>{s.value=!0,r.value="";try{await x.login(l.value,i.value);const o=c.query.redirect||"/";u.push(o)}catch(o){r.value=o.message||"로그인 실패"}finally{s.value=!1}},y=async()=>{s.value=!0,r.value="";try{await M();const o=c.query.redirect||"/";u.push(o)}catch(o){r.value=o.message||"구글 로그인 실패"}finally{s.value=!1}};return(o,t)=>(b(),p("div",W,[t[4]||(t[4]=a("h1",{class:"text-lg font-semibold text-slate-900 dark:text-slate-100"}," login ",-1)),a("div",j,[f(a("input",{"onUpdate:modelValue":t[0]||(t[0]=d=>l.value=d),type:"email",placeholder:"email",class:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-950 px-2 py-1"},null,512),[[g,l.value]]),f(a("input",{"onUpdate:modelValue":t[1]||(t[1]=d=>i.value=d),type:"password",placeholder:"password",class:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-950 px-2 py-1"},null,512),[[g,i.value]]),a("button",{onClick:v,disabled:s.value,class:"w-full mt-1 rounded-md py-1.5 text-[12px] font-semibold bg-slate-900 text-white hover:bg-slate-800 dark:bg-yellow-400 dark:text-slate-900 dark:hover:bg-yellow-300 disabled:opacity-60 disabled:cursor-not-allowed transition-colors duration-150 focus:outline-none focus:ring-2 focus:ring-slate-900 focus:ring-offset-1 dark:focus:ring-yellow-300 dark:focus:ring-offset-slate-900"}," 로그인 ",8,Q),a("button",{onClick:y,disabled:s.value,class:"w-full mt-1 rounded-md py-1.5 text-[12px] font-semibold bg-slate-900 text-white hover:bg-slate-800 dark:bg-yellow-400 dark:text-slate-900 dark:hover:bg-yellow-300 disabled:opacity-60 disabled:cursor-not-allowed transition-colors duration-150 focus:outline-none focus:ring-2 focus:ring-slate-900 focus:ring-offset-1 dark:focus:ring-yellow-300 dark:focus:ring-offset-slate-900"}," Google 로그인 ",8,z)]),r.value?(b(),p("p",F,D(r.value),1)):G("",!0),a("p",H,[t[3]||(t[3]=m(" 계정이 없나요? ",-1)),P(q(A),{to:"/signup",class:"ml-1 inline-flex items-center px-1.5 py-0.5 rounded text-[10px] font-semibold text-slate-900 hover:bg-slate-100 dark:text-yellow-300 dark:hover:bg-slate-800 transition-colors"},{default:T(()=>[...t[2]||(t[2]=[m(" 회원가입 ",-1)])]),_:1})])]))}});export{K as default};
