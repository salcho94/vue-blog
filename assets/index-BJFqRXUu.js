const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PostDetailPage-rJOOG1x5.js","assets/index-BMSQkwth.js","assets/NewPostPage-BRDgLWvZ.js","assets/upload-B7hhaLRr.js","assets/index-B9ygI19o.js","assets/EditPostPage-BQRCsXX9.js","assets/Chat-DwORK-sC.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Au(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Fe={},Ss=[],vn=()=>{},Em=()=>!1,tc=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),bu=t=>t.startsWith("onUpdate:"),ct=Object.assign,Ru=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},rv=Object.prototype.hasOwnProperty,ke=(t,e)=>rv.call(t,e),ae=Array.isArray,Ps=t=>go(t)==="[object Map]",nc=t=>go(t)==="[object Set]",Of=t=>go(t)==="[object Date]",pe=t=>typeof t=="function",ze=t=>typeof t=="string",bn=t=>typeof t=="symbol",Oe=t=>t!==null&&typeof t=="object",vm=t=>(Oe(t)||pe(t))&&pe(t.then)&&pe(t.catch),Tm=Object.prototype.toString,go=t=>Tm.call(t),sv=t=>go(t).slice(8,-1),wm=t=>go(t)==="[object Object]",Su=t=>ze(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ni=Au(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),rc=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},iv=/-\w/g,Ir=rc(t=>t.replace(iv,e=>e.slice(1).toUpperCase())),ov=/\B([A-Z])/g,Nr=rc(t=>t.replace(ov,"-$1").toLowerCase()),Im=rc(t=>t.charAt(0).toUpperCase()+t.slice(1)),il=rc(t=>t?`on${Im(t)}`:""),pr=(t,e)=>!Object.is(t,e),ia=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},Am=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},sc=t=>{const e=parseFloat(t);return isNaN(e)?t:e},av=t=>{const e=ze(t)?Number(t):NaN;return isNaN(e)?t:e};let Mf;const ic=()=>Mf||(Mf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Pu(t){if(ae(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=ze(r)?hv(r):Pu(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(ze(t)||Oe(t))return t}const cv=/;(?![^(]*\))/g,lv=/:([^]+)/,uv=/\/\*[^]*?\*\//g;function hv(t){const e={};return t.replace(uv,"").split(cv).forEach(n=>{if(n){const r=n.split(lv);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Ys(t){let e="";if(ze(t))e=t;else if(ae(t))for(let n=0;n<t.length;n++){const r=Ys(t[n]);r&&(e+=r+" ")}else if(Oe(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const fv="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",dv=Au(fv);function bm(t){return!!t||t===""}function pv(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=oc(t[r],e[r]);return n}function oc(t,e){if(t===e)return!0;let n=Of(t),r=Of(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=bn(t),r=bn(e),n||r)return t===e;if(n=ae(t),r=ae(e),n||r)return n&&r?pv(t,e):!1;if(n=Oe(t),r=Oe(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const o in t){const c=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(c&&!l||!c&&l||!oc(t[o],e[o]))return!1}}return String(t)===String(e)}function mv(t,e){return t.findIndex(n=>oc(n,e))}const Rm=t=>!!(t&&t.__v_isRef===!0),Le=t=>ze(t)?t:t==null?"":ae(t)||Oe(t)&&(t.toString===Tm||!pe(t.toString))?Rm(t)?Le(t.value):JSON.stringify(t,Sm,2):String(t),Sm=(t,e)=>Rm(e)?Sm(t,e.value):Ps(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[ol(r,i)+" =>"]=s,n),{})}:nc(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>ol(n))}:bn(e)?ol(e):Oe(e)&&!ae(e)&&!wm(e)?String(e):e,ol=(t,e="")=>{var n;return bn(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let wt;class Pm{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=wt,!e&&wt&&(this.index=(wt.scopes||(wt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=wt;try{return wt=this,e()}finally{wt=n}}}on(){++this._on===1&&(this.prevScope=wt,wt=this)}off(){this._on>0&&--this._on===0&&(wt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function Cm(t){return new Pm(t)}function km(){return wt}function gv(t,e=!1){wt&&wt.cleanups.push(t)}let Ue;const al=new WeakSet;class xm{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,wt&&wt.active&&wt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,al.has(this)&&(al.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Vm(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Lf(this),Dm(this);const e=Ue,n=on;Ue=this,on=!0;try{return this.fn()}finally{Om(this),Ue=e,on=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)xu(e);this.deps=this.depsTail=void 0,Lf(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?al.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Dl(this)&&this.run()}get dirty(){return Dl(this)}}let Nm=0,Vi,Di;function Vm(t,e=!1){if(t.flags|=8,e){t.next=Di,Di=t;return}t.next=Vi,Vi=t}function Cu(){Nm++}function ku(){if(--Nm>0)return;if(Di){let e=Di;for(Di=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Vi;){let e=Vi;for(Vi=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function Dm(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Om(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),xu(r),_v(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function Dl(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Mm(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Mm(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Ki)||(t.globalVersion=Ki,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Dl(t))))return;t.flags|=2;const e=t.dep,n=Ue,r=on;Ue=t,on=!0;try{Dm(t);const s=t.fn(t._value);(e.version===0||pr(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{Ue=n,on=r,Om(t),t.flags&=-3}}function xu(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)xu(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function _v(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let on=!0;const Lm=[];function Un(){Lm.push(on),on=!1}function Bn(){const t=Lm.pop();on=t===void 0?!0:t}function Lf(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Ue;Ue=void 0;try{e()}finally{Ue=n}}}let Ki=0;class yv{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Nu{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Ue||!on||Ue===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Ue)n=this.activeLink=new yv(Ue,this),Ue.deps?(n.prevDep=Ue.depsTail,Ue.depsTail.nextDep=n,Ue.depsTail=n):Ue.deps=Ue.depsTail=n,Fm(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=Ue.depsTail,n.nextDep=void 0,Ue.depsTail.nextDep=n,Ue.depsTail=n,Ue.deps===n&&(Ue.deps=r)}return n}trigger(e){this.version++,Ki++,this.notify(e)}notify(e){Cu();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{ku()}}}function Fm(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)Fm(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Ta=new WeakMap,rs=Symbol(""),Ol=Symbol(""),Qi=Symbol("");function At(t,e,n){if(on&&Ue){let r=Ta.get(t);r||Ta.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new Nu),s.map=r,s.key=n),s.track()}}function Vn(t,e,n,r,s,i){const o=Ta.get(t);if(!o){Ki++;return}const c=l=>{l&&l.trigger()};if(Cu(),e==="clear")o.forEach(c);else{const l=ae(t),u=l&&Su(n);if(l&&n==="length"){const f=Number(r);o.forEach((d,m)=>{(m==="length"||m===Qi||!bn(m)&&m>=f)&&c(d)})}else switch((n!==void 0||o.has(void 0))&&c(o.get(n)),u&&c(o.get(Qi)),e){case"add":l?u&&c(o.get("length")):(c(o.get(rs)),Ps(t)&&c(o.get(Ol)));break;case"delete":l||(c(o.get(rs)),Ps(t)&&c(o.get(Ol)));break;case"set":Ps(t)&&c(o.get(rs));break}}ku()}function Ev(t,e){const n=Ta.get(t);return n&&n.get(e)}function Es(t){const e=Se(t);return e===t?e:(At(e,"iterate",Qi),Xt(t)?e:e.map(dt))}function ac(t){return At(t=Se(t),"iterate",Qi),t}const vv={__proto__:null,[Symbol.iterator](){return cl(this,Symbol.iterator,dt)},concat(...t){return Es(this).concat(...t.map(e=>ae(e)?Es(e):e))},entries(){return cl(this,"entries",t=>(t[1]=dt(t[1]),t))},every(t,e){return Pn(this,"every",t,e,void 0,arguments)},filter(t,e){return Pn(this,"filter",t,e,n=>n.map(dt),arguments)},find(t,e){return Pn(this,"find",t,e,dt,arguments)},findIndex(t,e){return Pn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Pn(this,"findLast",t,e,dt,arguments)},findLastIndex(t,e){return Pn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Pn(this,"forEach",t,e,void 0,arguments)},includes(...t){return ll(this,"includes",t)},indexOf(...t){return ll(this,"indexOf",t)},join(t){return Es(this).join(t)},lastIndexOf(...t){return ll(this,"lastIndexOf",t)},map(t,e){return Pn(this,"map",t,e,void 0,arguments)},pop(){return vi(this,"pop")},push(...t){return vi(this,"push",t)},reduce(t,...e){return Ff(this,"reduce",t,e)},reduceRight(t,...e){return Ff(this,"reduceRight",t,e)},shift(){return vi(this,"shift")},some(t,e){return Pn(this,"some",t,e,void 0,arguments)},splice(...t){return vi(this,"splice",t)},toReversed(){return Es(this).toReversed()},toSorted(t){return Es(this).toSorted(t)},toSpliced(...t){return Es(this).toSpliced(...t)},unshift(...t){return vi(this,"unshift",t)},values(){return cl(this,"values",dt)}};function cl(t,e,n){const r=ac(t),s=r[e]();return r!==t&&!Xt(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.done||(i.value=n(i.value)),i}),s}const Tv=Array.prototype;function Pn(t,e,n,r,s,i){const o=ac(t),c=o!==t&&!Xt(t),l=o[e];if(l!==Tv[e]){const d=l.apply(t,i);return c?dt(d):d}let u=n;o!==t&&(c?u=function(d,m){return n.call(this,dt(d),m,t)}:n.length>2&&(u=function(d,m){return n.call(this,d,m,t)}));const f=l.call(o,u,r);return c&&s?s(f):f}function Ff(t,e,n,r){const s=ac(t);let i=n;return s!==t&&(Xt(t)?n.length>3&&(i=function(o,c,l){return n.call(this,o,c,l,t)}):i=function(o,c,l){return n.call(this,o,dt(c),l,t)}),s[e](i,...r)}function ll(t,e,n){const r=Se(t);At(r,"iterate",Qi);const s=r[e](...n);return(s===-1||s===!1)&&Ou(n[0])?(n[0]=Se(n[0]),r[e](...n)):s}function vi(t,e,n=[]){Un(),Cu();const r=Se(t)[e].apply(t,n);return ku(),Bn(),r}const wv=Au("__proto__,__v_isRef,__isVue"),Um=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(bn));function Iv(t){bn(t)||(t=String(t));const e=Se(this);return At(e,"has",t),e.hasOwnProperty(t)}class Bm{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?Vv:Hm:i?qm:$m).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=ae(e);if(!s){let l;if(o&&(l=vv[n]))return l;if(n==="hasOwnProperty")return Iv}const c=Reflect.get(e,n,Qe(e)?e:r);if((bn(n)?Um.has(n):wv(n))||(s||At(e,"get",n),i))return c;if(Qe(c)){const l=o&&Su(n)?c:c.value;return s&&Oe(l)?Ll(l):l}return Oe(c)?s?Ll(c):_o(c):c}}class jm extends Bm{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];if(!this._isShallow){const l=Ar(i);if(!Xt(r)&&!Ar(r)&&(i=Se(i),r=Se(r)),!ae(e)&&Qe(i)&&!Qe(r))return l||(i.value=r),!0}const o=ae(e)&&Su(n)?Number(n)<e.length:ke(e,n),c=Reflect.set(e,n,r,Qe(e)?e:s);return e===Se(s)&&(o?pr(r,i)&&Vn(e,"set",n,r):Vn(e,"add",n,r)),c}deleteProperty(e,n){const r=ke(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&Vn(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!bn(n)||!Um.has(n))&&At(e,"has",n),r}ownKeys(e){return At(e,"iterate",ae(e)?"length":rs),Reflect.ownKeys(e)}}class Av extends Bm{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const bv=new jm,Rv=new Av,Sv=new jm(!0);const Ml=t=>t,Ko=t=>Reflect.getPrototypeOf(t);function Pv(t,e,n){return function(...r){const s=this.__v_raw,i=Se(s),o=Ps(i),c=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=s[t](...r),f=n?Ml:e?wa:dt;return!e&&At(i,"iterate",l?Ol:rs),{next(){const{value:d,done:m}=u.next();return m?{value:d,done:m}:{value:c?[f(d[0]),f(d[1])]:f(d),done:m}},[Symbol.iterator](){return this}}}}function Qo(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Cv(t,e){const n={get(s){const i=this.__v_raw,o=Se(i),c=Se(s);t||(pr(s,c)&&At(o,"get",s),At(o,"get",c));const{has:l}=Ko(o),u=e?Ml:t?wa:dt;if(l.call(o,s))return u(i.get(s));if(l.call(o,c))return u(i.get(c));i!==o&&i.get(s)},get size(){const s=this.__v_raw;return!t&&At(Se(s),"iterate",rs),s.size},has(s){const i=this.__v_raw,o=Se(i),c=Se(s);return t||(pr(s,c)&&At(o,"has",s),At(o,"has",c)),s===c?i.has(s):i.has(s)||i.has(c)},forEach(s,i){const o=this,c=o.__v_raw,l=Se(c),u=e?Ml:t?wa:dt;return!t&&At(l,"iterate",rs),c.forEach((f,d)=>s.call(i,u(f),u(d),o))}};return ct(n,t?{add:Qo("add"),set:Qo("set"),delete:Qo("delete"),clear:Qo("clear")}:{add(s){!e&&!Xt(s)&&!Ar(s)&&(s=Se(s));const i=Se(this);return Ko(i).has.call(i,s)||(i.add(s),Vn(i,"add",s,s)),this},set(s,i){!e&&!Xt(i)&&!Ar(i)&&(i=Se(i));const o=Se(this),{has:c,get:l}=Ko(o);let u=c.call(o,s);u||(s=Se(s),u=c.call(o,s));const f=l.call(o,s);return o.set(s,i),u?pr(i,f)&&Vn(o,"set",s,i):Vn(o,"add",s,i),this},delete(s){const i=Se(this),{has:o,get:c}=Ko(i);let l=o.call(i,s);l||(s=Se(s),l=o.call(i,s)),c&&c.call(i,s);const u=i.delete(s);return l&&Vn(i,"delete",s,void 0),u},clear(){const s=Se(this),i=s.size!==0,o=s.clear();return i&&Vn(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=Pv(s,t,e)}),n}function Vu(t,e){const n=Cv(t,e);return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(ke(n,s)&&s in r?n:r,s,i)}const kv={get:Vu(!1,!1)},xv={get:Vu(!1,!0)},Nv={get:Vu(!0,!1)};const $m=new WeakMap,qm=new WeakMap,Hm=new WeakMap,Vv=new WeakMap;function Dv(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ov(t){return t.__v_skip||!Object.isExtensible(t)?0:Dv(sv(t))}function _o(t){return Ar(t)?t:Du(t,!1,bv,kv,$m)}function Gm(t){return Du(t,!1,Sv,xv,qm)}function Ll(t){return Du(t,!0,Rv,Nv,Hm)}function Du(t,e,n,r,s){if(!Oe(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=Ov(t);if(i===0)return t;const o=s.get(t);if(o)return o;const c=new Proxy(t,i===2?r:n);return s.set(t,c),c}function mr(t){return Ar(t)?mr(t.__v_raw):!!(t&&t.__v_isReactive)}function Ar(t){return!!(t&&t.__v_isReadonly)}function Xt(t){return!!(t&&t.__v_isShallow)}function Ou(t){return t?!!t.__v_raw:!1}function Se(t){const e=t&&t.__v_raw;return e?Se(e):t}function Mu(t){return!ke(t,"__v_skip")&&Object.isExtensible(t)&&Am(t,"__v_skip",!0),t}const dt=t=>Oe(t)?_o(t):t,wa=t=>Oe(t)?Ll(t):t;function Qe(t){return t?t.__v_isRef===!0:!1}function Dt(t){return Wm(t,!1)}function Mv(t){return Wm(t,!0)}function Wm(t,e){return Qe(t)?t:new Lv(t,e)}class Lv{constructor(e,n){this.dep=new Nu,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Se(e),this._value=n?e:dt(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||Xt(e)||Ar(e);e=r?e:Se(e),pr(e,n)&&(this._rawValue=e,this._value=r?e:dt(e),this.dep.trigger())}}function de(t){return Qe(t)?t.value:t}const Fv={get:(t,e,n)=>e==="__v_raw"?t:de(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return Qe(s)&&!Qe(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function zm(t){return mr(t)?t:new Proxy(t,Fv)}function Uv(t){const e=ae(t)?new Array(t.length):{};for(const n in t)e[n]=jv(t,n);return e}class Bv{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return Ev(Se(this._object),this._key)}}function jv(t,e,n){const r=t[e];return Qe(r)?r:new Bv(t,e,n)}class $v{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Nu(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ki-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Ue!==this)return Vm(this,!0),!0}get value(){const e=this.dep.track();return Mm(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function qv(t,e,n=!1){let r,s;return pe(t)?r=t:(r=t.get,s=t.set),new $v(r,s,n)}const Yo={},Ia=new WeakMap;let Kr;function Hv(t,e=!1,n=Kr){if(n){let r=Ia.get(n);r||Ia.set(n,r=[]),r.push(t)}}function Gv(t,e,n=Fe){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:c,call:l}=n,u=q=>s?q:Xt(q)||s===!1||s===0?Dn(q,1):Dn(q);let f,d,m,g,S=!1,P=!1;if(Qe(t)?(d=()=>t.value,S=Xt(t)):mr(t)?(d=()=>u(t),S=!0):ae(t)?(P=!0,S=t.some(q=>mr(q)||Xt(q)),d=()=>t.map(q=>{if(Qe(q))return q.value;if(mr(q))return u(q);if(pe(q))return l?l(q,2):q()})):pe(t)?e?d=l?()=>l(t,2):t:d=()=>{if(m){Un();try{m()}finally{Bn()}}const q=Kr;Kr=f;try{return l?l(t,3,[g]):t(g)}finally{Kr=q}}:d=vn,e&&s){const q=d,J=s===!0?1/0:s;d=()=>Dn(q(),J)}const x=km(),O=()=>{f.stop(),x&&x.active&&Ru(x.effects,f)};if(i&&e){const q=e;e=(...J)=>{q(...J),O()}}let F=P?new Array(t.length).fill(Yo):Yo;const $=q=>{if(!(!(f.flags&1)||!f.dirty&&!q))if(e){const J=f.run();if(s||S||(P?J.some((ne,b)=>pr(ne,F[b])):pr(J,F))){m&&m();const ne=Kr;Kr=f;try{const b=[J,F===Yo?void 0:P&&F[0]===Yo?[]:F,g];F=J,l?l(e,3,b):e(...b)}finally{Kr=ne}}}else f.run()};return c&&c($),f=new xm(d),f.scheduler=o?()=>o($,!1):$,g=q=>Hv(q,!1,f),m=f.onStop=()=>{const q=Ia.get(f);if(q){if(l)l(q,4);else for(const J of q)J();Ia.delete(f)}},e?r?$(!0):F=f.run():o?o($.bind(null,!0),!0):f.run(),O.pause=f.pause.bind(f),O.resume=f.resume.bind(f),O.stop=O,O}function Dn(t,e=1/0,n){if(e<=0||!Oe(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,Qe(t))Dn(t.value,e,n);else if(ae(t))for(let r=0;r<t.length;r++)Dn(t[r],e,n);else if(nc(t)||Ps(t))t.forEach(r=>{Dn(r,e,n)});else if(wm(t)){for(const r in t)Dn(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Dn(t[r],e,n)}return t}function yo(t,e,n,r){try{return r?t(...r):t()}catch(s){cc(s,e,n)}}function ln(t,e,n,r){if(pe(t)){const s=yo(t,e,n,r);return s&&vm(s)&&s.catch(i=>{cc(i,e,n)}),s}if(ae(t)){const s=[];for(let i=0;i<t.length;i++)s.push(ln(t[i],e,n,r));return s}}function cc(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Fe;if(e){let c=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;c;){const f=c.ec;if(f){for(let d=0;d<f.length;d++)if(f[d](t,l,u)===!1)return}c=c.parent}if(i){Un(),yo(i,null,10,[t,l,u]),Bn();return}}Wv(t,n,s,r,o)}function Wv(t,e,n,r=!0,s=!1){if(s)throw t;console.error(t)}const kt=[];let _n=-1;const Cs=[];let or=null,Ts=0;const Km=Promise.resolve();let Aa=null;function Eo(t){const e=Aa||Km;return t?e.then(this?t.bind(this):t):e}function zv(t){let e=_n+1,n=kt.length;for(;e<n;){const r=e+n>>>1,s=kt[r],i=Yi(s);i<t||i===t&&s.flags&2?e=r+1:n=r}return e}function Lu(t){if(!(t.flags&1)){const e=Yi(t),n=kt[kt.length-1];!n||!(t.flags&2)&&e>=Yi(n)?kt.push(t):kt.splice(zv(e),0,t),t.flags|=1,Qm()}}function Qm(){Aa||(Aa=Km.then(Jm))}function Kv(t){ae(t)?Cs.push(...t):or&&t.id===-1?or.splice(Ts+1,0,t):t.flags&1||(Cs.push(t),t.flags|=1),Qm()}function Uf(t,e,n=_n+1){for(;n<kt.length;n++){const r=kt[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;kt.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Ym(t){if(Cs.length){const e=[...new Set(Cs)].sort((n,r)=>Yi(n)-Yi(r));if(Cs.length=0,or){or.push(...e);return}for(or=e,Ts=0;Ts<or.length;Ts++){const n=or[Ts];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}or=null,Ts=0}}const Yi=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Jm(t){try{for(_n=0;_n<kt.length;_n++){const e=kt[_n];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),yo(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;_n<kt.length;_n++){const e=kt[_n];e&&(e.flags&=-2)}_n=-1,kt.length=0,Ym(),Aa=null,(kt.length||Cs.length)&&Jm()}}let Jt=null,Xm=null;function ba(t){const e=Jt;return Jt=t,Xm=t&&t.type.__scopeId||null,e}function $t(t,e=Jt,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&Ca(-1);const i=ba(e);let o;try{o=t(...s)}finally{ba(i),r._d&&Ca(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Qv(t,e){if(Jt===null)return t;const n=dc(Jt),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,c,l=Fe]=e[s];i&&(pe(i)&&(i={mounted:i,updated:i}),i.deep&&Dn(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:c,modifiers:l}))}return t}function Hr(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const c=s[o];i&&(c.oldValue=i[o].value);let l=c.dir[r];l&&(Un(),ln(l,n,8,[t.el,c,t,e]),Bn())}}const Zm=Symbol("_vte"),eg=t=>t.__isTeleport,Oi=t=>t&&(t.disabled||t.disabled===""),Bf=t=>t&&(t.defer||t.defer===""),jf=t=>typeof SVGElement<"u"&&t instanceof SVGElement,$f=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,Fl=(t,e)=>{const n=t&&t.to;return ze(n)?e?e(n):null:n},tg={name:"Teleport",__isTeleport:!0,process(t,e,n,r,s,i,o,c,l,u){const{mc:f,pc:d,pbc:m,o:{insert:g,querySelector:S,createText:P,createComment:x}}=u,O=Oi(e.props);let{shapeFlag:F,children:$,dynamicChildren:q}=e;if(t==null){const J=e.el=P(""),ne=e.anchor=P("");g(J,n,r),g(ne,n,r);const b=(y,w)=>{F&16&&f($,y,w,s,i,o,c,l)},E=()=>{const y=e.target=Fl(e.props,S),w=ng(y,e,P,g);y&&(o!=="svg"&&jf(y)?o="svg":o!=="mathml"&&$f(y)&&(o="mathml"),s&&s.isCE&&(s.ce._teleportTargets||(s.ce._teleportTargets=new Set)).add(y),O||(b(y,w),oa(e,!1)))};O&&(b(n,ne),oa(e,!0)),Bf(e.props)?(e.el.__isMounted=!1,Pt(()=>{E(),delete e.el.__isMounted},i)):E()}else{if(Bf(e.props)&&t.el.__isMounted===!1){Pt(()=>{tg.process(t,e,n,r,s,i,o,c,l,u)},i);return}e.el=t.el,e.targetStart=t.targetStart;const J=e.anchor=t.anchor,ne=e.target=t.target,b=e.targetAnchor=t.targetAnchor,E=Oi(t.props),y=E?n:ne,w=E?J:b;if(o==="svg"||jf(ne)?o="svg":(o==="mathml"||$f(ne))&&(o="mathml"),q?(m(t.dynamicChildren,q,y,s,i,o,c),ju(t,e,!0)):l||d(t,e,y,w,s,i,o,c,!1),O)E?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):Jo(e,n,J,u,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const A=e.target=Fl(e.props,S);A&&Jo(e,A,null,u,0)}else E&&Jo(e,ne,b,u,1);oa(e,O)}},remove(t,e,n,{um:r,o:{remove:s}},i){const{shapeFlag:o,children:c,anchor:l,targetStart:u,targetAnchor:f,target:d,props:m}=t;if(d&&(s(u),s(f)),i&&s(l),o&16){const g=i||!Oi(m);for(let S=0;S<c.length;S++){const P=c[S];r(P,e,n,g,!!P.dynamicChildren)}}},move:Jo,hydrate:Yv};function Jo(t,e,n,{o:{insert:r},m:s},i=2){i===0&&r(t.targetAnchor,e,n);const{el:o,anchor:c,shapeFlag:l,children:u,props:f}=t,d=i===2;if(d&&r(o,e,n),(!d||Oi(f))&&l&16)for(let m=0;m<u.length;m++)s(u[m],e,n,2);d&&r(c,e,n)}function Yv(t,e,n,r,s,i,{o:{nextSibling:o,parentNode:c,querySelector:l,insert:u,createText:f}},d){function m(P,x,O,F){x.anchor=d(o(P),x,c(P),n,r,s,i),x.targetStart=O,x.targetAnchor=F}const g=e.target=Fl(e.props,l),S=Oi(e.props);if(g){const P=g._lpa||g.firstChild;if(e.shapeFlag&16)if(S)m(t,e,P,P&&o(P));else{e.anchor=o(t);let x=P;for(;x;){if(x&&x.nodeType===8){if(x.data==="teleport start anchor")e.targetStart=x;else if(x.data==="teleport anchor"){e.targetAnchor=x,g._lpa=e.targetAnchor&&o(e.targetAnchor);break}}x=o(x)}e.targetAnchor||ng(g,e,f,u),d(P&&o(P),e,g,n,r,s,i)}oa(e,S)}else S&&e.shapeFlag&16&&m(t,e,t,o(t));return e.anchor&&o(e.anchor)}const Jv=tg;function oa(t,e){const n=t.ctx;if(n&&n.ut){let r,s;for(e?(r=t.el,s=t.anchor):(r=t.targetStart,s=t.targetAnchor);r&&r!==s;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function ng(t,e,n,r){const s=e.targetStart=n(""),i=e.targetAnchor=n("");return s[Zm]=i,t&&(r(s,t),r(i,t)),i}const Nn=Symbol("_leaveCb"),Xo=Symbol("_enterCb");function Xv(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return vo(()=>{t.isMounted=!0}),ug(()=>{t.isUnmounting=!0}),t}const Qt=[Function,Array],rg={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Qt,onEnter:Qt,onAfterEnter:Qt,onEnterCancelled:Qt,onBeforeLeave:Qt,onLeave:Qt,onAfterLeave:Qt,onLeaveCancelled:Qt,onBeforeAppear:Qt,onAppear:Qt,onAfterAppear:Qt,onAppearCancelled:Qt},sg=t=>{const e=t.subTree;return e.component?sg(e.component):e},Zv={name:"BaseTransition",props:rg,setup(t,{slots:e}){const n=qu(),r=Xv();return()=>{const s=e.default&&ag(e.default(),!0);if(!s||!s.length)return;const i=ig(s),o=Se(t),{mode:c}=o;if(r.isLeaving)return ul(i);const l=qf(i);if(!l)return ul(i);let u=Ul(l,o,r,n,d=>u=d);l.type!==xt&&Ji(l,u);let f=n.subTree&&qf(n.subTree);if(f&&f.type!==xt&&!Yr(f,l)&&sg(n).type!==xt){let d=Ul(f,o,r,n);if(Ji(f,d),c==="out-in"&&l.type!==xt)return r.isLeaving=!0,d.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete d.afterLeave,f=void 0},ul(i);c==="in-out"&&l.type!==xt?d.delayLeave=(m,g,S)=>{const P=og(r,f);P[String(f.key)]=f,m[Nn]=()=>{g(),m[Nn]=void 0,delete u.delayedLeave,f=void 0},u.delayedLeave=()=>{S(),delete u.delayedLeave,f=void 0}}:f=void 0}else f&&(f=void 0);return i}}};function ig(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==xt){e=n;break}}return e}const eT=Zv;function og(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Ul(t,e,n,r,s){const{appear:i,mode:o,persisted:c=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:f,onEnterCancelled:d,onBeforeLeave:m,onLeave:g,onAfterLeave:S,onLeaveCancelled:P,onBeforeAppear:x,onAppear:O,onAfterAppear:F,onAppearCancelled:$}=e,q=String(t.key),J=og(n,t),ne=(y,w)=>{y&&ln(y,r,9,w)},b=(y,w)=>{const A=w[1];ne(y,w),ae(y)?y.every(I=>I.length<=1)&&A():y.length<=1&&A()},E={mode:o,persisted:c,beforeEnter(y){let w=l;if(!n.isMounted)if(i)w=x||l;else return;y[Nn]&&y[Nn](!0);const A=J[q];A&&Yr(t,A)&&A.el[Nn]&&A.el[Nn](),ne(w,[y])},enter(y){let w=u,A=f,I=d;if(!n.isMounted)if(i)w=O||u,A=F||f,I=$||d;else return;let v=!1;const we=y[Xo]=$e=>{v||(v=!0,$e?ne(I,[y]):ne(A,[y]),E.delayedLeave&&E.delayedLeave(),y[Xo]=void 0)};w?b(w,[y,we]):we()},leave(y,w){const A=String(t.key);if(y[Xo]&&y[Xo](!0),n.isUnmounting)return w();ne(m,[y]);let I=!1;const v=y[Nn]=we=>{I||(I=!0,w(),we?ne(P,[y]):ne(S,[y]),y[Nn]=void 0,J[A]===t&&delete J[A])};J[A]=t,g?b(g,[y,v]):v()},clone(y){const w=Ul(y,e,n,r,s);return s&&s(w),w}};return E}function ul(t){if(lc(t))return t=br(t),t.children=null,t}function qf(t){if(!lc(t))return eg(t.type)&&t.children?ig(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&pe(n.default))return n.default()}}function Ji(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Ji(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function ag(t,e=!1,n){let r=[],s=0;for(let i=0;i<t.length;i++){let o=t[i];const c=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===pt?(o.patchFlag&128&&s++,r=r.concat(ag(o.children,e,c))):(e||o.type!==xt)&&r.push(c!=null?br(o,{key:c}):o)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}function Vr(t,e){return pe(t)?ct({name:t.name},e,{setup:t}):t}function cg(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const Ra=new WeakMap;function Mi(t,e,n,r,s=!1){if(ae(t)){t.forEach((S,P)=>Mi(S,e&&(ae(e)?e[P]:e),n,r,s));return}if(Li(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Mi(t,e,n,r.component.subTree);return}const i=r.shapeFlag&4?dc(r.component):r.el,o=s?null:i,{i:c,r:l}=t,u=e&&e.r,f=c.refs===Fe?c.refs={}:c.refs,d=c.setupState,m=Se(d),g=d===Fe?Em:S=>ke(m,S);if(u!=null&&u!==l){if(Hf(e),ze(u))f[u]=null,g(u)&&(d[u]=null);else if(Qe(u)){u.value=null;const S=e;S.k&&(f[S.k]=null)}}if(pe(l))yo(l,c,12,[o,f]);else{const S=ze(l),P=Qe(l);if(S||P){const x=()=>{if(t.f){const O=S?g(l)?d[l]:f[l]:l.value;if(s)ae(O)&&Ru(O,i);else if(ae(O))O.includes(i)||O.push(i);else if(S)f[l]=[i],g(l)&&(d[l]=f[l]);else{const F=[i];l.value=F,t.k&&(f[t.k]=F)}}else S?(f[l]=o,g(l)&&(d[l]=o)):P&&(l.value=o,t.k&&(f[t.k]=o))};if(o){const O=()=>{x(),Ra.delete(t)};O.id=-1,Ra.set(t,O),Pt(O,n)}else Hf(t),x()}}}function Hf(t){const e=Ra.get(t);e&&(e.flags|=8,Ra.delete(t))}ic().requestIdleCallback;ic().cancelIdleCallback;const Li=t=>!!t.type.__asyncLoader,lc=t=>t.type.__isKeepAlive;function tT(t,e){lg(t,"a",e)}function nT(t,e){lg(t,"da",e)}function lg(t,e,n=Nt){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(uc(e,r,n),n){let s=n.parent;for(;s&&s.parent;)lc(s.parent.vnode)&&rT(r,e,n,s),s=s.parent}}function rT(t,e,n,r){const s=uc(e,t,r,!0);Fu(()=>{Ru(r[e],s)},n)}function uc(t,e,n=Nt,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Un();const c=To(n),l=ln(e,n,t,o);return c(),Bn(),l});return r?s.unshift(i):s.push(i),i}}const Gn=t=>(e,n=Nt)=>{(!Zi||t==="sp")&&uc(t,(...r)=>e(...r),n)},sT=Gn("bm"),vo=Gn("m"),iT=Gn("bu"),oT=Gn("u"),ug=Gn("bum"),Fu=Gn("um"),aT=Gn("sp"),cT=Gn("rtg"),lT=Gn("rtc");function uT(t,e=Nt){uc("ec",t,e)}const hT=Symbol.for("v-ndc");function Sa(t,e,n,r){let s;const i=n,o=ae(t);if(o||ze(t)){const c=o&&mr(t);let l=!1,u=!1;c&&(l=!Xt(t),u=Ar(t),t=ac(t)),s=new Array(t.length);for(let f=0,d=t.length;f<d;f++)s[f]=e(l?u?wa(dt(t[f])):dt(t[f]):t[f],f,void 0,i)}else if(typeof t=="number"){s=new Array(t);for(let c=0;c<t;c++)s[c]=e(c+1,c,void 0,i)}else if(Oe(t))if(t[Symbol.iterator])s=Array.from(t,(c,l)=>e(c,l,void 0,i));else{const c=Object.keys(t);s=new Array(c.length);for(let l=0,u=c.length;l<u;l++){const f=c[l];s[l]=e(t[f],f,l,i)}}else s=[];return s}const Bl=t=>t?Cg(t)?dc(t):Bl(t.parent):null,Fi=ct(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Bl(t.parent),$root:t=>Bl(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>fg(t),$forceUpdate:t=>t.f||(t.f=()=>{Lu(t.update)}),$nextTick:t=>t.n||(t.n=Eo.bind(t.proxy)),$watch:t=>VT.bind(t)}),hl=(t,e)=>t!==Fe&&!t.__isScriptSetup&&ke(t,e),fT={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:c,appContext:l}=t;let u;if(e[0]!=="$"){const g=o[e];if(g!==void 0)switch(g){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(hl(r,e))return o[e]=1,r[e];if(s!==Fe&&ke(s,e))return o[e]=2,s[e];if((u=t.propsOptions[0])&&ke(u,e))return o[e]=3,i[e];if(n!==Fe&&ke(n,e))return o[e]=4,n[e];jl&&(o[e]=0)}}const f=Fi[e];let d,m;if(f)return e==="$attrs"&&At(t.attrs,"get",""),f(t);if((d=c.__cssModules)&&(d=d[e]))return d;if(n!==Fe&&ke(n,e))return o[e]=4,n[e];if(m=l.config.globalProperties,ke(m,e))return m[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return hl(s,e)?(s[e]=n,!0):r!==Fe&&ke(r,e)?(r[e]=n,!0):ke(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:i,type:o}},c){let l,u;return!!(n[c]||t!==Fe&&c[0]!=="$"&&ke(t,c)||hl(e,c)||(l=i[0])&&ke(l,c)||ke(r,c)||ke(Fi,c)||ke(s.config.globalProperties,c)||(u=o.__cssModules)&&u[c])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:ke(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Gf(t){return ae(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let jl=!0;function dT(t){const e=fg(t),n=t.proxy,r=t.ctx;jl=!1,e.beforeCreate&&Wf(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:c,provide:l,inject:u,created:f,beforeMount:d,mounted:m,beforeUpdate:g,updated:S,activated:P,deactivated:x,beforeDestroy:O,beforeUnmount:F,destroyed:$,unmounted:q,render:J,renderTracked:ne,renderTriggered:b,errorCaptured:E,serverPrefetch:y,expose:w,inheritAttrs:A,components:I,directives:v,filters:we}=e;if(u&&pT(u,r,null),o)for(const fe in o){const Ie=o[fe];pe(Ie)&&(r[fe]=Ie.bind(n))}if(s){const fe=s.call(n,n);Oe(fe)&&(t.data=_o(fe))}if(jl=!0,i)for(const fe in i){const Ie=i[fe],Ot=pe(Ie)?Ie.bind(n,n):pe(Ie.get)?Ie.get.bind(n,n):vn,dn=!pe(Ie)&&pe(Ie.set)?Ie.set.bind(n):vn,Ft=Xe({get:Ot,set:dn});Object.defineProperty(r,fe,{enumerable:!0,configurable:!0,get:()=>Ft.value,set:lt=>Ft.value=lt})}if(c)for(const fe in c)hg(c[fe],r,n,fe);if(l){const fe=pe(l)?l.call(n):l;Reflect.ownKeys(fe).forEach(Ie=>{aa(Ie,fe[Ie])})}f&&Wf(f,t,"c");function xe(fe,Ie){ae(Ie)?Ie.forEach(Ot=>fe(Ot.bind(n))):Ie&&fe(Ie.bind(n))}if(xe(sT,d),xe(vo,m),xe(iT,g),xe(oT,S),xe(tT,P),xe(nT,x),xe(uT,E),xe(lT,ne),xe(cT,b),xe(ug,F),xe(Fu,q),xe(aT,y),ae(w))if(w.length){const fe=t.exposed||(t.exposed={});w.forEach(Ie=>{Object.defineProperty(fe,Ie,{get:()=>n[Ie],set:Ot=>n[Ie]=Ot,enumerable:!0})})}else t.exposed||(t.exposed={});J&&t.render===vn&&(t.render=J),A!=null&&(t.inheritAttrs=A),I&&(t.components=I),v&&(t.directives=v),y&&cg(t)}function pT(t,e,n=vn){ae(t)&&(t=$l(t));for(const r in t){const s=t[r];let i;Oe(s)?"default"in s?i=Zt(s.from||r,s.default,!0):i=Zt(s.from||r):i=Zt(s),Qe(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function Wf(t,e,n){ln(ae(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function hg(t,e,n,r){let s=r.includes(".")?Ag(n,r):()=>n[r];if(ze(t)){const i=e[t];pe(i)&&gr(s,i)}else if(pe(t))gr(s,t.bind(n));else if(Oe(t))if(ae(t))t.forEach(i=>hg(i,e,n,r));else{const i=pe(t.handler)?t.handler.bind(n):e[t.handler];pe(i)&&gr(s,i,t)}}function fg(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,c=i.get(e);let l;return c?l=c:!s.length&&!n&&!r?l=e:(l={},s.length&&s.forEach(u=>Pa(l,u,o,!0)),Pa(l,e,o)),Oe(e)&&i.set(e,l),l}function Pa(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&Pa(t,i,n,!0),s&&s.forEach(o=>Pa(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const c=mT[o]||n&&n[o];t[o]=c?c(t[o],e[o]):e[o]}return t}const mT={data:zf,props:Kf,emits:Kf,methods:bi,computed:bi,beforeCreate:St,created:St,beforeMount:St,mounted:St,beforeUpdate:St,updated:St,beforeDestroy:St,beforeUnmount:St,destroyed:St,unmounted:St,activated:St,deactivated:St,errorCaptured:St,serverPrefetch:St,components:bi,directives:bi,watch:_T,provide:zf,inject:gT};function zf(t,e){return e?t?function(){return ct(pe(t)?t.call(this,this):t,pe(e)?e.call(this,this):e)}:e:t}function gT(t,e){return bi($l(t),$l(e))}function $l(t){if(ae(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function St(t,e){return t?[...new Set([].concat(t,e))]:e}function bi(t,e){return t?ct(Object.create(null),t,e):e}function Kf(t,e){return t?ae(t)&&ae(e)?[...new Set([...t,...e])]:ct(Object.create(null),Gf(t),Gf(e??{})):e}function _T(t,e){if(!t)return e;if(!e)return t;const n=ct(Object.create(null),t);for(const r in e)n[r]=St(t[r],e[r]);return n}function dg(){return{app:null,config:{isNativeTag:Em,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let yT=0;function ET(t,e){return function(r,s=null){pe(r)||(r=ct({},r)),s!=null&&!Oe(s)&&(s=null);const i=dg(),o=new WeakSet,c=[];let l=!1;const u=i.app={_uid:yT++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:ew,get config(){return i.config},set config(f){},use(f,...d){return o.has(f)||(f&&pe(f.install)?(o.add(f),f.install(u,...d)):pe(f)&&(o.add(f),f(u,...d))),u},mixin(f){return i.mixins.includes(f)||i.mixins.push(f),u},component(f,d){return d?(i.components[f]=d,u):i.components[f]},directive(f,d){return d?(i.directives[f]=d,u):i.directives[f]},mount(f,d,m){if(!l){const g=u._ceVNode||De(r,s);return g.appContext=i,m===!0?m="svg":m===!1&&(m=void 0),t(g,f,m),l=!0,u._container=f,f.__vue_app__=u,dc(g.component)}},onUnmount(f){c.push(f)},unmount(){l&&(ln(c,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(f,d){return i.provides[f]=d,u},runWithContext(f){const d=ss;ss=u;try{return f()}finally{ss=d}}};return u}}let ss=null;function aa(t,e){if(Nt){let n=Nt.provides;const r=Nt.parent&&Nt.parent.provides;r===n&&(n=Nt.provides=Object.create(r)),n[t]=e}}function Zt(t,e,n=!1){const r=qu();if(r||ss){let s=ss?ss._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&pe(e)?e.call(r&&r.proxy):e}}function vT(){return!!(qu()||ss)}const pg={},mg=()=>Object.create(pg),gg=t=>Object.getPrototypeOf(t)===pg;function TT(t,e,n,r=!1){const s={},i=mg();t.propsDefaults=Object.create(null),_g(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:Gm(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function wT(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,c=Se(s),[l]=t.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const f=t.vnode.dynamicProps;for(let d=0;d<f.length;d++){let m=f[d];if(hc(t.emitsOptions,m))continue;const g=e[m];if(l)if(ke(i,m))g!==i[m]&&(i[m]=g,u=!0);else{const S=Ir(m);s[S]=ql(l,c,S,g,t,!1)}else g!==i[m]&&(i[m]=g,u=!0)}}}else{_g(t,e,s,i)&&(u=!0);let f;for(const d in c)(!e||!ke(e,d)&&((f=Nr(d))===d||!ke(e,f)))&&(l?n&&(n[d]!==void 0||n[f]!==void 0)&&(s[d]=ql(l,c,d,void 0,t,!0)):delete s[d]);if(i!==c)for(const d in i)(!e||!ke(e,d))&&(delete i[d],u=!0)}u&&Vn(t.attrs,"set","")}function _g(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,c;if(e)for(let l in e){if(Ni(l))continue;const u=e[l];let f;s&&ke(s,f=Ir(l))?!i||!i.includes(f)?n[f]=u:(c||(c={}))[f]=u:hc(t.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,o=!0)}if(i){const l=Se(n),u=c||Fe;for(let f=0;f<i.length;f++){const d=i[f];n[d]=ql(s,l,d,u[d],t,!ke(u,d))}}return o}function ql(t,e,n,r,s,i){const o=t[n];if(o!=null){const c=ke(o,"default");if(c&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&pe(l)){const{propsDefaults:u}=s;if(n in u)r=u[n];else{const f=To(s);r=u[n]=l.call(null,e),f()}}else r=l;s.ce&&s.ce._setProp(n,r)}o[0]&&(i&&!c?r=!1:o[1]&&(r===""||r===Nr(n))&&(r=!0))}return r}const IT=new WeakMap;function yg(t,e,n=!1){const r=n?IT:e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},c=[];let l=!1;if(!pe(t)){const f=d=>{l=!0;const[m,g]=yg(d,e,!0);ct(o,m),g&&c.push(...g)};!n&&e.mixins.length&&e.mixins.forEach(f),t.extends&&f(t.extends),t.mixins&&t.mixins.forEach(f)}if(!i&&!l)return Oe(t)&&r.set(t,Ss),Ss;if(ae(i))for(let f=0;f<i.length;f++){const d=Ir(i[f]);Qf(d)&&(o[d]=Fe)}else if(i)for(const f in i){const d=Ir(f);if(Qf(d)){const m=i[f],g=o[d]=ae(m)||pe(m)?{type:m}:ct({},m),S=g.type;let P=!1,x=!0;if(ae(S))for(let O=0;O<S.length;++O){const F=S[O],$=pe(F)&&F.name;if($==="Boolean"){P=!0;break}else $==="String"&&(x=!1)}else P=pe(S)&&S.name==="Boolean";g[0]=P,g[1]=x,(P||ke(g,"default"))&&c.push(d)}}const u=[o,c];return Oe(t)&&r.set(t,u),u}function Qf(t){return t[0]!=="$"&&!Ni(t)}const Uu=t=>t==="_"||t==="_ctx"||t==="$stable",Bu=t=>ae(t)?t.map(En):[En(t)],AT=(t,e,n)=>{if(e._n)return e;const r=$t((...s)=>Bu(e(...s)),n);return r._c=!1,r},Eg=(t,e,n)=>{const r=t._ctx;for(const s in t){if(Uu(s))continue;const i=t[s];if(pe(i))e[s]=AT(s,i,r);else if(i!=null){const o=Bu(i);e[s]=()=>o}}},vg=(t,e)=>{const n=Bu(e);t.slots.default=()=>n},Tg=(t,e,n)=>{for(const r in e)(n||!Uu(r))&&(t[r]=e[r])},bT=(t,e,n)=>{const r=t.slots=mg();if(t.vnode.shapeFlag&32){const s=e._;s?(Tg(r,e,n),n&&Am(r,"_",s,!0)):Eg(e,r)}else e&&vg(t,e)},RT=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=Fe;if(r.shapeFlag&32){const c=e._;c?n&&c===1?i=!1:Tg(s,e,n):(i=!e.$stable,Eg(e,s)),o=e}else e&&(vg(t,e),o={default:1});if(i)for(const c in s)!Uu(c)&&o[c]==null&&delete s[c]},Pt=jT;function ST(t){return PT(t)}function PT(t,e){const n=ic();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:c,createComment:l,setText:u,setElementText:f,parentNode:d,nextSibling:m,setScopeId:g=vn,insertStaticContent:S}=t,P=(T,R,C,L=null,B=null,D=null,K=void 0,G=null,H=!!R.dynamicChildren)=>{if(T===R)return;T&&!Yr(T,R)&&(L=M(T),lt(T,B,D,!0),T=null),R.patchFlag===-2&&(H=!1,R.dynamicChildren=null);const{type:j,ref:oe,shapeFlag:X}=R;switch(j){case fc:x(T,R,C,L);break;case xt:O(T,R,C,L);break;case ca:T==null&&F(R,C,L,K);break;case pt:I(T,R,C,L,B,D,K,G,H);break;default:X&1?J(T,R,C,L,B,D,K,G,H):X&6?v(T,R,C,L,B,D,K,G,H):(X&64||X&128)&&j.process(T,R,C,L,B,D,K,G,H,re)}oe!=null&&B?Mi(oe,T&&T.ref,D,R||T,!R):oe==null&&T&&T.ref!=null&&Mi(T.ref,null,D,T,!0)},x=(T,R,C,L)=>{if(T==null)r(R.el=c(R.children),C,L);else{const B=R.el=T.el;R.children!==T.children&&u(B,R.children)}},O=(T,R,C,L)=>{T==null?r(R.el=l(R.children||""),C,L):R.el=T.el},F=(T,R,C,L)=>{[T.el,T.anchor]=S(T.children,R,C,L,T.el,T.anchor)},$=({el:T,anchor:R},C,L)=>{let B;for(;T&&T!==R;)B=m(T),r(T,C,L),T=B;r(R,C,L)},q=({el:T,anchor:R})=>{let C;for(;T&&T!==R;)C=m(T),s(T),T=C;s(R)},J=(T,R,C,L,B,D,K,G,H)=>{if(R.type==="svg"?K="svg":R.type==="math"&&(K="mathml"),T==null)ne(R,C,L,B,D,K,G,H);else{const j=T.el&&T.el._isVueCE?T.el:null;try{j&&j._beginPatch(),y(T,R,B,D,K,G,H)}finally{j&&j._endPatch()}}},ne=(T,R,C,L,B,D,K,G)=>{let H,j;const{props:oe,shapeFlag:X,transition:se,dirs:ce}=T;if(H=T.el=o(T.type,D,oe&&oe.is,oe),X&8?f(H,T.children):X&16&&E(T.children,H,null,L,B,fl(T,D),K,G),ce&&Hr(T,null,L,"created"),b(H,T,T.scopeId,K,L),oe){for(const Ne in oe)Ne!=="value"&&!Ni(Ne)&&i(H,Ne,null,oe[Ne],D,L);"value"in oe&&i(H,"value",null,oe.value,D),(j=oe.onVnodeBeforeMount)&&gn(j,L,T)}ce&&Hr(T,null,L,"beforeMount");const _e=CT(B,se);_e&&se.beforeEnter(H),r(H,R,C),((j=oe&&oe.onVnodeMounted)||_e||ce)&&Pt(()=>{j&&gn(j,L,T),_e&&se.enter(H),ce&&Hr(T,null,L,"mounted")},B)},b=(T,R,C,L,B)=>{if(C&&g(T,C),L)for(let D=0;D<L.length;D++)g(T,L[D]);if(B){let D=B.subTree;if(R===D||Rg(D.type)&&(D.ssContent===R||D.ssFallback===R)){const K=B.vnode;b(T,K,K.scopeId,K.slotScopeIds,B.parent)}}},E=(T,R,C,L,B,D,K,G,H=0)=>{for(let j=H;j<T.length;j++){const oe=T[j]=G?ar(T[j]):En(T[j]);P(null,oe,R,C,L,B,D,K,G)}},y=(T,R,C,L,B,D,K)=>{const G=R.el=T.el;let{patchFlag:H,dynamicChildren:j,dirs:oe}=R;H|=T.patchFlag&16;const X=T.props||Fe,se=R.props||Fe;let ce;if(C&&Gr(C,!1),(ce=se.onVnodeBeforeUpdate)&&gn(ce,C,R,T),oe&&Hr(R,T,C,"beforeUpdate"),C&&Gr(C,!0),(X.innerHTML&&se.innerHTML==null||X.textContent&&se.textContent==null)&&f(G,""),j?w(T.dynamicChildren,j,G,C,L,fl(R,B),D):K||Ie(T,R,G,null,C,L,fl(R,B),D,!1),H>0){if(H&16)A(G,X,se,C,B);else if(H&2&&X.class!==se.class&&i(G,"class",null,se.class,B),H&4&&i(G,"style",X.style,se.style,B),H&8){const _e=R.dynamicProps;for(let Ne=0;Ne<_e.length;Ne++){const Re=_e[Ne],Et=X[Re],vt=se[Re];(vt!==Et||Re==="value")&&i(G,Re,Et,vt,B,C)}}H&1&&T.children!==R.children&&f(G,R.children)}else!K&&j==null&&A(G,X,se,C,B);((ce=se.onVnodeUpdated)||oe)&&Pt(()=>{ce&&gn(ce,C,R,T),oe&&Hr(R,T,C,"updated")},L)},w=(T,R,C,L,B,D,K)=>{for(let G=0;G<R.length;G++){const H=T[G],j=R[G],oe=H.el&&(H.type===pt||!Yr(H,j)||H.shapeFlag&198)?d(H.el):C;P(H,j,oe,null,L,B,D,K,!0)}},A=(T,R,C,L,B)=>{if(R!==C){if(R!==Fe)for(const D in R)!Ni(D)&&!(D in C)&&i(T,D,R[D],null,B,L);for(const D in C){if(Ni(D))continue;const K=C[D],G=R[D];K!==G&&D!=="value"&&i(T,D,G,K,B,L)}"value"in C&&i(T,"value",R.value,C.value,B)}},I=(T,R,C,L,B,D,K,G,H)=>{const j=R.el=T?T.el:c(""),oe=R.anchor=T?T.anchor:c("");let{patchFlag:X,dynamicChildren:se,slotScopeIds:ce}=R;ce&&(G=G?G.concat(ce):ce),T==null?(r(j,C,L),r(oe,C,L),E(R.children||[],C,oe,B,D,K,G,H)):X>0&&X&64&&se&&T.dynamicChildren?(w(T.dynamicChildren,se,C,B,D,K,G),(R.key!=null||B&&R===B.subTree)&&ju(T,R,!0)):Ie(T,R,C,oe,B,D,K,G,H)},v=(T,R,C,L,B,D,K,G,H)=>{R.slotScopeIds=G,T==null?R.shapeFlag&512?B.ctx.activate(R,C,L,K,H):we(R,C,L,B,D,K,H):$e(T,R,H)},we=(T,R,C,L,B,D,K)=>{const G=T.component=KT(T,L,B);if(lc(T)&&(G.ctx.renderer=re),QT(G,!1,K),G.asyncDep){if(B&&B.registerDep(G,xe,K),!T.el){const H=G.subTree=De(xt);O(null,H,R,C),T.placeholder=H.el}}else xe(G,T,R,C,B,D,K)},$e=(T,R,C)=>{const L=R.component=T.component;if(UT(T,R,C))if(L.asyncDep&&!L.asyncResolved){fe(L,R,C);return}else L.next=R,L.update();else R.el=T.el,L.vnode=R},xe=(T,R,C,L,B,D,K)=>{const G=()=>{if(T.isMounted){let{next:X,bu:se,u:ce,parent:_e,vnode:Ne}=T;{const Bt=wg(T);if(Bt){X&&(X.el=Ne.el,fe(T,X,K)),Bt.asyncDep.then(()=>{T.isUnmounted||G()});return}}let Re=X,Et;Gr(T,!1),X?(X.el=Ne.el,fe(T,X,K)):X=Ne,se&&ia(se),(Et=X.props&&X.props.onVnodeBeforeUpdate)&&gn(Et,_e,X,Ne),Gr(T,!0);const vt=Jf(T),Ut=T.subTree;T.subTree=vt,P(Ut,vt,d(Ut.el),M(Ut),T,B,D),X.el=vt.el,Re===null&&BT(T,vt.el),ce&&Pt(ce,B),(Et=X.props&&X.props.onVnodeUpdated)&&Pt(()=>gn(Et,_e,X,Ne),B)}else{let X;const{el:se,props:ce}=R,{bm:_e,m:Ne,parent:Re,root:Et,type:vt}=T,Ut=Li(R);Gr(T,!1),_e&&ia(_e),!Ut&&(X=ce&&ce.onVnodeBeforeMount)&&gn(X,Re,R),Gr(T,!0);{Et.ce&&Et.ce._def.shadowRoot!==!1&&Et.ce._injectChildStyle(vt);const Bt=T.subTree=Jf(T);P(null,Bt,C,L,T,B,D),R.el=Bt.el}if(Ne&&Pt(Ne,B),!Ut&&(X=ce&&ce.onVnodeMounted)){const Bt=R;Pt(()=>gn(X,Re,Bt),B)}(R.shapeFlag&256||Re&&Li(Re.vnode)&&Re.vnode.shapeFlag&256)&&T.a&&Pt(T.a,B),T.isMounted=!0,R=C=L=null}};T.scope.on();const H=T.effect=new xm(G);T.scope.off();const j=T.update=H.run.bind(H),oe=T.job=H.runIfDirty.bind(H);oe.i=T,oe.id=T.uid,H.scheduler=()=>Lu(oe),Gr(T,!0),j()},fe=(T,R,C)=>{R.component=T;const L=T.vnode.props;T.vnode=R,T.next=null,wT(T,R.props,L,C),RT(T,R.children,C),Un(),Uf(T),Bn()},Ie=(T,R,C,L,B,D,K,G,H=!1)=>{const j=T&&T.children,oe=T?T.shapeFlag:0,X=R.children,{patchFlag:se,shapeFlag:ce}=R;if(se>0){if(se&128){dn(j,X,C,L,B,D,K,G,H);return}else if(se&256){Ot(j,X,C,L,B,D,K,G,H);return}}ce&8?(oe&16&&yt(j,B,D),X!==j&&f(C,X)):oe&16?ce&16?dn(j,X,C,L,B,D,K,G,H):yt(j,B,D,!0):(oe&8&&f(C,""),ce&16&&E(X,C,L,B,D,K,G,H))},Ot=(T,R,C,L,B,D,K,G,H)=>{T=T||Ss,R=R||Ss;const j=T.length,oe=R.length,X=Math.min(j,oe);let se;for(se=0;se<X;se++){const ce=R[se]=H?ar(R[se]):En(R[se]);P(T[se],ce,C,null,B,D,K,G,H)}j>oe?yt(T,B,D,!0,!1,X):E(R,C,L,B,D,K,G,H,X)},dn=(T,R,C,L,B,D,K,G,H)=>{let j=0;const oe=R.length;let X=T.length-1,se=oe-1;for(;j<=X&&j<=se;){const ce=T[j],_e=R[j]=H?ar(R[j]):En(R[j]);if(Yr(ce,_e))P(ce,_e,C,null,B,D,K,G,H);else break;j++}for(;j<=X&&j<=se;){const ce=T[X],_e=R[se]=H?ar(R[se]):En(R[se]);if(Yr(ce,_e))P(ce,_e,C,null,B,D,K,G,H);else break;X--,se--}if(j>X){if(j<=se){const ce=se+1,_e=ce<oe?R[ce].el:L;for(;j<=se;)P(null,R[j]=H?ar(R[j]):En(R[j]),C,_e,B,D,K,G,H),j++}}else if(j>se)for(;j<=X;)lt(T[j],B,D,!0),j++;else{const ce=j,_e=j,Ne=new Map;for(j=_e;j<=se;j++){const ut=R[j]=H?ar(R[j]):En(R[j]);ut.key!=null&&Ne.set(ut.key,j)}let Re,Et=0;const vt=se-_e+1;let Ut=!1,Bt=0;const rn=new Array(vt);for(j=0;j<vt;j++)rn[j]=0;for(j=ce;j<=X;j++){const ut=T[j];if(Et>=vt){lt(ut,B,D,!0);continue}let st;if(ut.key!=null)st=Ne.get(ut.key);else for(Re=_e;Re<=se;Re++)if(rn[Re-_e]===0&&Yr(ut,R[Re])){st=Re;break}st===void 0?lt(ut,B,D,!0):(rn[st-_e]=j+1,st>=Bt?Bt=st:Ut=!0,P(ut,R[st],C,null,B,D,K,G,H),Et++)}const ms=Ut?kT(rn):Ss;for(Re=ms.length-1,j=vt-1;j>=0;j--){const ut=_e+j,st=R[ut],ii=R[ut+1],Ur=ut+1<oe?ii.el||ii.placeholder:L;rn[j]===0?P(null,st,C,Ur,B,D,K,G,H):Ut&&(Re<0||j!==ms[Re]?Ft(st,C,Ur,2):Re--)}}},Ft=(T,R,C,L,B=null)=>{const{el:D,type:K,transition:G,children:H,shapeFlag:j}=T;if(j&6){Ft(T.component.subTree,R,C,L);return}if(j&128){T.suspense.move(R,C,L);return}if(j&64){K.move(T,R,C,re);return}if(K===pt){r(D,R,C);for(let X=0;X<H.length;X++)Ft(H[X],R,C,L);r(T.anchor,R,C);return}if(K===ca){$(T,R,C);return}if(L!==2&&j&1&&G)if(L===0)G.beforeEnter(D),r(D,R,C),Pt(()=>G.enter(D),B);else{const{leave:X,delayLeave:se,afterLeave:ce}=G,_e=()=>{T.ctx.isUnmounted?s(D):r(D,R,C)},Ne=()=>{D._isLeaving&&D[Nn](!0),X(D,()=>{_e(),ce&&ce()})};se?se(D,_e,Ne):Ne()}else r(D,R,C)},lt=(T,R,C,L=!1,B=!1)=>{const{type:D,props:K,ref:G,children:H,dynamicChildren:j,shapeFlag:oe,patchFlag:X,dirs:se,cacheIndex:ce}=T;if(X===-2&&(B=!1),G!=null&&(Un(),Mi(G,null,C,T,!0),Bn()),ce!=null&&(R.renderCache[ce]=void 0),oe&256){R.ctx.deactivate(T);return}const _e=oe&1&&se,Ne=!Li(T);let Re;if(Ne&&(Re=K&&K.onVnodeBeforeUnmount)&&gn(Re,R,T),oe&6)nn(T.component,C,L);else{if(oe&128){T.suspense.unmount(C,L);return}_e&&Hr(T,null,R,"beforeUnmount"),oe&64?T.type.remove(T,R,C,re,L):j&&!j.hasOnce&&(D!==pt||X>0&&X&64)?yt(j,R,C,!1,!0):(D===pt&&X&384||!B&&oe&16)&&yt(H,R,C),L&&Sn(T)}(Ne&&(Re=K&&K.onVnodeUnmounted)||_e)&&Pt(()=>{Re&&gn(Re,R,T),_e&&Hr(T,null,R,"unmounted")},C)},Sn=T=>{const{type:R,el:C,anchor:L,transition:B}=T;if(R===pt){tn(C,L);return}if(R===ca){q(T);return}const D=()=>{s(C),B&&!B.persisted&&B.afterLeave&&B.afterLeave()};if(T.shapeFlag&1&&B&&!B.persisted){const{leave:K,delayLeave:G}=B,H=()=>K(C,D);G?G(T.el,D,H):H()}else D()},tn=(T,R)=>{let C;for(;T!==R;)C=m(T),s(T),T=C;s(R)},nn=(T,R,C)=>{const{bum:L,scope:B,job:D,subTree:K,um:G,m:H,a:j}=T;Yf(H),Yf(j),L&&ia(L),B.stop(),D&&(D.flags|=8,lt(K,T,R,C)),G&&Pt(G,R),Pt(()=>{T.isUnmounted=!0},R)},yt=(T,R,C,L=!1,B=!1,D=0)=>{for(let K=D;K<T.length;K++)lt(T[K],R,C,L,B)},M=T=>{if(T.shapeFlag&6)return M(T.component.subTree);if(T.shapeFlag&128)return T.suspense.next();const R=m(T.anchor||T.el),C=R&&R[Zm];return C?m(C):R};let Z=!1;const Y=(T,R,C)=>{T==null?R._vnode&&lt(R._vnode,null,null,!0):P(R._vnode||null,T,R,null,null,null,C),R._vnode=T,Z||(Z=!0,Uf(),Ym(),Z=!1)},re={p:P,um:lt,m:Ft,r:Sn,mt:we,mc:E,pc:Ie,pbc:w,n:M,o:t};return{render:Y,hydrate:void 0,createApp:ET(Y)}}function fl({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Gr({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function CT(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function ju(t,e,n=!1){const r=t.children,s=e.children;if(ae(r)&&ae(s))for(let i=0;i<r.length;i++){const o=r[i];let c=s[i];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=s[i]=ar(s[i]),c.el=o.el),!n&&c.patchFlag!==-2&&ju(o,c)),c.type===fc&&c.patchFlag!==-1&&(c.el=o.el),c.type===xt&&!c.el&&(c.el=o.el)}}function kT(t){const e=t.slice(),n=[0];let r,s,i,o,c;const l=t.length;for(r=0;r<l;r++){const u=t[r];if(u!==0){if(s=n[n.length-1],t[s]<u){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)c=i+o>>1,t[n[c]]<u?i=c+1:o=c;u<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function wg(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:wg(e)}function Yf(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const xT=Symbol.for("v-scx"),NT=()=>Zt(xT);function gr(t,e,n){return Ig(t,e,n)}function Ig(t,e,n=Fe){const{immediate:r,deep:s,flush:i,once:o}=n,c=ct({},n),l=e&&r||!e&&i!=="post";let u;if(Zi){if(i==="sync"){const g=NT();u=g.__watcherHandles||(g.__watcherHandles=[])}else if(!l){const g=()=>{};return g.stop=vn,g.resume=vn,g.pause=vn,g}}const f=Nt;c.call=(g,S,P)=>ln(g,f,S,P);let d=!1;i==="post"?c.scheduler=g=>{Pt(g,f&&f.suspense)}:i!=="sync"&&(d=!0,c.scheduler=(g,S)=>{S?g():Lu(g)}),c.augmentJob=g=>{e&&(g.flags|=4),d&&(g.flags|=2,f&&(g.id=f.uid,g.i=f))};const m=Gv(t,e,c);return Zi&&(u?u.push(m):l&&m()),m}function VT(t,e,n){const r=this.proxy,s=ze(t)?t.includes(".")?Ag(r,t):()=>r[t]:t.bind(r,r);let i;pe(e)?i=e:(i=e.handler,n=e);const o=To(this),c=Ig(s,i.bind(r),n);return o(),c}function Ag(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const DT=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Ir(e)}Modifiers`]||t[`${Nr(e)}Modifiers`];function OT(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Fe;let s=n;const i=e.startsWith("update:"),o=i&&DT(r,e.slice(7));o&&(o.trim&&(s=n.map(f=>ze(f)?f.trim():f)),o.number&&(s=n.map(sc)));let c,l=r[c=il(e)]||r[c=il(Ir(e))];!l&&i&&(l=r[c=il(Nr(e))]),l&&ln(l,t,6,s);const u=r[c+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[c])return;t.emitted[c]=!0,ln(u,t,6,s)}}const MT=new WeakMap;function bg(t,e,n=!1){const r=n?MT:e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},c=!1;if(!pe(t)){const l=u=>{const f=bg(u,e,!0);f&&(c=!0,ct(o,f))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!c?(Oe(t)&&r.set(t,null),null):(ae(i)?i.forEach(l=>o[l]=null):ct(o,i),Oe(t)&&r.set(t,o),o)}function hc(t,e){return!t||!tc(e)?!1:(e=e.slice(2).replace(/Once$/,""),ke(t,e[0].toLowerCase()+e.slice(1))||ke(t,Nr(e))||ke(t,e))}function Jf(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:c,emit:l,render:u,renderCache:f,props:d,data:m,setupState:g,ctx:S,inheritAttrs:P}=t,x=ba(t);let O,F;try{if(n.shapeFlag&4){const q=s||r,J=q;O=En(u.call(J,q,f,d,g,m,S)),F=c}else{const q=e;O=En(q.length>1?q(d,{attrs:c,slots:o,emit:l}):q(d,null)),F=e.props?c:LT(c)}}catch(q){Ui.length=0,cc(q,t,1),O=De(xt)}let $=O;if(F&&P!==!1){const q=Object.keys(F),{shapeFlag:J}=$;q.length&&J&7&&(i&&q.some(bu)&&(F=FT(F,i)),$=br($,F,!1,!0))}return n.dirs&&($=br($,null,!1,!0),$.dirs=$.dirs?$.dirs.concat(n.dirs):n.dirs),n.transition&&Ji($,n.transition),O=$,ba(x),O}const LT=t=>{let e;for(const n in t)(n==="class"||n==="style"||tc(n))&&((e||(e={}))[n]=t[n]);return e},FT=(t,e)=>{const n={};for(const r in t)(!bu(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function UT(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:c,patchFlag:l}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?Xf(r,o,u):!!o;if(l&8){const f=e.dynamicProps;for(let d=0;d<f.length;d++){const m=f[d];if(o[m]!==r[m]&&!hc(u,m))return!0}}}else return(s||c)&&(!c||!c.$stable)?!0:r===o?!1:r?o?Xf(r,o,u):!0:!!o;return!1}function Xf(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!hc(n,i))return!0}return!1}function BT({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const Rg=t=>t.__isSuspense;function jT(t,e){e&&e.pendingBranch?ae(t)?e.effects.push(...t):e.effects.push(t):Kv(t)}const pt=Symbol.for("v-fgt"),fc=Symbol.for("v-txt"),xt=Symbol.for("v-cmt"),ca=Symbol.for("v-stc"),Ui=[];let Gt=null;function ge(t=!1){Ui.push(Gt=t?null:[])}function $T(){Ui.pop(),Gt=Ui[Ui.length-1]||null}let Xi=1;function Ca(t,e=!1){Xi+=t,t<0&&Gt&&e&&(Gt.hasOnce=!0)}function Sg(t){return t.dynamicChildren=Xi>0?Gt||Ss:null,$T(),Xi>0&&Gt&&Gt.push(t),t}function Pe(t,e,n,r,s,i){return Sg(Q(t,e,n,r,s,i,!0))}function Zr(t,e,n,r,s){return Sg(De(t,e,n,r,s,!0))}function ka(t){return t?t.__v_isVNode===!0:!1}function Yr(t,e){return t.type===e.type&&t.key===e.key}const Pg=({key:t})=>t??null,la=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?ze(t)||Qe(t)||pe(t)?{i:Jt,r:t,k:e,f:!!n}:t:null);function Q(t,e=null,n=null,r=0,s=null,i=t===pt?0:1,o=!1,c=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Pg(e),ref:e&&la(e),scopeId:Xm,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Jt};return c?($u(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=ze(n)?8:16),Xi>0&&!o&&Gt&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Gt.push(l),l}const De=qT;function qT(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===hT)&&(t=xt),ka(t)){const c=br(t,e,!0);return n&&$u(c,n),Xi>0&&!i&&Gt&&(c.shapeFlag&6?Gt[Gt.indexOf(t)]=c:Gt.push(c)),c.patchFlag=-2,c}if(ZT(t)&&(t=t.__vccOpts),e){e=HT(e);let{class:c,style:l}=e;c&&!ze(c)&&(e.class=Ys(c)),Oe(l)&&(Ou(l)&&!ae(l)&&(l=ct({},l)),e.style=Pu(l))}const o=ze(t)?1:Rg(t)?128:eg(t)?64:Oe(t)?4:pe(t)?2:0;return Q(t,e,n,r,s,o,i,!0)}function HT(t){return t?Ou(t)||gg(t)?ct({},t):t:null}function br(t,e,n=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:c,transition:l}=t,u=e?GT(s||{},e):s,f={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&Pg(u),ref:e&&e.ref?n&&i?ae(i)?i.concat(la(e)):[i,la(e)]:la(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:c,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==pt?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&br(t.ssContent),ssFallback:t.ssFallback&&br(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&Ji(f,l.clone(f)),f}function ht(t=" ",e=0){return De(fc,null,t,e)}function nx(t,e){const n=De(ca,null,t);return n.staticCount=e,n}function Jr(t="",e=!1){return e?(ge(),Zr(xt,null,t)):De(xt,null,t)}function En(t){return t==null||typeof t=="boolean"?De(xt):ae(t)?De(pt,null,t.slice()):ka(t)?ar(t):De(fc,null,String(t))}function ar(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:br(t)}function $u(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(ae(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),$u(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!gg(e)?e._ctx=Jt:s===3&&Jt&&(Jt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else pe(e)?(e={default:e,_ctx:Jt},n=32):(e=String(e),r&64?(n=16,e=[ht(e)]):n=8);t.children=e,t.shapeFlag|=n}function GT(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=Ys([e.class,r.class]));else if(s==="style")e.style=Pu([e.style,r.style]);else if(tc(s)){const i=e[s],o=r[s];o&&i!==o&&!(ae(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function gn(t,e,n,r=null){ln(t,e,7,[n,r])}const WT=dg();let zT=0;function KT(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||WT,i={uid:zT++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Pm(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:yg(r,s),emitsOptions:bg(r,s),emit:null,emitted:null,propsDefaults:Fe,inheritAttrs:r.inheritAttrs,ctx:Fe,data:Fe,props:Fe,attrs:Fe,slots:Fe,refs:Fe,setupState:Fe,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=OT.bind(null,i),t.ce&&t.ce(i),i}let Nt=null;const qu=()=>Nt||Jt;let xa,Hl;{const t=ic(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};xa=e("__VUE_INSTANCE_SETTERS__",n=>Nt=n),Hl=e("__VUE_SSR_SETTERS__",n=>Zi=n)}const To=t=>{const e=Nt;return xa(t),t.scope.on(),()=>{t.scope.off(),xa(e)}},Zf=()=>{Nt&&Nt.scope.off(),xa(null)};function Cg(t){return t.vnode.shapeFlag&4}let Zi=!1;function QT(t,e=!1,n=!1){e&&Hl(e);const{props:r,children:s}=t.vnode,i=Cg(t);TT(t,r,i,e),bT(t,s,n||e);const o=i?YT(t,e):void 0;return e&&Hl(!1),o}function YT(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,fT);const{setup:r}=n;if(r){Un();const s=t.setupContext=r.length>1?XT(t):null,i=To(t),o=yo(r,t,0,[t.props,s]),c=vm(o);if(Bn(),i(),(c||t.sp)&&!Li(t)&&cg(t),c){if(o.then(Zf,Zf),e)return o.then(l=>{ed(t,l)}).catch(l=>{cc(l,t,0)});t.asyncDep=o}else ed(t,o)}else kg(t)}function ed(t,e,n){pe(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Oe(e)&&(t.setupState=zm(e)),kg(t)}function kg(t,e,n){const r=t.type;t.render||(t.render=r.render||vn);{const s=To(t);Un();try{dT(t)}finally{Bn(),s()}}}const JT={get(t,e){return At(t,"get",""),t[e]}};function XT(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,JT),slots:t.slots,emit:t.emit,expose:e}}function dc(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(zm(Mu(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Fi)return Fi[n](t)},has(e,n){return n in e||n in Fi}})):t.proxy}function ZT(t){return pe(t)&&"__vccOpts"in t}const Xe=(t,e)=>qv(t,e,Zi);function Hu(t,e,n){try{Ca(-1);const r=arguments.length;return r===2?Oe(e)&&!ae(e)?ka(e)?De(t,null,[e]):De(t,e):De(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&ka(n)&&(n=[n]),De(t,e,n))}finally{Ca(1)}}const ew="3.5.24";let Gl;const td=typeof window<"u"&&window.trustedTypes;if(td)try{Gl=td.createPolicy("vue",{createHTML:t=>t})}catch{}const xg=Gl?t=>Gl.createHTML(t):t=>t,tw="http://www.w3.org/2000/svg",nw="http://www.w3.org/1998/Math/MathML",xn=typeof document<"u"?document:null,nd=xn&&xn.createElement("template"),rw={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?xn.createElementNS(tw,t):e==="mathml"?xn.createElementNS(nw,t):n?xn.createElement(t,{is:n}):xn.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>xn.createTextNode(t),createComment:t=>xn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>xn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{nd.innerHTML=xg(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const c=nd.content;if(r==="svg"||r==="mathml"){const l=c.firstChild;for(;l.firstChild;)c.appendChild(l.firstChild);c.removeChild(l)}e.insertBefore(c,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},nr="transition",Ti="animation",eo=Symbol("_vtc"),Ng={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},sw=ct({},rg,Ng),iw=t=>(t.displayName="Transition",t.props=sw,t),ow=iw((t,{slots:e})=>Hu(eT,aw(t),e)),Wr=(t,e=[])=>{ae(t)?t.forEach(n=>n(...e)):t&&t(...e)},rd=t=>t?ae(t)?t.some(e=>e.length>1):t.length>1:!1;function aw(t){const e={};for(const I in t)I in Ng||(e[I]=t[I]);if(t.css===!1)return e;const{name:n="v",type:r,duration:s,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:c=`${n}-enter-to`,appearFromClass:l=i,appearActiveClass:u=o,appearToClass:f=c,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:m=`${n}-leave-active`,leaveToClass:g=`${n}-leave-to`}=t,S=cw(s),P=S&&S[0],x=S&&S[1],{onBeforeEnter:O,onEnter:F,onEnterCancelled:$,onLeave:q,onLeaveCancelled:J,onBeforeAppear:ne=O,onAppear:b=F,onAppearCancelled:E=$}=e,y=(I,v,we,$e)=>{I._enterCancelled=$e,zr(I,v?f:c),zr(I,v?u:o),we&&we()},w=(I,v)=>{I._isLeaving=!1,zr(I,d),zr(I,g),zr(I,m),v&&v()},A=I=>(v,we)=>{const $e=I?b:F,xe=()=>y(v,I,we);Wr($e,[v,xe]),sd(()=>{zr(v,I?l:i),Cn(v,I?f:c),rd($e)||id(v,r,P,xe)})};return ct(e,{onBeforeEnter(I){Wr(O,[I]),Cn(I,i),Cn(I,o)},onBeforeAppear(I){Wr(ne,[I]),Cn(I,l),Cn(I,u)},onEnter:A(!1),onAppear:A(!0),onLeave(I,v){I._isLeaving=!0;const we=()=>w(I,v);Cn(I,d),I._enterCancelled?(Cn(I,m),cd(I)):(cd(I),Cn(I,m)),sd(()=>{I._isLeaving&&(zr(I,d),Cn(I,g),rd(q)||id(I,r,x,we))}),Wr(q,[I,we])},onEnterCancelled(I){y(I,!1,void 0,!0),Wr($,[I])},onAppearCancelled(I){y(I,!0,void 0,!0),Wr(E,[I])},onLeaveCancelled(I){w(I),Wr(J,[I])}})}function cw(t){if(t==null)return null;if(Oe(t))return[dl(t.enter),dl(t.leave)];{const e=dl(t);return[e,e]}}function dl(t){return av(t)}function Cn(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[eo]||(t[eo]=new Set)).add(e)}function zr(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[eo];n&&(n.delete(e),n.size||(t[eo]=void 0))}function sd(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let lw=0;function id(t,e,n,r){const s=t._endId=++lw,i=()=>{s===t._endId&&r()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:c,propCount:l}=uw(t,e);if(!o)return r();const u=o+"end";let f=0;const d=()=>{t.removeEventListener(u,m),i()},m=g=>{g.target===t&&++f>=l&&d()};setTimeout(()=>{f<l&&d()},c+1),t.addEventListener(u,m)}function uw(t,e){const n=window.getComputedStyle(t),r=S=>(n[S]||"").split(", "),s=r(`${nr}Delay`),i=r(`${nr}Duration`),o=od(s,i),c=r(`${Ti}Delay`),l=r(`${Ti}Duration`),u=od(c,l);let f=null,d=0,m=0;e===nr?o>0&&(f=nr,d=o,m=i.length):e===Ti?u>0&&(f=Ti,d=u,m=l.length):(d=Math.max(o,u),f=d>0?o>u?nr:Ti:null,m=f?f===nr?i.length:l.length:0);const g=f===nr&&/\b(?:transform|all)(?:,|$)/.test(r(`${nr}Property`).toString());return{type:f,timeout:d,propCount:m,hasTransform:g}}function od(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>ad(n)+ad(t[r])))}function ad(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function cd(t){return(t?t.ownerDocument:document).body.offsetHeight}function hw(t,e,n){const r=t[eo];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Na=Symbol("_vod"),Vg=Symbol("_vsh"),fw={name:"show",beforeMount(t,{value:e},{transition:n}){t[Na]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):wi(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),wi(t,!0),r.enter(t)):r.leave(t,()=>{wi(t,!1)}):wi(t,e))},beforeUnmount(t,{value:e}){wi(t,e)}};function wi(t,e){t.style.display=e?t[Na]:"none",t[Vg]=!e}const dw=Symbol(""),pw=/(?:^|;)\s*display\s*:/;function mw(t,e,n){const r=t.style,s=ze(n);let i=!1;if(n&&!s){if(e)if(ze(e))for(const o of e.split(";")){const c=o.slice(0,o.indexOf(":")).trim();n[c]==null&&ua(r,c,"")}else for(const o in e)n[o]==null&&ua(r,o,"");for(const o in n)o==="display"&&(i=!0),ua(r,o,n[o])}else if(s){if(e!==n){const o=r[dw];o&&(n+=";"+o),r.cssText=n,i=pw.test(n)}}else e&&t.removeAttribute("style");Na in t&&(t[Na]=i?r.display:"",t[Vg]&&(r.display="none"))}const ld=/\s*!important$/;function ua(t,e,n){if(ae(n))n.forEach(r=>ua(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=gw(t,e);ld.test(n)?t.setProperty(Nr(r),n.replace(ld,""),"important"):t[r]=n}}const ud=["Webkit","Moz","ms"],pl={};function gw(t,e){const n=pl[e];if(n)return n;let r=Ir(e);if(r!=="filter"&&r in t)return pl[e]=r;r=Im(r);for(let s=0;s<ud.length;s++){const i=ud[s]+r;if(i in t)return pl[e]=i}return e}const hd="http://www.w3.org/1999/xlink";function fd(t,e,n,r,s,i=dv(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(hd,e.slice(6,e.length)):t.setAttributeNS(hd,e,n):n==null||i&&!bm(n)?t.removeAttribute(e):t.setAttribute(e,i?"":bn(n)?String(n):n)}function dd(t,e,n,r,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?xg(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const c=i==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(c!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const c=typeof t[e];c==="boolean"?n=bm(n):n==null&&c==="string"?(n="",o=!0):c==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(s||e)}function Xr(t,e,n,r){t.addEventListener(e,n,r)}function _w(t,e,n,r){t.removeEventListener(e,n,r)}const pd=Symbol("_vei");function yw(t,e,n,r,s=null){const i=t[pd]||(t[pd]={}),o=i[e];if(r&&o)o.value=r;else{const[c,l]=Ew(e);if(r){const u=i[e]=ww(r,s);Xr(t,c,u,l)}else o&&(_w(t,c,o,l),i[e]=void 0)}}const md=/(?:Once|Passive|Capture)$/;function Ew(t){let e;if(md.test(t)){e={};let r;for(;r=t.match(md);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Nr(t.slice(2)),e]}let ml=0;const vw=Promise.resolve(),Tw=()=>ml||(vw.then(()=>ml=0),ml=Date.now());function ww(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;ln(Iw(r,n.value),e,5,[r])};return n.value=t,n.attached=Tw(),n}function Iw(t,e){if(ae(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const gd=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Aw=(t,e,n,r,s,i)=>{const o=s==="svg";e==="class"?hw(t,r,o):e==="style"?mw(t,n,r):tc(e)?bu(e)||yw(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):bw(t,e,r,o))?(dd(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&fd(t,e,r,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!ze(r))?dd(t,Ir(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),fd(t,e,r,o))};function bw(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&gd(e)&&pe(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return gd(e)&&ze(n)?!1:e in t}const Va=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ae(e)?n=>ia(e,n):e};function Rw(t){t.target.composing=!0}function _d(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const ks=Symbol("_assign");function yd(t,e,n){return e&&(t=t.trim()),n&&(t=sc(t)),t}const rx={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[ks]=Va(s);const i=r||s.props&&s.props.type==="number";Xr(t,e?"change":"input",o=>{o.target.composing||t[ks](yd(t.value,n,i))}),(n||i)&&Xr(t,"change",()=>{t.value=yd(t.value,n,i)}),e||(Xr(t,"compositionstart",Rw),Xr(t,"compositionend",_d),Xr(t,"change",_d))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},o){if(t[ks]=Va(o),t.composing)return;const c=(i||t.type==="number")&&!/^0\d/.test(t.value)?sc(t.value):t.value,l=e??"";c!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||s&&t.value.trim()===l)||(t.value=l))}},sx={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const s=nc(e);Xr(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?sc(Da(o)):Da(o));t[ks](t.multiple?s?new Set(i):i:i[0]),t._assigning=!0,Eo(()=>{t._assigning=!1})}),t[ks]=Va(r)},mounted(t,{value:e}){Ed(t,e)},beforeUpdate(t,e,n){t[ks]=Va(n)},updated(t,{value:e}){t._assigning||Ed(t,e)}};function Ed(t,e){const n=t.multiple,r=ae(e);if(!(n&&!r&&!nc(e))){for(let s=0,i=t.options.length;s<i;s++){const o=t.options[s],c=Da(o);if(n)if(r){const l=typeof c;l==="string"||l==="number"?o.selected=e.some(u=>String(u)===String(c)):o.selected=mv(e,c)>-1}else o.selected=e.has(c);else if(oc(Da(o),e)){t.selectedIndex!==s&&(t.selectedIndex=s);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Da(t){return"_value"in t?t._value:t.value}const Sw=["ctrl","shift","alt","meta"],Pw={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Sw.some(n=>t[`${n}Key`]&&!e.includes(n))},Cw=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=((s,...i)=>{for(let o=0;o<e.length;o++){const c=Pw[e[o]];if(c&&c(s,e))return}return t(s,...i)}))},kw={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},ix=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=(s=>{if(!("key"in s))return;const i=Nr(s.key);if(e.some(o=>o===i||kw[o]===i))return t(s)}))},xw=ct({patchProp:Aw},rw);let vd;function Nw(){return vd||(vd=ST(xw))}const Vw=((...t)=>{const e=Nw().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=Ow(r);if(!s)return;const i=e._component;!pe(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,Dw(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e});function Dw(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Ow(t){return ze(t)?document.querySelector(t):t}let Dg;const pc=t=>Dg=t,Og=Symbol();function Wl(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Bi;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Bi||(Bi={}));function Mw(){const t=Cm(!0),e=t.run(()=>Dt({}));let n=[],r=[];const s=Mu({install(i){pc(s),s._a=i,i.provide(Og,s),i.config.globalProperties.$pinia=s,r.forEach(o=>n.push(o)),r=[]},use(i){return this._a?n.push(i):r.push(i),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return s}const Mg=()=>{};function Td(t,e,n,r=Mg){t.add(e);const s=()=>{t.delete(e)&&r()};return!n&&km()&&gv(s),s}function vs(t,...e){t.forEach(n=>{n(...e)})}const Lw=t=>t(),wd=Symbol(),gl=Symbol();function zl(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,r)=>t.set(r,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],s=t[n];Wl(s)&&Wl(r)&&t.hasOwnProperty(n)&&!Qe(r)&&!mr(r)?t[n]=zl(s,r):t[n]=r}return t}const Fw=Symbol();function Uw(t){return!Wl(t)||!Object.prototype.hasOwnProperty.call(t,Fw)}const{assign:ir}=Object;function Bw(t){return!!(Qe(t)&&t.effect)}function jw(t,e,n,r){const{state:s,actions:i,getters:o}=e,c=n.state.value[t];let l;function u(){c||(n.state.value[t]=s?s():{});const f=Uv(n.state.value[t]);return ir(f,i,Object.keys(o||{}).reduce((d,m)=>(d[m]=Mu(Xe(()=>{pc(n);const g=n._s.get(t);return o[m].call(g,g)})),d),{}))}return l=Lg(t,u,e,n,r,!0),l}function Lg(t,e,n={},r,s,i){let o;const c=ir({actions:{}},n),l={deep:!0};let u,f,d=new Set,m=new Set,g;const S=r.state.value[t];!i&&!S&&(r.state.value[t]={}),Dt({});let P;function x(E){let y;u=f=!1,typeof E=="function"?(E(r.state.value[t]),y={type:Bi.patchFunction,storeId:t,events:g}):(zl(r.state.value[t],E),y={type:Bi.patchObject,payload:E,storeId:t,events:g});const w=P=Symbol();Eo().then(()=>{P===w&&(u=!0)}),f=!0,vs(d,y,r.state.value[t])}const O=i?function(){const{state:y}=n,w=y?y():{};this.$patch(A=>{ir(A,w)})}:Mg;function F(){o.stop(),d.clear(),m.clear(),r._s.delete(t)}const $=(E,y="")=>{if(wd in E)return E[gl]=y,E;const w=function(){pc(r);const A=Array.from(arguments),I=new Set,v=new Set;function we(fe){I.add(fe)}function $e(fe){v.add(fe)}vs(m,{args:A,name:w[gl],store:J,after:we,onError:$e});let xe;try{xe=E.apply(this&&this.$id===t?this:J,A)}catch(fe){throw vs(v,fe),fe}return xe instanceof Promise?xe.then(fe=>(vs(I,fe),fe)).catch(fe=>(vs(v,fe),Promise.reject(fe))):(vs(I,xe),xe)};return w[wd]=!0,w[gl]=y,w},q={_p:r,$id:t,$onAction:Td.bind(null,m),$patch:x,$reset:O,$subscribe(E,y={}){const w=Td(d,E,y.detached,()=>A()),A=o.run(()=>gr(()=>r.state.value[t],I=>{(y.flush==="sync"?f:u)&&E({storeId:t,type:Bi.direct,events:g},I)},ir({},l,y)));return w},$dispose:F},J=_o(q);r._s.set(t,J);const b=(r._a&&r._a.runWithContext||Lw)(()=>r._e.run(()=>(o=Cm()).run(()=>e({action:$}))));for(const E in b){const y=b[E];if(Qe(y)&&!Bw(y)||mr(y))i||(S&&Uw(y)&&(Qe(y)?y.value=S[E]:zl(y,S[E])),r.state.value[t][E]=y);else if(typeof y=="function"){const w=$(y,E);b[E]=w,c.actions[E]=y}}return ir(J,b),ir(Se(J),b),Object.defineProperty(J,"$state",{get:()=>r.state.value[t],set:E=>{x(y=>{ir(y,E)})}}),r._p.forEach(E=>{ir(J,o.run(()=>E({store:J,app:r._a,pinia:r,options:c})))}),S&&i&&n.hydrate&&n.hydrate(J.$state,S),u=!0,f=!0,J}function Fg(t,e,n){let r;const s=typeof e=="function";r=s?n:e;function i(o,c){const l=vT();return o=o||(l?Zt(Og,null):null),o&&pc(o),o=Dg,o._s.has(t)||(s?Lg(t,e,r,o):jw(t,r,o)),o._s.get(t)}return i.$id=t,i}const ws=typeof document<"u";function Ug(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function $w(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&Ug(t.default)}const Ce=Object.assign;function _l(t,e){const n={};for(const r in e){const s=e[r];n[r]=un(s)?s.map(t):t(s)}return n}const ji=()=>{},un=Array.isArray;function Id(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}const Bg=/#/g,qw=/&/g,Hw=/\//g,Gw=/=/g,Ww=/\?/g,jg=/\+/g,zw=/%5B/g,Kw=/%5D/g,$g=/%5E/g,Qw=/%60/g,qg=/%7B/g,Yw=/%7C/g,Hg=/%7D/g,Jw=/%20/g;function Gu(t){return t==null?"":encodeURI(""+t).replace(Yw,"|").replace(zw,"[").replace(Kw,"]")}function Xw(t){return Gu(t).replace(qg,"{").replace(Hg,"}").replace($g,"^")}function Kl(t){return Gu(t).replace(jg,"%2B").replace(Jw,"+").replace(Bg,"%23").replace(qw,"%26").replace(Qw,"`").replace(qg,"{").replace(Hg,"}").replace($g,"^")}function Zw(t){return Kl(t).replace(Gw,"%3D")}function eI(t){return Gu(t).replace(Bg,"%23").replace(Ww,"%3F")}function tI(t){return eI(t).replace(Hw,"%2F")}function to(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const nI=/\/$/,rI=t=>t.replace(nI,"");function yl(t,e,n="/"){let r,s={},i="",o="";const c=e.indexOf("#");let l=e.indexOf("?");return l=c>=0&&l>c?-1:l,l>=0&&(r=e.slice(0,l),i=e.slice(l,c>0?c:e.length),s=t(i.slice(1))),c>=0&&(r=r||e.slice(0,c),o=e.slice(c,e.length)),r=aI(r??e,n),{fullPath:r+i+o,path:r,query:s,hash:to(o)}}function sI(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Ad(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function iI(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&Fs(e.matched[r],n.matched[s])&&Gg(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Fs(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Gg(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!oI(t[n],e[n]))return!1;return!0}function oI(t,e){return un(t)?bd(t,e):un(e)?bd(e,t):t===e}function bd(t,e){return un(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function aI(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,c;for(o=0;o<r.length;o++)if(c=r[o],c!==".")if(c==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const rr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Ql=(function(t){return t.pop="pop",t.push="push",t})({}),El=(function(t){return t.back="back",t.forward="forward",t.unknown="",t})({});function cI(t){if(!t)if(ws){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),rI(t)}const lI=/^[^#]+#/;function uI(t,e){return t.replace(lI,"#")+e}function hI(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const mc=()=>({left:window.scrollX,top:window.scrollY});function fI(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=hI(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Rd(t,e){return(history.state?history.state.position-e:-1)+t}const Yl=new Map;function dI(t,e){Yl.set(t,e)}function pI(t){const e=Yl.get(t);return Yl.delete(t),e}function mI(t){return typeof t=="string"||t&&typeof t=="object"}function Wg(t){return typeof t=="string"||typeof t=="symbol"}let Ge=(function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t})({});const zg=Symbol("");Ge.MATCHER_NOT_FOUND+"",Ge.NAVIGATION_GUARD_REDIRECT+"",Ge.NAVIGATION_ABORTED+"",Ge.NAVIGATION_CANCELLED+"",Ge.NAVIGATION_DUPLICATED+"";function Us(t,e){return Ce(new Error,{type:t,[zg]:!0},e)}function kn(t,e){return t instanceof Error&&zg in t&&(e==null||!!(t.type&e))}const gI=["params","query","hash"];function _I(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of gI)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function yI(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<n.length;++r){const s=n[r].replace(jg," "),i=s.indexOf("="),o=to(i<0?s:s.slice(0,i)),c=i<0?null:to(s.slice(i+1));if(o in e){let l=e[o];un(l)||(l=e[o]=[l]),l.push(c)}else e[o]=c}return e}function Sd(t){let e="";for(let n in t){const r=t[n];if(n=Zw(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(un(r)?r.map(s=>s&&Kl(s)):[r&&Kl(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function EI(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=un(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const vI=Symbol(""),Pd=Symbol(""),gc=Symbol(""),Wu=Symbol(""),Jl=Symbol("");function Ii(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function cr(t,e,n,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((c,l)=>{const u=m=>{m===!1?l(Us(Ge.NAVIGATION_ABORTED,{from:n,to:e})):m instanceof Error?l(m):mI(m)?l(Us(Ge.NAVIGATION_GUARD_REDIRECT,{from:e,to:m})):(o&&r.enterCallbacks[s]===o&&typeof m=="function"&&o.push(m),c())},f=i(()=>t.call(r&&r.instances[s],e,n,u));let d=Promise.resolve(f);t.length<3&&(d=d.then(u)),d.catch(m=>l(m))})}function vl(t,e,n,r,s=i=>i()){const i=[];for(const o of t)for(const c in o.components){let l=o.components[c];if(!(e!=="beforeRouteEnter"&&!o.instances[c]))if(Ug(l)){const u=(l.__vccOpts||l)[e];u&&i.push(cr(u,n,r,o,c,s))}else{let u=l();i.push(()=>u.then(f=>{if(!f)throw new Error(`Couldn't resolve component "${c}" at "${o.path}"`);const d=$w(f)?f.default:f;o.mods[c]=f,o.components[c]=d;const m=(d.__vccOpts||d)[e];return m&&cr(m,n,r,o,c,s)()}))}}return i}function TI(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const c=e.matched[o];c&&(t.matched.find(u=>Fs(u,c))?r.push(c):n.push(c));const l=t.matched[o];l&&(e.matched.find(u=>Fs(u,l))||s.push(l))}return[n,r,s]}let wI=()=>location.protocol+"//"+location.host;function Kg(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let o=s.includes(t.slice(i))?t.slice(i).length:1,c=s.slice(o);return c[0]!=="/"&&(c="/"+c),Ad(c,"")}return Ad(n,t)+r+s}function II(t,e,n,r){let s=[],i=[],o=null;const c=({state:m})=>{const g=Kg(t,location),S=n.value,P=e.value;let x=0;if(m){if(n.value=g,e.value=m,o&&o===S){o=null;return}x=P?m.position-P.position:0}else r(g);s.forEach(O=>{O(n.value,S,{delta:x,type:Ql.pop,direction:x?x>0?El.forward:El.back:El.unknown})})};function l(){o=n.value}function u(m){s.push(m);const g=()=>{const S=s.indexOf(m);S>-1&&s.splice(S,1)};return i.push(g),g}function f(){if(document.visibilityState==="hidden"){const{history:m}=window;if(!m.state)return;m.replaceState(Ce({},m.state,{scroll:mc()}),"")}}function d(){for(const m of i)m();i=[],window.removeEventListener("popstate",c),window.removeEventListener("pagehide",f),document.removeEventListener("visibilitychange",f)}return window.addEventListener("popstate",c),window.addEventListener("pagehide",f),document.addEventListener("visibilitychange",f),{pauseListeners:l,listen:u,destroy:d}}function Cd(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?mc():null}}function AI(t){const{history:e,location:n}=window,r={value:Kg(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,u,f){const d=t.indexOf("#"),m=d>-1?(n.host&&document.querySelector("base")?t:t.slice(d))+l:wI()+t+l;try{e[f?"replaceState":"pushState"](u,"",m),s.value=u}catch(g){console.error(g),n[f?"replace":"assign"](m)}}function o(l,u){i(l,Ce({},e.state,Cd(s.value.back,l,s.value.forward,!0),u,{position:s.value.position}),!0),r.value=l}function c(l,u){const f=Ce({},s.value,e.state,{forward:l,scroll:mc()});i(f.current,f,!0),i(l,Ce({},Cd(r.value,l,null),{position:f.position+1},u),!1),r.value=l}return{location:r,state:s,push:c,replace:o}}function bI(t){t=cI(t);const e=AI(t),n=II(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=Ce({location:"",base:t,go:r,createHref:uI.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}let es=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t})({});var nt=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t})(nt||{});const RI={type:es.Static,value:""},SI=/[a-zA-Z0-9_]/;function PI(t){if(!t)return[[]];if(t==="/")return[[RI]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(g){throw new Error(`ERR (${n})/"${u}": ${g}`)}let n=nt.Static,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let c=0,l,u="",f="";function d(){u&&(n===nt.Static?i.push({type:es.Static,value:u}):n===nt.Param||n===nt.ParamRegExp||n===nt.ParamRegExpEnd?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:es.Param,value:u,regexp:f,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function m(){u+=l}for(;c<t.length;){if(l=t[c++],l==="\\"&&n!==nt.ParamRegExp){r=n,n=nt.EscapeNext;continue}switch(n){case nt.Static:l==="/"?(u&&d(),o()):l===":"?(d(),n=nt.Param):m();break;case nt.EscapeNext:m(),n=r;break;case nt.Param:l==="("?n=nt.ParamRegExp:SI.test(l)?m():(d(),n=nt.Static,l!=="*"&&l!=="?"&&l!=="+"&&c--);break;case nt.ParamRegExp:l===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+l:n=nt.ParamRegExpEnd:f+=l;break;case nt.ParamRegExpEnd:d(),n=nt.Static,l!=="*"&&l!=="?"&&l!=="+"&&c--,f="";break;default:e("Unknown state");break}}return n===nt.ParamRegExp&&e(`Unfinished custom RegExp for param "${u}"`),d(),o(),s}const kd="[^/]+?",CI={sensitive:!1,strict:!1,start:!0,end:!0};var Ct=(function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t})(Ct||{});const kI=/[.+*?^${}()[\]/\\]/g;function xI(t,e){const n=Ce({},CI,e),r=[];let s=n.start?"^":"";const i=[];for(const u of t){const f=u.length?[]:[Ct.Root];n.strict&&!u.length&&(s+="/");for(let d=0;d<u.length;d++){const m=u[d];let g=Ct.Segment+(n.sensitive?Ct.BonusCaseSensitive:0);if(m.type===es.Static)d||(s+="/"),s+=m.value.replace(kI,"\\$&"),g+=Ct.Static;else if(m.type===es.Param){const{value:S,repeatable:P,optional:x,regexp:O}=m;i.push({name:S,repeatable:P,optional:x});const F=O||kd;if(F!==kd){g+=Ct.BonusCustomRegExp;try{`${F}`}catch(q){throw new Error(`Invalid custom RegExp for param "${S}" (${F}): `+q.message)}}let $=P?`((?:${F})(?:/(?:${F}))*)`:`(${F})`;d||($=x&&u.length<2?`(?:/${$})`:"/"+$),x&&($+="?"),s+=$,g+=Ct.Dynamic,x&&(g+=Ct.BonusOptional),P&&(g+=Ct.BonusRepeatable),F===".*"&&(g+=Ct.BonusWildcard)}f.push(g)}r.push(f)}if(n.strict&&n.end){const u=r.length-1;r[u][r[u].length-1]+=Ct.BonusStrict}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function c(u){const f=u.match(o),d={};if(!f)return null;for(let m=1;m<f.length;m++){const g=f[m]||"",S=i[m-1];d[S.name]=g&&S.repeatable?g.split("/"):g}return d}function l(u){let f="",d=!1;for(const m of t){(!d||!f.endsWith("/"))&&(f+="/"),d=!1;for(const g of m)if(g.type===es.Static)f+=g.value;else if(g.type===es.Param){const{value:S,repeatable:P,optional:x}=g,O=S in u?u[S]:"";if(un(O)&&!P)throw new Error(`Provided param "${S}" is an array but it is not repeatable (* or + modifiers)`);const F=un(O)?O.join("/"):O;if(!F)if(x)m.length<2&&(f.endsWith("/")?f=f.slice(0,-1):d=!0);else throw new Error(`Missing required param "${S}"`);f+=F}}return f||"/"}return{re:o,score:r,keys:i,parse:c,stringify:l}}function NI(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===Ct.Static+Ct.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===Ct.Static+Ct.Segment?1:-1:0}function Qg(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=NI(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(xd(r))return 1;if(xd(s))return-1}return s.length-r.length}function xd(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const VI={strict:!1,end:!0,sensitive:!1};function DI(t,e,n){const r=xI(PI(t.path),n),s=Ce(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function OI(t,e){const n=[],r=new Map;e=Id(VI,e);function s(d){return r.get(d)}function i(d,m,g){const S=!g,P=Vd(d);P.aliasOf=g&&g.record;const x=Id(e,d),O=[P];if("alias"in d){const q=typeof d.alias=="string"?[d.alias]:d.alias;for(const J of q)O.push(Vd(Ce({},P,{components:g?g.record.components:P.components,path:J,aliasOf:g?g.record:P})))}let F,$;for(const q of O){const{path:J}=q;if(m&&J[0]!=="/"){const ne=m.record.path,b=ne[ne.length-1]==="/"?"":"/";q.path=m.record.path+(J&&b+J)}if(F=DI(q,m,x),g?g.alias.push(F):($=$||F,$!==F&&$.alias.push(F),S&&d.name&&!Dd(F)&&o(d.name)),Yg(F)&&l(F),P.children){const ne=P.children;for(let b=0;b<ne.length;b++)i(ne[b],F,g&&g.children[b])}g=g||F}return $?()=>{o($)}:ji}function o(d){if(Wg(d)){const m=r.get(d);m&&(r.delete(d),n.splice(n.indexOf(m),1),m.children.forEach(o),m.alias.forEach(o))}else{const m=n.indexOf(d);m>-1&&(n.splice(m,1),d.record.name&&r.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function c(){return n}function l(d){const m=FI(d,n);n.splice(m,0,d),d.record.name&&!Dd(d)&&r.set(d.record.name,d)}function u(d,m){let g,S={},P,x;if("name"in d&&d.name){if(g=r.get(d.name),!g)throw Us(Ge.MATCHER_NOT_FOUND,{location:d});x=g.record.name,S=Ce(Nd(m.params,g.keys.filter($=>!$.optional).concat(g.parent?g.parent.keys.filter($=>$.optional):[]).map($=>$.name)),d.params&&Nd(d.params,g.keys.map($=>$.name))),P=g.stringify(S)}else if(d.path!=null)P=d.path,g=n.find($=>$.re.test(P)),g&&(S=g.parse(P),x=g.record.name);else{if(g=m.name?r.get(m.name):n.find($=>$.re.test(m.path)),!g)throw Us(Ge.MATCHER_NOT_FOUND,{location:d,currentLocation:m});x=g.record.name,S=Ce({},m.params,d.params),P=g.stringify(S)}const O=[];let F=g;for(;F;)O.unshift(F.record),F=F.parent;return{name:x,path:P,params:S,matched:O,meta:LI(O)}}t.forEach(d=>i(d));function f(){n.length=0,r.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:f,getRoutes:c,getRecordMatcher:s}}function Nd(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function Vd(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:MI(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function MI(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function Dd(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function LI(t){return t.reduce((e,n)=>Ce(e,n.meta),{})}function FI(t,e){let n=0,r=e.length;for(;n!==r;){const i=n+r>>1;Qg(t,e[i])<0?r=i:n=i+1}const s=UI(t);return s&&(r=e.lastIndexOf(s,r-1)),r}function UI(t){let e=t;for(;e=e.parent;)if(Yg(e)&&Qg(t,e)===0)return e}function Yg({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function Od(t){const e=Zt(gc),n=Zt(Wu),r=Xe(()=>{const l=de(t.to);return e.resolve(l)}),s=Xe(()=>{const{matched:l}=r.value,{length:u}=l,f=l[u-1],d=n.matched;if(!f||!d.length)return-1;const m=d.findIndex(Fs.bind(null,f));if(m>-1)return m;const g=Md(l[u-2]);return u>1&&Md(f)===g&&d[d.length-1].path!==g?d.findIndex(Fs.bind(null,l[u-2])):m}),i=Xe(()=>s.value>-1&&qI(n.params,r.value.params)),o=Xe(()=>s.value>-1&&s.value===n.matched.length-1&&Gg(n.params,r.value.params));function c(l={}){if($I(l)){const u=e[de(t.replace)?"replace":"push"](de(t.to)).catch(ji);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:r,href:Xe(()=>r.value.href),isActive:i,isExactActive:o,navigate:c}}function BI(t){return t.length===1?t[0]:t}const jI=Vr({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Od,setup(t,{slots:e}){const n=_o(Od(t)),{options:r}=Zt(gc),s=Xe(()=>({[Ld(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Ld(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&BI(e.default(n));return t.custom?i:Hu("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),Yt=jI;function $I(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function qI(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!un(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function Md(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Ld=(t,e,n)=>t??e??n,HI=Vr({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Zt(Jl),s=Xe(()=>t.route||r.value),i=Zt(Pd,0),o=Xe(()=>{let u=de(i);const{matched:f}=s.value;let d;for(;(d=f[u])&&!d.components;)u++;return u}),c=Xe(()=>s.value.matched[o.value]);aa(Pd,Xe(()=>o.value+1)),aa(vI,c),aa(Jl,s);const l=Dt();return gr(()=>[l.value,c.value,t.name],([u,f,d],[m,g,S])=>{f&&(f.instances[d]=u,g&&g!==f&&u&&u===m&&(f.leaveGuards.size||(f.leaveGuards=g.leaveGuards),f.updateGuards.size||(f.updateGuards=g.updateGuards))),u&&f&&(!g||!Fs(f,g)||!m)&&(f.enterCallbacks[d]||[]).forEach(P=>P(u))},{flush:"post"}),()=>{const u=s.value,f=t.name,d=c.value,m=d&&d.components[f];if(!m)return Fd(n.default,{Component:m,route:u});const g=d.props[f],S=g?g===!0?u.params:typeof g=="function"?g(u):g:null,x=Hu(m,Ce({},S,e,{onVnodeUnmounted:O=>{O.component.isUnmounted&&(d.instances[f]=null)},ref:l}));return Fd(n.default,{Component:x,route:u})||x}}});function Fd(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const Jg=HI;function GI(t){const e=OI(t.routes,t),n=t.parseQuery||yI,r=t.stringifyQuery||Sd,s=t.history,i=Ii(),o=Ii(),c=Ii(),l=Mv(rr);let u=rr;ws&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=_l.bind(null,M=>""+M),d=_l.bind(null,tI),m=_l.bind(null,to);function g(M,Z){let Y,re;return Wg(M)?(Y=e.getRecordMatcher(M),re=Z):re=M,e.addRoute(re,Y)}function S(M){const Z=e.getRecordMatcher(M);Z&&e.removeRoute(Z)}function P(){return e.getRoutes().map(M=>M.record)}function x(M){return!!e.getRecordMatcher(M)}function O(M,Z){if(Z=Ce({},Z||l.value),typeof M=="string"){const C=yl(n,M,Z.path),L=e.resolve({path:C.path},Z),B=s.createHref(C.fullPath);return Ce(C,L,{params:m(L.params),hash:to(C.hash),redirectedFrom:void 0,href:B})}let Y;if(M.path!=null)Y=Ce({},M,{path:yl(n,M.path,Z.path).path});else{const C=Ce({},M.params);for(const L in C)C[L]==null&&delete C[L];Y=Ce({},M,{params:d(C)}),Z.params=d(Z.params)}const re=e.resolve(Y,Z),ye=M.hash||"";re.params=f(m(re.params));const T=sI(r,Ce({},M,{hash:Xw(ye),path:re.path})),R=s.createHref(T);return Ce({fullPath:T,hash:ye,query:r===Sd?EI(M.query):M.query||{}},re,{redirectedFrom:void 0,href:R})}function F(M){return typeof M=="string"?yl(n,M,l.value.path):Ce({},M)}function $(M,Z){if(u!==M)return Us(Ge.NAVIGATION_CANCELLED,{from:Z,to:M})}function q(M){return b(M)}function J(M){return q(Ce(F(M),{replace:!0}))}function ne(M,Z){const Y=M.matched[M.matched.length-1];if(Y&&Y.redirect){const{redirect:re}=Y;let ye=typeof re=="function"?re(M,Z):re;return typeof ye=="string"&&(ye=ye.includes("?")||ye.includes("#")?ye=F(ye):{path:ye},ye.params={}),Ce({query:M.query,hash:M.hash,params:ye.path!=null?{}:M.params},ye)}}function b(M,Z){const Y=u=O(M),re=l.value,ye=M.state,T=M.force,R=M.replace===!0,C=ne(Y,re);if(C)return b(Ce(F(C),{state:typeof C=="object"?Ce({},ye,C.state):ye,force:T,replace:R}),Z||Y);const L=Y;L.redirectedFrom=Z;let B;return!T&&iI(r,re,Y)&&(B=Us(Ge.NAVIGATION_DUPLICATED,{to:L,from:re}),Ft(re,re,!0,!1)),(B?Promise.resolve(B):w(L,re)).catch(D=>kn(D)?kn(D,Ge.NAVIGATION_GUARD_REDIRECT)?D:dn(D):Ie(D,L,re)).then(D=>{if(D){if(kn(D,Ge.NAVIGATION_GUARD_REDIRECT))return b(Ce({replace:R},F(D.to),{state:typeof D.to=="object"?Ce({},ye,D.to.state):ye,force:T}),Z||L)}else D=I(L,re,!0,R,ye);return A(L,re,D),D})}function E(M,Z){const Y=$(M,Z);return Y?Promise.reject(Y):Promise.resolve()}function y(M){const Z=tn.values().next().value;return Z&&typeof Z.runWithContext=="function"?Z.runWithContext(M):M()}function w(M,Z){let Y;const[re,ye,T]=TI(M,Z);Y=vl(re.reverse(),"beforeRouteLeave",M,Z);for(const C of re)C.leaveGuards.forEach(L=>{Y.push(cr(L,M,Z))});const R=E.bind(null,M,Z);return Y.push(R),yt(Y).then(()=>{Y=[];for(const C of i.list())Y.push(cr(C,M,Z));return Y.push(R),yt(Y)}).then(()=>{Y=vl(ye,"beforeRouteUpdate",M,Z);for(const C of ye)C.updateGuards.forEach(L=>{Y.push(cr(L,M,Z))});return Y.push(R),yt(Y)}).then(()=>{Y=[];for(const C of T)if(C.beforeEnter)if(un(C.beforeEnter))for(const L of C.beforeEnter)Y.push(cr(L,M,Z));else Y.push(cr(C.beforeEnter,M,Z));return Y.push(R),yt(Y)}).then(()=>(M.matched.forEach(C=>C.enterCallbacks={}),Y=vl(T,"beforeRouteEnter",M,Z,y),Y.push(R),yt(Y))).then(()=>{Y=[];for(const C of o.list())Y.push(cr(C,M,Z));return Y.push(R),yt(Y)}).catch(C=>kn(C,Ge.NAVIGATION_CANCELLED)?C:Promise.reject(C))}function A(M,Z,Y){c.list().forEach(re=>y(()=>re(M,Z,Y)))}function I(M,Z,Y,re,ye){const T=$(M,Z);if(T)return T;const R=Z===rr,C=ws?history.state:{};Y&&(re||R?s.replace(M.fullPath,Ce({scroll:R&&C&&C.scroll},ye)):s.push(M.fullPath,ye)),l.value=M,Ft(M,Z,Y,R),dn()}let v;function we(){v||(v=s.listen((M,Z,Y)=>{if(!nn.listening)return;const re=O(M),ye=ne(re,nn.currentRoute.value);if(ye){b(Ce(ye,{replace:!0,force:!0}),re).catch(ji);return}u=re;const T=l.value;ws&&dI(Rd(T.fullPath,Y.delta),mc()),w(re,T).catch(R=>kn(R,Ge.NAVIGATION_ABORTED|Ge.NAVIGATION_CANCELLED)?R:kn(R,Ge.NAVIGATION_GUARD_REDIRECT)?(b(Ce(F(R.to),{force:!0}),re).then(C=>{kn(C,Ge.NAVIGATION_ABORTED|Ge.NAVIGATION_DUPLICATED)&&!Y.delta&&Y.type===Ql.pop&&s.go(-1,!1)}).catch(ji),Promise.reject()):(Y.delta&&s.go(-Y.delta,!1),Ie(R,re,T))).then(R=>{R=R||I(re,T,!1),R&&(Y.delta&&!kn(R,Ge.NAVIGATION_CANCELLED)?s.go(-Y.delta,!1):Y.type===Ql.pop&&kn(R,Ge.NAVIGATION_ABORTED|Ge.NAVIGATION_DUPLICATED)&&s.go(-1,!1)),A(re,T,R)}).catch(ji)}))}let $e=Ii(),xe=Ii(),fe;function Ie(M,Z,Y){dn(M);const re=xe.list();return re.length?re.forEach(ye=>ye(M,Z,Y)):console.error(M),Promise.reject(M)}function Ot(){return fe&&l.value!==rr?Promise.resolve():new Promise((M,Z)=>{$e.add([M,Z])})}function dn(M){return fe||(fe=!M,we(),$e.list().forEach(([Z,Y])=>M?Y(M):Z()),$e.reset()),M}function Ft(M,Z,Y,re){const{scrollBehavior:ye}=t;if(!ws||!ye)return Promise.resolve();const T=!Y&&pI(Rd(M.fullPath,0))||(re||!Y)&&history.state&&history.state.scroll||null;return Eo().then(()=>ye(M,Z,T)).then(R=>R&&fI(R)).catch(R=>Ie(R,M,Z))}const lt=M=>s.go(M);let Sn;const tn=new Set,nn={currentRoute:l,listening:!0,addRoute:g,removeRoute:S,clearRoutes:e.clearRoutes,hasRoute:x,getRoutes:P,resolve:O,options:t,push:q,replace:J,go:lt,back:()=>lt(-1),forward:()=>lt(1),beforeEach:i.add,beforeResolve:o.add,afterEach:c.add,onError:xe.add,isReady:Ot,install(M){M.component("RouterLink",Yt),M.component("RouterView",Jg),M.config.globalProperties.$router=nn,Object.defineProperty(M.config.globalProperties,"$route",{enumerable:!0,get:()=>de(l)}),ws&&!Sn&&l.value===rr&&(Sn=!0,q(s.location).catch(re=>{}));const Z={};for(const re in rr)Object.defineProperty(Z,re,{get:()=>l.value[re],enumerable:!0});M.provide(gc,nn),M.provide(Wu,Gm(Z)),M.provide(Jl,l);const Y=M.unmount;tn.add(M),M.unmount=function(){tn.delete(M),tn.size<1&&(u=rr,v&&v(),v=null,l.value=rr,Sn=!1,fe=!1),Y()}}};function yt(M){return M.reduce((Z,Y)=>Z.then(()=>y(Y)),Promise.resolve())}return nn}function WI(){return Zt(gc)}function zI(t){return Zt(Wu)}const KI=()=>{};var Ud={};const Xg=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},QI=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],c=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Zg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,c=o?t[s+1]:0,l=s+2<t.length,u=l?t[s+2]:0,f=i>>2,d=(i&3)<<4|c>>4;let m=(c&15)<<2|u>>6,g=u&63;l||(g=64,o||(m=64)),r.push(n[f],n[d],n[m],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Xg(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):QI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||u==null||d==null)throw new YI;const m=i<<2|c>>4;if(r.push(m),u!==64){const g=c<<4&240|u>>2;if(r.push(g),d!==64){const S=u<<6&192|d;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class YI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const JI=function(t){const e=Xg(t);return Zg.encodeByteArray(e,!0)},Oa=function(t){return JI(t).replace(/\./g,"")},e_=function(t){try{return Zg.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function XI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const ZI=()=>XI().__FIREBASE_DEFAULTS__,eA=()=>{if(typeof process>"u"||typeof Ud>"u")return;const t=Ud.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},tA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&e_(t[1]);return e&&JSON.parse(e)},_c=()=>{try{return KI()||ZI()||eA()||tA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},t_=t=>_c()?.emulatorHosts?.[t],nA=t=>{const e=t_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},n_=()=>_c()?.config,r_=t=>_c()?.[`_${t}`];class rA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function Js(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function s_(t){return(await fetch(t,{credentials:"include"})).ok}function sA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Oa(JSON.stringify(n)),Oa(JSON.stringify(o)),""].join(".")}const $i={};function iA(){const t={prod:[],emulator:[]};for(const e of Object.keys($i))$i[e]?t.emulator.push(e):t.prod.push(e);return t}function oA(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Bd=!1;function i_(t,e){if(typeof window>"u"||typeof document>"u"||!Js(window.location.host)||$i[t]===e||$i[t]||Bd)return;$i[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",i=iA().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function c(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function l(m,g){m.setAttribute("width","24"),m.setAttribute("id",g),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{Bd=!0,o()},m}function f(m,g){m.setAttribute("id",g),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function d(){const m=oA(r),g=n("text"),S=document.getElementById(g)||document.createElement("span"),P=n("learnmore"),x=document.getElementById(P)||document.createElement("a"),O=n("preprendIcon"),F=document.getElementById(O)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const $=m.element;c($),f(x,P);const q=u();l(F,O),$.append(F,S,x,q),document.body.appendChild($)}i?(S.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}function bt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function aA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(bt())}function cA(){const t=_c()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function uA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function hA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fA(){const t=bt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function dA(){return!cA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pA(){try{return typeof indexedDB=="object"}catch{return!1}}function mA(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(n){e(n)}})}const gA="FirebaseError";class Wn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=gA,Object.setPrototypeOf(this,Wn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wo.prototype.create)}}class wo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?_A(i,r):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new Wn(s,c,r)}}function _A(t,e){return t.replace(yA,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const yA=/\{\$([^}]+)}/g;function EA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function os(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(jd(i)&&jd(o)){if(!os(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function jd(t){return t!==null&&typeof t=="object"}function Io(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ri(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Si(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function vA(t,e){const n=new TA(t,e);return n.subscribe.bind(n)}class TA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");wA(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Tl),s.error===void 0&&(s.error=Tl),s.complete===void 0&&(s.complete=Tl);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wA(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Tl(){}function Ye(t){return t&&t._delegate?t._delegate:t}class as{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Qr="[DEFAULT]";class IA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new rA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(bA(e))try{this.getOrInitializeService({instanceIdentifier:Qr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Qr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Qr){return this.instances.has(e)}getOptions(e=Qr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:AA(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Qr){return this.component?this.component.multipleInstances?e:Qr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function AA(t){return t===Qr?void 0:t}function bA(t){return t.instantiationMode==="EAGER"}class RA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new IA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Ee;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ee||(Ee={}));const SA={debug:Ee.DEBUG,verbose:Ee.VERBOSE,info:Ee.INFO,warn:Ee.WARN,error:Ee.ERROR,silent:Ee.SILENT},PA=Ee.INFO,CA={[Ee.DEBUG]:"log",[Ee.VERBOSE]:"log",[Ee.INFO]:"info",[Ee.WARN]:"warn",[Ee.ERROR]:"error"},kA=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=CA[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class zu{constructor(e){this.name=e,this._logLevel=PA,this._logHandler=kA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?SA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ee.DEBUG,...e),this._logHandler(this,Ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ee.VERBOSE,...e),this._logHandler(this,Ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ee.INFO,...e),this._logHandler(this,Ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ee.WARN,...e),this._logHandler(this,Ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ee.ERROR,...e),this._logHandler(this,Ee.ERROR,...e)}}const xA=(t,e)=>e.some(n=>t instanceof n);let $d,qd;function NA(){return $d||($d=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function VA(){return qd||(qd=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const o_=new WeakMap,Xl=new WeakMap,a_=new WeakMap,wl=new WeakMap,Ku=new WeakMap;function DA(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(_r(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&o_.set(n,t)}).catch(()=>{}),Ku.set(e,t),e}function OA(t){if(Xl.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Xl.set(t,e)}let Zl={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Xl.get(t);if(e==="objectStoreNames")return t.objectStoreNames||a_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _r(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function MA(t){Zl=t(Zl)}function LA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Il(this),e,...n);return a_.set(r,e.sort?e.sort():[e]),_r(r)}:VA().includes(t)?function(...e){return t.apply(Il(this),e),_r(o_.get(this))}:function(...e){return _r(t.apply(Il(this),e))}}function FA(t){return typeof t=="function"?LA(t):(t instanceof IDBTransaction&&OA(t),xA(t,NA())?new Proxy(t,Zl):t)}function _r(t){if(t instanceof IDBRequest)return DA(t);if(wl.has(t))return wl.get(t);const e=FA(t);return e!==t&&(wl.set(t,e),Ku.set(e,t)),e}const Il=t=>Ku.get(t);function UA(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),c=_r(o);return r&&o.addEventListener("upgradeneeded",l=>{r(_r(o.result),l.oldVersion,l.newVersion,_r(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),c.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),c}const BA=["get","getKey","getAll","getAllKeys","count"],jA=["put","add","delete","clear"],Al=new Map;function Hd(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Al.get(e))return Al.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=jA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||BA.includes(n)))return;const i=async function(o,...c){const l=this.transaction(o,s?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(c.shift())),(await Promise.all([u[n](...c),s&&l.done]))[0]};return Al.set(e,i),i}MA(t=>({...t,get:(e,n,r)=>Hd(e,n)||t.get(e,n,r),has:(e,n)=>!!Hd(e,n)||t.has(e,n)}));class $A{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(qA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function qA(t){return t.getComponent()?.type==="VERSION"}const eu="@firebase/app",Gd="0.14.5";const jn=new zu("@firebase/app"),HA="@firebase/app-compat",GA="@firebase/analytics-compat",WA="@firebase/analytics",zA="@firebase/app-check-compat",KA="@firebase/app-check",QA="@firebase/auth",YA="@firebase/auth-compat",JA="@firebase/database",XA="@firebase/data-connect",ZA="@firebase/database-compat",eb="@firebase/functions",tb="@firebase/functions-compat",nb="@firebase/installations",rb="@firebase/installations-compat",sb="@firebase/messaging",ib="@firebase/messaging-compat",ob="@firebase/performance",ab="@firebase/performance-compat",cb="@firebase/remote-config",lb="@firebase/remote-config-compat",ub="@firebase/storage",hb="@firebase/storage-compat",fb="@firebase/firestore",db="@firebase/ai",pb="@firebase/firestore-compat",mb="firebase",gb="12.5.0";const tu="[DEFAULT]",_b={[eu]:"fire-core",[HA]:"fire-core-compat",[WA]:"fire-analytics",[GA]:"fire-analytics-compat",[KA]:"fire-app-check",[zA]:"fire-app-check-compat",[QA]:"fire-auth",[YA]:"fire-auth-compat",[JA]:"fire-rtdb",[XA]:"fire-data-connect",[ZA]:"fire-rtdb-compat",[eb]:"fire-fn",[tb]:"fire-fn-compat",[nb]:"fire-iid",[rb]:"fire-iid-compat",[sb]:"fire-fcm",[ib]:"fire-fcm-compat",[ob]:"fire-perf",[ab]:"fire-perf-compat",[cb]:"fire-rc",[lb]:"fire-rc-compat",[ub]:"fire-gcs",[hb]:"fire-gcs-compat",[fb]:"fire-fst",[pb]:"fire-fst-compat",[db]:"fire-vertex","fire-js":"fire-js",[mb]:"fire-js-all"};const Ma=new Map,yb=new Map,nu=new Map;function Wd(t,e){try{t.container.addComponent(e)}catch(n){jn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Bs(t){const e=t.name;if(nu.has(e))return jn.debug(`There were multiple attempts to register component ${e}.`),!1;nu.set(e,t);for(const n of Ma.values())Wd(n,t);for(const n of yb.values())Wd(n,t);return!0}function Qu(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function qt(t){return t==null?!1:t.settings!==void 0}const Eb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yr=new wo("app","Firebase",Eb);class vb{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new as("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yr.create("app-deleted",{appName:this._name})}}const Xs=gb;function c_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:tu,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw yr.create("bad-app-name",{appName:String(s)});if(n||(n=n_()),!n)throw yr.create("no-options");const i=Ma.get(s);if(i){if(os(n,i.options)&&os(r,i.config))return i;throw yr.create("duplicate-app",{appName:s})}const o=new RA(s);for(const l of nu.values())o.addComponent(l);const c=new vb(n,r,o);return Ma.set(s,c),c}function l_(t=tu){const e=Ma.get(t);if(!e&&t===tu&&n_())return c_();if(!e)throw yr.create("no-app",{appName:t});return e}function Er(t,e,n){let r=_b[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),jn.warn(o.join(" "));return}Bs(new as(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const Tb="firebase-heartbeat-database",wb=1,no="firebase-heartbeat-store";let bl=null;function u_(){return bl||(bl=UA(Tb,wb,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(no)}catch(n){console.warn(n)}}}}).catch(t=>{throw yr.create("idb-open",{originalErrorMessage:t.message})})),bl}async function Ib(t){try{const n=(await u_()).transaction(no),r=await n.objectStore(no).get(h_(t));return await n.done,r}catch(e){if(e instanceof Wn)jn.warn(e.message);else{const n=yr.create("idb-get",{originalErrorMessage:e?.message});jn.warn(n.message)}}}async function zd(t,e){try{const r=(await u_()).transaction(no,"readwrite");await r.objectStore(no).put(e,h_(t)),await r.done}catch(n){if(n instanceof Wn)jn.warn(n.message);else{const r=yr.create("idb-set",{originalErrorMessage:n?.message});jn.warn(r.message)}}}function h_(t){return`${t.name}!${t.options.appId}`}const Ab=1024,bb=30;class Rb{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Pb(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Kd();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>bb){const s=Cb(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){jn.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Kd(),{heartbeatsToSend:n,unsentEntries:r}=Sb(this._heartbeatsCache.heartbeats),s=Oa(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return jn.warn(e),""}}}function Kd(){return new Date().toISOString().substring(0,10)}function Sb(t,e=Ab){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Qd(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Qd(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Pb{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return pA()?mA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Ib(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return zd(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return zd(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Qd(t){return Oa(JSON.stringify({version:2,heartbeats:t})).length}function Cb(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function kb(t){Bs(new as("platform-logger",e=>new $A(e),"PRIVATE")),Bs(new as("heartbeat",e=>new Rb(e),"PRIVATE")),Er(eu,Gd,t),Er(eu,Gd,"esm2020"),Er("fire-js","")}kb("");function f_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const xb=f_,d_=new wo("auth","Firebase",f_());const La=new zu("@firebase/auth");function Nb(t,...e){La.logLevel<=Ee.WARN&&La.warn(`Auth (${Xs}): ${t}`,...e)}function ha(t,...e){La.logLevel<=Ee.ERROR&&La.error(`Auth (${Xs}): ${t}`,...e)}function en(t,...e){throw Ju(t,...e)}function an(t,...e){return Ju(t,...e)}function Yu(t,e,n){const r={...xb(),[e]:n};return new wo("auth","Firebase",r).create(e,{appName:t.name})}function Fn(t){return Yu(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Vb(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&en(t,"argument-error"),Yu(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ju(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return d_.create(t,...e)}function ue(t,e,...n){if(!t)throw Ju(e,...n)}function Mn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ha(e),new Error(e)}function $n(t,e){t||Mn(e)}function ru(){return typeof self<"u"&&self.location?.href||""}function Db(){return Yd()==="http:"||Yd()==="https:"}function Yd(){return typeof self<"u"&&self.location?.protocol||null}function Ob(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Db()||uA()||"connection"in navigator)?navigator.onLine:!0}function Mb(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class Ao{constructor(e,n){this.shortDelay=e,this.longDelay=n,$n(n>e,"Short delay should be less than long delay!"),this.isMobile=aA()||hA()}get(){return Ob()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Xu(t,e){$n(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class p_{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Mn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Mn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Mn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Lb={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const Fb=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Ub=new Ao(3e4,6e4);function Dr(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Or(t,e,n,r,s={}){return m_(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const c=Io({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...i};return lA()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Js(t.emulatorConfig.host)&&(u.credentials="include"),p_.fetch()(await g_(t,t.config.apiHost,n,c),u)})}async function m_(t,e,n){t._canInitEmulator=!1;const r={...Lb,...e};try{const s=new jb(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Zo(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const c=i.ok?o.errorMessage:o.error.message,[l,u]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Zo(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Zo(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Zo(t,"user-disabled",o);const f=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Yu(t,f,u);en(t,f)}}catch(s){if(s instanceof Wn)throw s;en(t,"network-request-failed",{message:String(s)})}}async function bo(t,e,n,r,s={}){const i=await Or(t,e,n,r,s);return"mfaPendingCredential"in i&&en(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function g_(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?Xu(t.config,s):`${t.config.apiScheme}://${s}`;return Fb.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function Bb(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class jb{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(an(this.auth,"network-request-failed")),Ub.get())})}}function Zo(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=an(t,e,r);return s.customData._tokenResponse=n,s}function Jd(t){return t!==void 0&&t.enterprise!==void 0}class $b{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Bb(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function qb(t,e){return Or(t,"GET","/v2/recaptchaConfig",Dr(t,e))}async function Hb(t,e){return Or(t,"POST","/v1/accounts:delete",e)}async function Fa(t,e){return Or(t,"POST","/v1/accounts:lookup",e)}function qi(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Gb(t,e=!1){const n=Ye(t),r=await n.getIdToken(e),s=Zu(r);ue(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i?.sign_in_provider;return{claims:s,token:r,authTime:qi(Rl(s.auth_time)),issuedAtTime:qi(Rl(s.iat)),expirationTime:qi(Rl(s.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function Rl(t){return Number(t)*1e3}function Zu(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ha("JWT malformed, contained fewer than 3 sections"),null;try{const s=e_(n);return s?JSON.parse(s):(ha("Failed to decode base64 JWT payload"),null)}catch(s){return ha("Caught error parsing JWT payload as JSON",s?.toString()),null}}function Xd(t){const e=Zu(t);return ue(e,"internal-error"),ue(typeof e.exp<"u","internal-error"),ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function ro(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Wn&&Wb(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Wb({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class zb{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class su{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=qi(this.lastLoginAt),this.creationTime=qi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Ua(t){const e=t.auth,n=await t.getIdToken(),r=await ro(t,Fa(e,{idToken:n}));ue(r?.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=s.providerUserInfo?.length?__(s.providerUserInfo):[],o=Qb(t.providerData,i),c=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!o?.length,u=c?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new su(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,f)}async function Kb(t){const e=Ye(t);await Ua(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Qb(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function __(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function Yb(t,e){const n=await m_(t,{},async()=>{const r=Io({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await g_(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:c,body:r};return t.emulatorConfig&&Js(t.emulatorConfig.host)&&(l.credentials="include"),p_.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Jb(t,e){return Or(t,"POST","/v2/accounts:revokeToken",Dr(t,e))}class xs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ue(e.idToken,"internal-error"),ue(typeof e.idToken<"u","internal-error"),ue(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Xd(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ue(e.length!==0,"internal-error");const n=Xd(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await Yb(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new xs;return r&&(ue(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ue(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ue(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xs,this.toJSON())}_performRefresh(){return Mn("not implemented")}}function sr(t,e){ue(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class sn{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new zb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new su(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await ro(this,this.stsTokenManager.getToken(this.auth,e));return ue(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Gb(this,e)}reload(){return Kb(this)}_assign(e){this!==e&&(ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new sn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ua(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(qt(this.auth.app))return Promise.reject(Fn(this.auth));const e=await this.getIdToken();return await ro(this,Hb(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,c=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:d,emailVerified:m,isAnonymous:g,providerData:S,stsTokenManager:P}=n;ue(d&&P,e,"internal-error");const x=xs.fromJSON(this.name,P);ue(typeof d=="string",e,"internal-error"),sr(r,e.name),sr(s,e.name),ue(typeof m=="boolean",e,"internal-error"),ue(typeof g=="boolean",e,"internal-error"),sr(i,e.name),sr(o,e.name),sr(c,e.name),sr(l,e.name),sr(u,e.name),sr(f,e.name);const O=new sn({uid:d,auth:e,email:s,emailVerified:m,displayName:r,isAnonymous:g,photoURL:o,phoneNumber:i,tenantId:c,stsTokenManager:x,createdAt:u,lastLoginAt:f});return S&&Array.isArray(S)&&(O.providerData=S.map(F=>({...F}))),l&&(O._redirectEventId=l),O}static async _fromIdTokenResponse(e,n,r=!1){const s=new xs;s.updateFromServerResponse(n);const i=new sn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Ua(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ue(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?__(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!i?.length,c=new xs;c.updateFromIdToken(r);const l=new sn({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new su(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!i?.length};return Object.assign(l,u),l}}const Zd=new Map;function Ln(t){$n(t instanceof Function,"Expected a class definition");let e=Zd.get(t);return e?($n(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Zd.set(t,e),e)}class y_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}y_.type="NONE";const ep=y_;function fa(t,e,n){return`firebase:${t}:${e}:${n}`}class Ns{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=fa(this.userKey,s.apiKey,i),this.fullPersistenceKey=fa("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Fa(this.auth,{idToken:e}).catch(()=>{});return n?sn._fromGetAccountInfoResponse(this.auth,n,e):null}return sn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ns(Ln(ep),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||Ln(ep);const o=fa(r,e.config.apiKey,e.name);let c=null;for(const u of n)try{const f=await u._get(o);if(f){let d;if(typeof f=="string"){const m=await Fa(e,{idToken:f}).catch(()=>{});if(!m)break;d=await sn._fromGetAccountInfoResponse(e,m,f)}else d=sn._fromJSON(e,f);u!==i&&(c=d),i=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Ns(i,e,r):(i=l[0],c&&await i._set(o,c.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Ns(i,e,r))}}function tp(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(w_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(E_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(A_(e))return"Blackberry";if(b_(e))return"Webos";if(v_(e))return"Safari";if((e.includes("chrome/")||T_(e))&&!e.includes("edge/"))return"Chrome";if(I_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function E_(t=bt()){return/firefox\//i.test(t)}function v_(t=bt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function T_(t=bt()){return/crios\//i.test(t)}function w_(t=bt()){return/iemobile/i.test(t)}function I_(t=bt()){return/android/i.test(t)}function A_(t=bt()){return/blackberry/i.test(t)}function b_(t=bt()){return/webos/i.test(t)}function eh(t=bt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Xb(t=bt()){return eh(t)&&!!window.navigator?.standalone}function Zb(){return fA()&&document.documentMode===10}function R_(t=bt()){return eh(t)||I_(t)||b_(t)||A_(t)||/windows phone/i.test(t)||w_(t)}function S_(t,e=[]){let n;switch(t){case"Browser":n=tp(bt());break;case"Worker":n=`${tp(bt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Xs}/${r}`}class e0{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,c)=>{try{const l=e(i);o(l)}catch(l){c(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function t0(t,e={}){return Or(t,"GET","/v2/passwordPolicy",Dr(t,e))}const n0=6;class r0{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??n0,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class s0{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new np(this),this.idTokenSubscription=new np(this),this.beforeStateQueue=new e0(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=d_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ln(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ns.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Fa(this,{idToken:e}),r=await sn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(qt(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=r?._redirectEventId,c=await this.tryRedirectSignIn(e);(!i||i===o)&&c?.user&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(i){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ua(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Mb()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(qt(this.app))return Promise.reject(Fn(this));const n=e?Ye(e):null;return n&&ue(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return qt(this.app)?Promise.reject(Fn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return qt(this.app)?Promise.reject(Fn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ln(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await t0(this),n=new r0(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new wo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Jb(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ln(e)||this._popupRedirectResolver;ue(n,this,"argument-error"),this.redirectPersistenceManager=await Ns.create(this,[Ln(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ue(c,this,"internal-error"),c.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=S_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(qt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Nb(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Mr(t){return Ye(t)}class np{constructor(e){this.auth=e,this.observer=null,this.addObserver=vA(n=>this.observer=n)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let yc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function i0(t){yc=t}function P_(t){return yc.loadJS(t)}function o0(){return yc.recaptchaEnterpriseScript}function a0(){return yc.gapiScript}function c0(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class l0{constructor(){this.enterprise=new u0}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class u0{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const h0="recaptcha-enterprise",C_="NO_RECAPTCHA";class f0{constructor(e){this.type=h0,this.auth=Mr(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,c)=>{qb(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const u=new $b(l);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(l=>{c(l)})})}function s(i,o,c){const l=window.grecaptcha;Jd(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(C_)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new l0().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(c=>{if(!n&&Jd(window.grecaptcha))s(c,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=o0();l.length!==0&&(l+=c),P_(l).then(()=>{s(c,i,o)}).catch(u=>{o(u)})}}).catch(c=>{o(c)})})}}async function rp(t,e,n,r=!1,s=!1){const i=new f0(t);let o;if(s)o=C_;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const c={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const l=c.phoneEnrollmentInfo.phoneNumber,u=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const l=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function iu(t,e,n,r,s){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await rp(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await rp(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}function d0(t,e){const n=Qu(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(os(i,e??{}))return s;en(s,"already-initialized")}return n.initialize({options:e})}function p0(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Ln);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function m0(t,e,n){const r=Mr(t);ue(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=k_(e),{host:o,port:c}=g0(e),l=c===null?"":`:${c}`,u={url:`${i}//${o}${l}/`},f=Object.freeze({host:o,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ue(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ue(os(u,r.config.emulator)&&os(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,Js(o)?(s_(`${i}//${o}${l}`),i_("Auth",!0)):_0()}function k_(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function g0(t){const e=k_(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:sp(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:sp(o)}}}function sp(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function _0(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class th{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Mn("not implemented")}_getIdTokenResponse(e){return Mn("not implemented")}_linkToIdToken(e,n){return Mn("not implemented")}_getReauthenticationResolver(e){return Mn("not implemented")}}async function y0(t,e){return Or(t,"POST","/v1/accounts:signUp",e)}async function E0(t,e){return bo(t,"POST","/v1/accounts:signInWithPassword",Dr(t,e))}async function v0(t,e){return bo(t,"POST","/v1/accounts:signInWithEmailLink",Dr(t,e))}async function T0(t,e){return bo(t,"POST","/v1/accounts:signInWithEmailLink",Dr(t,e))}class so extends th{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new so(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new so(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return iu(e,n,"signInWithPassword",E0);case"emailLink":return v0(e,{email:this._email,oobCode:this._password});default:en(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return iu(e,r,"signUpPassword",y0);case"emailLink":return T0(e,{idToken:n,email:this._email,oobCode:this._password});default:en(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Vs(t,e){return bo(t,"POST","/v1/accounts:signInWithIdp",Dr(t,e))}const w0="http://localhost";class cs extends th{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new cs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):en("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new cs(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Vs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Vs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Vs(e,n)}buildRequest(){const e={requestUri:w0,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Io(n)}return e}}function I0(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function A0(t){const e=Ri(Si(t)).link,n=e?Ri(Si(e)).deep_link_id:null,r=Ri(Si(t)).deep_link_id;return(r?Ri(Si(r)).link:null)||r||n||e||t}class nh{constructor(e){const n=Ri(Si(e)),r=n.apiKey??null,s=n.oobCode??null,i=I0(n.mode??null);ue(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=A0(e);try{return new nh(n)}catch{return null}}}class Zs{constructor(){this.providerId=Zs.PROVIDER_ID}static credential(e,n){return so._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=nh.parseLink(n);return ue(r,"argument-error"),so._fromEmailAndCode(e,r.code,r.tenantId)}}Zs.PROVIDER_ID="password";Zs.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Zs.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class rh{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ro extends rh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class lr extends Ro{constructor(){super("facebook.com")}static credential(e){return cs._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return lr.credential(e.oauthAccessToken)}catch{return null}}}lr.FACEBOOK_SIGN_IN_METHOD="facebook.com";lr.PROVIDER_ID="facebook.com";class On extends Ro{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return cs._fromParams({providerId:On.PROVIDER_ID,signInMethod:On.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return On.credentialFromTaggedObject(e)}static credentialFromError(e){return On.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return On.credential(n,r)}catch{return null}}}On.GOOGLE_SIGN_IN_METHOD="google.com";On.PROVIDER_ID="google.com";class ur extends Ro{constructor(){super("github.com")}static credential(e){return cs._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ur.credentialFromTaggedObject(e)}static credentialFromError(e){return ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ur.credential(e.oauthAccessToken)}catch{return null}}}ur.GITHUB_SIGN_IN_METHOD="github.com";ur.PROVIDER_ID="github.com";class hr extends Ro{constructor(){super("twitter.com")}static credential(e,n){return cs._fromParams({providerId:hr.PROVIDER_ID,signInMethod:hr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return hr.credentialFromTaggedObject(e)}static credentialFromError(e){return hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return hr.credential(n,r)}catch{return null}}}hr.TWITTER_SIGN_IN_METHOD="twitter.com";hr.PROVIDER_ID="twitter.com";async function b0(t,e){return bo(t,"POST","/v1/accounts:signUp",Dr(t,e))}class ls{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await sn._fromIdTokenResponse(e,r,s),o=ip(r);return new ls({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=ip(r);return new ls({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function ip(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Ba extends Wn{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Ba.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Ba(e,n,r,s)}}function x_(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Ba._fromErrorAndOperation(t,i,e,r):i})}async function R0(t,e,n=!1){const r=await ro(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ls._forOperation(t,"link",r)}async function S0(t,e,n=!1){const{auth:r}=t;if(qt(r.app))return Promise.reject(Fn(r));const s="reauthenticate";try{const i=await ro(t,x_(r,s,e,t),n);ue(i.idToken,r,"internal-error");const o=Zu(i.idToken);ue(o,r,"internal-error");const{sub:c}=o;return ue(t.uid===c,r,"user-mismatch"),ls._forOperation(t,s,i)}catch(i){throw i?.code==="auth/user-not-found"&&en(r,"user-mismatch"),i}}async function N_(t,e,n=!1){if(qt(t.app))return Promise.reject(Fn(t));const r="signIn",s=await x_(t,r,e),i=await ls._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function P0(t,e){return N_(Mr(t),e)}async function V_(t){const e=Mr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function C0(t,e,n){if(qt(t.app))return Promise.reject(Fn(t));const r=Mr(t),o=await iu(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",b0).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&V_(t),l}),c=await ls._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(c.user),c}function k0(t,e,n){return qt(t.app)?Promise.reject(Fn(t)):P0(Ye(t),Zs.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&V_(t),r})}function x0(t,e,n,r){return Ye(t).onIdTokenChanged(e,n,r)}function N0(t,e,n){return Ye(t).beforeAuthStateChanged(e,n)}function V0(t,e,n,r){return Ye(t).onAuthStateChanged(e,n,r)}function D0(t){return Ye(t).signOut()}const ja="__sak";class D_{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ja,"1"),this.storage.removeItem(ja),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const O0=1e3,M0=10;class O_ extends D_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=R_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);Zb()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,M0):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},O0)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}O_.type="LOCAL";const L0=O_;class M_ extends D_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}M_.type="SESSION";const L_=M_;function F0(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Ec{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Ec(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(o).map(async u=>u(n.origin,i)),l=await F0(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ec.receivers=[];function sh(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class U0{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((c,l)=>{const u=sh("",20);s.port1.start();const f=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(d){const m=d;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(m.data.response);break;default:clearTimeout(f),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function Tn(){return window}function B0(t){Tn().location.href=t}function F_(){return typeof Tn().WorkerGlobalScope<"u"&&typeof Tn().importScripts=="function"}async function j0(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function $0(){return navigator?.serviceWorker?.controller||null}function q0(){return F_()?self:null}const U_="firebaseLocalStorageDb",H0=1,$a="firebaseLocalStorage",B_="fbase_key";class So{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function vc(t,e){return t.transaction([$a],e?"readwrite":"readonly").objectStore($a)}function G0(){const t=indexedDB.deleteDatabase(U_);return new So(t).toPromise()}function ou(){const t=indexedDB.open(U_,H0);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore($a,{keyPath:B_})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains($a)?e(r):(r.close(),await G0(),e(await ou()))})})}async function op(t,e,n){const r=vc(t,!0).put({[B_]:e,value:n});return new So(r).toPromise()}async function W0(t,e){const n=vc(t,!1).get(e),r=await new So(n).toPromise();return r===void 0?null:r.value}function ap(t,e){const n=vc(t,!0).delete(e);return new So(n).toPromise()}const z0=800,K0=3;class j_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ou(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>K0)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return F_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ec._getInstance(q0()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await j0(),!this.activeServiceWorker)return;this.sender=new U0(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||$0()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ou();return await op(e,ja,"1"),await ap(e,ja),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>op(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>W0(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>ap(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=vc(s,!1).getAll();return new So(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),z0)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}j_.type="LOCAL";const Q0=j_;new Ao(3e4,6e4);function $_(t,e){return e?Ln(e):(ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class ih extends th{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Vs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Vs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Vs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Y0(t){return N_(t.auth,new ih(t),t.bypassAuthState)}function J0(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),S0(n,new ih(t),t.bypassAuthState)}async function X0(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),R0(n,new ih(t),t.bypassAuthState)}class q_{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:c}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Y0;case"linkViaPopup":case"linkViaRedirect":return X0;case"reauthViaPopup":case"reauthViaRedirect":return J0;default:en(this.auth,"internal-error")}}resolve(e){$n(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$n(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Z0=new Ao(2e3,1e4);async function eR(t,e,n){if(qt(t.app))return Promise.reject(an(t,"operation-not-supported-in-this-environment"));const r=Mr(t);Vb(t,e,rh);const s=$_(r,n);return new ts(r,"signInViaPopup",e,s).executeNotNull()}class ts extends q_{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,ts.currentPopupAction&&ts.currentPopupAction.cancel(),ts.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ue(e,this.auth,"internal-error"),e}async onExecution(){$n(this.filter.length===1,"Popup operations only handle one event");const e=sh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(an(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(an(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ts.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(an(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Z0.get())};e()}}ts.currentPopupAction=null;const tR="pendingRedirect",da=new Map;class nR extends q_{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=da.get(this.auth._key());if(!e){try{const r=await rR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}da.set(this.auth._key(),e)}return this.bypassAuthState||da.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function rR(t,e){const n=oR(e),r=iR(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function sR(t,e){da.set(t._key(),e)}function iR(t){return Ln(t._redirectPersistence)}function oR(t){return fa(tR,t.config.apiKey,t.name)}async function aR(t,e,n=!1){if(qt(t.app))return Promise.reject(Fn(t));const r=Mr(t),s=$_(r,e),o=await new nR(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}const cR=600*1e3;class lR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!uR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!H_(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(an(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=cR&&this.cachedEventUids.clear(),this.cachedEventUids.has(cp(e))}saveEventToCache(e){this.cachedEventUids.add(cp(e)),this.lastProcessedEventTime=Date.now()}}function cp(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function H_({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function uR(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return H_(t);default:return!1}}async function hR(t,e={}){return Or(t,"GET","/v1/projects",e)}const fR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dR=/^https?/;async function pR(t){if(t.config.emulator)return;const{authorizedDomains:e}=await hR(t);for(const n of e)try{if(mR(n))return}catch{}en(t,"unauthorized-domain")}function mR(t){const e=ru(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!dR.test(n))return!1;if(fR.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const gR=new Ao(3e4,6e4);function lp(){const t=Tn().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function _R(t){return new Promise((e,n)=>{function r(){lp(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{lp(),n(an(t,"network-request-failed"))},timeout:gR.get()})}if(Tn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Tn().gapi?.load)r();else{const s=c0("iframefcb");return Tn()[s]=()=>{gapi.load?r():n(an(t,"network-request-failed"))},P_(`${a0()}?onload=${s}`).catch(i=>n(i))}}).catch(e=>{throw pa=null,e})}let pa=null;function yR(t){return pa=pa||_R(t),pa}const ER=new Ao(5e3,15e3),vR="__/auth/iframe",TR="emulator/auth/iframe",wR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},IR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function AR(t){const e=t.config;ue(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Xu(e,TR):`https://${t.config.authDomain}/${vR}`,r={apiKey:e.apiKey,appName:t.name,v:Xs},s=IR.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Io(r).slice(1)}`}async function bR(t){const e=await yR(t),n=Tn().gapi;return ue(n,t,"internal-error"),e.open({where:document.body,url:AR(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wR,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=an(t,"network-request-failed"),c=Tn().setTimeout(()=>{i(o)},ER.get());function l(){Tn().clearTimeout(c),s(r)}r.ping(l).then(l,()=>{i(o)})}))}const RR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},SR=500,PR=600,CR="_blank",kR="http://localhost";class up{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function xR(t,e,n,r=SR,s=PR){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const l={...RR,width:r.toString(),height:s.toString(),top:i,left:o},u=bt().toLowerCase();n&&(c=T_(u)?CR:n),E_(u)&&(e=e||kR,l.scrollbars="yes");const f=Object.entries(l).reduce((m,[g,S])=>`${m}${g}=${S},`,"");if(Xb(u)&&c!=="_self")return NR(e||"",c),new up(null);const d=window.open(e||"",c,f);ue(d,t,"popup-blocked");try{d.focus()}catch{}return new up(d)}function NR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const VR="__/auth/handler",DR="emulator/auth/handler",OR=encodeURIComponent("fac");async function hp(t,e,n,r,s,i){ue(t.config.authDomain,t,"auth-domain-config-required"),ue(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Xs,eventId:s};if(e instanceof rh){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",EA(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,d]of Object.entries({}))o[f]=d}if(e instanceof Ro){const f=e.getScopes().filter(d=>d!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const l=await t._getAppCheckToken(),u=l?`#${OR}=${encodeURIComponent(l)}`:"";return`${MR(t)}?${Io(c).slice(1)}${u}`}function MR({config:t}){return t.emulator?Xu(t,DR):`https://${t.authDomain}/${VR}`}const Sl="webStorageSupport";class LR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=L_,this._completeRedirectFn=aR,this._overrideRedirectResult=sR}async _openPopup(e,n,r,s){$n(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await hp(e,n,r,ru(),s);return xR(e,i,sh())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await hp(e,n,r,ru(),s);return B0(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):($n(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await bR(e),r=new lR(e);return n.register("authEvent",s=>(ue(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Sl,{type:Sl},s=>{const i=s?.[0]?.[Sl];i!==void 0&&n(!!i),en(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=pR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return R_()||v_()||eh()}}const FR=LR;var fp="@firebase/auth",dp="1.11.1";class UR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function BR(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jR(t){Bs(new as("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;ue(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:S_(t)},u=new s0(r,s,i,l);return p0(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Bs(new as("auth-internal",e=>{const n=Mr(e.getProvider("auth").getImmediate());return(r=>new UR(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Er(fp,dp,BR(t)),Er(fp,dp,"esm2020")}const $R=300,qR=r_("authIdTokenMaxAge")||$R;let pp=null;const HR=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>qR)return;const s=n?.token;pp!==s&&(pp=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function GR(t=l_()){const e=Qu(t,"auth");if(e.isInitialized())return e.getImmediate();const n=d0(t,{popupRedirectResolver:FR,persistence:[Q0,L0,L_]}),r=r_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=HR(i.toString());N0(n,o,()=>o(n.currentUser)),x0(n,c=>o(c))}}const s=t_("auth");return s&&m0(n,`http://${s}`),n}function WR(){return document.getElementsByTagName("head")?.[0]??document}i0({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=an("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",WR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jR("Browser");var zR="firebase",KR="12.5.0";Er(zR,KR,"app");var mp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var vr,G_;(function(){var t;function e(b,E){function y(){}y.prototype=E.prototype,b.F=E.prototype,b.prototype=new y,b.prototype.constructor=b,b.D=function(w,A,I){for(var v=Array(arguments.length-2),we=2;we<arguments.length;we++)v[we-2]=arguments[we];return E.prototype[A].apply(w,v)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(b,E,y){y||(y=0);const w=Array(16);if(typeof E=="string")for(var A=0;A<16;++A)w[A]=E.charCodeAt(y++)|E.charCodeAt(y++)<<8|E.charCodeAt(y++)<<16|E.charCodeAt(y++)<<24;else for(A=0;A<16;++A)w[A]=E[y++]|E[y++]<<8|E[y++]<<16|E[y++]<<24;E=b.g[0],y=b.g[1],A=b.g[2];let I=b.g[3],v;v=E+(I^y&(A^I))+w[0]+3614090360&4294967295,E=y+(v<<7&4294967295|v>>>25),v=I+(A^E&(y^A))+w[1]+3905402710&4294967295,I=E+(v<<12&4294967295|v>>>20),v=A+(y^I&(E^y))+w[2]+606105819&4294967295,A=I+(v<<17&4294967295|v>>>15),v=y+(E^A&(I^E))+w[3]+3250441966&4294967295,y=A+(v<<22&4294967295|v>>>10),v=E+(I^y&(A^I))+w[4]+4118548399&4294967295,E=y+(v<<7&4294967295|v>>>25),v=I+(A^E&(y^A))+w[5]+1200080426&4294967295,I=E+(v<<12&4294967295|v>>>20),v=A+(y^I&(E^y))+w[6]+2821735955&4294967295,A=I+(v<<17&4294967295|v>>>15),v=y+(E^A&(I^E))+w[7]+4249261313&4294967295,y=A+(v<<22&4294967295|v>>>10),v=E+(I^y&(A^I))+w[8]+1770035416&4294967295,E=y+(v<<7&4294967295|v>>>25),v=I+(A^E&(y^A))+w[9]+2336552879&4294967295,I=E+(v<<12&4294967295|v>>>20),v=A+(y^I&(E^y))+w[10]+4294925233&4294967295,A=I+(v<<17&4294967295|v>>>15),v=y+(E^A&(I^E))+w[11]+2304563134&4294967295,y=A+(v<<22&4294967295|v>>>10),v=E+(I^y&(A^I))+w[12]+1804603682&4294967295,E=y+(v<<7&4294967295|v>>>25),v=I+(A^E&(y^A))+w[13]+4254626195&4294967295,I=E+(v<<12&4294967295|v>>>20),v=A+(y^I&(E^y))+w[14]+2792965006&4294967295,A=I+(v<<17&4294967295|v>>>15),v=y+(E^A&(I^E))+w[15]+1236535329&4294967295,y=A+(v<<22&4294967295|v>>>10),v=E+(A^I&(y^A))+w[1]+4129170786&4294967295,E=y+(v<<5&4294967295|v>>>27),v=I+(y^A&(E^y))+w[6]+3225465664&4294967295,I=E+(v<<9&4294967295|v>>>23),v=A+(E^y&(I^E))+w[11]+643717713&4294967295,A=I+(v<<14&4294967295|v>>>18),v=y+(I^E&(A^I))+w[0]+3921069994&4294967295,y=A+(v<<20&4294967295|v>>>12),v=E+(A^I&(y^A))+w[5]+3593408605&4294967295,E=y+(v<<5&4294967295|v>>>27),v=I+(y^A&(E^y))+w[10]+38016083&4294967295,I=E+(v<<9&4294967295|v>>>23),v=A+(E^y&(I^E))+w[15]+3634488961&4294967295,A=I+(v<<14&4294967295|v>>>18),v=y+(I^E&(A^I))+w[4]+3889429448&4294967295,y=A+(v<<20&4294967295|v>>>12),v=E+(A^I&(y^A))+w[9]+568446438&4294967295,E=y+(v<<5&4294967295|v>>>27),v=I+(y^A&(E^y))+w[14]+3275163606&4294967295,I=E+(v<<9&4294967295|v>>>23),v=A+(E^y&(I^E))+w[3]+4107603335&4294967295,A=I+(v<<14&4294967295|v>>>18),v=y+(I^E&(A^I))+w[8]+1163531501&4294967295,y=A+(v<<20&4294967295|v>>>12),v=E+(A^I&(y^A))+w[13]+2850285829&4294967295,E=y+(v<<5&4294967295|v>>>27),v=I+(y^A&(E^y))+w[2]+4243563512&4294967295,I=E+(v<<9&4294967295|v>>>23),v=A+(E^y&(I^E))+w[7]+1735328473&4294967295,A=I+(v<<14&4294967295|v>>>18),v=y+(I^E&(A^I))+w[12]+2368359562&4294967295,y=A+(v<<20&4294967295|v>>>12),v=E+(y^A^I)+w[5]+4294588738&4294967295,E=y+(v<<4&4294967295|v>>>28),v=I+(E^y^A)+w[8]+2272392833&4294967295,I=E+(v<<11&4294967295|v>>>21),v=A+(I^E^y)+w[11]+1839030562&4294967295,A=I+(v<<16&4294967295|v>>>16),v=y+(A^I^E)+w[14]+4259657740&4294967295,y=A+(v<<23&4294967295|v>>>9),v=E+(y^A^I)+w[1]+2763975236&4294967295,E=y+(v<<4&4294967295|v>>>28),v=I+(E^y^A)+w[4]+1272893353&4294967295,I=E+(v<<11&4294967295|v>>>21),v=A+(I^E^y)+w[7]+4139469664&4294967295,A=I+(v<<16&4294967295|v>>>16),v=y+(A^I^E)+w[10]+3200236656&4294967295,y=A+(v<<23&4294967295|v>>>9),v=E+(y^A^I)+w[13]+681279174&4294967295,E=y+(v<<4&4294967295|v>>>28),v=I+(E^y^A)+w[0]+3936430074&4294967295,I=E+(v<<11&4294967295|v>>>21),v=A+(I^E^y)+w[3]+3572445317&4294967295,A=I+(v<<16&4294967295|v>>>16),v=y+(A^I^E)+w[6]+76029189&4294967295,y=A+(v<<23&4294967295|v>>>9),v=E+(y^A^I)+w[9]+3654602809&4294967295,E=y+(v<<4&4294967295|v>>>28),v=I+(E^y^A)+w[12]+3873151461&4294967295,I=E+(v<<11&4294967295|v>>>21),v=A+(I^E^y)+w[15]+530742520&4294967295,A=I+(v<<16&4294967295|v>>>16),v=y+(A^I^E)+w[2]+3299628645&4294967295,y=A+(v<<23&4294967295|v>>>9),v=E+(A^(y|~I))+w[0]+4096336452&4294967295,E=y+(v<<6&4294967295|v>>>26),v=I+(y^(E|~A))+w[7]+1126891415&4294967295,I=E+(v<<10&4294967295|v>>>22),v=A+(E^(I|~y))+w[14]+2878612391&4294967295,A=I+(v<<15&4294967295|v>>>17),v=y+(I^(A|~E))+w[5]+4237533241&4294967295,y=A+(v<<21&4294967295|v>>>11),v=E+(A^(y|~I))+w[12]+1700485571&4294967295,E=y+(v<<6&4294967295|v>>>26),v=I+(y^(E|~A))+w[3]+2399980690&4294967295,I=E+(v<<10&4294967295|v>>>22),v=A+(E^(I|~y))+w[10]+4293915773&4294967295,A=I+(v<<15&4294967295|v>>>17),v=y+(I^(A|~E))+w[1]+2240044497&4294967295,y=A+(v<<21&4294967295|v>>>11),v=E+(A^(y|~I))+w[8]+1873313359&4294967295,E=y+(v<<6&4294967295|v>>>26),v=I+(y^(E|~A))+w[15]+4264355552&4294967295,I=E+(v<<10&4294967295|v>>>22),v=A+(E^(I|~y))+w[6]+2734768916&4294967295,A=I+(v<<15&4294967295|v>>>17),v=y+(I^(A|~E))+w[13]+1309151649&4294967295,y=A+(v<<21&4294967295|v>>>11),v=E+(A^(y|~I))+w[4]+4149444226&4294967295,E=y+(v<<6&4294967295|v>>>26),v=I+(y^(E|~A))+w[11]+3174756917&4294967295,I=E+(v<<10&4294967295|v>>>22),v=A+(E^(I|~y))+w[2]+718787259&4294967295,A=I+(v<<15&4294967295|v>>>17),v=y+(I^(A|~E))+w[9]+3951481745&4294967295,b.g[0]=b.g[0]+E&4294967295,b.g[1]=b.g[1]+(A+(v<<21&4294967295|v>>>11))&4294967295,b.g[2]=b.g[2]+A&4294967295,b.g[3]=b.g[3]+I&4294967295}r.prototype.v=function(b,E){E===void 0&&(E=b.length);const y=E-this.blockSize,w=this.C;let A=this.h,I=0;for(;I<E;){if(A==0)for(;I<=y;)s(this,b,I),I+=this.blockSize;if(typeof b=="string"){for(;I<E;)if(w[A++]=b.charCodeAt(I++),A==this.blockSize){s(this,w),A=0;break}}else for(;I<E;)if(w[A++]=b[I++],A==this.blockSize){s(this,w),A=0;break}}this.h=A,this.o+=E},r.prototype.A=function(){var b=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);b[0]=128;for(var E=1;E<b.length-8;++E)b[E]=0;E=this.o*8;for(var y=b.length-8;y<b.length;++y)b[y]=E&255,E/=256;for(this.v(b),b=Array(16),E=0,y=0;y<4;++y)for(let w=0;w<32;w+=8)b[E++]=this.g[y]>>>w&255;return b};function i(b,E){var y=c;return Object.prototype.hasOwnProperty.call(y,b)?y[b]:y[b]=E(b)}function o(b,E){this.h=E;const y=[];let w=!0;for(let A=b.length-1;A>=0;A--){const I=b[A]|0;w&&I==E||(y[A]=I,w=!1)}this.g=y}var c={};function l(b){return-128<=b&&b<128?i(b,function(E){return new o([E|0],E<0?-1:0)}):new o([b|0],b<0?-1:0)}function u(b){if(isNaN(b)||!isFinite(b))return d;if(b<0)return x(u(-b));const E=[];let y=1;for(let w=0;b>=y;w++)E[w]=b/y|0,y*=4294967296;return new o(E,0)}function f(b,E){if(b.length==0)throw Error("number format error: empty string");if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(b.charAt(0)=="-")return x(f(b.substring(1),E));if(b.indexOf("-")>=0)throw Error('number format error: interior "-" character');const y=u(Math.pow(E,8));let w=d;for(let I=0;I<b.length;I+=8){var A=Math.min(8,b.length-I);const v=parseInt(b.substring(I,I+A),E);A<8?(A=u(Math.pow(E,A)),w=w.j(A).add(u(v))):(w=w.j(y),w=w.add(u(v)))}return w}var d=l(0),m=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(P(this))return-x(this).m();let b=0,E=1;for(let y=0;y<this.g.length;y++){const w=this.i(y);b+=(w>=0?w:4294967296+w)*E,E*=4294967296}return b},t.toString=function(b){if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(S(this))return"0";if(P(this))return"-"+x(this).toString(b);const E=u(Math.pow(b,6));var y=this;let w="";for(;;){const A=q(y,E).g;y=O(y,A.j(E));let I=((y.g.length>0?y.g[0]:y.h)>>>0).toString(b);if(y=A,S(y))return I+w;for(;I.length<6;)I="0"+I;w=I+w}},t.i=function(b){return b<0?0:b<this.g.length?this.g[b]:this.h};function S(b){if(b.h!=0)return!1;for(let E=0;E<b.g.length;E++)if(b.g[E]!=0)return!1;return!0}function P(b){return b.h==-1}t.l=function(b){return b=O(this,b),P(b)?-1:S(b)?0:1};function x(b){const E=b.g.length,y=[];for(let w=0;w<E;w++)y[w]=~b.g[w];return new o(y,~b.h).add(m)}t.abs=function(){return P(this)?x(this):this},t.add=function(b){const E=Math.max(this.g.length,b.g.length),y=[];let w=0;for(let A=0;A<=E;A++){let I=w+(this.i(A)&65535)+(b.i(A)&65535),v=(I>>>16)+(this.i(A)>>>16)+(b.i(A)>>>16);w=v>>>16,I&=65535,v&=65535,y[A]=v<<16|I}return new o(y,y[y.length-1]&-2147483648?-1:0)};function O(b,E){return b.add(x(E))}t.j=function(b){if(S(this)||S(b))return d;if(P(this))return P(b)?x(this).j(x(b)):x(x(this).j(b));if(P(b))return x(this.j(x(b)));if(this.l(g)<0&&b.l(g)<0)return u(this.m()*b.m());const E=this.g.length+b.g.length,y=[];for(var w=0;w<2*E;w++)y[w]=0;for(w=0;w<this.g.length;w++)for(let A=0;A<b.g.length;A++){const I=this.i(w)>>>16,v=this.i(w)&65535,we=b.i(A)>>>16,$e=b.i(A)&65535;y[2*w+2*A]+=v*$e,F(y,2*w+2*A),y[2*w+2*A+1]+=I*$e,F(y,2*w+2*A+1),y[2*w+2*A+1]+=v*we,F(y,2*w+2*A+1),y[2*w+2*A+2]+=I*we,F(y,2*w+2*A+2)}for(b=0;b<E;b++)y[b]=y[2*b+1]<<16|y[2*b];for(b=E;b<2*E;b++)y[b]=0;return new o(y,0)};function F(b,E){for(;(b[E]&65535)!=b[E];)b[E+1]+=b[E]>>>16,b[E]&=65535,E++}function $(b,E){this.g=b,this.h=E}function q(b,E){if(S(E))throw Error("division by zero");if(S(b))return new $(d,d);if(P(b))return E=q(x(b),E),new $(x(E.g),x(E.h));if(P(E))return E=q(b,x(E)),new $(x(E.g),E.h);if(b.g.length>30){if(P(b)||P(E))throw Error("slowDivide_ only works with positive integers.");for(var y=m,w=E;w.l(b)<=0;)y=J(y),w=J(w);var A=ne(y,1),I=ne(w,1);for(w=ne(w,2),y=ne(y,2);!S(w);){var v=I.add(w);v.l(b)<=0&&(A=A.add(y),I=v),w=ne(w,1),y=ne(y,1)}return E=O(b,A.j(E)),new $(A,E)}for(A=d;b.l(E)>=0;){for(y=Math.max(1,Math.floor(b.m()/E.m())),w=Math.ceil(Math.log(y)/Math.LN2),w=w<=48?1:Math.pow(2,w-48),I=u(y),v=I.j(E);P(v)||v.l(b)>0;)y-=w,I=u(y),v=I.j(E);S(I)&&(I=m),A=A.add(I),b=O(b,v)}return new $(A,b)}t.B=function(b){return q(this,b).h},t.and=function(b){const E=Math.max(this.g.length,b.g.length),y=[];for(let w=0;w<E;w++)y[w]=this.i(w)&b.i(w);return new o(y,this.h&b.h)},t.or=function(b){const E=Math.max(this.g.length,b.g.length),y=[];for(let w=0;w<E;w++)y[w]=this.i(w)|b.i(w);return new o(y,this.h|b.h)},t.xor=function(b){const E=Math.max(this.g.length,b.g.length),y=[];for(let w=0;w<E;w++)y[w]=this.i(w)^b.i(w);return new o(y,this.h^b.h)};function J(b){const E=b.g.length+1,y=[];for(let w=0;w<E;w++)y[w]=b.i(w)<<1|b.i(w-1)>>>31;return new o(y,b.h)}function ne(b,E){const y=E>>5;E%=32;const w=b.g.length-y,A=[];for(let I=0;I<w;I++)A[I]=E>0?b.i(I+y)>>>E|b.i(I+y+1)<<32-E:b.i(I+y);return new o(A,b.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,G_=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=f,vr=o}).apply(typeof mp<"u"?mp:typeof self<"u"?self:typeof window<"u"?window:{});var ea=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var W_,Pi,z_,ma,au,K_,Q_,Y_;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof ea=="object"&&ea];for(var h=0;h<a.length;++h){var p=a[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var p=r;a=a.split(".");for(var _=0;_<a.length-1;_++){var k=a[_];if(!(k in p))break e;p=p[k]}a=a[a.length-1],_=p[a],h=h(_),h!=_&&h!=null&&e(p,a,{configurable:!0,writable:!0,value:h})}}s("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(a){return a||function(h){var p=[],_;for(_ in h)Object.prototype.hasOwnProperty.call(h,_)&&p.push([_,h[_]]);return p}});var i=i||{},o=this||self;function c(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function l(a,h,p){return a.call.apply(a.bind,arguments)}function u(a,h,p){return u=l,u.apply(null,arguments)}function f(a,h){var p=Array.prototype.slice.call(arguments,1);return function(){var _=p.slice();return _.push.apply(_,arguments),a.apply(this,_)}}function d(a,h){function p(){}p.prototype=h.prototype,a.Z=h.prototype,a.prototype=new p,a.prototype.constructor=a,a.Ob=function(_,k,N){for(var z=Array(arguments.length-2),me=2;me<arguments.length;me++)z[me-2]=arguments[me];return h.prototype[k].apply(_,z)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function g(a){const h=a.length;if(h>0){const p=Array(h);for(let _=0;_<h;_++)p[_]=a[_];return p}return[]}function S(a,h){for(let _=1;_<arguments.length;_++){const k=arguments[_];var p=typeof k;if(p=p!="object"?p:k?Array.isArray(k)?"array":p:"null",p=="array"||p=="object"&&typeof k.length=="number"){p=a.length||0;const N=k.length||0;a.length=p+N;for(let z=0;z<N;z++)a[p+z]=k[z]}else a.push(k)}}class P{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function x(a){o.setTimeout(()=>{throw a},0)}function O(){var a=b;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class F{constructor(){this.h=this.g=null}add(h,p){const _=$.get();_.set(h,p),this.h?this.h.next=_:this.g=_,this.h=_}}var $=new P(()=>new q,a=>a.reset());class q{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let J,ne=!1,b=new F,E=()=>{const a=Promise.resolve(void 0);J=()=>{a.then(y)}};function y(){for(var a;a=O();){try{a.h.call(a.g)}catch(p){x(p)}var h=$;h.j(a),h.h<100&&(h.h++,a.next=h.g,h.g=a)}ne=!1}function w(){this.u=this.u,this.C=this.C}w.prototype.u=!1,w.prototype.dispose=function(){this.u||(this.u=!0,this.N())},w.prototype[Symbol.dispose]=function(){this.dispose()},w.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var I=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const p=()=>{};o.addEventListener("test",p,h),o.removeEventListener("test",p,h)}catch{}return a})();function v(a){return/^[\s\xa0]*$/.test(a)}function we(a,h){A.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,h)}d(we,A),we.prototype.init=function(a,h){const p=this.type=a.type,_=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget,h||(p=="mouseover"?h=a.fromElement:p=="mouseout"&&(h=a.toElement)),this.relatedTarget=h,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&we.Z.h.call(this)},we.prototype.h=function(){we.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var $e="closure_listenable_"+(Math.random()*1e6|0),xe=0;function fe(a,h,p,_,k){this.listener=a,this.proxy=null,this.src=h,this.type=p,this.capture=!!_,this.ha=k,this.key=++xe,this.da=this.fa=!1}function Ie(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Ot(a,h,p){for(const _ in a)h.call(p,a[_],_,a)}function dn(a,h){for(const p in a)h.call(void 0,a[p],p,a)}function Ft(a){const h={};for(const p in a)h[p]=a[p];return h}const lt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Sn(a,h){let p,_;for(let k=1;k<arguments.length;k++){_=arguments[k];for(p in _)a[p]=_[p];for(let N=0;N<lt.length;N++)p=lt[N],Object.prototype.hasOwnProperty.call(_,p)&&(a[p]=_[p])}}function tn(a){this.src=a,this.g={},this.h=0}tn.prototype.add=function(a,h,p,_,k){const N=a.toString();a=this.g[N],a||(a=this.g[N]=[],this.h++);const z=yt(a,h,_,k);return z>-1?(h=a[z],p||(h.fa=!1)):(h=new fe(h,this.src,N,!!_,k),h.fa=p,a.push(h)),h};function nn(a,h){const p=h.type;if(p in a.g){var _=a.g[p],k=Array.prototype.indexOf.call(_,h,void 0),N;(N=k>=0)&&Array.prototype.splice.call(_,k,1),N&&(Ie(h),a.g[p].length==0&&(delete a.g[p],a.h--))}}function yt(a,h,p,_){for(let k=0;k<a.length;++k){const N=a[k];if(!N.da&&N.listener==h&&N.capture==!!p&&N.ha==_)return k}return-1}var M="closure_lm_"+(Math.random()*1e6|0),Z={};function Y(a,h,p,_,k){if(Array.isArray(h)){for(let N=0;N<h.length;N++)Y(a,h[N],p,_,k);return null}return p=K(p),a&&a[$e]?a.J(h,p,c(_)?!!_.capture:!1,k):re(a,h,p,!1,_,k)}function re(a,h,p,_,k,N){if(!h)throw Error("Invalid event type");const z=c(k)?!!k.capture:!!k;let me=B(a);if(me||(a[M]=me=new tn(a)),p=me.add(h,p,_,z,N),p.proxy)return p;if(_=ye(),p.proxy=_,_.src=a,_.listener=p,a.addEventListener)I||(k=z),k===void 0&&(k=!1),a.addEventListener(h.toString(),_,k);else if(a.attachEvent)a.attachEvent(C(h.toString()),_);else if(a.addListener&&a.removeListener)a.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return p}function ye(){function a(p){return h.call(a.src,a.listener,p)}const h=L;return a}function T(a,h,p,_,k){if(Array.isArray(h))for(var N=0;N<h.length;N++)T(a,h[N],p,_,k);else _=c(_)?!!_.capture:!!_,p=K(p),a&&a[$e]?(a=a.i,N=String(h).toString(),N in a.g&&(h=a.g[N],p=yt(h,p,_,k),p>-1&&(Ie(h[p]),Array.prototype.splice.call(h,p,1),h.length==0&&(delete a.g[N],a.h--)))):a&&(a=B(a))&&(h=a.g[h.toString()],a=-1,h&&(a=yt(h,p,_,k)),(p=a>-1?h[a]:null)&&R(p))}function R(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[$e])nn(h.i,a);else{var p=a.type,_=a.proxy;h.removeEventListener?h.removeEventListener(p,_,a.capture):h.detachEvent?h.detachEvent(C(p),_):h.addListener&&h.removeListener&&h.removeListener(_),(p=B(h))?(nn(p,a),p.h==0&&(p.src=null,h[M]=null)):Ie(a)}}}function C(a){return a in Z?Z[a]:Z[a]="on"+a}function L(a,h){if(a.da)a=!0;else{h=new we(h,this);const p=a.listener,_=a.ha||a.src;a.fa&&R(a),a=p.call(_,h)}return a}function B(a){return a=a[M],a instanceof tn?a:null}var D="__closure_events_fn_"+(Math.random()*1e9>>>0);function K(a){return typeof a=="function"?a:(a[D]||(a[D]=function(h){return a.handleEvent(h)}),a[D])}function G(){w.call(this),this.i=new tn(this),this.M=this,this.G=null}d(G,w),G.prototype[$e]=!0,G.prototype.removeEventListener=function(a,h,p,_){T(this,a,h,p,_)};function H(a,h){var p,_=a.G;if(_)for(p=[];_;_=_.G)p.push(_);if(a=a.M,_=h.type||h,typeof h=="string")h=new A(h,a);else if(h instanceof A)h.target=h.target||a;else{var k=h;h=new A(_,a),Sn(h,k)}k=!0;let N,z;if(p)for(z=p.length-1;z>=0;z--)N=h.g=p[z],k=j(N,_,!0,h)&&k;if(N=h.g=a,k=j(N,_,!0,h)&&k,k=j(N,_,!1,h)&&k,p)for(z=0;z<p.length;z++)N=h.g=p[z],k=j(N,_,!1,h)&&k}G.prototype.N=function(){if(G.Z.N.call(this),this.i){var a=this.i;for(const h in a.g){const p=a.g[h];for(let _=0;_<p.length;_++)Ie(p[_]);delete a.g[h],a.h--}}this.G=null},G.prototype.J=function(a,h,p,_){return this.i.add(String(a),h,!1,p,_)},G.prototype.K=function(a,h,p,_){return this.i.add(String(a),h,!0,p,_)};function j(a,h,p,_){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();let k=!0;for(let N=0;N<h.length;++N){const z=h[N];if(z&&!z.da&&z.capture==p){const me=z.listener,tt=z.ha||z.src;z.fa&&nn(a.i,z),k=me.call(tt,_)!==!1&&k}}return k&&!_.defaultPrevented}function oe(a,h){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=u(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:o.setTimeout(a,h||0)}function X(a){a.g=oe(()=>{a.g=null,a.i&&(a.i=!1,X(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class se extends w{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:X(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ce(a){w.call(this),this.h=a,this.g={}}d(ce,w);var _e=[];function Ne(a){Ot(a.g,function(h,p){this.g.hasOwnProperty(p)&&R(h)},a),a.g={}}ce.prototype.N=function(){ce.Z.N.call(this),Ne(this)},ce.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Re=o.JSON.stringify,Et=o.JSON.parse,vt=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function Ut(){}function Bt(){}var rn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ms(){A.call(this,"d")}d(ms,A);function ut(){A.call(this,"c")}d(ut,A);var st={},ii=null;function Ur(){return ii=ii||new G}st.Ia="serverreachability";function Wh(a){A.call(this,st.Ia,a)}d(Wh,A);function oi(a){const h=Ur();H(h,new Wh(h))}st.STAT_EVENT="statevent";function zh(a,h){A.call(this,st.STAT_EVENT,a),this.stat=h}d(zh,A);function Rt(a){const h=Ur();H(h,new zh(h,a))}st.Ja="timingevent";function Kh(a,h){A.call(this,st.Ja,a),this.size=h}d(Kh,A);function ai(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},h)}function ci(){this.g=!0}ci.prototype.ua=function(){this.g=!1};function OE(a,h,p,_,k,N){a.info(function(){if(a.g)if(N){var z="",me=N.split("&");for(let Me=0;Me<me.length;Me++){var tt=me[Me].split("=");if(tt.length>1){const it=tt[0];tt=tt[1];const mn=it.split("_");z=mn.length>=2&&mn[1]=="type"?z+(it+"="+tt+"&"):z+(it+"=redacted&")}}}else z=null;else z=N;return"XMLHTTP REQ ("+_+") [attempt "+k+"]: "+h+`
`+p+`
`+z})}function ME(a,h,p,_,k,N,z){a.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+k+"]: "+h+`
`+p+`
`+N+" "+z})}function gs(a,h,p,_){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+FE(a,p)+(_?" "+_:"")})}function LE(a,h){a.info(function(){return"TIMEOUT: "+h})}ci.prototype.info=function(){};function FE(a,h){if(!a.g)return h;if(!h)return null;try{const N=JSON.parse(h);if(N){for(a=0;a<N.length;a++)if(Array.isArray(N[a])){var p=N[a];if(!(p.length<2)){var _=p[1];if(Array.isArray(_)&&!(_.length<1)){var k=_[0];if(k!="noop"&&k!="stop"&&k!="close")for(let z=1;z<_.length;z++)_[z]=""}}}}return Re(N)}catch{return h}}var Fo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Qh={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Yh;function Gc(){}d(Gc,Ut),Gc.prototype.g=function(){return new XMLHttpRequest},Yh=new Gc;function li(a){return encodeURIComponent(String(a))}function UE(a){var h=1;a=a.split(":");const p=[];for(;h>0&&a.length;)p.push(a.shift()),h--;return a.length&&p.push(a.join(":")),p}function Yn(a,h,p,_){this.j=a,this.i=h,this.l=p,this.S=_||1,this.V=new ce(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Jh}function Jh(){this.i=null,this.g="",this.h=!1}var Xh={},Wc={};function zc(a,h,p){a.M=1,a.A=Bo(pn(h)),a.u=p,a.R=!0,Zh(a,null)}function Zh(a,h){a.F=Date.now(),Uo(a),a.B=pn(a.A);var p=a.B,_=a.S;Array.isArray(_)||(_=[String(_)]),df(p.i,"t",_),a.C=0,p=a.j.L,a.h=new Jh,a.g=xf(a.j,p?h:null,!a.u),a.P>0&&(a.O=new se(u(a.Y,a,a.g),a.P)),h=a.V,p=a.g,_=a.ba;var k="readystatechange";Array.isArray(k)||(k&&(_e[0]=k.toString()),k=_e);for(let N=0;N<k.length;N++){const z=Y(p,k[N],_||h.handleEvent,!1,h.h||h);if(!z)break;h.g[z.key]=z}h=a.J?Ft(a.J):{},a.u?(a.v||(a.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,h)):(a.v="GET",a.g.ea(a.B,a.v,null,h)),oi(),OE(a.i,a.v,a.B,a.l,a.S,a.u)}Yn.prototype.ba=function(a){a=a.target;const h=this.O;h&&Zn(a)==3?h.j():this.Y(a)},Yn.prototype.Y=function(a){try{if(a==this.g)e:{const me=Zn(this.g),tt=this.g.ya(),Me=this.g.ca();if(!(me<3)&&(me!=3||this.g&&(this.h.h||this.g.la()||vf(this.g)))){this.K||me!=4||tt==7||(tt==8||Me<=0?oi(3):oi(2)),Kc(this);var h=this.g.ca();this.X=h;var p=BE(this);if(this.o=h==200,ME(this.i,this.v,this.B,this.l,this.S,me,h),this.o){if(this.U&&!this.L){t:{if(this.g){var _,k=this.g;if((_=k.g?k.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(_)){var N=_;break t}}N=null}if(a=N)gs(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Qc(this,a);else{this.o=!1,this.m=3,Rt(12),Br(this),ui(this);break e}}if(this.R){a=!0;let it;for(;!this.K&&this.C<p.length;)if(it=jE(this,p),it==Wc){me==4&&(this.m=4,Rt(14),a=!1),gs(this.i,this.l,null,"[Incomplete Response]");break}else if(it==Xh){this.m=4,Rt(15),gs(this.i,this.l,p,"[Invalid Chunk]"),a=!1;break}else gs(this.i,this.l,it,null),Qc(this,it);if(ef(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),me!=4||p.length!=0||this.h.h||(this.m=1,Rt(16),a=!1),this.o=this.o&&a,!a)gs(this.i,this.l,p,"[Invalid Chunked Response]"),Br(this),ui(this);else if(p.length>0&&!this.W){this.W=!0;var z=this.j;z.g==this&&z.aa&&!z.P&&(z.j.info("Great, no buffering proxy detected. Bytes received: "+p.length),rl(z),z.P=!0,Rt(11))}}else gs(this.i,this.l,p,null),Qc(this,p);me==4&&Br(this),this.o&&!this.K&&(me==4?Sf(this.j,this):(this.o=!1,Uo(this)))}else tv(this.g),h==400&&p.indexOf("Unknown SID")>0?(this.m=3,Rt(12)):(this.m=0,Rt(13)),Br(this),ui(this)}}}catch{}finally{}};function BE(a){if(!ef(a))return a.g.la();const h=vf(a.g);if(h==="")return"";let p="";const _=h.length,k=Zn(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return Br(a),ui(a),"";a.h.i=new o.TextDecoder}for(let N=0;N<_;N++)a.h.h=!0,p+=a.h.i.decode(h[N],{stream:!(k&&N==_-1)});return h.length=0,a.h.g+=p,a.C=0,a.h.g}function ef(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function jE(a,h){var p=a.C,_=h.indexOf(`
`,p);return _==-1?Wc:(p=Number(h.substring(p,_)),isNaN(p)?Xh:(_+=1,_+p>h.length?Wc:(h=h.slice(_,_+p),a.C=_+p,h)))}Yn.prototype.cancel=function(){this.K=!0,Br(this)};function Uo(a){a.T=Date.now()+a.H,tf(a,a.H)}function tf(a,h){if(a.D!=null)throw Error("WatchDog timer not null");a.D=ai(u(a.aa,a),h)}function Kc(a){a.D&&(o.clearTimeout(a.D),a.D=null)}Yn.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(LE(this.i,this.B),this.M!=2&&(oi(),Rt(17)),Br(this),this.m=2,ui(this)):tf(this,this.T-a)};function ui(a){a.j.I==0||a.K||Sf(a.j,a)}function Br(a){Kc(a);var h=a.O;h&&typeof h.dispose=="function"&&h.dispose(),a.O=null,Ne(a.V),a.g&&(h=a.g,a.g=null,h.abort(),h.dispose())}function Qc(a,h){try{var p=a.j;if(p.I!=0&&(p.g==a||Yc(p.h,a))){if(!a.L&&Yc(p.h,a)&&p.I==3){try{var _=p.Ba.g.parse(h)}catch{_=null}if(Array.isArray(_)&&_.length==3){var k=_;if(k[0]==0){e:if(!p.v){if(p.g)if(p.g.F+3e3<a.F)Go(p),qo(p);else break e;nl(p),Rt(18)}}else p.xa=k[1],0<p.xa-p.K&&k[2]<37500&&p.F&&p.A==0&&!p.C&&(p.C=ai(u(p.Va,p),6e3));sf(p.h)<=1&&p.ta&&(p.ta=void 0)}else $r(p,11)}else if((a.L||p.g==a)&&Go(p),!v(h))for(k=p.Ba.g.parse(h),h=0;h<k.length;h++){let Me=k[h];const it=Me[0];if(!(it<=p.K))if(p.K=it,Me=Me[1],p.I==2)if(Me[0]=="c"){p.M=Me[1],p.ba=Me[2];const mn=Me[3];mn!=null&&(p.ka=mn,p.j.info("VER="+p.ka));const qr=Me[4];qr!=null&&(p.za=qr,p.j.info("SVER="+p.za));const er=Me[5];er!=null&&typeof er=="number"&&er>0&&(_=1.5*er,p.O=_,p.j.info("backChannelRequestTimeoutMs_="+_)),_=p;const tr=a.g;if(tr){const zo=tr.g?tr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zo){var N=_.h;N.g||zo.indexOf("spdy")==-1&&zo.indexOf("quic")==-1&&zo.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(Jc(N,N.h),N.h=null))}if(_.G){const sl=tr.g?tr.g.getResponseHeader("X-HTTP-Session-Id"):null;sl&&(_.wa=sl,Be(_.J,_.G,sl))}}p.I=3,p.l&&p.l.ra(),p.aa&&(p.T=Date.now()-a.F,p.j.info("Handshake RTT: "+p.T+"ms")),_=p;var z=a;if(_.na=kf(_,_.L?_.ba:null,_.W),z.L){of(_.h,z);var me=z,tt=_.O;tt&&(me.H=tt),me.D&&(Kc(me),Uo(me)),_.g=z}else bf(_);p.i.length>0&&Ho(p)}else Me[0]!="stop"&&Me[0]!="close"||$r(p,7);else p.I==3&&(Me[0]=="stop"||Me[0]=="close"?Me[0]=="stop"?$r(p,7):tl(p):Me[0]!="noop"&&p.l&&p.l.qa(Me),p.A=0)}}oi(4)}catch{}}var $E=class{constructor(a,h){this.g=a,this.map=h}};function nf(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function rf(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function sf(a){return a.h?1:a.g?a.g.size:0}function Yc(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function Jc(a,h){a.g?a.g.add(h):a.h=h}function of(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}nf.prototype.cancel=function(){if(this.i=af(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function af(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const p of a.g.values())h=h.concat(p.G);return h}return g(a.i)}var cf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qE(a,h){if(a){a=a.split("&");for(let p=0;p<a.length;p++){const _=a[p].indexOf("=");let k,N=null;_>=0?(k=a[p].substring(0,_),N=a[p].substring(_+1)):k=a[p],h(k,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function Jn(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;a instanceof Jn?(this.l=a.l,hi(this,a.j),this.o=a.o,this.g=a.g,fi(this,a.u),this.h=a.h,Xc(this,pf(a.i)),this.m=a.m):a&&(h=String(a).match(cf))?(this.l=!1,hi(this,h[1]||"",!0),this.o=di(h[2]||""),this.g=di(h[3]||"",!0),fi(this,h[4]),this.h=di(h[5]||"",!0),Xc(this,h[6]||"",!0),this.m=di(h[7]||"")):(this.l=!1,this.i=new mi(null,this.l))}Jn.prototype.toString=function(){const a=[];var h=this.j;h&&a.push(pi(h,lf,!0),":");var p=this.g;return(p||h=="file")&&(a.push("//"),(h=this.o)&&a.push(pi(h,lf,!0),"@"),a.push(li(p).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.u,p!=null&&a.push(":",String(p))),(p=this.h)&&(this.g&&p.charAt(0)!="/"&&a.push("/"),a.push(pi(p,p.charAt(0)=="/"?WE:GE,!0))),(p=this.i.toString())&&a.push("?",p),(p=this.m)&&a.push("#",pi(p,KE)),a.join("")},Jn.prototype.resolve=function(a){const h=pn(this);let p=!!a.j;p?hi(h,a.j):p=!!a.o,p?h.o=a.o:p=!!a.g,p?h.g=a.g:p=a.u!=null;var _=a.h;if(p)fi(h,a.u);else if(p=!!a.h){if(_.charAt(0)!="/")if(this.g&&!this.h)_="/"+_;else{var k=h.h.lastIndexOf("/");k!=-1&&(_=h.h.slice(0,k+1)+_)}if(k=_,k==".."||k==".")_="";else if(k.indexOf("./")!=-1||k.indexOf("/.")!=-1){_=k.lastIndexOf("/",0)==0,k=k.split("/");const N=[];for(let z=0;z<k.length;){const me=k[z++];me=="."?_&&z==k.length&&N.push(""):me==".."?((N.length>1||N.length==1&&N[0]!="")&&N.pop(),_&&z==k.length&&N.push("")):(N.push(me),_=!0)}_=N.join("/")}else _=k}return p?h.h=_:p=a.i.toString()!=="",p?Xc(h,pf(a.i)):p=!!a.m,p&&(h.m=a.m),h};function pn(a){return new Jn(a)}function hi(a,h,p){a.j=p?di(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function fi(a,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);a.u=h}else a.u=null}function Xc(a,h,p){h instanceof mi?(a.i=h,QE(a.i,a.l)):(p||(h=pi(h,zE)),a.i=new mi(h,a.l))}function Be(a,h,p){a.i.set(h,p)}function Bo(a){return Be(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function di(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function pi(a,h,p){return typeof a=="string"?(a=encodeURI(a).replace(h,HE),p&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function HE(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var lf=/[#\/\?@]/g,GE=/[#\?:]/g,WE=/[#\?]/g,zE=/[#\?@]/g,KE=/#/g;function mi(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function jr(a){a.g||(a.g=new Map,a.h=0,a.i&&qE(a.i,function(h,p){a.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=mi.prototype,t.add=function(a,h){jr(this),this.i=null,a=_s(this,a);let p=this.g.get(a);return p||this.g.set(a,p=[]),p.push(h),this.h+=1,this};function uf(a,h){jr(a),h=_s(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function hf(a,h){return jr(a),h=_s(a,h),a.g.has(h)}t.forEach=function(a,h){jr(this),this.g.forEach(function(p,_){p.forEach(function(k){a.call(h,k,_,this)},this)},this)};function ff(a,h){jr(a);let p=[];if(typeof h=="string")hf(a,h)&&(p=p.concat(a.g.get(_s(a,h))));else for(a=Array.from(a.g.values()),h=0;h<a.length;h++)p=p.concat(a[h]);return p}t.set=function(a,h){return jr(this),this.i=null,a=_s(this,a),hf(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=ff(this,a),a.length>0?String(a[0]):h):h};function df(a,h,p){uf(a,h),p.length>0&&(a.i=null,a.g.set(_s(a,h),g(p)),a.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(let _=0;_<h.length;_++){var p=h[_];const k=li(p);p=ff(this,p);for(let N=0;N<p.length;N++){let z=k;p[N]!==""&&(z+="="+li(p[N])),a.push(z)}}return this.i=a.join("&")};function pf(a){const h=new mi;return h.i=a.i,a.g&&(h.g=new Map(a.g),h.h=a.h),h}function _s(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function QE(a,h){h&&!a.j&&(jr(a),a.i=null,a.g.forEach(function(p,_){const k=_.toLowerCase();_!=k&&(uf(this,_),df(this,k,p))},a)),a.j=h}function YE(a,h){const p=new ci;if(o.Image){const _=new Image;_.onload=f(Xn,p,"TestLoadImage: loaded",!0,h,_),_.onerror=f(Xn,p,"TestLoadImage: error",!1,h,_),_.onabort=f(Xn,p,"TestLoadImage: abort",!1,h,_),_.ontimeout=f(Xn,p,"TestLoadImage: timeout",!1,h,_),o.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=a}else h(!1)}function JE(a,h){const p=new ci,_=new AbortController,k=setTimeout(()=>{_.abort(),Xn(p,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:_.signal}).then(N=>{clearTimeout(k),N.ok?Xn(p,"TestPingServer: ok",!0,h):Xn(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(k),Xn(p,"TestPingServer: error",!1,h)})}function Xn(a,h,p,_,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),_(p)}catch{}}function XE(){this.g=new vt}function Zc(a){this.i=a.Sb||null,this.h=a.ab||!1}d(Zc,Ut),Zc.prototype.g=function(){return new jo(this.i,this.h)};function jo(a,h){G.call(this),this.H=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(jo,G),t=jo.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=h,this.readyState=1,_i(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(h.body=a),(this.H||o).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,gi(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,_i(this)),this.g&&(this.readyState=3,_i(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;mf(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function mf(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?gi(this):_i(this),this.readyState==3&&mf(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,gi(this))},t.Na=function(a){this.g&&(this.response=a,gi(this))},t.ga=function(){this.g&&gi(this)};function gi(a){a.readyState=4,a.l=null,a.j=null,a.B=null,_i(a)}t.setRequestHeader=function(a,h){this.A.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,a.push(p[0]+": "+p[1]),p=h.next();return a.join(`\r
`)};function _i(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(jo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function gf(a){let h="";return Ot(a,function(p,_){h+=_,h+=":",h+=p,h+=`\r
`}),h}function el(a,h,p){e:{for(_ in p){var _=!1;break e}_=!0}_||(p=gf(p),typeof a=="string"?p!=null&&li(p):Be(a,h,p))}function He(a){G.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(He,G);var ZE=/^https?$/i,ev=["POST","PUT"];t=He.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,h,p,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Yh.g(),this.g.onreadystatechange=m(u(this.Ca,this));try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(N){_f(this,N);return}if(a=p||"",p=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var k in _)p.set(k,_[k]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const N of _.keys())p.set(N,_.get(N));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(p.keys()).find(N=>N.toLowerCase()=="content-type"),k=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(ev,h,void 0)>=0)||_||k||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[N,z]of p)this.g.setRequestHeader(N,z);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(N){_f(this,N)}};function _f(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.o=5,yf(a),$o(a)}function yf(a){a.A||(a.A=!0,H(a,"complete"),H(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,H(this,"complete"),H(this,"abort"),$o(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$o(this,!0)),He.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Ef(this):this.Xa())},t.Xa=function(){Ef(this)};function Ef(a){if(a.h&&typeof i<"u"){if(a.v&&Zn(a)==4)setTimeout(a.Ca.bind(a),0);else if(H(a,"readystatechange"),Zn(a)==4){a.h=!1;try{const N=a.ca();e:switch(N){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var _;if(_=N===0){let z=String(a.D).match(cf)[1]||null;!z&&o.self&&o.self.location&&(z=o.self.location.protocol.slice(0,-1)),_=!ZE.test(z?z.toLowerCase():"")}p=_}if(p)H(a,"complete"),H(a,"success");else{a.o=6;try{var k=Zn(a)>2?a.g.statusText:""}catch{k=""}a.l=k+" ["+a.ca()+"]",yf(a)}}finally{$o(a)}}}}function $o(a,h){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const p=a.g;a.g=null,h||H(a,"ready");try{p.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Zn(a){return a.g?a.g.readyState:0}t.ca=function(){try{return Zn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),Et(h)}};function vf(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function tv(a){const h={};a=(a.g&&Zn(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<a.length;_++){if(v(a[_]))continue;var p=UE(a[_]);const k=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const N=h[k]||[];h[k]=N,N.push(p)}dn(h,function(_){return _.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function yi(a,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[a]||h}function Tf(a){this.za=0,this.i=[],this.j=new ci,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=yi("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=yi("baseRetryDelayMs",5e3,a),this.Za=yi("retryDelaySeedMs",1e4,a),this.Ta=yi("forwardChannelMaxRetries",2,a),this.va=yi("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new nf(a&&a.concurrentRequestLimit),this.Ba=new XE,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Tf.prototype,t.ka=8,t.I=1,t.connect=function(a,h,p,_){Rt(0),this.W=a,this.H=h||{},p&&_!==void 0&&(this.H.OSID=p,this.H.OAID=_),this.F=this.X,this.J=kf(this,null,this.W),Ho(this)};function tl(a){if(wf(a),a.I==3){var h=a.V++,p=pn(a.J);if(Be(p,"SID",a.M),Be(p,"RID",h),Be(p,"TYPE","terminate"),Ei(a,p),h=new Yn(a,a.j,h),h.M=2,h.A=Bo(pn(p)),p=!1,o.navigator&&o.navigator.sendBeacon)try{p=o.navigator.sendBeacon(h.A.toString(),"")}catch{}!p&&o.Image&&(new Image().src=h.A,p=!0),p||(h.g=xf(h.j,null),h.g.ea(h.A)),h.F=Date.now(),Uo(h)}Cf(a)}function qo(a){a.g&&(rl(a),a.g.cancel(),a.g=null)}function wf(a){qo(a),a.v&&(o.clearTimeout(a.v),a.v=null),Go(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function Ho(a){if(!rf(a.h)&&!a.m){a.m=!0;var h=a.Ea;J||E(),ne||(J(),ne=!0),b.add(h,a),a.D=0}}function nv(a,h){return sf(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=h.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=ai(u(a.Ea,a,h),Pf(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const k=new Yn(this,this.j,a);let N=this.o;if(this.U&&(N?(N=Ft(N),Sn(N,this.U)):N=this.U),this.u!==null||this.R||(k.J=N,N=null),this.S)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var _=this.i[p];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(h+=_,h>4096){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=Af(this,k,h),p=pn(this.J),Be(p,"RID",a),Be(p,"CVER",22),this.G&&Be(p,"X-HTTP-Session-Id",this.G),Ei(this,p),N&&(this.R?h="headers="+li(gf(N))+"&"+h:this.u&&el(p,this.u,N)),Jc(this.h,k),this.Ra&&Be(p,"TYPE","init"),this.S?(Be(p,"$req",h),Be(p,"SID","null"),k.U=!0,zc(k,p,null)):zc(k,p,h),this.I=2}}else this.I==3&&(a?If(this,a):this.i.length==0||rf(this.h)||If(this))};function If(a,h){var p;h?p=h.l:p=a.V++;const _=pn(a.J);Be(_,"SID",a.M),Be(_,"RID",p),Be(_,"AID",a.K),Ei(a,_),a.u&&a.o&&el(_,a.u,a.o),p=new Yn(a,a.j,p,a.D+1),a.u===null&&(p.J=a.o),h&&(a.i=h.G.concat(a.i)),h=Af(a,p,1e3),p.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),Jc(a.h,p),zc(p,_,h)}function Ei(a,h){a.H&&Ot(a.H,function(p,_){Be(h,_,p)}),a.l&&Ot({},function(p,_){Be(h,_,p)})}function Af(a,h,p){p=Math.min(a.i.length,p);const _=a.l?u(a.l.Ka,a.l,a):null;e:{var k=a.i;let me=-1;for(;;){const tt=["count="+p];me==-1?p>0?(me=k[0].g,tt.push("ofs="+me)):me=0:tt.push("ofs="+me);let Me=!0;for(let it=0;it<p;it++){var N=k[it].g;const mn=k[it].map;if(N-=me,N<0)me=Math.max(0,k[it].g-100),Me=!1;else try{N="req"+N+"_"||"";try{var z=mn instanceof Map?mn:Object.entries(mn);for(const[qr,er]of z){let tr=er;c(er)&&(tr=Re(er)),tt.push(N+qr+"="+encodeURIComponent(tr))}}catch(qr){throw tt.push(N+"type="+encodeURIComponent("_badmap")),qr}}catch{_&&_(mn)}}if(Me){z=tt.join("&");break e}}z=void 0}return a=a.i.splice(0,p),h.G=a,z}function bf(a){if(!a.g&&!a.v){a.Y=1;var h=a.Da;J||E(),ne||(J(),ne=!0),b.add(h,a),a.A=0}}function nl(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=ai(u(a.Da,a),Pf(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,Rf(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=ai(u(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Rt(10),qo(this),Rf(this))};function rl(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function Rf(a){a.g=new Yn(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var h=pn(a.na);Be(h,"RID","rpc"),Be(h,"SID",a.M),Be(h,"AID",a.K),Be(h,"CI",a.F?"0":"1"),!a.F&&a.ia&&Be(h,"TO",a.ia),Be(h,"TYPE","xmlhttp"),Ei(a,h),a.u&&a.o&&el(h,a.u,a.o),a.O&&(a.g.H=a.O);var p=a.g;a=a.ba,p.M=1,p.A=Bo(pn(h)),p.u=null,p.R=!0,Zh(p,a)}t.Va=function(){this.C!=null&&(this.C=null,qo(this),nl(this),Rt(19))};function Go(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function Sf(a,h){var p=null;if(a.g==h){Go(a),rl(a),a.g=null;var _=2}else if(Yc(a.h,h))p=h.G,of(a.h,h),_=1;else return;if(a.I!=0){if(h.o)if(_==1){p=h.u?h.u.length:0,h=Date.now()-h.F;var k=a.D;_=Ur(),H(_,new Kh(_,p)),Ho(a)}else bf(a);else if(k=h.m,k==3||k==0&&h.X>0||!(_==1&&nv(a,h)||_==2&&nl(a)))switch(p&&p.length>0&&(h=a.h,h.i=h.i.concat(p)),k){case 1:$r(a,5);break;case 4:$r(a,10);break;case 3:$r(a,6);break;default:$r(a,2)}}}function Pf(a,h){let p=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(p*=2),p*h}function $r(a,h){if(a.j.info("Error code "+h),h==2){var p=u(a.bb,a),_=a.Ua;const k=!_;_=new Jn(_||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||hi(_,"https"),Bo(_),k?YE(_.toString(),p):JE(_.toString(),p)}else Rt(2);a.I=0,a.l&&a.l.pa(h),Cf(a),wf(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))};function Cf(a){if(a.I=0,a.ja=[],a.l){const h=af(a.h);(h.length!=0||a.i.length!=0)&&(S(a.ja,h),S(a.ja,a.i),a.h.i.length=0,g(a.i),a.i.length=0),a.l.oa()}}function kf(a,h,p){var _=p instanceof Jn?pn(p):new Jn(p);if(_.g!="")h&&(_.g=h+"."+_.g),fi(_,_.u);else{var k=o.location;_=k.protocol,h=h?h+"."+k.hostname:k.hostname,k=+k.port;const N=new Jn(null);_&&hi(N,_),h&&(N.g=h),k&&fi(N,k),p&&(N.h=p),_=N}return p=a.G,h=a.wa,p&&h&&Be(_,p,h),Be(_,"VER",a.ka),Ei(a,_),_}function xf(a,h,p){if(h&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Aa&&!a.ma?new He(new Zc({ab:p})):new He(a.ma),h.Fa(a.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Nf(){}t=Nf.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Wo(){}Wo.prototype.g=function(a,h){return new jt(a,h)};function jt(a,h){G.call(this),this.g=new Tf(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(a?a["X-WebChannel-Client-Profile"]=h.sa:a={"X-WebChannel-Client-Profile":h.sa}),this.g.U=a,(a=h&&h.Qb)&&!v(a)&&(this.g.u=a),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!v(h)&&(this.g.G=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new ys(this)}d(jt,G),jt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},jt.prototype.close=function(){tl(this.g)},jt.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var p={};p.__data__=a,a=p}else this.v&&(p={},p.__data__=Re(a),a=p);h.i.push(new $E(h.Ya++,a)),h.I==3&&Ho(h)},jt.prototype.N=function(){this.g.l=null,delete this.j,tl(this.g),delete this.g,jt.Z.N.call(this)};function Vf(a){ms.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const p in h){a=p;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}d(Vf,ms);function Df(){ut.call(this),this.status=1}d(Df,ut);function ys(a){this.g=a}d(ys,Nf),ys.prototype.ra=function(){H(this.g,"a")},ys.prototype.qa=function(a){H(this.g,new Vf(a))},ys.prototype.pa=function(a){H(this.g,new Df)},ys.prototype.oa=function(){H(this.g,"b")},Wo.prototype.createWebChannel=Wo.prototype.g,jt.prototype.send=jt.prototype.o,jt.prototype.open=jt.prototype.m,jt.prototype.close=jt.prototype.close,Y_=function(){return new Wo},Q_=function(){return Ur()},K_=st,au={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Fo.NO_ERROR=0,Fo.TIMEOUT=8,Fo.HTTP_ERROR=6,ma=Fo,Qh.COMPLETE="complete",z_=Qh,Bt.EventType=rn,rn.OPEN="a",rn.CLOSE="b",rn.ERROR="c",rn.MESSAGE="d",G.prototype.listen=G.prototype.J,Pi=Bt,He.prototype.listenOnce=He.prototype.K,He.prototype.getLastError=He.prototype.Ha,He.prototype.getLastErrorCode=He.prototype.ya,He.prototype.getStatus=He.prototype.ca,He.prototype.getResponseJson=He.prototype.La,He.prototype.getResponseText=He.prototype.la,He.prototype.send=He.prototype.ea,He.prototype.setWithCredentials=He.prototype.Fa,W_=He}).apply(typeof ea<"u"?ea:typeof self<"u"?self:typeof window<"u"?window:{});const gp="@firebase/firestore",_p="4.9.2";class It{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}It.UNAUTHENTICATED=new It(null),It.GOOGLE_CREDENTIALS=new It("google-credentials-uid"),It.FIRST_PARTY=new It("first-party-uid"),It.MOCK_USER=new It("mock-user");let ei="12.3.0";const us=new zu("@firebase/firestore");function Is(){return us.logLevel}function ee(t,...e){if(us.logLevel<=Ee.DEBUG){const n=e.map(oh);us.debug(`Firestore (${ei}): ${t}`,...n)}}function qn(t,...e){if(us.logLevel<=Ee.ERROR){const n=e.map(oh);us.error(`Firestore (${ei}): ${t}`,...n)}}function js(t,...e){if(us.logLevel<=Ee.WARN){const n=e.map(oh);us.warn(`Firestore (${ei}): ${t}`,...n)}}function oh(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function ie(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,J_(t,r,n)}function J_(t,e,n){let r=`FIRESTORE (${ei}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw qn(r),new Error(r)}function Ae(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||J_(e,s,r)}function he(t,e){return t}const V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class W extends Wn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class cn{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class X_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class QR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(It.UNAUTHENTICATED)))}shutdown(){}}class YR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class JR{constructor(e){this.t=e,this.currentUser=It.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ae(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new cn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new cn,e.enqueueRetryable((()=>s(this.currentUser)))};const o=()=>{const l=i;e.enqueueRetryable((async()=>{await l.promise,await s(this.currentUser)}))},c=l=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((l=>c(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?c(l):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new cn)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ae(typeof r.accessToken=="string",31837,{l:r}),new X_(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ae(e===null||typeof e=="string",2055,{h:e}),new It(e)}}class XR{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=It.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ZR{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new XR(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(It.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class yp{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class eS{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,qt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ae(this.o===void 0,3512);const r=i=>{i.error!=null&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,ee("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>r(i)))};const s=i=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>s(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new yp(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ae(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new yp(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function tS(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class ah{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=tS(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function ve(t,e){return t<e?-1:t>e?1:0}function cu(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Pl(s)===Pl(i)?ve(s,i):Pl(s)?1:-1}return ve(t.length,e.length)}const nS=55296,rS=57343;function Pl(t){const e=t.charCodeAt(0);return e>=nS&&e<=rS}function $s(t,e,n){return t.length===e.length&&t.every(((r,s)=>n(r,e[s])))}const Ep="__name__";class yn{constructor(e,n,r){n===void 0?n=0:n>e.length&&ie(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ie(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return yn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof yn?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=yn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return ve(e.length,n.length)}static compareSegments(e,n){const r=yn.isNumericId(e),s=yn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?yn.extractNumericId(e).compare(yn.extractNumericId(n)):cu(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return vr.fromString(e.substring(4,e.length-2))}}class Ve extends yn{construct(e,n,r){return new Ve(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new W(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new Ve(n)}static emptyPath(){return new Ve([])}}const sS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mt extends yn{construct(e,n,r){return new mt(e,n,r)}static isValidIdentifier(e){return sS.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ep}static keyField(){return new mt([Ep])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new W(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new W(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new W(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(r+=c,s++):(i(),s++)}if(i(),o)throw new W(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new mt(n)}static emptyPath(){return new mt([])}}class te{constructor(e){this.path=e}static fromPath(e){return new te(Ve.fromString(e))}static fromName(e){return new te(Ve.fromString(e).popFirst(5))}static empty(){return new te(Ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ve.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new Ve(e.slice()))}}function Z_(t,e,n){if(!n)throw new W(V.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function iS(t,e,n,r){if(e===!0&&r===!0)throw new W(V.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function vp(t){if(!te.isDocumentKey(t))throw new W(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Tp(t){if(te.isDocumentKey(t))throw new W(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ey(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Tc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ie(12329,{type:typeof t})}function Kt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new W(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Tc(t);throw new W(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function oS(t,e){if(e<=0)throw new W(V.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}function et(t,e){const n={typeString:t};return e&&(n.value=e),n}function Po(t,e){if(!ey(t))throw new W(V.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new W(V.INVALID_ARGUMENT,n);return!0}const wp=-62135596800,Ip=1e6;class je{static now(){return je.fromMillis(Date.now())}static fromDate(e){return je.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Ip);return new je(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new W(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new W(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<wp)throw new W(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ip}_compareTo(e){return this.seconds===e.seconds?ve(this.nanoseconds,e.nanoseconds):ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:je._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Po(e,je._jsonSchema))return new je(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-wp;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}je._jsonSchemaVersion="firestore/timestamp/1.0",je._jsonSchema={type:et("string",je._jsonSchemaVersion),seconds:et("number"),nanoseconds:et("number")};class le{static fromTimestamp(e){return new le(e)}static min(){return new le(new je(0,0))}static max(){return new le(new je(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const io=-1;function aS(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=le.fromTimestamp(r===1e9?new je(n+1,0):new je(n,r));return new Rr(s,te.empty(),e)}function cS(t){return new Rr(t.readTime,t.key,io)}class Rr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Rr(le.min(),te.empty(),io)}static max(){return new Rr(le.max(),te.empty(),io)}}function lS(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=te.comparator(t.documentKey,e.documentKey),n!==0?n:ve(t.largestBatchId,e.largestBatchId))}const uS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ti(t){if(t.code!==V.FAILED_PRECONDITION||t.message!==uS)throw t;ee("LocalStore","Unexpectedly lost primary lease")}class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U(((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):U.reject(n)}static resolve(e){return new U(((n,r)=>{n(e)}))}static reject(e){return new U(((n,r)=>{r(e)}))}static waitFor(e){return new U(((n,r)=>{let s=0,i=0,o=!1;e.forEach((c=>{++s,c.next((()=>{++i,o&&i===s&&n()}),(l=>r(l)))})),o=!0,i===s&&n()}))}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next((s=>s?U.resolve(s):r()));return n}static forEach(e,n){const r=[];return e.forEach(((s,i)=>{r.push(n.call(this,s,i))})),this.waitFor(r)}static mapArray(e,n){return new U(((r,s)=>{const i=e.length,o=new Array(i);let c=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next((f=>{o[u]=f,++c,c===i&&r(o)}),(f=>s(f)))}}))}static doWhile(e,n){return new U(((r,s)=>{const i=()=>{e()===!0?n().next((()=>{i()}),s):r()};i()}))}}function fS(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ni(t){return t.name==="IndexedDbTransactionError"}class wc{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}wc.ce=-1;const ch=-1;function Co(t){return t==null}function qa(t){return t===0&&1/t==-1/0}function dS(t){return typeof t=="number"&&Number.isInteger(t)&&!qa(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const ty="";function pS(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Ap(e)),e=mS(t.get(n),e);return Ap(e)}function mS(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case ty:n+="";break;default:n+=i}}return n}function Ap(t){return t+ty+""}function bp(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Lr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function gS(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function ny(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class qe{constructor(e,n){this.comparator=e,this.root=n||ft.EMPTY}insert(e,n){return new qe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ft.BLACK,null,null))}remove(e){return new qe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ft.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ta(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ta(this.root,e,this.comparator,!1)}getReverseIterator(){return new ta(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ta(this.root,e,this.comparator,!0)}}class ta{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ft{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??ft.RED,this.left=s??ft.EMPTY,this.right=i??ft.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new ft(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ft.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return ft.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ft.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ft.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ie(27949);return e+(this.isRed()?0:1)}}ft.EMPTY=null,ft.RED=!0,ft.BLACK=!1;ft.EMPTY=new class{constructor(){this.size=0}get key(){throw ie(57766)}get value(){throw ie(16141)}get color(){throw ie(16727)}get left(){throw ie(29726)}get right(){throw ie(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new ft(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class rt{constructor(e){this.comparator=e,this.data=new qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Rp(this.data.getIterator())}getIteratorFrom(e){return new Rp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof rt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new rt(this.comparator);return n.data=e,n}}class Rp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Wt{constructor(e){this.fields=e,e.sort(mt.comparator)}static empty(){return new Wt([])}unionWith(e){let n=new rt(mt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Wt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return $s(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class ry extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class _t{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new ry("Invalid base64 string: "+i):i}})(e);return new _t(n)}static fromUint8Array(e){const n=(function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i})(e);return new _t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_t.EMPTY_BYTE_STRING=new _t("");const _S=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Sr(t){if(Ae(!!t,39018),typeof t=="string"){let e=0;const n=_S.exec(t);if(Ae(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ke(t.seconds),nanos:Ke(t.nanos)}}function Ke(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Pr(t){return typeof t=="string"?_t.fromBase64String(t):_t.fromUint8Array(t)}const sy="server_timestamp",iy="__type__",oy="__previous_value__",ay="__local_write_time__";function Ic(t){return(t?.mapValue?.fields||{})[iy]?.stringValue===sy}function Ac(t){const e=t.mapValue.fields[oy];return Ic(e)?Ac(e):e}function oo(t){const e=Sr(t.mapValue.fields[ay].timestampValue);return new je(e.seconds,e.nanos)}class yS{constructor(e,n,r,s,i,o,c,l,u,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=f}}const Ha="(default)";class ao{constructor(e,n){this.projectId=e,this.database=n||Ha}static empty(){return new ao("","")}get isDefaultDatabase(){return this.database===Ha}isEqual(e){return e instanceof ao&&e.projectId===this.projectId&&e.database===this.database}}const cy="__type__",ES="__max__",na={mapValue:{}},ly="__vector__",Ga="value";function Cr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ic(t)?4:TS(t)?9007199254740991:vS(t)?10:11:ie(28295,{value:t})}function Rn(t,e){if(t===e)return!0;const n=Cr(t);if(n!==Cr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return oo(t).isEqual(oo(e));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Sr(s.timestampValue),c=Sr(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,i){return Pr(s.bytesValue).isEqual(Pr(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,i){return Ke(s.geoPointValue.latitude)===Ke(i.geoPointValue.latitude)&&Ke(s.geoPointValue.longitude)===Ke(i.geoPointValue.longitude)})(t,e);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return Ke(s.integerValue)===Ke(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ke(s.doubleValue),c=Ke(i.doubleValue);return o===c?qa(o)===qa(c):isNaN(o)&&isNaN(c)}return!1})(t,e);case 9:return $s(t.arrayValue.values||[],e.arrayValue.values||[],Rn);case 10:case 11:return(function(s,i){const o=s.mapValue.fields||{},c=i.mapValue.fields||{};if(bp(o)!==bp(c))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(c[l]===void 0||!Rn(o[l],c[l])))return!1;return!0})(t,e);default:return ie(52216,{left:t})}}function co(t,e){return(t.values||[]).find((n=>Rn(n,e)))!==void 0}function qs(t,e){if(t===e)return 0;const n=Cr(t),r=Cr(e);if(n!==r)return ve(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ve(t.booleanValue,e.booleanValue);case 2:return(function(i,o){const c=Ke(i.integerValue||i.doubleValue),l=Ke(o.integerValue||o.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1})(t,e);case 3:return Sp(t.timestampValue,e.timestampValue);case 4:return Sp(oo(t),oo(e));case 5:return cu(t.stringValue,e.stringValue);case 6:return(function(i,o){const c=Pr(i),l=Pr(o);return c.compareTo(l)})(t.bytesValue,e.bytesValue);case 7:return(function(i,o){const c=i.split("/"),l=o.split("/");for(let u=0;u<c.length&&u<l.length;u++){const f=ve(c[u],l[u]);if(f!==0)return f}return ve(c.length,l.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,o){const c=ve(Ke(i.latitude),Ke(o.latitude));return c!==0?c:ve(Ke(i.longitude),Ke(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return Pp(t.arrayValue,e.arrayValue);case 10:return(function(i,o){const c=i.fields||{},l=o.fields||{},u=c[Ga]?.arrayValue,f=l[Ga]?.arrayValue,d=ve(u?.values?.length||0,f?.values?.length||0);return d!==0?d:Pp(u,f)})(t.mapValue,e.mapValue);case 11:return(function(i,o){if(i===na.mapValue&&o===na.mapValue)return 0;if(i===na.mapValue)return 1;if(o===na.mapValue)return-1;const c=i.fields||{},l=Object.keys(c),u=o.fields||{},f=Object.keys(u);l.sort(),f.sort();for(let d=0;d<l.length&&d<f.length;++d){const m=cu(l[d],f[d]);if(m!==0)return m;const g=qs(c[l[d]],u[f[d]]);if(g!==0)return g}return ve(l.length,f.length)})(t.mapValue,e.mapValue);default:throw ie(23264,{he:n})}}function Sp(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ve(t,e);const n=Sr(t),r=Sr(e),s=ve(n.seconds,r.seconds);return s!==0?s:ve(n.nanos,r.nanos)}function Pp(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=qs(n[s],r[s]);if(i)return i}return ve(n.length,r.length)}function Hs(t){return lu(t)}function lu(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=Sr(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Pr(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return te.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=lu(i);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${lu(n.fields[o])}`;return s+"}"})(t.mapValue):ie(61005,{value:t})}function ga(t){switch(Cr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ac(t);return e?16+ga(e):16;case 5:return 2*t.stringValue.length;case 6:return Pr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,i)=>s+ga(i)),0)})(t.arrayValue);case 10:case 11:return(function(r){let s=0;return Lr(r.fields,((i,o)=>{s+=i.length+ga(o)})),s})(t.mapValue);default:throw ie(13486,{value:t})}}function Wa(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function uu(t){return!!t&&"integerValue"in t}function lh(t){return!!t&&"arrayValue"in t}function Cp(t){return!!t&&"nullValue"in t}function kp(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function _a(t){return!!t&&"mapValue"in t}function vS(t){return(t?.mapValue?.fields||{})[cy]?.stringValue===ly}function Hi(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Lr(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Hi(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Hi(t.arrayValue.values[n]);return e}return{...t}}function TS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===ES}class Vt{constructor(e){this.value=e}static empty(){return new Vt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!_a(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hi(n)}setAll(e){let n=mt.emptyPath(),r={},s=[];e.forEach(((o,c)=>{if(!n.isImmediateParentOf(c)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=c.popLast()}o?r[c.lastSegment()]=Hi(o):s.push(c.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());_a(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Rn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];_a(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Lr(n,((s,i)=>e[s]=i));for(const s of r)delete e[s]}clone(){return new Vt(Hi(this.value))}}function uy(t){const e=[];return Lr(t.fields,((n,r)=>{const s=new mt([n]);if(_a(r)){const i=uy(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)})),new Wt(e)}class at{constructor(e,n,r,s,i,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=c}static newInvalidDocument(e){return new at(e,0,le.min(),le.min(),le.min(),Vt.empty(),0)}static newFoundDocument(e,n,r,s){return new at(e,1,n,le.min(),r,s,0)}static newNoDocument(e,n){return new at(e,2,n,le.min(),le.min(),Vt.empty(),0)}static newUnknownDocument(e,n){return new at(e,3,n,le.min(),le.min(),Vt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof at&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new at(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Gs{constructor(e,n){this.position=e,this.inclusive=n}}function xp(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=te.comparator(te.fromName(o.referenceValue),n.key):r=qs(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Np(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Rn(t.position[n],e.position[n]))return!1;return!0}class lo{constructor(e,n="asc"){this.field=e,this.dir=n}}function wS(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class hy{}class Ze extends hy{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new AS(e,n,r):n==="array-contains"?new SS(e,r):n==="in"?new PS(e,r):n==="not-in"?new CS(e,r):n==="array-contains-any"?new kS(e,r):new Ze(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new bS(e,r):new RS(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(qs(n,this.value)):n!==null&&Cr(this.value)===Cr(n)&&this.matchesComparison(qs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hn extends hy{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new hn(e,n)}matches(e){return fy(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function fy(t){return t.op==="and"}function dy(t){return IS(t)&&fy(t)}function IS(t){for(const e of t.filters)if(e instanceof hn)return!1;return!0}function hu(t){if(t instanceof Ze)return t.field.canonicalString()+t.op.toString()+Hs(t.value);if(dy(t))return t.filters.map((e=>hu(e))).join(",");{const e=t.filters.map((n=>hu(n))).join(",");return`${t.op}(${e})`}}function py(t,e){return t instanceof Ze?(function(r,s){return s instanceof Ze&&r.op===s.op&&r.field.isEqual(s.field)&&Rn(r.value,s.value)})(t,e):t instanceof hn?(function(r,s){return s instanceof hn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((i,o,c)=>i&&py(o,s.filters[c])),!0):!1})(t,e):void ie(19439)}function my(t){return t instanceof Ze?(function(n){return`${n.field.canonicalString()} ${n.op} ${Hs(n.value)}`})(t):t instanceof hn?(function(n){return n.op.toString()+" {"+n.getFilters().map(my).join(" ,")+"}"})(t):"Filter"}class AS extends Ze{constructor(e,n,r){super(e,n,r),this.key=te.fromName(r.referenceValue)}matches(e){const n=te.comparator(e.key,this.key);return this.matchesComparison(n)}}class bS extends Ze{constructor(e,n){super(e,"in",n),this.keys=gy("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class RS extends Ze{constructor(e,n){super(e,"not-in",n),this.keys=gy("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function gy(t,e){return(e.arrayValue?.values||[]).map((n=>te.fromName(n.referenceValue)))}class SS extends Ze{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return lh(n)&&co(n.arrayValue,this.value)}}class PS extends Ze{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&co(this.value.arrayValue,n)}}class CS extends Ze{constructor(e,n){super(e,"not-in",n)}matches(e){if(co(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!co(this.value.arrayValue,n)}}class kS extends Ze{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!lh(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>co(this.value.arrayValue,r)))}}class xS{constructor(e,n=null,r=[],s=[],i=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=c,this.Te=null}}function Vp(t,e=null,n=[],r=[],s=null,i=null,o=null){return new xS(t,e,n,r,s,i,o)}function uh(t){const e=he(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>hu(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(i){return i.field.canonicalString()+i.dir})(r))).join(","),Co(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Hs(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Hs(r))).join(",")),e.Te=n}return e.Te}function hh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!wS(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!py(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Np(t.startAt,e.startAt)&&Np(t.endAt,e.endAt)}function fu(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class fs{constructor(e,n=null,r=[],s=[],i=null,o="F",c=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function NS(t,e,n,r,s,i,o,c){return new fs(t,e,n,r,s,i,o,c)}function fh(t){return new fs(t)}function Dp(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function dh(t){return t.collectionGroup!==null}function Ds(t){const e=he(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new rt(mt.comparator);return o.filters.forEach((l=>{l.getFlattenedFilters().forEach((u=>{u.isInequality()&&(c=c.add(u.field))}))})),c})(e).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new lo(i,r))})),n.has(mt.keyField().canonicalString())||e.Ie.push(new lo(mt.keyField(),r))}return e.Ie}function wn(t){const e=he(t);return e.Ee||(e.Ee=_y(e,Ds(t))),e.Ee}function VS(t){const e=he(t);return e.de||(e.de=_y(e,t.explicitOrderBy)),e.de}function _y(t,e){if(t.limitType==="F")return Vp(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const i=s.dir==="desc"?"asc":"desc";return new lo(s.field,i)}));const n=t.endAt?new Gs(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Gs(t.startAt.position,t.startAt.inclusive):null;return Vp(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function du(t,e){const n=t.filters.concat([e]);return new fs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function za(t,e,n){return new fs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function bc(t,e){return hh(wn(t),wn(e))&&t.limitType===e.limitType}function yy(t){return`${uh(wn(t))}|lt:${t.limitType}`}function As(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>my(s))).join(", ")}]`),Co(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>Hs(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>Hs(s))).join(",")),`Target(${r})`})(wn(t))}; limitType=${t.limitType})`}function Rc(t,e){return e.isFoundDocument()&&(function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):te.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)})(t,e)&&(function(r,s){for(const i of Ds(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0})(t,e)&&(function(r,s){return!(r.startAt&&!(function(o,c,l){const u=xp(o,c,l);return o.inclusive?u<=0:u<0})(r.startAt,Ds(r),s)||r.endAt&&!(function(o,c,l){const u=xp(o,c,l);return o.inclusive?u>=0:u>0})(r.endAt,Ds(r),s))})(t,e)}function DS(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Ey(t){return(e,n)=>{let r=!1;for(const s of Ds(t)){const i=OS(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function OS(t,e,n){const r=t.field.isKeyField()?te.comparator(e.key,n.key):(function(i,o,c){const l=o.data.field(i),u=c.data.field(i);return l!==null&&u!==null?qs(l,u):ie(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ie(19790,{direction:t.dir})}}class ds{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Lr(this.inner,((n,r)=>{for(const[s,i]of r)e(s,i)}))}isEmpty(){return ny(this.inner)}size(){return this.innerSize}}const MS=new qe(te.comparator);function Hn(){return MS}const vy=new qe(te.comparator);function Ci(...t){let e=vy;for(const n of t)e=e.insert(n.key,n);return e}function Ty(t){let e=vy;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function ns(){return Gi()}function wy(){return Gi()}function Gi(){return new ds((t=>t.toString()),((t,e)=>t.isEqual(e)))}const LS=new qe(te.comparator),FS=new rt(te.comparator);function Te(...t){let e=FS;for(const n of t)e=e.add(n);return e}const US=new rt(ve);function BS(){return US}function ph(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qa(e)?"-0":e}}function Iy(t){return{integerValue:""+t}}function Ay(t,e){return dS(e)?Iy(e):ph(t,e)}class Sc{constructor(){this._=void 0}}function jS(t,e,n){return t instanceof uo?(function(s,i){const o={fields:{[iy]:{stringValue:sy},[ay]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Ic(i)&&(i=Ac(i)),i&&(o.fields[oy]=i),{mapValue:o}})(n,e):t instanceof ho?Ry(t,e):t instanceof fo?Sy(t,e):(function(s,i){const o=by(s,i),c=Op(o)+Op(s.Ae);return uu(o)&&uu(s.Ae)?Iy(c):ph(s.serializer,c)})(t,e)}function $S(t,e,n){return t instanceof ho?Ry(t,e):t instanceof fo?Sy(t,e):n}function by(t,e){return t instanceof po?(function(r){return uu(r)||(function(i){return!!i&&"doubleValue"in i})(r)})(e)?e:{integerValue:0}:null}class uo extends Sc{}class ho extends Sc{constructor(e){super(),this.elements=e}}function Ry(t,e){const n=Py(e);for(const r of t.elements)n.some((s=>Rn(s,r)))||n.push(r);return{arrayValue:{values:n}}}class fo extends Sc{constructor(e){super(),this.elements=e}}function Sy(t,e){let n=Py(e);for(const r of t.elements)n=n.filter((s=>!Rn(s,r)));return{arrayValue:{values:n}}}class po extends Sc{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Op(t){return Ke(t.integerValue||t.doubleValue)}function Py(t){return lh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Cy{constructor(e,n){this.field=e,this.transform=n}}function qS(t,e){return t.field.isEqual(e.field)&&(function(r,s){return r instanceof ho&&s instanceof ho||r instanceof fo&&s instanceof fo?$s(r.elements,s.elements,Rn):r instanceof po&&s instanceof po?Rn(r.Ae,s.Ae):r instanceof uo&&s instanceof uo})(t.transform,e.transform)}class HS{constructor(e,n){this.version=e,this.transformResults=n}}class gt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new gt}static exists(e){return new gt(void 0,e)}static updateTime(e){return new gt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ya(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Pc{}function ky(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Cc(t.key,gt.none()):new ko(t.key,t.data,gt.none());{const n=t.data,r=Vt.empty();let s=new rt(mt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Fr(t.key,r,new Wt(s.toArray()),gt.none())}}function GS(t,e,n){t instanceof ko?(function(s,i,o){const c=s.value.clone(),l=Lp(s.fieldTransforms,i,o.transformResults);c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,n):t instanceof Fr?(function(s,i,o){if(!ya(s.precondition,i))return void i.convertToUnknownDocument(o.version);const c=Lp(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(xy(s)),l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(t,e,n):(function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function Wi(t,e,n,r){return t instanceof ko?(function(i,o,c,l){if(!ya(i.precondition,o))return c;const u=i.value.clone(),f=Fp(i.fieldTransforms,l,o);return u.setAll(f),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null})(t,e,n,r):t instanceof Fr?(function(i,o,c,l){if(!ya(i.precondition,o))return c;const u=Fp(i.fieldTransforms,l,o),f=o.data;return f.setAll(xy(i)),f.setAll(u),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((d=>d.field)))})(t,e,n,r):(function(i,o,c){return ya(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c})(t,e,n)}function WS(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=by(r.transform,s||null);i!=null&&(n===null&&(n=Vt.empty()),n.set(r.field,i))}return n||null}function Mp(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&$s(r,s,((i,o)=>qS(i,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ko extends Pc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Fr extends Pc{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function xy(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function Lp(t,e,n){const r=new Map;Ae(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,c=e.data.field(i.field);r.set(i.field,$S(o,c,n[s]))}return r}function Fp(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,jS(i,o,e))}return r}class Cc extends Pc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ny extends Pc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class zS{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&GS(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Wi(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Wi(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=wy();return this.mutations.forEach((s=>{const i=e.get(s.key),o=i.overlayedDocument;let c=this.applyToLocalView(o,i.mutatedFields);c=n.has(s.key)?null:c;const l=ky(o,c);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(le.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Te())}isEqual(e){return this.batchId===e.batchId&&$s(this.mutations,e.mutations,((n,r)=>Mp(n,r)))&&$s(this.baseMutations,e.baseMutations,((n,r)=>Mp(n,r)))}}class mh{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ae(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return LS})();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new mh(e,n,r,s)}}class KS{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class QS{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}class YS{constructor(e,n){this.count=e,this.unchangedNames=n}}var Je,be;function Vy(t){switch(t){case V.OK:return ie(64938);case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0;default:return ie(15467,{code:t})}}function Dy(t){if(t===void 0)return qn("GRPC error has no .code"),V.UNKNOWN;switch(t){case Je.OK:return V.OK;case Je.CANCELLED:return V.CANCELLED;case Je.UNKNOWN:return V.UNKNOWN;case Je.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case Je.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case Je.INTERNAL:return V.INTERNAL;case Je.UNAVAILABLE:return V.UNAVAILABLE;case Je.UNAUTHENTICATED:return V.UNAUTHENTICATED;case Je.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case Je.NOT_FOUND:return V.NOT_FOUND;case Je.ALREADY_EXISTS:return V.ALREADY_EXISTS;case Je.PERMISSION_DENIED:return V.PERMISSION_DENIED;case Je.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case Je.ABORTED:return V.ABORTED;case Je.OUT_OF_RANGE:return V.OUT_OF_RANGE;case Je.UNIMPLEMENTED:return V.UNIMPLEMENTED;case Je.DATA_LOSS:return V.DATA_LOSS;default:return ie(39323,{code:t})}}(be=Je||(Je={}))[be.OK=0]="OK",be[be.CANCELLED=1]="CANCELLED",be[be.UNKNOWN=2]="UNKNOWN",be[be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",be[be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",be[be.NOT_FOUND=5]="NOT_FOUND",be[be.ALREADY_EXISTS=6]="ALREADY_EXISTS",be[be.PERMISSION_DENIED=7]="PERMISSION_DENIED",be[be.UNAUTHENTICATED=16]="UNAUTHENTICATED",be[be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",be[be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",be[be.ABORTED=10]="ABORTED",be[be.OUT_OF_RANGE=11]="OUT_OF_RANGE",be[be.UNIMPLEMENTED=12]="UNIMPLEMENTED",be[be.INTERNAL=13]="INTERNAL",be[be.UNAVAILABLE=14]="UNAVAILABLE",be[be.DATA_LOSS=15]="DATA_LOSS";function JS(){return new TextEncoder}const XS=new vr([4294967295,4294967295],0);function Up(t){const e=JS().encode(t),n=new G_;return n.update(e),new Uint8Array(n.digest())}function Bp(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new vr([n,r],0),new vr([s,i],0)]}class gh{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ki(`Invalid padding: ${n}`);if(r<0)throw new ki(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ki(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ki(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=vr.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(vr.fromNumber(r)));return s.compare(XS)===1&&(s=new vr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Up(e),[r,s]=Bp(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new gh(i,s,n);return r.forEach((c=>o.insert(c))),o}insert(e){if(this.ge===0)return;const n=Up(e),[r,s]=Bp(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ki extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class kc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,xo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new kc(le.min(),s,new qe(ve),Hn(),Te())}}class xo{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new xo(r,n,Te(),Te(),Te())}}class Ea{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class Oy{constructor(e,n){this.targetId=e,this.Ce=n}}class My{constructor(e,n,r=_t.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class jp{constructor(){this.ve=0,this.Fe=$p(),this.Me=_t.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Te(),n=Te(),r=Te();return this.Fe.forEach(((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ie(38017,{changeType:i})}})),new xo(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=$p()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ae(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class ZS{constructor(e){this.Ge=e,this.ze=new Map,this.je=Hn(),this.Je=ra(),this.He=ra(),this.Ye=new qe(ve)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ie(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,s)=>{this.rt(s)&&n(s)}))}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(fu(i))if(r===0){const o=new te(i.path);this.et(n,o,at.newNoDocument(o,le.min()))}else Ae(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const c=this.ut(e),l=c?this.ct(c,e,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,c;try{o=Pr(r).toUint8Array()}catch(l){if(l instanceof ry)return js("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new gh(o,s,i)}catch(l){return js(l instanceof ki?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach((i=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.et(n,i,null),s++)})),s}Tt(e){const n=new Map;this.ze.forEach(((i,o)=>{const c=this.ot(o);if(c){if(i.current&&fu(c.target)){const l=new te(c.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,at.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}}));let r=Te();this.He.forEach(((i,o)=>{let c=!0;o.forEachWhile((l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(r=r.add(i))})),this.je.forEach(((i,o)=>o.setReadTime(e)));const s=new kc(e,n,this.Ye,this.je,r);return this.je=Hn(),this.Je=ra(),this.He=ra(),this.Ye=new qe(ve),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new jp,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new rt(ve),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new rt(ve),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ee("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new jp),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function ra(){return new qe(te.comparator)}function $p(){return new qe(te.comparator)}const eP={asc:"ASCENDING",desc:"DESCENDING"},tP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nP={and:"AND",or:"OR"};class rP{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function pu(t,e){return t.useProto3Json||Co(e)?e:{value:e}}function Ka(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ly(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function sP(t,e){return Ka(t,e.toTimestamp())}function zt(t){return Ae(!!t,49232),le.fromTimestamp((function(n){const r=Sr(n);return new je(r.seconds,r.nanos)})(t))}function _h(t,e){return mu(t,e).canonicalString()}function mu(t,e){const n=(function(s){return new Ve(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function Fy(t){const e=Ve.fromString(t);return Ae(Gy(e),10190,{key:e.toString()}),e}function Qa(t,e){return _h(t.databaseId,e.path)}function zi(t,e){const n=Fy(e);if(n.get(1)!==t.databaseId.projectId)throw new W(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new W(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new te(By(n))}function Uy(t,e){return _h(t.databaseId,e)}function iP(t){const e=Fy(t);return e.length===4?Ve.emptyPath():By(e)}function gu(t){return new Ve(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function By(t){return Ae(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function qp(t,e,n){return{name:Qa(t,e),fields:n.value.mapValue.fields}}function oP(t,e){return"found"in e?(function(r,s){Ae(!!s.found,43571),s.found.name,s.found.updateTime;const i=zi(r,s.found.name),o=zt(s.found.updateTime),c=s.found.createTime?zt(s.found.createTime):le.min(),l=new Vt({mapValue:{fields:s.found.fields}});return at.newFoundDocument(i,o,c,l)})(t,e):"missing"in e?(function(r,s){Ae(!!s.missing,3894),Ae(!!s.readTime,22933);const i=zi(r,s.missing),o=zt(s.readTime);return at.newNoDocument(i,o)})(t,e):ie(7234,{result:e})}function aP(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ie(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=(function(u,f){return u.useProto3Json?(Ae(f===void 0||typeof f=="string",58123),_t.fromBase64String(f||"")):(Ae(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),_t.fromUint8Array(f||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&(function(u){const f=u.code===void 0?V.UNKNOWN:Dy(u.code);return new W(f,u.message||"")})(o);n=new My(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=zi(t,r.document.name),i=zt(r.document.updateTime),o=r.document.createTime?zt(r.document.createTime):le.min(),c=new Vt({mapValue:{fields:r.document.fields}}),l=at.newFoundDocument(s,i,o,c),u=r.targetIds||[],f=r.removedTargetIds||[];n=new Ea(u,f,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=zi(t,r.document),i=r.readTime?zt(r.readTime):le.min(),o=at.newNoDocument(s,i),c=r.removedTargetIds||[];n=new Ea([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=zi(t,r.document),i=r.removedTargetIds||[];n=new Ea([],i,s,null)}else{if(!("filter"in e))return ie(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new YS(s,i),c=r.targetId;n=new Oy(c,o)}}return n}function jy(t,e){let n;if(e instanceof ko)n={update:qp(t,e.key,e.value)};else if(e instanceof Cc)n={delete:Qa(t,e.key)};else if(e instanceof Fr)n={update:qp(t,e.key,e.data),updateMask:gP(e.fieldMask)};else{if(!(e instanceof Ny))return ie(16599,{Vt:e.type});n={verify:Qa(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(i,o){const c=o.transform;if(c instanceof uo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof ho)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof fo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof po)return{fieldPath:o.field.canonicalString(),increment:c.Ae};throw ie(20930,{transform:o.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:sP(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ie(27497)})(t,e.precondition)),n}function cP(t,e){return t&&t.length>0?(Ae(e!==void 0,14353),t.map((n=>(function(s,i){let o=s.updateTime?zt(s.updateTime):zt(i);return o.isEqual(le.min())&&(o=zt(i)),new HS(o,s.transformResults||[])})(n,e)))):[]}function lP(t,e){return{documents:[Uy(t,e.path)]}}function $y(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Uy(t,s);const i=(function(u){if(u.length!==0)return Hy(hn.create(u,"and"))})(e.filters);i&&(n.structuredQuery.where=i);const o=(function(u){if(u.length!==0)return u.map((f=>(function(m){return{field:fr(m.field),direction:dP(m.dir)}})(f)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=pu(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:n,parent:s}}function uP(t,e,n,r){const{ft:s,parent:i}=$y(t,e),o={},c=[];let l=0;return n.forEach((u=>{const f="aggregate_"+l++;o[f]=u.alias,u.aggregateType==="count"?c.push({alias:f,count:{}}):u.aggregateType==="avg"?c.push({alias:f,avg:{field:fr(u.fieldPath)}}):u.aggregateType==="sum"&&c.push({alias:f,sum:{field:fr(u.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:c,structuredQuery:s.structuredQuery},parent:s.parent},gt:o,parent:i}}function hP(t){let e=iP(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ae(r===1,65062);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=(function(d){const m=qy(d);return m instanceof hn&&dy(m)?m.getFilters():[m]})(n.where));let o=[];n.orderBy&&(o=(function(d){return d.map((m=>(function(S){return new lo(bs(S.field),(function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(m)))})(n.orderBy));let c=null;n.limit&&(c=(function(d){let m;return m=typeof d=="object"?d.value:d,Co(m)?null:m})(n.limit));let l=null;n.startAt&&(l=(function(d){const m=!!d.before,g=d.values||[];return new Gs(g,m)})(n.startAt));let u=null;return n.endAt&&(u=(function(d){const m=!d.before,g=d.values||[];return new Gs(g,m)})(n.endAt)),NS(e,s,o,i,c,"F",l,u)}function fP(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ie(28987,{purpose:s})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function qy(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=bs(n.unaryFilter.field);return Ze.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=bs(n.unaryFilter.field);return Ze.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=bs(n.unaryFilter.field);return Ze.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=bs(n.unaryFilter.field);return Ze.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ie(61313);default:return ie(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Ze.create(bs(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ie(58110);default:return ie(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return hn.create(n.compositeFilter.filters.map((r=>qy(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ie(1026)}})(n.compositeFilter.op))})(t):ie(30097,{filter:t})}function dP(t){return eP[t]}function pP(t){return tP[t]}function mP(t){return nP[t]}function fr(t){return{fieldPath:t.canonicalString()}}function bs(t){return mt.fromServerFormat(t.fieldPath)}function Hy(t){return t instanceof Ze?(function(n){if(n.op==="=="){if(kp(n.value))return{unaryFilter:{field:fr(n.field),op:"IS_NAN"}};if(Cp(n.value))return{unaryFilter:{field:fr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(kp(n.value))return{unaryFilter:{field:fr(n.field),op:"IS_NOT_NAN"}};if(Cp(n.value))return{unaryFilter:{field:fr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fr(n.field),op:pP(n.op),value:n.value}}})(t):t instanceof hn?(function(n){const r=n.getFilters().map((s=>Hy(s)));return r.length===1?r[0]:{compositeFilter:{op:mP(n.op),filters:r}}})(t):ie(54877,{filter:t})}function gP(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function Gy(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class dr{constructor(e,n,r,s,i=le.min(),o=le.min(),c=_t.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new dr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class _P{constructor(e){this.yt=e}}function yP(t){const e=hP({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?za(e,e.limit,"L"):e}class EP{constructor(){this.Cn=new vP}addToCollectionParentIndex(e,n){return this.Cn.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(Rr.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(Rr.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class vP{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new rt(Ve.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new rt(Ve.comparator)).toArray()}}const Hp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Wy=41943040;class Mt{static withCacheSize(e){return new Mt(e,Mt.DEFAULT_COLLECTION_PERCENTILE,Mt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}Mt.DEFAULT_COLLECTION_PERCENTILE=10,Mt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mt.DEFAULT=new Mt(Wy,Mt.DEFAULT_COLLECTION_PERCENTILE,Mt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mt.DISABLED=new Mt(-1,0,0);class Ws{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ws(0)}static cr(){return new Ws(-1)}}const Gp="LruGarbageCollector",TP=1048576;function Wp([t,e],[n,r]){const s=ve(t,n);return s===0?ve(e,r):s}class wP{constructor(e){this.Ir=e,this.buffer=new rt(Wp),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Wp(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class IP{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ee(Gp,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ni(n)?ee(Gp,"Ignoring IndexedDB error during garbage collection: ",n):await ti(n)}await this.Vr(3e5)}))}}class AP{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return U.resolve(wc.ce);const r=new wP(n);return this.mr.forEachTarget(e,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ee("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(Hp)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Hp):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,c,l,u;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((d=>(d>this.params.maximumSequenceNumbersToCollect?(ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),s=this.params.maximumSequenceNumbersToCollect):s=d,o=Date.now(),this.nthSequenceNumber(e,s)))).next((d=>(r=d,c=Date.now(),this.removeTargets(e,r,n)))).next((d=>(i=d,l=Date.now(),this.removeOrphanedDocuments(e,r)))).next((d=>(u=Date.now(),Is()<=Ee.DEBUG&&ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${s} in `+(c-o)+`ms
	Removed ${i} targets in `+(l-c)+`ms
	Removed ${d} documents in `+(u-l)+`ms
Total Duration: ${u-f}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:d}))))}}function bP(t,e){return new AP(t,e)}class RP{constructor(){this.changes=new ds((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,at.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class SP{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class PP{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(r!==null&&Wi(r.mutation,s,Wt.empty(),je.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Te()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Te()){const s=ns();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,r).next((i=>{let o=Ci();return i.forEach(((c,l)=>{o=o.insert(c,l.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const r=ns();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Te())))}populateOverlays(e,n,r){const s=[];return r.forEach((i=>{n.has(i)||s.push(i)})),this.documentOverlayCache.getOverlays(e,s).next((i=>{i.forEach(((o,c)=>{n.set(o,c)}))}))}computeViews(e,n,r,s){let i=Hn();const o=Gi(),c=(function(){return Gi()})();return n.forEach(((l,u)=>{const f=r.get(u.key);s.has(u.key)&&(f===void 0||f.mutation instanceof Fr)?i=i.insert(u.key,u):f!==void 0?(o.set(u.key,f.mutation.getFieldMask()),Wi(f.mutation,u,f.mutation.getFieldMask(),je.now())):o.set(u.key,Wt.empty())})),this.recalculateAndSaveOverlays(e,i).next((l=>(l.forEach(((u,f)=>o.set(u,f))),n.forEach(((u,f)=>c.set(u,new SP(f,o.get(u)??null)))),c)))}recalculateAndSaveOverlays(e,n){const r=Gi();let s=new qe(((o,c)=>o-c)),i=Te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const c of o)c.keys().forEach((l=>{const u=n.get(l);if(u===null)return;let f=r.get(l)||Wt.empty();f=c.applyToLocalView(u,f),r.set(l,f);const d=(s.get(c.batchId)||Te()).add(l);s=s.insert(c.batchId,d)}))})).next((()=>{const o=[],c=s.getReverseIterator();for(;c.hasNext();){const l=c.getNext(),u=l.key,f=l.value,d=wy();f.forEach((m=>{if(!i.has(m)){const g=ky(n.get(m),r.get(m));g!==null&&d.set(m,g),i=i.add(m)}})),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return U.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,s){return(function(o){return te.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):dh(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next((i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):U.resolve(ns());let c=io,l=i;return o.next((u=>U.forEach(u,((f,d)=>(c<d.largestBatchId&&(c=d.largestBatchId),i.get(f)?U.resolve():this.remoteDocumentCache.getEntry(e,f).next((m=>{l=l.insert(f,m)}))))).next((()=>this.populateOverlays(e,u,i))).next((()=>this.computeViews(e,l,u,Te()))).next((f=>({batchId:c,changes:Ty(f)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new te(n)).next((r=>{let s=Ci();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Ci();return this.indexManager.getCollectionParents(e,i).next((c=>U.forEach(c,(l=>{const u=(function(d,m){return new fs(m,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)})(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next((f=>{f.forEach(((d,m)=>{o=o.insert(d,m)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s)))).next((o=>{i.forEach(((l,u)=>{const f=u.getKey();o.get(f)===null&&(o=o.insert(f,at.newInvalidDocument(f)))}));let c=Ci();return o.forEach(((l,u)=>{const f=i.get(l);f!==void 0&&Wi(f.mutation,u,Wt.empty(),je.now()),Rc(n,u)&&(c=c.insert(l,u))})),c}))}}class CP{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return U.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:zt(s.createTime)}})(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(s){return{name:s.name,query:yP(s.bundledQuery),readTime:zt(s.readTime)}})(n)),U.resolve()}}class kP{constructor(){this.overlays=new qe(te.comparator),this.qr=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ns();return U.forEach(n,(s=>this.getOverlay(e,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((s,i)=>{this.St(e,n,i)})),U.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((i=>this.overlays=this.overlays.remove(i))),this.qr.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const s=ns(),i=n.length+1,o=new te(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const l=c.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return U.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new qe(((u,f)=>u-f));const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let f=i.get(u.largestBatchId);f===null&&(f=ns(),i=i.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}const c=ns(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((u,f)=>c.set(u,f))),!(c.size()>=s)););return U.resolve(c)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new KS(n,r));let i=this.qr.get(n);i===void 0&&(i=Te(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}class xP{constructor(){this.sessionToken=_t.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}class yh{constructor(){this.Qr=new rt(ot.$r),this.Ur=new rt(ot.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new ot(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new ot(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new te(new Ve([])),r=new ot(n,e),s=new ot(n,e+1),i=[];return this.Ur.forEachInRange([r,s],(o=>{this.Gr(o),i.push(o.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new te(new Ve([])),r=new ot(n,e),s=new ot(n,e+1);let i=Te();return this.Ur.forEachInRange([r,s],(o=>{i=i.add(o.key)})),i}containsKey(e){const n=new ot(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ot{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return te.comparator(e.key,n.key)||ve(e.Yr,n.Yr)}static Kr(e,n){return ve(e.Yr,n.Yr)||te.comparator(e.key,n.key)}}class NP{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new rt(ot.$r)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new zS(i,n,r,s);this.mutationQueue.push(o);for(const c of s)this.Zr=this.Zr.add(new ot(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return U.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?ch:this.tr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ot(n,0),s=new ot(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],(o=>{const c=this.Xr(o.Yr);i.push(c)})),U.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new rt(ve);return n.forEach((s=>{const i=new ot(s,0),o=new ot(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],(c=>{r=r.add(c.Yr)}))})),U.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;te.isDocumentKey(i)||(i=i.child(""));const o=new ot(new te(i),0);let c=new rt(ve);return this.Zr.forEachWhile((l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(c=c.add(l.Yr)),!0)}),o),U.resolve(this.ti(c))}ti(e){const n=[];return e.forEach((r=>{const s=this.Xr(r);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){Ae(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return U.forEach(n.mutations,(s=>{const i=new ot(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new ot(n,0),s=this.Zr.firstAfterOrEqual(r);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class VP{constructor(e){this.ri=e,this.docs=(function(){return new qe(te.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():at.newInvalidDocument(n))}getEntries(e,n){let r=Hn();return n.forEach((s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():at.newInvalidDocument(s))})),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Hn();const o=n.path,c=new te(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){const{key:u,value:{document:f}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||lS(cS(f),r)<=0||(s.has(f.key)||Rc(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return U.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ie(9500)}ii(e,n){return U.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new DP(this)}getSize(e){return U.resolve(this.size)}}class DP extends RP{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)})),U.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class OP{constructor(e){this.persistence=e,this.si=new ds((n=>uh(n)),hh),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.oi=0,this._i=new yh,this.targetCount=0,this.ai=Ws.ur()}forEachTarget(e,n){return this.si.forEach(((r,s)=>n(s))),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),U.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Ws(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Pr(n),U.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach(((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)})),U.waitFor(i).next((()=>s))}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach((o=>{i.push(s.markPotentiallyOrphaned(e,o))})),U.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this._i.containsKey(n))}}class zy{constructor(e,n){this.ui={},this.overlays={},this.ci=new wc(0),this.li=!1,this.li=!0,this.hi=new xP,this.referenceDelegate=e(this),this.Pi=new OP(this),this.indexManager=new EP,this.remoteDocumentCache=(function(s){return new VP(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new _P(n),this.Ii=new CP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new kP,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new NP(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){ee("MemoryPersistence","Starting transaction:",e);const s=new MP(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((i=>this.referenceDelegate.di(s).next((()=>i)))).toPromise().then((i=>(s.raiseOnCommittedEvent(),i)))}Ai(e,n){return U.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class MP extends hS{constructor(e){super(),this.currentSequenceNumber=e}}class Eh{constructor(e){this.persistence=e,this.Ri=new yh,this.Vi=null}static mi(e){return new Eh(e)}get fi(){if(this.Vi)return this.Vi;throw ie(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),U.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((i=>this.fi.add(i.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.fi,(r=>{const s=te.fromPath(r);return this.gi(e,s).next((i=>{i||n.removeEntry(s,le.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return U.or([()=>U.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Ya{constructor(e,n){this.persistence=e,this.pi=new ds((r=>pS(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=bP(this,n)}static mi(e,n){return new Ya(e,n)}Ei(){}di(e){return U.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((s=>r+s))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return U.forEach(this.pi,((r,s)=>this.br(e,r,s).next((i=>i?U.resolve():n(s)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,(o=>this.br(e,o,n).next((c=>{c||(r++,i.removeEntry(o,le.min()))})))).next((()=>i.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),U.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),U.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),U.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ga(e.data.value)),n}br(e,n,r){return U.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return U.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class vh{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Te(),s=Te();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new vh(e,n.fromCache,r,s)}}class LP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class FP{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return dA()?8:fS(bt())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.ws(e,n,s,r).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new LP;return this.Ss(e,n,o).next((c=>{if(i.result=c,this.Vs)return this.bs(e,n,o,c.size)}))})).next((()=>i.result))}bs(e,n,r,s){return r.documentReadCount<this.fs?(Is()<=Ee.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",As(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),U.resolve()):(Is()<=Ee.DEBUG&&ee("QueryEngine","Query:",As(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Is()<=Ee.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",As(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,wn(n))):U.resolve())}ys(e,n){if(Dp(n))return U.resolve(null);let r=wn(n);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=za(n,null,"F"),r=wn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((i=>{const o=Te(...i);return this.ps.getDocuments(e,o).next((c=>this.indexManager.getMinOffset(e,r).next((l=>{const u=this.Ds(n,c);return this.Cs(n,u,o,l.readTime)?this.ys(e,za(n,null,"F")):this.vs(e,u,n,l)}))))})))))}ws(e,n,r,s){return Dp(n)||s.isEqual(le.min())?U.resolve(null):this.ps.getDocuments(e,r).next((i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?U.resolve(null):(Is()<=Ee.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),As(n)),this.vs(e,o,n,aS(s,io)).next((c=>c)))}))}Ds(e,n){let r=new rt(Ey(e));return n.forEach(((s,i)=>{Rc(e,i)&&(r=r.add(i))})),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return Is()<=Ee.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",As(n)),this.ps.getDocumentsMatchingQuery(e,n,Rr.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next((i=>(n.forEach((o=>{i=i.insert(o.key,o)})),i)))}}const Th="LocalStore",UP=3e8;class BP{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new qe(ve),this.xs=new ds((i=>uh(i)),hh),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new PP(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function jP(t,e,n,r){return new BP(t,e,n,r)}async function Ky(t,e){const n=he(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((i=>{const o=[],c=[];let l=Te();for(const u of s){o.push(u.batchId);for(const f of u.mutations)l=l.add(f.key)}for(const u of i){c.push(u.batchId);for(const f of u.mutations)l=l.add(f.key)}return n.localDocuments.getDocuments(r,l).next((u=>({Ls:u,removedBatchIds:o,addedBatchIds:c})))}))}))}function $P(t,e){const n=he(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,l,u,f){const d=u.batch,m=d.keys();let g=U.resolve();return m.forEach((S=>{g=g.next((()=>f.getEntry(l,S))).next((P=>{const x=u.docVersions.get(S);Ae(x!==null,48541),P.version.compareTo(x)<0&&(d.applyToRemoteDocument(P,u),P.isValidDocument()&&(P.setReadTime(u.commitVersion),f.addEntry(P)))}))})),g.next((()=>c.mutationQueue.removeMutationBatch(l,d)))})(n,r,e,i).next((()=>i.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let l=Te();for(let u=0;u<c.mutationResults.length;++u)c.mutationResults[u].transformResults.length>0&&(l=l.add(c.batch.mutations[u].key));return l})(e)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function Qy(t){const e=he(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function qP(t,e){const n=he(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const c=[];e.targetChanges.forEach(((f,d)=>{const m=s.get(d);if(!m)return;c.push(n.Pi.removeMatchingKeys(i,f.removedDocuments,d).next((()=>n.Pi.addMatchingKeys(i,f.addedDocuments,d))));let g=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?g=g.withResumeToken(_t.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):f.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(f.resumeToken,r)),s=s.insert(d,g),(function(P,x,O){return P.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=UP?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0})(m,g,f)&&c.push(n.Pi.updateTargetData(i,g))}));let l=Hn(),u=Te();if(e.documentUpdates.forEach((f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))})),c.push(HP(i,o,e.documentUpdates).next((f=>{l=f.ks,u=f.qs}))),!r.isEqual(le.min())){const f=n.Pi.getLastRemoteSnapshotVersion(i).next((d=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r)));c.push(f)}return U.waitFor(c).next((()=>o.apply(i))).next((()=>n.localDocuments.getLocalViewOfDocuments(i,l,u))).next((()=>l))})).then((i=>(n.Ms=s,i)))}function HP(t,e,n){let r=Te(),s=Te();return n.forEach((i=>r=r.add(i))),e.getEntries(t,r).next((i=>{let o=Hn();return n.forEach(((c,l)=>{const u=i.get(c);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(c)),l.isNoDocument()&&l.version.isEqual(le.min())?(e.removeEntry(c,l.readTime),o=o.insert(c,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(c,l)):ee(Th,"Ignoring outdated watch update for ",c,". Current version:",u.version," Watch version:",l.version)})),{ks:o,qs:s}}))}function GP(t,e){const n=he(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=ch),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function WP(t,e){const n=he(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.Pi.getTargetData(r,e).next((i=>i?(s=i,U.resolve(s)):n.Pi.allocateTargetId(r).next((o=>(s=new dr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function _u(t,e,n){const r=he(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,(o=>r.persistence.referenceDelegate.removeTarget(o,s)))}catch(o){if(!ni(o))throw o;ee(Th,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function zp(t,e,n){const r=he(t);let s=le.min(),i=Te();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(l,u,f){const d=he(l),m=d.xs.get(f);return m!==void 0?U.resolve(d.Ms.get(m)):d.Pi.getTargetData(u,f)})(r,o,wn(e)).next((c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,c.targetId).next((l=>{i=l}))})).next((()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:le.min(),n?i:Te()))).next((c=>(zP(r,DS(e),c),{documents:c,Qs:i})))))}function zP(t,e,n){let r=t.Os.get(e)||le.min();n.forEach(((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)})),t.Os.set(e,r)}class Kp{constructor(){this.activeTargetIds=BS()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class KP{constructor(){this.Mo=new Kp,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Kp,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class QP{Oo(e){}shutdown(){}}const Qp="ConnectivityMonitor";class Yp{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ee(Qp,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ee(Qp,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let sa=null;function yu(){return sa===null?sa=(function(){return 268435456+Math.round(2147483648*Math.random())})():sa++,"0x"+sa.toString(16)}const Cl="RestConnection",YP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class JP{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Ha?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=yu(),c=this.zo(e,n.toUriEncodedString());ee(Cl,`Sending RPC '${e}' ${o}:`,c,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,i);const{host:u}=new URL(c),f=Js(u);return this.Jo(e,c,l,r,f).then((d=>(ee(Cl,`Received RPC '${e}' ${o}: `,d),d)),(d=>{throw js(Cl,`RPC '${e}' ${o} failed with error: `,d,"url: ",c,"request:",r),d}))}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ei})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,i)=>e[i]=s)),r&&r.headers.forEach(((s,i)=>e[i]=s))}zo(e,n){const r=YP[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}class XP{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Tt="WebChannelConnection";class ZP extends JP{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=yu();return new Promise(((c,l)=>{const u=new W_;u.setWithCredentials(!0),u.listenOnce(z_.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case ma.NO_ERROR:const d=u.getResponseJson();ee(Tt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),c(d);break;case ma.TIMEOUT:ee(Tt,`RPC '${e}' ${o} timed out`),l(new W(V.DEADLINE_EXCEEDED,"Request time out"));break;case ma.HTTP_ERROR:const m=u.getStatus();if(ee(Tt,`RPC '${e}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const S=g?.error;if(S&&S.status&&S.message){const P=(function(O){const F=O.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(F)>=0?F:V.UNKNOWN})(S.status);l(new W(P,S.message))}else l(new W(V.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new W(V.UNAVAILABLE,"Connection failed."));break;default:ie(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{ee(Tt,`RPC '${e}' ${o} completed.`)}}));const f=JSON.stringify(s);ee(Tt,`RPC '${e}' ${o} sending request:`,s),u.send(n,"POST",f,r,15)}))}T_(e,n,r){const s=yu(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Y_(),c=Q_(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const f=i.join("");ee(Tt,`Creating RPC '${e}' stream ${s}: ${f}`,l);const d=o.createWebChannel(f,l);this.I_(d);let m=!1,g=!1;const S=new XP({Yo:x=>{g?ee(Tt,`Not sending because RPC '${e}' stream ${s} is closed:`,x):(m||(ee(Tt,`Opening RPC '${e}' stream ${s} transport.`),d.open(),m=!0),ee(Tt,`RPC '${e}' stream ${s} sending:`,x),d.send(x))},Zo:()=>d.close()}),P=(x,O,F)=>{x.listen(O,($=>{try{F($)}catch(q){setTimeout((()=>{throw q}),0)}}))};return P(d,Pi.EventType.OPEN,(()=>{g||(ee(Tt,`RPC '${e}' stream ${s} transport opened.`),S.o_())})),P(d,Pi.EventType.CLOSE,(()=>{g||(g=!0,ee(Tt,`RPC '${e}' stream ${s} transport closed`),S.a_(),this.E_(d))})),P(d,Pi.EventType.ERROR,(x=>{g||(g=!0,js(Tt,`RPC '${e}' stream ${s} transport errored. Name:`,x.name,"Message:",x.message),S.a_(new W(V.UNAVAILABLE,"The operation could not be completed")))})),P(d,Pi.EventType.MESSAGE,(x=>{if(!g){const O=x.data[0];Ae(!!O,16349);const F=O,$=F?.error||F[0]?.error;if($){ee(Tt,`RPC '${e}' stream ${s} received error:`,$);const q=$.status;let J=(function(E){const y=Je[E];if(y!==void 0)return Dy(y)})(q),ne=$.message;J===void 0&&(J=V.INTERNAL,ne="Unknown error status: "+q+" with message "+$.message),g=!0,S.a_(new W(J,ne)),d.close()}else ee(Tt,`RPC '${e}' stream ${s} received:`,O),S.u_(O)}})),P(c,K_.STAT_EVENT,(x=>{x.stat===au.PROXY?ee(Tt,`RPC '${e}' stream ${s} detected buffering proxy`):x.stat===au.NOPROXY&&ee(Tt,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{S.__()}),0),S}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function kl(){return typeof document<"u"?document:null}function xc(t){return new rP(t,!0)}class wh{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&ee("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Jp="PersistentStream";class Yy{constructor(e,n,r,s,i,o,c,l){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new wh(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===V.RESOURCE_EXHAUSTED?(qn(n.toString()),qn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===n&&this.G_(r,s)}),(r=>{e((()=>{const s=new W(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ee(Jp,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ee(Jp,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class eC extends Yy{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=aP(this.serializer,e),r=(function(i){if(!("targetChange"in i))return le.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?le.min():o.readTime?zt(o.readTime):le.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=gu(this.serializer),n.addTarget=(function(i,o){let c;const l=o.target;if(c=fu(l)?{documents:lP(i,l)}:{query:$y(i,l).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=Ly(i,o.resumeToken);const u=pu(i,o.expectedCount);u!==null&&(c.expectedCount=u)}else if(o.snapshotVersion.compareTo(le.min())>0){c.readTime=Ka(i,o.snapshotVersion.toTimestamp());const u=pu(i,o.expectedCount);u!==null&&(c.expectedCount=u)}return c})(this.serializer,e);const r=fP(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=gu(this.serializer),n.removeTarget=e,this.q_(n)}}class tC extends Yy{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ae(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ae(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ae(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=cP(e.writeResults,e.commitTime),r=zt(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=gu(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>jy(this.serializer,r)))};this.q_(n)}}class nC{}class rC extends nC{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new W(V.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Go(e,mu(n,r),s,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new W(V.UNKNOWN,i.toString())}))}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Ho(e,mu(n,r),s,o,c,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new W(V.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class sC{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(qn(n),this.aa=!1):ee("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const hs="RemoteStore";class iC{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((o=>{r.enqueueAndForget((async()=>{ps(this)&&(ee(hs,"Restarting streams for network reachability change."),await(async function(l){const u=he(l);u.Ea.add(4),await No(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Nc(u)})(this))}))})),this.Ra=new sC(r,s)}}async function Nc(t){if(ps(t))for(const e of t.da)await e(!0)}async function No(t){for(const e of t.da)await e(!1)}function Jy(t,e){const n=he(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Rh(n)?bh(n):ri(n).O_()&&Ah(n,e))}function Ih(t,e){const n=he(t),r=ri(n);n.Ia.delete(e),r.O_()&&Xy(n,e),n.Ia.size===0&&(r.O_()?r.L_():ps(n)&&n.Ra.set("Unknown"))}function Ah(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ri(t).Y_(e)}function Xy(t,e){t.Va.Ue(e),ri(t).Z_(e)}function bh(t){t.Va=new ZS({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),ri(t).start(),t.Ra.ua()}function Rh(t){return ps(t)&&!ri(t).x_()&&t.Ia.size>0}function ps(t){return he(t).Ea.size===0}function Zy(t){t.Va=void 0}async function oC(t){t.Ra.set("Online")}async function aC(t){t.Ia.forEach(((e,n)=>{Ah(t,e)}))}async function cC(t,e){Zy(t),Rh(t)?(t.Ra.ha(e),bh(t)):t.Ra.set("Unknown")}async function lC(t,e,n){if(t.Ra.set("Online"),e instanceof My&&e.state===2&&e.cause)try{await(async function(s,i){const o=i.cause;for(const c of i.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,o),s.Ia.delete(c),s.Va.removeTarget(c))})(t,e)}catch(r){ee(hs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ja(t,r)}else if(e instanceof Ea?t.Va.Ze(e):e instanceof Oy?t.Va.st(e):t.Va.tt(e),!n.isEqual(le.min()))try{const r=await Qy(t.localStore);n.compareTo(r)>=0&&await(function(i,o){const c=i.Va.Tt(o);return c.targetChanges.forEach(((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const f=i.Ia.get(u);f&&i.Ia.set(u,f.withResumeToken(l.resumeToken,o))}})),c.targetMismatches.forEach(((l,u)=>{const f=i.Ia.get(l);if(!f)return;i.Ia.set(l,f.withResumeToken(_t.EMPTY_BYTE_STRING,f.snapshotVersion)),Xy(i,l);const d=new dr(f.target,l,u,f.sequenceNumber);Ah(i,d)})),i.remoteSyncer.applyRemoteEvent(c)})(t,n)}catch(r){ee(hs,"Failed to raise snapshot:",r),await Ja(t,r)}}async function Ja(t,e,n){if(!ni(e))throw e;t.Ea.add(1),await No(t),t.Ra.set("Offline"),n||(n=()=>Qy(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{ee(hs,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Nc(t)}))}function eE(t,e){return e().catch((n=>Ja(t,n,e)))}async function Vc(t){const e=he(t),n=kr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ch;for(;uC(e);)try{const s=await GP(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,hC(e,s)}catch(s){await Ja(e,s)}tE(e)&&nE(e)}function uC(t){return ps(t)&&t.Ta.length<10}function hC(t,e){t.Ta.push(e);const n=kr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function tE(t){return ps(t)&&!kr(t).x_()&&t.Ta.length>0}function nE(t){kr(t).start()}async function fC(t){kr(t).ra()}async function dC(t){const e=kr(t);for(const n of t.Ta)e.ea(n.mutations)}async function pC(t,e,n){const r=t.Ta.shift(),s=mh.from(r,e,n);await eE(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await Vc(t)}async function mC(t,e){e&&kr(t).X_&&await(async function(r,s){if((function(o){return Vy(o)&&o!==V.ABORTED})(s.code)){const i=r.Ta.shift();kr(r).B_(),await eE(r,(()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s))),await Vc(r)}})(t,e),tE(t)&&nE(t)}async function Xp(t,e){const n=he(t);n.asyncQueue.verifyOperationInProgress(),ee(hs,"RemoteStore received new credentials");const r=ps(n);n.Ea.add(3),await No(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Nc(n)}async function gC(t,e){const n=he(t);e?(n.Ea.delete(2),await Nc(n)):e||(n.Ea.add(2),await No(n),n.Ra.set("Unknown"))}function ri(t){return t.ma||(t.ma=(function(n,r,s){const i=he(n);return i.sa(),new eC(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Xo:oC.bind(null,t),t_:aC.bind(null,t),r_:cC.bind(null,t),H_:lC.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),Rh(t)?bh(t):t.Ra.set("Unknown")):(await t.ma.stop(),Zy(t))}))),t.ma}function kr(t){return t.fa||(t.fa=(function(n,r,s){const i=he(n);return i.sa(),new tC(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:fC.bind(null,t),r_:mC.bind(null,t),ta:dC.bind(null,t),na:pC.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await Vc(t)):(await t.fa.stop(),t.Ta.length>0&&(ee(hs,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class Sh{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new cn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,c=new Sh(e,n,o,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ph(t,e){if(qn("AsyncQueue",`${e}: ${t}`),ni(t))return new W(V.UNAVAILABLE,`${e}: ${t}`);throw t}class Os{static emptySet(e){return new Os(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||te.comparator(n.key,r.key):(n,r)=>te.comparator(n.key,r.key),this.keyedMap=Ci(),this.sortedSet=new qe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Os)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Os;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class Zp{constructor(){this.ga=new qe(te.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ie(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class zs{constructor(e,n,r,s,i,o,c,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach((c=>{o.push({type:0,doc:c})})),new zs(e,n,Os.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}class _C{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class yC{constructor(){this.queries=em(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=he(n),i=s.queries;s.queries=em(),i.forEach(((o,c)=>{for(const l of c.Sa)l.onError(r)}))})(this,new W(V.ABORTED,"Firestore shutting down"))}}function em(){return new ds((t=>yy(t)),bc)}async function rE(t,e){const n=he(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new _C,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const c=Ph(o,`Initialization of query '${As(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Ch(n)}async function sE(t,e){const n=he(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function EC(t,e){const n=he(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const c of o.Sa)c.Fa(s)&&(r=!0);o.wa=s}}r&&Ch(n)}function vC(t,e,n){const r=he(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function Ch(t){t.Ca.forEach((e=>{e.next()}))}var Eu,tm;(tm=Eu||(Eu={})).Ma="default",tm.Cache="cache";class iE{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new zs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=zs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Eu.Cache}}class oE{constructor(e){this.key=e}}class aE{constructor(e){this.key=e}}class TC{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Te(),this.mutatedKeys=Te(),this.eu=Ey(e),this.tu=new Os(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Zp,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,c=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((f,d)=>{const m=s.get(f),g=Rc(this.query,d)?d:null,S=!!m&&this.mutatedKeys.has(m.key),P=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let x=!1;m&&g?m.data.isEqual(g.data)?S!==P&&(r.track({type:3,doc:g}),x=!0):this.su(m,g)||(r.track({type:2,doc:g}),x=!0,(l&&this.eu(g,l)>0||u&&this.eu(g,u)<0)&&(c=!0)):!m&&g?(r.track({type:0,doc:g}),x=!0):m&&!g&&(r.track({type:1,doc:m}),x=!0,(l||u)&&(c=!0)),x&&(g?(o=o.add(g),i=P?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{tu:o,iu:r,Cs:c,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((f,d)=>(function(g,S){const P=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ie(20277,{Rt:x})}};return P(g)-P(S)})(f.type,d.type)||this.eu(f.doc,d.doc))),this.ou(r),s=s??!1;const c=n&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new zs(this.query,e.tu,i,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Zp,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Te(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new aE(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new oE(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=Te();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return zs.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const kh="SyncEngine";class wC{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class IC{constructor(e){this.key=e,this.hu=!1}}class AC{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new ds((c=>yy(c)),bc),this.Iu=new Map,this.Eu=new Set,this.du=new qe(te.comparator),this.Au=new Map,this.Ru=new yh,this.Vu={},this.mu=new Map,this.fu=Ws.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function bC(t,e,n=!0){const r=dE(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await cE(r,e,n,!0),s}async function RC(t,e){const n=dE(t);await cE(n,e,!0,!1)}async function cE(t,e,n,r){const s=await WP(t.localStore,wn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let c;return r&&(c=await SC(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Jy(t.remoteStore,s),c}async function SC(t,e,n,r,s){t.pu=(d,m,g)=>(async function(P,x,O,F){let $=x.view.ru(O);$.Cs&&($=await zp(P.localStore,x.query,!1).then((({documents:b})=>x.view.ru(b,$))));const q=F&&F.targetChanges.get(x.targetId),J=F&&F.targetMismatches.get(x.targetId)!=null,ne=x.view.applyChanges($,P.isPrimaryClient,q,J);return rm(P,x.targetId,ne.au),ne.snapshot})(t,d,m,g);const i=await zp(t.localStore,e,!0),o=new TC(e,i.Qs),c=o.ru(i.documents),l=xo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(c,t.isPrimaryClient,l);rm(t,n,u.au);const f=new wC(e,n,o);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function PC(t,e,n){const r=he(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter((o=>!bc(o,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await _u(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Ih(r.remoteStore,s.targetId),vu(r,s.targetId)})).catch(ti)):(vu(r,s.targetId),await _u(r.localStore,s.targetId,!0))}async function CC(t,e){const n=he(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ih(n.remoteStore,r.targetId))}async function kC(t,e,n){const r=LC(t);try{const s=await(function(o,c){const l=he(o),u=je.now(),f=c.reduce(((g,S)=>g.add(S.key)),Te());let d,m;return l.persistence.runTransaction("Locally write mutations","readwrite",(g=>{let S=Hn(),P=Te();return l.Ns.getEntries(g,f).next((x=>{S=x,S.forEach(((O,F)=>{F.isValidDocument()||(P=P.add(O))}))})).next((()=>l.localDocuments.getOverlayedDocuments(g,S))).next((x=>{d=x;const O=[];for(const F of c){const $=WS(F,d.get(F.key).overlayedDocument);$!=null&&O.push(new Fr(F.key,$,uy($.value.mapValue),gt.exists(!0)))}return l.mutationQueue.addMutationBatch(g,u,O,c)})).next((x=>{m=x;const O=x.applyToLocalDocumentSet(d,P);return l.documentOverlayCache.saveOverlays(g,x.batchId,O)}))})).then((()=>({batchId:m.batchId,changes:Ty(d)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(o,c,l){let u=o.Vu[o.currentUser.toKey()];u||(u=new qe(ve)),u=u.insert(c,l),o.Vu[o.currentUser.toKey()]=u})(r,s.batchId,n),await Vo(r,s.changes),await Vc(r.remoteStore)}catch(s){const i=Ph(s,"Failed to persist write");n.reject(i)}}async function lE(t,e){const n=he(t);try{const r=await qP(n.localStore,e);e.targetChanges.forEach(((s,i)=>{const o=n.Au.get(i);o&&(Ae(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?Ae(o.hu,14607):s.removedDocuments.size>0&&(Ae(o.hu,42227),o.hu=!1))})),await Vo(n,r,e)}catch(r){await ti(r)}}function nm(t,e,n){const r=he(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach(((i,o)=>{const c=o.view.va(e);c.snapshot&&s.push(c.snapshot)})),(function(o,c){const l=he(o);l.onlineState=c;let u=!1;l.queries.forEach(((f,d)=>{for(const m of d.Sa)m.va(c)&&(u=!0)})),u&&Ch(l)})(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function xC(t,e,n){const r=he(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new qe(te.comparator);o=o.insert(i,at.newNoDocument(i,le.min()));const c=Te().add(i),l=new kc(le.min(),new Map,new qe(ve),o,c);await lE(r,l),r.du=r.du.remove(i),r.Au.delete(e),xh(r)}else await _u(r.localStore,e,!1).then((()=>vu(r,e,n))).catch(ti)}async function NC(t,e){const n=he(t),r=e.batch.batchId;try{const s=await $P(n.localStore,e);hE(n,r,null),uE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Vo(n,s)}catch(s){await ti(s)}}async function VC(t,e,n){const r=he(t);try{const s=await(function(o,c){const l=he(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let f;return l.mutationQueue.lookupMutationBatch(u,c).next((d=>(Ae(d!==null,37113),f=d.keys(),l.mutationQueue.removeMutationBatch(u,d)))).next((()=>l.mutationQueue.performConsistencyCheck(u))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(u,f,c))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f))).next((()=>l.localDocuments.getDocuments(u,f)))}))})(r.localStore,e);hE(r,e,n),uE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Vo(r,s)}catch(s){await ti(s)}}function uE(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function hE(t,e,n){const r=he(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function vu(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||fE(t,r)}))}function fE(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Ih(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),xh(t))}function rm(t,e,n){for(const r of n)r instanceof oE?(t.Ru.addReference(r.key,e),DC(t,r)):r instanceof aE?(ee(kh,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||fE(t,r.key)):ie(19791,{wu:r})}function DC(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(ee(kh,"New document in limbo: "+n),t.Eu.add(r),xh(t))}function xh(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new te(Ve.fromString(e)),r=t.fu.next();t.Au.set(r,new IC(n)),t.du=t.du.insert(n,r),Jy(t.remoteStore,new dr(wn(fh(n.path)),r,"TargetPurposeLimboResolution",wc.ce))}}async function Vo(t,e,n){const r=he(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((c,l)=>{o.push(r.pu(l,e,n).then((u=>{if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:n?.targetChanges.get(l.targetId)?.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){s.push(u);const f=vh.As(l.targetId,u);i.push(f)}})))})),await Promise.all(o),r.Pu.H_(s),await(async function(l,u){const f=he(l);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",(d=>U.forEach(u,(m=>U.forEach(m.Es,(g=>f.persistence.referenceDelegate.addReference(d,m.targetId,g))).next((()=>U.forEach(m.ds,(g=>f.persistence.referenceDelegate.removeReference(d,m.targetId,g)))))))))}catch(d){if(!ni(d))throw d;ee(Th,"Failed to update sequence numbers: "+d)}for(const d of u){const m=d.targetId;if(!d.fromCache){const g=f.Ms.get(m),S=g.snapshotVersion,P=g.withLastLimboFreeSnapshotVersion(S);f.Ms=f.Ms.insert(m,P)}}})(r.localStore,i))}async function OC(t,e){const n=he(t);if(!n.currentUser.isEqual(e)){ee(kh,"User change. New user:",e.toKey());const r=await Ky(n.localStore,e);n.currentUser=e,(function(i,o){i.mu.forEach((c=>{c.forEach((l=>{l.reject(new W(V.CANCELLED,o))}))})),i.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Vo(n,r.Ls)}}function MC(t,e){const n=he(t),r=n.Au.get(e);if(r&&r.hu)return Te().add(r.key);{let s=Te();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const c=n.Tu.get(o);s=s.unionWith(c.view.nu)}return s}}function dE(t){const e=he(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=lE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=MC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=xC.bind(null,e),e.Pu.H_=EC.bind(null,e.eventManager),e.Pu.yu=vC.bind(null,e.eventManager),e}function LC(t){const e=he(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=NC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=VC.bind(null,e),e}class Xa{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=xc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return jP(this.persistence,new FP,e.initialUser,this.serializer)}Cu(e){return new zy(Eh.mi,this.serializer)}Du(e){return new KP}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xa.provider={build:()=>new Xa};class FC extends Xa{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ae(this.persistence.referenceDelegate instanceof Ya,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new IP(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Mt.withCacheSize(this.cacheSizeBytes):Mt.DEFAULT;return new zy((r=>Ya.mi(r,n)),this.serializer)}}class Tu{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>nm(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=OC.bind(null,this.syncEngine),await gC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new yC})()}createDatastore(e){const n=xc(e.databaseInfo.databaseId),r=(function(i){return new ZP(i)})(e.databaseInfo);return(function(i,o,c,l){return new rC(i,o,c,l)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,s,i,o,c){return new iC(r,s,i,o,c)})(this.localStore,this.datastore,e.asyncQueue,(n=>nm(this.syncEngine,n,0)),(function(){return Yp.v()?new Yp:new QP})())}createSyncEngine(e,n){return(function(s,i,o,c,l,u,f){const d=new AC(s,i,o,c,l,u);return f&&(d.gu=!0),d})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=he(n);ee(hs,"RemoteStore shutting down."),r.Ea.add(5),await No(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Tu.provider={build:()=>new Tu};class pE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):qn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}class UC{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new W(V.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await(async function(s,i){const o=he(s),c={documents:i.map((d=>Qa(o.serializer,d)))},l=await o.Ho("BatchGetDocuments",o.serializer.databaseId,Ve.emptyPath(),c,i.length),u=new Map;l.forEach((d=>{const m=oP(o.serializer,d);u.set(m.key.toString(),m)}));const f=[];return i.forEach((d=>{const m=u.get(d.toString());Ae(!!m,55234,{key:d}),f.push(m)})),f})(this.datastore,e);return n.forEach((r=>this.recordVersion(r))),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Cc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((n=>{e.delete(n.key.toString())})),e.forEach(((n,r)=>{const s=te.fromPath(r);this.mutations.push(new Ny(s,this.precondition(s)))})),await(async function(r,s){const i=he(r),o={writes:s.map((c=>jy(i.serializer,c)))};await i.Go("Commit",i.serializer.databaseId,Ve.emptyPath(),o)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw ie(50498,{Gu:e.constructor.name});n=le.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new W(V.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(le.min())?gt.exists(!1):gt.updateTime(n):gt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(le.min()))throw new W(V.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return gt.updateTime(n)}return gt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class BC{constructor(e,n,r,s,i){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=s,this.deferred=i,this.zu=r.maxAttempts,this.M_=new wh(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new UC(this.datastore),n=this.Hu(e);n&&n.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((s=>{this.Yu(s)}))))})).catch((r=>{this.Yu(r)}))}))}Hu(e){try{const n=this.updateFunction(e);return!Co(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!Vy(n)}return!1}}const xr="FirestoreClient";class jC{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=It.UNAUTHENTICATED,this.clientId=ah.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,(async o=>{ee(xr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(ee(xr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new cn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ph(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function xl(t,e){t.asyncQueue.verifyOperationInProgress(),ee(xr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async s=>{r.isEqual(s)||(await Ky(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function sm(t,e){t.asyncQueue.verifyOperationInProgress();const n=await $C(t);ee(xr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>Xp(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,s)=>Xp(e.remoteStore,s))),t._onlineComponents=e}async function $C(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ee(xr,"Using user provided OfflineComponentProvider");try{await xl(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===V.FAILED_PRECONDITION||s.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;js("Error using user provided cache. Falling back to memory cache: "+n),await xl(t,new Xa)}}else ee(xr,"Using default OfflineComponentProvider"),await xl(t,new FC(void 0));return t._offlineComponents}async function Nh(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ee(xr,"Using user provided OnlineComponentProvider"),await sm(t,t._uninitializedComponentsProvider._online)):(ee(xr,"Using default OnlineComponentProvider"),await sm(t,new Tu))),t._onlineComponents}function qC(t){return Nh(t).then((e=>e.syncEngine))}function mE(t){return Nh(t).then((e=>e.datastore))}async function gE(t){const e=await Nh(t),n=e.eventManager;return n.onListen=bC.bind(null,e.syncEngine),n.onUnlisten=PC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=RC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=CC.bind(null,e.syncEngine),n}function HC(t,e,n={}){const r=new cn;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,c,l,u){const f=new pE({next:m=>{f.Nu(),o.enqueueAndForget((()=>sE(i,d)));const g=m.docs.has(c);!g&&m.fromCache?u.reject(new W(V.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&l&&l.source==="server"?u.reject(new W(V.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),d=new iE(fh(c.path),f,{includeMetadataChanges:!0,qa:!0});return rE(i,d)})(await gE(t),t.asyncQueue,e,n,r))),r.promise}function GC(t,e,n={}){const r=new cn;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,c,l,u){const f=new pE({next:m=>{f.Nu(),o.enqueueAndForget((()=>sE(i,d))),m.fromCache&&l.source==="server"?u.reject(new W(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),d=new iE(c,f,{includeMetadataChanges:!0,qa:!0});return rE(i,d)})(await gE(t),t.asyncQueue,e,n,r))),r.promise}function WC(t,e,n){const r=new cn;return t.asyncQueue.enqueueAndForget((async()=>{try{const s=await mE(t);r.resolve((async function(o,c,l){const u=he(o),{request:f,gt:d,parent:m}=uP(u.serializer,VS(c),l);u.connection.$o||delete f.parent;const g=(await u.Ho("RunAggregationQuery",u.serializer.databaseId,m,f,1)).filter((P=>!!P.result));Ae(g.length===1,64727);const S=g[0].result?.aggregateFields;return Object.keys(S).reduce(((P,x)=>(P[d[x]]=S[x],P)),{})})(s,e,n))}catch(s){r.reject(s)}})),r.promise}function _E(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const im=new Map;const yE="firestore.googleapis.com",om=!0;class am{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new W(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=yE,this.ssl=om}else this.host=e.host,this.ssl=e.ssl??om;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Wy;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<TP)throw new W(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}iS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_E(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new W(V.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new W(V.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new W(V.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Dc{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new am({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new W(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new W(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new am(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new QR;switch(r.type){case"firstParty":return new ZR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new W(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=im.get(n);r&&(ee("ComponentProvider","Removing Datastore"),im.delete(n),r.terminate())})(this),Promise.resolve()}}function zC(t,e,n,r={}){t=Kt(t,Dc);const s=Js(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;s&&(s_(`https://${c}`),i_("Firestore",!0)),i.host!==yE&&i.host!==c&&js("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:c,ssl:s,emulatorOptions:r};if(!os(l,o)&&(t._setSettings(l),r.mockUserToken)){let u,f;if(typeof r.mockUserToken=="string")u=r.mockUserToken,f=It.MOCK_USER;else{u=sA(r.mockUserToken,t._app?.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new W(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new It(d)}t._authCredentials=new YR(new X_(u,f))}}class zn{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new zn(this.firestore,e,this._query)}}class We{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Tr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new We(this.firestore,e,this._key)}toJSON(){return{type:We._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Po(n,We._jsonSchema))return new We(e,r||null,new te(Ve.fromString(n.referencePath)))}}We._jsonSchemaVersion="firestore/documentReference/1.0",We._jsonSchema={type:et("string",We._jsonSchemaVersion),referencePath:et("string")};class Tr extends zn{constructor(e,n,r){super(e,n,fh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new We(this.firestore,null,new te(e))}withConverter(e){return new Tr(this.firestore,e,this._path)}}function wu(t,e,...n){if(t=Ye(t),Z_("collection","path",e),t instanceof Dc){const r=Ve.fromString(e,...n);return Tp(r),new Tr(t,null,r)}{if(!(t instanceof We||t instanceof Tr))throw new W(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ve.fromString(e,...n));return Tp(r),new Tr(t.firestore,null,r)}}function fn(t,e,...n){if(t=Ye(t),arguments.length===1&&(e=ah.newId()),Z_("doc","path",e),t instanceof Dc){const r=Ve.fromString(e,...n);return vp(r),new We(t,null,new te(r))}{if(!(t instanceof We||t instanceof Tr))throw new W(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ve.fromString(e,...n));return vp(r),new We(t.firestore,t instanceof Tr?t.converter:null,new te(r))}}const cm="AsyncQueue";class lm{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new wh(this,"async_queue_retry"),this._c=()=>{const r=kl();r&&ee(cm,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=kl();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=kl();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new cn;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ni(e))throw e;ee(cm,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,qn("INTERNAL UNHANDLED ERROR: ",um(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Sh.createAndSchedule(this,e,n,r,(i=>this.hc(i)));return this.tc.push(s),s}uc(){this.nc&&ie(47125,{Pc:um(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function um(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Kn extends Dc{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new lm,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new lm(e),this._firestoreClient=void 0,await e}}}function KC(t,e){const n=typeof t=="object"?t:l_(),r=typeof t=="string"?t:Ha,s=Qu(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=nA("firestore");i&&zC(s,...i)}return s}function Do(t){if(t._terminated)throw new W(V.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||QC(t),t._firestoreClient}function QC(t){const e=t._freezeSettings(),n=(function(s,i,o,c){return new yS(s,i,o,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,_E(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new jC(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(s){const i=s?._online.build();return{_offline:s?._offline.build(i),_online:i}})(t._componentsProvider))}class YC{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class JC{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}class Ht{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ht(_t.fromBase64String(e))}catch(n){throw new W(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ht(_t.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ht._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Po(e,Ht._jsonSchema))return Ht.fromBase64String(e.bytes)}}Ht._jsonSchemaVersion="firestore/bytes/1.0",Ht._jsonSchema={type:et("string",Ht._jsonSchemaVersion),bytes:et("string")};class Oo{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new W(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Mo{constructor(e){this._methodName=e}}class In{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new W(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new W(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ve(this._lat,e._lat)||ve(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:In._jsonSchemaVersion}}static fromJSON(e){if(Po(e,In._jsonSchema))return new In(e.latitude,e.longitude)}}In._jsonSchemaVersion="firestore/geoPoint/1.0",In._jsonSchema={type:et("string",In._jsonSchemaVersion),latitude:et("number"),longitude:et("number")};class An{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:An._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Po(e,An._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new An(e.vectorValues);throw new W(V.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}An._jsonSchemaVersion="firestore/vectorValue/1.0",An._jsonSchema={type:et("string",An._jsonSchemaVersion),vectorValues:et("object")};const XC=/^__.*__$/;class ZC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Fr(e,this.data,this.fieldMask,n,this.fieldTransforms):new ko(e,this.data,n,this.fieldTransforms)}}class EE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Fr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function vE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ie(40011,{Ac:t})}}class Vh{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Vh({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Za(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(vE(this.Ac)&&XC.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class e1{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||xc(e)}Cc(e,n,r,s=!1){return new Vh({Ac:e,methodName:n,Dc:r,path:mt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function si(t){const e=t._freezeSettings(),n=xc(t._databaseId);return new e1(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Dh(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);Lh("Data must be an object, but it was:",o,r);const c=AE(r,o);let l,u;if(i.merge)l=new Wt(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const d of i.mergeFields){const m=Iu(e,d,n);if(!o.contains(m))throw new W(V.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);RE(f,m)||f.push(m)}l=new Wt(f),u=o.fieldTransforms.filter((d=>l.covers(d.field)))}else l=null,u=o.fieldTransforms;return new ZC(new Vt(c),l,u)}class Oc extends Mo{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Oc}}class Oh extends Mo{_toFieldTransform(e){return new Cy(e.path,new uo)}isEqual(e){return e instanceof Oh}}class Mh extends Mo{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new po(e.serializer,Ay(e.serializer,this.Fc));return new Cy(e.path,n)}isEqual(e){return e instanceof Mh&&this.Fc===e.Fc}}function TE(t,e,n,r){const s=t.Cc(1,e,n);Lh("Data must be an object, but it was:",s,r);const i=[],o=Vt.empty();Lr(r,((l,u)=>{const f=Fh(e,l,n);u=Ye(u);const d=s.yc(f);if(u instanceof Oc)i.push(f);else{const m=Lo(u,d);m!=null&&(i.push(f),o.set(f,m))}}));const c=new Wt(i);return new EE(o,c,s.fieldTransforms)}function wE(t,e,n,r,s,i){const o=t.Cc(1,e,n),c=[Iu(e,r,n)],l=[s];if(i.length%2!=0)throw new W(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)c.push(Iu(e,i[m])),l.push(i[m+1]);const u=[],f=Vt.empty();for(let m=c.length-1;m>=0;--m)if(!RE(u,c[m])){const g=c[m];let S=l[m];S=Ye(S);const P=o.yc(g);if(S instanceof Oc)u.push(g);else{const x=Lo(S,P);x!=null&&(u.push(g),f.set(g,x))}}const d=new Wt(u);return new EE(f,d,o.fieldTransforms)}function IE(t,e,n,r=!1){return Lo(n,t.Cc(r?4:3,e))}function Lo(t,e){if(bE(t=Ye(t)))return Lh("Unsupported field value:",e,t),AE(t,e);if(t instanceof Mo)return(function(r,s){if(!vE(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,s){const i=[];let o=0;for(const c of r){let l=Lo(c,s.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}})(t,e)}return(function(r,s){if((r=Ye(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Ay(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=je.fromDate(r);return{timestampValue:Ka(s.serializer,i)}}if(r instanceof je){const i=new je(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ka(s.serializer,i)}}if(r instanceof In)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ht)return{bytesValue:Ly(s.serializer,r._byteString)};if(r instanceof We){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:_h(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof An)return(function(o,c){return{mapValue:{fields:{[cy]:{stringValue:ly},[Ga]:{arrayValue:{values:o.toArray().map((u=>{if(typeof u!="number")throw c.Sc("VectorValues must only contain numeric values.");return ph(c.serializer,u)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${Tc(r)}`)})(t,e)}function AE(t,e){const n={};return ny(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Lr(t,((r,s)=>{const i=Lo(s,e.mc(r));i!=null&&(n[r]=i)})),{mapValue:{fields:n}}}function bE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof je||t instanceof In||t instanceof Ht||t instanceof We||t instanceof Mo||t instanceof An)}function Lh(t,e,n){if(!bE(n)||!ey(n)){const r=Tc(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Iu(t,e,n){if((e=Ye(e))instanceof Oo)return e._internalPath;if(typeof e=="string")return Fh(t,e);throw Za("Field path arguments must be of type string or ",t,!1,void 0,n)}const t1=new RegExp("[~\\*/\\[\\]]");function Fh(t,e,n){if(e.search(t1)>=0)throw Za(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Oo(...e.split("."))._internalPath}catch{throw Za(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Za(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new W(V.INVALID_ARGUMENT,c+t+l)}function RE(t,e){return t.some((n=>n.isEqual(e)))}class mo{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new We(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new n1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Mc("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class n1 extends mo{data(){return super.data()}}function Mc(t,e){return typeof e=="string"?Fh(t,e):e instanceof Oo?e._internalPath:e._delegate._internalPath}function r1(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new W(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Uh{}class Lc extends Uh{}function Ms(t,e,...n){let r=[];e instanceof Uh&&r.push(e),r=r.concat(n),(function(i){const o=i.filter((l=>l instanceof Bh)).length,c=i.filter((l=>l instanceof Fc)).length;if(o>1||o>0&&c>0)throw new W(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)t=s._apply(t);return t}class Fc extends Lc{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Fc(e,n,r)}_apply(e){const n=this._parse(e);return SE(e._query,n),new zn(e.firestore,e.converter,du(e._query,n))}_parse(e){const n=si(e.firestore);return(function(i,o,c,l,u,f,d){let m;if(u.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new W(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){dm(d,f);const S=[];for(const P of d)S.push(fm(l,i,P));m={arrayValue:{values:S}}}else m=fm(l,i,d)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||dm(d,f),m=IE(c,o,d,f==="in"||f==="not-in");return Ze.create(u,f,m)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function is(t,e,n){const r=e,s=Mc("where",t);return Fc._create(s,r,n)}class Bh extends Uh{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Bh(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:hn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(s,i){let o=s;const c=i.getFlattenedFilters();for(const l of c)SE(o,l),o=du(o,l)})(e._query,n),new zn(e.firestore,e.converter,du(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class jh extends Lc{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new jh(e,n)}_apply(e){const n=(function(s,i,o){if(s.startAt!==null)throw new W(V.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new W(V.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new lo(i,o)})(e._query,this._field,this._direction);return new zn(e.firestore,e.converter,(function(s,i){const o=s.explicitOrderBy.concat([i]);return new fs(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,n))}}function ec(t,e="asc"){const n=e,r=Mc("orderBy",t);return jh._create(r,n)}class $h extends Lc{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new $h(e,n,r)}_apply(e){return new zn(e.firestore,e.converter,za(e._query,this._limit,this._limitType))}}function hm(t){return oS("limit",t),$h._create("limit",t,"F")}class qh extends Lc{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new qh(e,n,r)}_apply(e){const n=i1(e,this.type,this._docOrFields,this._inclusive);return new zn(e.firestore,e.converter,(function(s,i){return new fs(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)})(e._query,n))}}function s1(...t){return qh._create("startAfter",t,!1)}function i1(t,e,n,r){if(n[0]=Ye(n[0]),n[0]instanceof mo)return(function(i,o,c,l,u){if(!l)throw new W(V.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const f=[];for(const d of Ds(i))if(d.field.isKeyField())f.push(Wa(o,l.key));else{const m=l.data.field(d.field);if(Ic(m))throw new W(V.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){const g=d.field.canonicalString();throw new W(V.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${g}' (used as the orderBy) does not exist.`)}f.push(m)}return new Gs(f,u)})(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=si(t.firestore);return(function(o,c,l,u,f,d){const m=o.explicitOrderBy;if(f.length>m.length)throw new W(V.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const g=[];for(let S=0;S<f.length;S++){const P=f[S];if(m[S].field.isKeyField()){if(typeof P!="string")throw new W(V.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof P}`);if(!dh(o)&&P.indexOf("/")!==-1)throw new W(V.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${P}' contains a slash.`);const x=o.path.child(Ve.fromString(P));if(!te.isDocumentKey(x))throw new W(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${x}' is not because it contains an odd number of segments.`);const O=new te(x);g.push(Wa(c,O))}else{const x=IE(l,u,P);g.push(x)}}return new Gs(g,d)})(t._query,t.firestore._databaseId,s,e,n,r)}}function fm(t,e,n){if(typeof(n=Ye(n))=="string"){if(n==="")throw new W(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!dh(e)&&n.indexOf("/")!==-1)throw new W(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ve.fromString(n));if(!te.isDocumentKey(r))throw new W(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Wa(t,new te(r))}if(n instanceof We)return Wa(t,n._key);throw new W(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Tc(n)}.`)}function dm(t,e){if(!Array.isArray(t)||t.length===0)throw new W(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function SE(t,e){const n=(function(s,i){for(const o of s)for(const c of o.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new W(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new W(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class PE{convertValue(e,n="none"){switch(Cr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ke(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Pr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ie(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Lr(e,((s,i)=>{r[s]=this.convertValue(i,n)})),r}convertVectorValue(e){const n=e.fields?.[Ga].arrayValue?.values?.map((r=>Ke(r.doubleValue)));return new An(n)}convertGeoPoint(e){return new In(Ke(e.latitude),Ke(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Ac(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(oo(e));default:return null}}convertTimestamp(e){const n=Sr(e);return new je(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ve.fromString(e);Ae(Gy(r),9688,{name:e});const s=new ao(r.get(1),r.get(3)),i=new te(r.popFirst(5));return s.isEqual(n)||qn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}function Hh(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class o1 extends PE{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ht(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new We(this.firestore,null,n)}}function a1(){return new YC("count")}class Rs{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wr extends mo{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new va(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Mc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new W(V.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=wr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}wr._jsonSchemaVersion="firestore/documentSnapshot/1.0",wr._jsonSchema={type:et("string",wr._jsonSchemaVersion),bundleSource:et("string","DocumentSnapshot"),bundleName:et("string"),bundle:et("string")};class va extends wr{data(e={}){return super.data(e)}}class Ls{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Rs(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new va(this._firestore,this._userDataWriter,r.key,r,new Rs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new W(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map((c=>{const l=new va(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Rs(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}}))}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((c=>i||c.type!==3)).map((c=>{const l=new va(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Rs(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,f=-1;return c.type!==0&&(u=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:c1(c.type),doc:l,oldIndex:u,newIndex:f}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new W(V.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ls._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ah.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach((i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function c1(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ie(61501,{type:t})}}function Uc(t){t=Kt(t,We);const e=Kt(t.firestore,Kn);return HC(Do(e),t._key).then((n=>h1(e,t,n)))}Ls._jsonSchemaVersion="firestore/querySnapshot/1.0",Ls._jsonSchema={type:et("string",Ls._jsonSchemaVersion),bundleSource:et("string","QuerySnapshot"),bundleName:et("string"),bundle:et("string")};class Bc extends PE{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ht(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new We(this.firestore,null,n)}}function jc(t){t=Kt(t,zn);const e=Kt(t.firestore,Kn),n=Do(e),r=new Bc(e);return r1(t._query),GC(n,t._query).then((s=>new Ls(e,r,t,s)))}function CE(t,e,n){t=Kt(t,We);const r=Kt(t.firestore,Kn),s=Hh(t.converter,e,n);return $c(r,[Dh(si(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,gt.none())])}function Gh(t,e,n,...r){t=Kt(t,We);const s=Kt(t.firestore,Kn),i=si(s);let o;return o=typeof(e=Ye(e))=="string"||e instanceof Oo?wE(i,"updateDoc",t._key,e,n,r):TE(i,"updateDoc",t._key,e),$c(s,[o.toMutation(t._key,gt.exists(!0))])}function l1(t){return $c(Kt(t.firestore,Kn),[new Cc(t._key,gt.none())])}function u1(t,e){const n=Kt(t.firestore,Kn),r=fn(t),s=Hh(t.converter,e);return $c(n,[Dh(si(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,gt.exists(!1))]).then((()=>r))}function $c(t,e){return(function(r,s){const i=new cn;return r.asyncQueue.enqueueAndForget((async()=>kC(await qC(r),s,i))),i.promise})(Do(t),e)}function h1(t,e,n){const r=n.docs.get(e._key),s=new Bc(t);return new wr(t,s,e._key,r,new Rs(n.hasPendingWrites,n.fromCache),e.converter)}function pm(t){return f1(t,{count:a1()})}function f1(t,e){const n=Kt(t.firestore,Kn),r=Do(n),s=gS(e,((i,o)=>new QS(o,i.aggregateType,i._internalFieldPath)));return WC(r,t._query,s).then((i=>(function(c,l,u){const f=new Bc(c);return new JC(l,f,u)})(n,t,i)))}const d1={maxAttempts:5};function xi(t,e){if((t=Ye(t)).firestore!==e)throw new W(V.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}class p1{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=si(e)}get(e){const n=xi(e,this._firestore),r=new o1(this._firestore);return this._transaction.lookup([n._key]).then((s=>{if(!s||s.length!==1)return ie(24041);const i=s[0];if(i.isFoundDocument())return new mo(this._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new mo(this._firestore,r,n._key,null,n.converter);throw ie(18433,{doc:i})}))}set(e,n,r){const s=xi(e,this._firestore),i=Hh(s.converter,n,r),o=Dh(this._dataReader,"Transaction.set",s._key,i,s.converter!==null,r);return this._transaction.set(s._key,o),this}update(e,n,r,...s){const i=xi(e,this._firestore);let o;return o=typeof(n=Ye(n))=="string"||n instanceof Oo?wE(this._dataReader,"Transaction.update",i._key,n,r,s):TE(this._dataReader,"Transaction.update",i._key,n),this._transaction.update(i._key,o),this}delete(e){const n=xi(e,this._firestore);return this._transaction.delete(n._key),this}}class m1 extends p1{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=xi(e,this._firestore),r=new Bc(this._firestore);return super.get(e).then((s=>new wr(this._firestore,r,n._key,s._document,new Rs(!1,!1),n.converter)))}}function g1(t,e,n){t=Kt(t,Kn);const r={...d1,...n};return(function(i){if(i.maxAttempts<1)throw new W(V.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(i,o,c){const l=new cn;return i.asyncQueue.enqueueAndForget((async()=>{const u=await mE(i);new BC(i.asyncQueue,u,c,o,l).ju()})),l.promise})(Do(t),(s=>e(new m1(t,s))),r)}function Ks(){return new Oh("serverTimestamp")}function _1(t){return new Mh("increment",t)}(function(e,n=!0){(function(s){ei=s})(Xs),Bs(new as("firestore",((r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),c=new Kn(new JR(r.getProvider("auth-internal")),new eS(o,r.getProvider("app-check-internal")),(function(u,f){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new W(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ao(u.options.projectId,f)})(o,s),o);return i={useFetchStreams:n,...i},c._setSettings(i),c}),"PUBLIC").setMultipleInstances(!0)),Er(gp,_p,e),Er(gp,_p,"esm2020")})();const y1={apiKey:"AIzaSyBxWCMO2jovFoO2p0bRtjObLG6Wm_BUh3A",authDomain:"vue-blog-501c8.firebaseapp.com",projectId:"vue-blog-501c8",storageBucket:"vue-blog-501c8.firebasestorage.app",messagingSenderId:"453986197221",appId:"1:453986197221:web:822f170abbea04e29c7e0c"},kE=c_(y1),Ai=GR(kE),Lt=KC(kE),mm="salcho5678@gmail.com";async function Nl(t){if(!t.email)return;const e=fn(Lt,"users",t.uid),n=await Uc(e);if(n.exists()){const r=n.data();t.email===mm&&r.role!=="admin"&&await Gh(e,{role:"admin"})}else{const r=t.email===mm?"admin":"user",s={uid:t.uid,email:t.email,role:r,createdAt:Ks()},i={};t.displayName&&(i.displayName=t.displayName),t.photoURL&&(i.photoURL=t.photoURL),await CE(e,{...s,...i})}}async function Vl(t){const e=fn(Lt,"users",t),n=await Uc(e);return n.exists()?n.data():null}const qc=Fg("auth",{state:()=>({user:null,profile:null,initialized:!1,_initPromise:null}),getters:{isLoggedIn:t=>!!t.user,canWrite:t=>t.profile?.role==="admin"||t.profile?.role==="master"},actions:{async init(){if(!this.initialized)return this._initPromise?this._initPromise:(this._initPromise=new Promise(t=>{V0(Ai,async e=>{this.user=e,e?(await Nl({uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL}),this.profile=await Vl(e.uid)):this.profile=null,this.initialized=!0,t()})}),this._initPromise)},async signup(t,e){const n=await C0(Ai,t,e);this.user=n.user},async login(t,e){const n=await k0(Ai,t,e);this.user=n?.user,await Nl({uid:n.user.uid,email:n.user.email,displayName:n.user.displayName,photoURL:n.user.photoURL}),this.profile=await Vl(n.user.uid),this.initialized=!0},async loginWithGoogle(){const t=new On,e=await eR(Ai,t);this.user=e.user,await Nl({uid:e.user.uid,email:e.user.email,displayName:e.user.displayName,photoURL:e.user.photoURL}),this.profile=await Vl(e.user.uid),this.initialized=!0},async logout(){await D0(Ai),this.user=null,this.profile=null,this.initialized=!1,this._initPromise=null}}}),E1={class:"w-full max-w-sm rounded-2xl border border-slate-200 bg-white px-4 py-3 shadow-xl dark:bg-slate-900 dark:border-slate-700"},v1={class:"flex items-start gap-3"},T1={class:"flex-1 space-y-1"},w1={class:"text-xs font-semibold text-slate-900 dark:text-slate-50"},I1={class:"text-[11px] leading-relaxed text-slate-600 dark:text-slate-300"},A1={class:"mt-3 flex justify-end gap-2"},b1=Vr({__name:"BaseModal",props:{open:{type:Boolean},title:{},message:{},type:{},variant:{}},emits:["close","confirm"],setup(t,{emit:e}){const n=t,r=e,s=Xe(()=>{switch(n.type){case"success":return"";case"info":return"";default:return"!"}}),i=Xe(()=>{switch(n.type){case"success":return"bg-white-500 text-white";case"info":return"bg-white-500 text-white";default:return"bg-red-500 text-white"}});return(o,c)=>(ge(),Zr(Jv,{to:"body"},[t.open?(ge(),Pe("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",onClick:c[2]||(c[2]=Cw(l=>r("close"),["self"]))},[Q("div",E1,[Q("div",v1,[Q("div",{class:Ys(["mt-0.5 flex h-7 w-7 items-center justify-center rounded-full text-xs font-bold",i.value])},Le(s.value),3),Q("div",T1,[Q("h2",w1,Le(t.title||""),1),Q("p",I1,Le(t.message),1)])]),Q("div",A1,[t.variant==="confirm"?(ge(),Pe("button",{key:0,type:"button",class:"px-3 py-1.5 rounded-md text-[11px] border border-slate-300 dark:border-slate-600 text-slate-600 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",onClick:c[0]||(c[0]=l=>r("close"))},"  ")):Jr("",!0),Q("button",{type:"button",class:"px-3 py-1.5 rounded-md text-[11px] font-semibold bg-slate-900 text-white hover:bg-slate-800 dark:bg-yellow-400 dark:text-slate-900 dark:hover:bg-yellow-300 transition-colors",onClick:c[1]||(c[1]=l=>t.variant==="confirm"?r("confirm"):r("close"))},Le(t.variant==="confirm"?"":""),1)])])])):Jr("",!0)]))}}),xE=Fg("modal",{state:()=>({open:!1,title:"",message:"",type:"info",variant:"alert",onConfirm:null}),actions:{alert(t){this.open=!0,this.title=t.title??"",this.message=t.message,this.type=t.type??"info",this.variant="alert",this.onConfirm=null},confirm(t){this.open=!0,this.title=t.title??"",this.message=t.message,this.type=t.type??"error",this.variant="confirm",this.onConfirm=t.onConfirm??null},close(){this.open=!1,this.title="",this.message="",this.onConfirm=null},accept(){const t=this.onConfirm;this.close(),t&&t()}}}),R1=Vr({__name:"GlobalModal",setup(t){const e=xE(),n=()=>{e.close()},r=()=>{e.accept()};return(s,i)=>(ge(),Zr(b1,{open:de(e).open,title:de(e).title,message:de(e).message,type:de(e).type,variant:de(e).variant,onClose:n,onConfirm:r},null,8,["open","title","message","type","variant"]))}}),S1={class:"hidden md:flex w-64 flex-col gap-2 rounded-2xl border border-slate-200 dark:border-slate-800 bg-white/95 dark:bg-slate-950/95 p-3 text-[11px] text-slate-600 dark:text-slate-400 sticky top-20 self-start max-h-[calc(100vh-6rem)]"},P1={class:"flex items-center justify-between mb-1"},C1={key:0,class:"pl-1 text-[10px] text-slate-500"},k1={key:1,class:"pl-1 text-[10px] text-red-400"},x1=["onClick"],N1={class:"flex items-center gap-1"},V1={class:"inline-flex h-3 w-3 items-center justify-center rounded-sm border border-slate-400/60 text-[9px] text-slate-500"},D1={class:"text-[9px] text-slate-400"},O1={class:"pl-4 space-y-0.5"},M1=["onClick"],L1={class:"truncate"},F1={class:"text-[9px] text-slate-400"},U1={class:"mt-3 pt-2 border-t border-slate-200 dark:border-slate-800 text-[10px] text-slate-500 dark:text-slate-600"},B1={class:"font-semibold text-black dark:text-yellow-400"},j1={class:"ml-1 text-[11px] text-slate-500 dark:text-slate-300"},$1=Vr({__name:"ExplorerSidebar",props:{posts:{},activePostId:{},loading:{type:Boolean},error:{}},emits:["open-post"],setup(t,{emit:e}){const n=t,r=e,s=["Java","TypeScript","JavaScript","React","Vue","","Other"];qc();const i=Xe(()=>{const m=new Map;for(const S of n.posts){const P=S.category||"Other";m.has(P)||m.set(P,[]),m.get(P).push(S)}const g=[];for(const S of s){const P=m.get(S);P&&P.length&&(g.push({category:S,posts:P}),m.delete(S))}for(const[S,P]of m.entries())g.push({category:S,posts:P});return g}),o=Dt({}),c=Xe(()=>{const m=i.value;return m.length?m.every(g=>o.value[g.category]):!1}),l=()=>{const m=!c.value;for(const g of i.value)o.value[g.category]=m};gr(i,m=>{const g={};for(const S of m)g[S.category]=!1;o.value=g},{immediate:!0});const u=Dt(null),f=Dt({});function d(m,g){f.value[m]=g}return gr(()=>n.activePostId,async m=>{if(!m)return;const g=i.value;let S=null;for(const O of g)if(O.posts.some(F=>String(F.id)===m)){S=O.category;break}if(S){const O={};for(const F of g)O[F.category]=F.category===S;o.value=O}await Eo();const P=f.value[m],x=u.value;if(P&&x){const O=P.getBoundingClientRect(),F=x.getBoundingClientRect(),$=O.top-F.top;($<0||$>x.clientHeight-40)&&P.scrollIntoView({block:"nearest",behavior:"smooth"})}},{immediate:!0}),(m,g)=>(ge(),Pe("aside",S1,[Q("div",P1,[g[0]||(g[0]=Q("span",{class:"text-[10px] uppercase tracking-[0.14em]"},"explorer",-1)),Q("button",{type:"button",class:"text-[10px] px-1.5 py-0.5 rounded text-slate-500 hover:text-slate-800 dark:text-slate-400 dark:hover:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-900 transition-colors",onClick:l},Le(c.value?" ":" "),1)]),g[3]||(g[3]=Q("p",{class:"text-[10px] mb-1 text-slate-400 dark:text-slate-500"},"  ",-1)),t.loading?(ge(),Pe("div",C1," loading posts... ")):t.error?(ge(),Pe("div",k1,Le(t.error),1)):(ge(),Pe("div",{key:2,ref_key:"containerRef",ref:u,class:"pl-1 space-y-1 overflow-y-auto scroll-theme flex-1"},[(ge(!0),Pe(pt,null,Sa(i.value,S=>(ge(),Pe("div",{key:S.category,class:"space-y-0.5"},[Q("button",{type:"button",class:"flex w-full items-center justify-between px-1 py-1 text-[10px] font-medium text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200",onClick:P=>o.value[S.category]=!o.value[S.category]},[Q("span",N1,[Q("span",V1,Le(o.value[S.category]?"":"+"),1),Q("span",null,Le(S.category),1)]),Q("span",D1,Le(S.posts.length),1)],8,x1),De(ow,{name:"fade"},{default:$t(()=>[Qv(Q("div",O1,[(ge(!0),Pe(pt,null,Sa(S.posts,P=>(ge(),Pe("button",{key:P.id,ref_for:!0,ref:x=>d(String(P.id),x),type:"button",onClick:x=>r("open-post",P),class:Ys(["flex w-full items-center justify-between gap-2 rounded-md px-2 py-1.5 text-left transition-colors",t.activePostId===String(P.id)?"bg-slate-200 text-black dark:bg-slate-800 dark:text-yellow-400":"hover:bg-slate-100 hover:text-black dark:hover:bg-slate-900 dark:hover:text-yellow-300"])},[Q("span",L1,Le(P.title||"untitled.md"),1),Q("span",F1,Le(P.views??0)+"v",1)],10,M1))),128))],512),[[fw,o.value[S.category]]])]),_:2},1024)]))),128))],512)),Q("div",U1,[Q("p",null,[g[1]||(g[1]=ht(" auth: ",-1)),Q("span",B1,[m.$auth?.user?(ge(),Pe(pt,{key:0},[ht(Le(m.$auth.user.email)+" ",1),Q("span",j1," ("+Le(m.$auth.profile?.role||"user")+") ",1)],64)):(ge(),Pe(pt,{key:1},[ht(" guest ")],64))])]),g[2]||(g[2]=Q("p",null,[ht("env: "),Q("span",null,"firebase")],-1))])]))}}),NE=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},q1=NE($1,[["__scopeId","data-v-51911c25"]]),H1="/logo.png",G1={class:"sticky top-0 z-40 border-b border-slate-200 dark:border-slate-800 bg-white/90 dark:bg-slate-950/95 backdrop-blur-xl"},W1={class:"mx-auto max-w-7xl px-4 py-3 flex items-center justify-between gap-3"},z1={class:"flex items-center gap-3"},K1={class:"hidden md:flex items-center gap-2 text-[12px] md:text-[13px]"},Q1={class:"flex items-center gap-2"},Y1={key:0},J1={key:1},X1={key:0,class:"hidden md:flex items-center gap-2 text-[11px] md:text-[12px]"},Z1={class:"max-w-[160px] truncate rounded bg-slate-100 dark:bg-slate-900 px-2 py-1 border border-slate-300 dark:border-slate-700 text-slate-700 dark:text-slate-300"},ek={key:1,class:"hidden md:flex items-center gap-2 text-[11px] md:text-[12px]"},tk={key:0},nk={key:1},rk={key:0,class:"md:hidden border-t border-slate-200 dark:border-slate-800 bg-white/98 dark:bg-slate-950/98"},sk={class:"mx-auto max-w-7xl px-4 py-2 flex flex-col gap-1 text-[12px]"},ik={key:2,class:"flex items-center justify-between px-2 pt-2 border-t border-slate-200 dark:border-slate-800 mt-2"},ok={class:"text-slate-500 text-[11px] truncate"},ak={key:3,class:"flex gap-2 px-2 pt-2 border-t border-slate-200 dark:border-slate-800 mt-2"},ck=Vr({__name:"Header",props:{isDark:{type:Boolean},isLoggedIn:{type:Boolean},userEmail:{},showMobileMenu:{type:Boolean}},emits:["toggle-theme","logout","toggle-mobile-menu"],setup(t){return(e,n)=>(ge(),Pe("header",G1,[Q("div",W1,[Q("div",z1,[De(de(Yt),{to:{name:"home"},class:"flex items-center gap-2"},{default:$t(()=>[...n[9]||(n[9]=[Q("img",{src:H1,alt:"SALCHO",class:"h-8 w-auto object-contain dark:invert dark:brightness-200"},null,-1)])]),_:1}),Q("nav",K1,[De(de(Yt),{to:{name:"home"},class:"rounded-t-md px-3 py-1.5 border border-transparent hover:bg-slate-100 dark:hover:bg-slate-900/70 hover:text-black dark:hover:text-yellow-400 transition-colors","active-class":"bg-slate-200 dark:bg-slate-900 text-black dark:text-yellow-400"},{default:$t(()=>[...n[10]||(n[10]=[ht("  ",-1)])]),_:1}),e.$auth.profile?.role==="master"||e.$auth.profile?.role==="admin"?(ge(),Zr(de(Yt),{key:0,to:{name:"new-post"},class:"rounded-t-md px-3 py-1.5 hover:bg-slate-100 dark:hover:bg-slate-900/70 hover:text-black dark:hover:text-yellow-400 transition-colors","active-class":"bg-slate-200 dark:bg-slate-900 text-black dark:text-yellow-400"},{default:$t(()=>[...n[11]||(n[11]=[ht("   ",-1)])]),_:1})):Jr("",!0),e.$auth.profile?.role==="master"?(ge(),Zr(de(Yt),{key:1,to:{name:"chat"},class:"rounded-t-md px-3 py-1.5 hover:bg-slate-100 dark:hover:bg-slate-900/70 hover:text-black dark:hover:text-yellow-400 transition-colors","active-class":"bg-slate-200 dark:bg-slate-900 text-black dark:text-yellow-400"},{default:$t(()=>[...n[12]||(n[12]=[ht("  ",-1)])]),_:1})):Jr("",!0)])]),Q("div",Q1,[Q("button",{onClick:n[0]||(n[0]=r=>e.$emit("toggle-theme")),class:"flex h-8 w-8 items-center justify-center rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-950 text-[15px] hover:border-black hover:text-black dark:hover:border-yellow-400 dark:hover:text-yellow-400 transition-colors"},[t.isDark?(ge(),Pe("span",Y1,"")):(ge(),Pe("span",J1,""))]),t.isLoggedIn?(ge(),Pe("div",X1,[Q("span",Z1,Le(t.userEmail),1),Q("button",{onClick:n[1]||(n[1]=r=>e.$emit("logout")),class:"rounded px-3 py-1.5 text-[11px] font-semibold bg-black text-white hover:bg-slate-800 dark:bg-yellow-400 dark:text-black dark:hover:bg-yellow-300 transition-colors"}," logout ")])):(ge(),Pe("div",ek,[De(de(Yt),{to:{name:"login"},class:"rounded px-3 py-1.5 border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-950 hover:border-black hover:text-black dark:hover:border-yellow-400 dark:hover:text-yellow-400 transition-colors"},{default:$t(()=>[...n[13]||(n[13]=[ht(" login ",-1)])]),_:1}),De(de(Yt),{to:{name:"signup"},class:"rounded px-3 py-1.5 font-semibold bg-black text-white hover:bg-slate-800 dark:bg-yellow-400 dark:text-black dark:hover:bg-yellow-300 transition-colors"},{default:$t(()=>[...n[14]||(n[14]=[ht(" sign up ",-1)])]),_:1})])),Q("button",{class:"md:hidden flex h-8 w-8 items-center justify-center rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-950 text-[16px]",onClick:n[2]||(n[2]=r=>e.$emit("toggle-mobile-menu"))},[t.showMobileMenu?(ge(),Pe("span",tk,"")):(ge(),Pe("span",nk,""))])])]),t.showMobileMenu?(ge(),Pe("div",rk,[Q("div",sk,[De(de(Yt),{to:{name:"home"},class:"px-2 py-1 rounded-md hover:bg-slate-100 dark:hover:bg-slate-900 transition-colors",onClick:n[3]||(n[3]=r=>e.$emit("toggle-mobile-menu"))},{default:$t(()=>[...n[15]||(n[15]=[ht("  ",-1)])]),_:1}),e.$auth.profile?.role==="master"||e.$auth.profile?.role==="admin"?(ge(),Zr(de(Yt),{key:0,to:{name:"new-post"},class:"px-2 py-1 rounded-md hover:bg-slate-100 dark:hover:bg-slate-900 transition-colors",onClick:n[4]||(n[4]=r=>e.$emit("toggle-mobile-menu"))},{default:$t(()=>[...n[16]||(n[16]=[ht("   ",-1)])]),_:1})):Jr("",!0),e.$auth.profile?.role==="master"?(ge(),Zr(de(Yt),{key:1,to:{name:"chat"},class:"px-2 py-1 rounded-md hover:bg-slate-100 dark:hover:bg-slate-900 transition-colors",onClick:n[5]||(n[5]=r=>e.$emit("toggle-mobile-menu"))},{default:$t(()=>[...n[17]||(n[17]=[ht("  ",-1)])]),_:1})):Jr("",!0),t.isLoggedIn?(ge(),Pe("div",ik,[Q("span",ok,Le(t.userEmail),1),Q("button",{onClick:n[6]||(n[6]=r=>{e.$emit("logout"),e.$emit("toggle-mobile-menu")}),class:"text-[11px] px-2 py-1 rounded bg-black text-white dark:bg-yellow-400 dark:text-black"}," logout ")])):(ge(),Pe("div",ak,[De(de(Yt),{to:{name:"login"},class:"flex-1 text-center text-[11px] px-2 py-1 rounded border border-slate-300 dark:border-slate-700 hover:border-black dark:hover:border-yellow-400",onClick:n[7]||(n[7]=r=>e.$emit("toggle-mobile-menu"))},{default:$t(()=>[...n[18]||(n[18]=[ht(" login ",-1)])]),_:1}),De(de(Yt),{to:{name:"signup"},class:"flex-1 text-center text-[11px] px-2 py-1 rounded bg-black text-white dark:bg-yellow-400 dark:text-black",onClick:n[8]||(n[8]=r=>e.$emit("toggle-mobile-menu"))},{default:$t(()=>[...n[19]||(n[19]=[ht(" sign up ",-1)])]),_:1})]))])])):Jr("",!0)]))}}),lk={},uk={class:"mt-2 border-t border-slate-200 dark:border-slate-800 bg-white/95 dark:bg-slate-950/95 text-[10px] text-slate-500 dark:text-slate-600"};function hk(t,e){return ge(),Pe("footer",uk,[...e[0]||(e[0]=[Q("div",{class:"mx-auto flex max-w-6xl items-center justify-between px-4 py-2 gap-4"},[Q("div",{class:"flex items-center gap-2"},[Q("span",{class:"h-1.5 w-1.5 rounded-full bg-black dark:bg-yellow-400"}),Q("span",null,"connected: salcho-blog")]),Q("div",{class:"flex items-center gap-3"},[Q("span",null,"Ln 42, Col 7"),Q("span",null,"UTF-8"),Q("span",null,"Spaces: 2"),Q("span",null,"TS")])],-1)])])}const fk=NE(lk,[["render",hk]]),dk={class:"hidden 2xl:block w-64 shrink-0 sticky top-20 self-start max-h-[calc(100vh-6rem)]"},pk={class:"rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-950 p-3 text-[11px] overflow-y-auto"},mk={class:"mb-2"},gk={class:"text-2xl font-semibold"},_k={class:"text-[10px] text-slate-400"},yk={class:"mt-3 border-t border-slate-200 dark:border-slate-800 pt-2"},Ek={class:"space-y-1"},vk=["onClick"],Tk={class:"truncate max-w-[120px]"},wk={class:"text-slate-400"},Ik=Vr({__name:"TodayOverviewPanel",props:{todayVisitors:{},yesterdayVisitors:{},topTodayPosts:{}},emits:["open-post"],setup(t,{emit:e}){const n=t,r=Xe(()=>n.todayVisitors-n.yesterdayVisitors),s=e;return(i,o)=>(ge(),Pe("aside",dk,[Q("div",pk,[o[2]||(o[2]=Q("p",{class:"text-[10px] uppercase tracking-[0.14em] mb-2"}," today overview ",-1)),Q("div",mk,[o[0]||(o[0]=Q("p",{class:"text-[10px] text-slate-500"}," ",-1)),Q("p",gk,Le(t.todayVisitors),1),Q("p",_k,[ht("  "+Le(t.yesterdayVisitors)+" ",1),Q("span",{class:Ys(r.value>=0?"text-emerald-500":"text-red-400")}," ("+Le(r.value>=0?"+":"")+Le(r.value)+") ",3)])]),Q("div",yk,[o[1]||(o[1]=Q("p",{class:"text-[10px] text-slate-500 mb-1"},"Most View",-1)),Q("ul",Ek,[(ge(!0),Pe(pt,null,Sa(t.topTodayPosts,c=>(ge(),Pe("li",{key:c.id},[Q("button",{type:"button",class:"flex w-full justify-between text-[10px] rounded px-1.5 py-1 text-left hover:bg-slate-100 hover:text-black dark:hover:bg-slate-900 dark:hover:text-yellow-300 transition-colors",onClick:l=>s("open-post",c)},[Q("span",Tk,Le(c.title||"untitled.md"),1),Q("span",wk,Le(c.views??0)+"v",1)],8,vk)]))),128))])])])]))}});function Ak(){return new Date().toISOString().slice(0,10)}function bk(){const t="salcho_visitor_id";let e=localStorage.getItem(t);return e||(e=crypto.randomUUID(),localStorage.setItem(t,e)),e}async function Rk(){const t=bk(),e=Ak(),n=fn(Lt,"dailyVisitors",e,"visitors",t);await CE(n,{lastVisitAt:Ks(),lastPath:"/"},{merge:!0})}function Sk(){const t=Dt(!0),e=()=>{const r=document.documentElement;t.value?(r.classList.add("dark"),localStorage.setItem("theme","dark")):(r.classList.remove("dark"),localStorage.setItem("theme","light"))},n=()=>{t.value=!t.value};return vo(()=>{const r=localStorage.getItem("theme");r==="dark"?t.value=!0:r==="light"&&(t.value=!1),e()}),gr(t,e),{isDark:t,toggleTheme:n}}const Qs=wu(Lt,"posts");async function ax(t){return(await u1(Qs,{title:t.title,content:t.content,summary:t.summary??"",thumbnailUrl:t.thumbnailUrl??null,category:t.category,tags:t.tags??[],authorId:t.authorId,authorName:t.authorName??"user",views:0,likes:0,isPublished:t.isPublished??!0,createdAt:Ks(),updatedAt:Ks()})).id}async function cx(t,e){const n=fn(Lt,"posts",t);await Gh(n,{...e,updatedAt:Ks()})}async function Pk(){const t=Ms(Qs,is("isPublished","==",!0),ec("createdAt","desc"));return(await jc(t)).docs.map(n=>({id:n.id,...n.data()}))}async function lx(t){const e=fn(Lt,"posts",t),n=await Uc(e);return n.exists()?{id:n.id,...n.data()}:null}async function Ck(t){await l1(fn(Lt,"posts",t))}const ux=Ck;async function hx(t){const e=fn(Lt,"posts",t);await Gh(e,{views:_1(1)})}async function fx(t,e){if(!t||!e)return!1;const n=fn(Lt,"posts",t,"likes",e);return(await Uc(n)).exists()}async function dx(t,e){if(!t||!e)throw new Error("invalid postId or userId");const n=fn(Lt,"posts",t),r=fn(Lt,"posts",t,"likes",e);return g1(Lt,async s=>{const i=await s.get(n);if(!i.exists())throw new Error("Post not found");const o=i.data(),c=Number(o.likes||0);if((await s.get(r)).exists()){s.delete(r);const u=Math.max(c-1,0);return s.update(n,{likes:u}),{liked:!1,likes:u}}else{s.set(r,{createdAt:Ks()});const u=c+1;return s.update(n,{likes:u}),{liked:!0,likes:u}}})}async function px(t){const e=Ms(Qs,is("isPublished","==",!0),is("tags","array-contains",t),ec("createdAt","desc"));return(await jc(e)).docs.map(r=>({id:r.id,...r.data()}))}async function mx(){const t=Ms(Qs,is("isPublished","==",!0)),e=await jc(t),n=new Map;return e.forEach(r=>{(r.data().tags||[]).forEach(i=>n.set(i,(n.get(i)??0)+1))}),[...n.entries()].map(([r,s])=>({name:r,count:s})).sort((r,s)=>s.count-r.count)}async function gx(t){const e=t?.limit??10;let n=Ms(Qs,is("isPublished","==",!0),ec("createdAt","desc"),hm(e));t?.tag&&(n=Ms(Qs,is("isPublished","==",!0),is("tags","array-contains",t.tag),ec("createdAt","desc"),hm(e))),t?.cursor&&(n=Ms(n,s1(t.cursor)));const r=await jc(n),s=r.docs.map(c=>({id:c.id,...c.data()})),i=r.docs.length?r.docs[r.docs.length-1]:null,o=r.docs.length<e;return{items:s,nextCursor:i,isEnd:o}}function kk({router:t,route:e}){const n=Dt([]),r=Dt(!1),s=Dt(""),i=async()=>{r.value=!0;try{n.value=await Pk(),s.value=""}catch(d){s.value=d?.message||"   ."}finally{r.value=!1}},o=()=>{i()};vo(async()=>{await i(),window.addEventListener("posts-updated",o)}),Fu(()=>{window.removeEventListener("posts-updated",o)});const c=Xe(()=>e.name==="post-detail"&&typeof e.params.id=="string"?e.params.id:null),l=Xe(()=>{if(e.name==="post-detail"&&typeof e.params.id=="string"){const d=n.value.find(m=>String(m.id)===e.params.id);if(d){const m=d.createdAt?.toDate?.().toLocaleDateString?.("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit"})||"";return{title:d.title||"untitled.md",author:d.authorName||"",category:d.category||"other",createdAt:m}}}return null});return{posts:n,loadingPosts:r,errorMsg:s,refreshPosts:i,activePostId:c,activePostMeta:l,openPost:d=>{d?.id&&t.push({name:"post-detail",params:{id:String(d.id)}})},handleMobileSelect:d=>{const g=d.target.value;if(!g){t.push({name:"home"});return}t.push({name:"post-detail",params:{id:g}})}}}function gm(t=0){const e=new Date;return e.setDate(e.getDate()+t),e.toISOString().slice(0,10)}function xk(){const t=Dt(0),e=Dt(0),n=Dt(!1),r=Dt("");return{todayVisitors:t,yesterdayVisitors:e,loading:n,error:r,load:async()=>{n.value=!0,r.value="";try{const i=gm(0),o=gm(-1),c=await pm(wu(Lt,"dailyVisitors",i,"visitors")),l=await pm(wu(Lt,"dailyVisitors",o,"visitors"));t.value=c.data().count,e.value=l.data().count}catch(i){console.error(i),r.value=i?.message||"   ."}finally{n.value=!1}}}}const Nk={class:"min-h-screen bg-white text-slate-900 dark:bg-slate-950 dark:text-slate-100 font-[system-ui] text-[14px] md:text-[15px] transition-colors duration-300"},Vk={class:"mx-auto max-w-7xl px-4 py-4 flex flex-col gap-4 md:flex-row"},Dk={class:"flex-1 rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-950 p-4 transition-colors duration-300"},Ok={class:"mb-3 md:hidden"},Mk=["value"],Lk={class:"mb-3 flex items-center gap-2 border-b border-slate-200 dark:border-slate-800 pb-2 text-[10px] text-slate-500 dark:text-slate-600"},Fk={class:"flex items-center gap-1 rounded-md bg-slate-100 dark:bg-slate-900 px-2 py-1 text-black dark:text-yellow-400"},Uk={key:0},Bk={class:"ml-2 text-[10px] text-slate-500 dark:text-slate-400"},jk={key:1},$k={class:"leading-relaxed"},qk=Vr({__name:"App",setup(t){const e=qc(),n=WI(),r=zI(),{isDark:s,toggleTheme:i}=Sk(),{todayVisitors:o,yesterdayVisitors:c,load:l}=xk(),{posts:u,loadingPosts:f,errorMsg:d,activePostId:m,activePostMeta:g,openPost:S,handleMobileSelect:P}=kk({router:n,route:r}),x=Dt(!1),O=async()=>{await e.logout(),n.push({name:"home"})};vo(async()=>{try{await Rk()}catch($){console.error($)}await l(),e.init?.()});const F=Xe(()=>[...u.value].sort(($,q)=>(q.views??0)-($.views??0)).slice(0,3));return($,q)=>(ge(),Pe(pt,null,[De(R1),Q("div",Nk,[De(ck,{"is-dark":de(s),"is-logged-in":!!de(e).user,"user-email":de(e).user?.email??"","show-mobile-menu":x.value,onToggleTheme:de(i),onLogout:O,onToggleMobileMenu:q[0]||(q[0]=J=>x.value=!x.value)},null,8,["is-dark","is-logged-in","user-email","show-mobile-menu","onToggleTheme"]),Q("div",Vk,[De(q1,{posts:de(u),"active-post-id":de(m),loading:de(f),error:de(d),onOpenPost:de(S)},null,8,["posts","active-post-id","loading","error","onOpenPost"]),Q("main",Dk,[Q("div",Ok,[q[3]||(q[3]=Q("label",{class:"block text-[11px] text-slate-500 dark:text-slate-400 mb-1"}," select post ",-1)),Q("select",{class:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-950 px-2 py-1.5 text-[12px]",onChange:q[1]||(q[1]=(...J)=>de(P)&&de(P)(...J))},[q[2]||(q[2]=Q("option",{value:""},"router-view.tsx ( )",-1)),(ge(!0),Pe(pt,null,Sa(de(u),J=>(ge(),Pe("option",{key:J.id,value:J.id},Le(J.title||"untitled.md"),9,Mk))),128))],32)]),Q("div",Lk,[Q("div",Fk,[q[4]||(q[4]=Q("span",{class:"h-1.5 w-1.5 rounded-full bg-black dark:bg-yellow-400"},null,-1)),de(g)?(ge(),Pe("span",Uk,[ht(Le(de(g).title)+" ",1),Q("span",Bk,"  "+Le(de(g).author)+"  "+Le(de(g).category)+"  "+Le(de(g).createdAt),1)])):(ge(),Pe("span",jk,"router-view.tsx"))]),q[5]||(q[5]=Q("div",{class:"flex-1 text-right text-[9px]"}," Vue 3  Firebase  Tailwind  Developer ",-1))]),Q("div",$k,[De(de(Jg))])]),De(Ik,{"today-visitors":de(o),"yesterday-visitors":de(c),"top-today-posts":F.value,onOpenPost:de(S)},null,8,["today-visitors","yesterday-visitors","top-today-posts","onOpenPost"])]),De(fk)])],64))}}),Hk="modulepreload",Gk=function(t){return"/"+t},_m={},Qn=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let l=function(u){return Promise.all(u.map(f=>Promise.resolve(f).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=o?.nonce||o?.getAttribute("nonce");s=l(n.map(u=>{if(u=Gk(u),u in _m)return;_m[u]=!0;const f=u.endsWith(".css"),d=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const m=document.createElement("link");if(m.rel=f?"stylesheet":Hk,f||(m.as="script"),m.crossOrigin="",m.href=u,c&&m.setAttribute("nonce",c),document.head.appendChild(m),f)return new Promise((g,S)=>{m.addEventListener("load",g),m.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return s.then(o=>{for(const c of o||[])c.status==="rejected"&&i(c.reason);return e().catch(i)})},ym=()=>Qn(()=>import("./HomeFeed-Cl1H8LKs.js"),[]),Wk=()=>Qn(()=>import("./PostDetailPage-rJOOG1x5.js"),__vite__mapDeps([0,1])),zk=()=>Qn(()=>import("./LoginPage-DxptCEsu.js"),[]),Kk=()=>Qn(()=>import("./SignupPage-BPV4m37l.js"),[]),Qk=()=>Qn(()=>import("./NewPostPage-BRDgLWvZ.js"),__vite__mapDeps([2,3,4,1])),Yk=()=>Qn(()=>import("./EditPostPage-BQRCsXX9.js"),__vite__mapDeps([5,3,4,1])),Jk=()=>Qn(()=>import("./AboutView-dL2KdbOI.js"),[]),Xk=()=>Qn(()=>import("./TagPage-BdqRTr-a.js"),[]),Zk=()=>Qn(()=>import("./Chat-DwORK-sC.js"),__vite__mapDeps([6,4])),ex=[{path:"/",name:"home",component:ym},{path:"/posts",name:"posts",component:ym},{path:"/posts/:id",name:"post-detail",component:Wk},{path:"/t/:tag",name:"tag-view",props:!0,component:Xk},{path:"/about",name:"about",component:Jk},{path:"/login",name:"login",component:zk},{path:"/signup",name:"signup",component:Kk},{path:"/chat",name:"chat",component:Zk,meta:{requiresAuth:!0,requiresWriter:!0}},{path:"/admin/new",name:"new-post",component:Qk,meta:{requiresAuth:!0,requiresWriter:!0}},{path:"/admin/edit/:id",name:"edit-post",component:Yk,meta:{requiresAuth:!0,requiresWriter:!0}}],VE=GI({history:bI("/"),routes:ex,scrollBehavior(){return{top:0}}});VE.beforeEach(async t=>{const e=qc(),n=xE();e.initialized||await e.init();const r=e.isLoggedIn,s=String(t.name||"");if(t.meta.requiresAuth&&!r)return{name:"login",query:{redirect:t.fullPath}};if(r&&(s==="login"||s==="signup"))return{name:"home"};if(t.meta.requiresWriter){if(!r)return n.alert({title:" ",message:"   .",type:"info"}),{name:"login",query:{redirect:t.fullPath}};if(!e.canWrite)return n.alert({title:" ",message:"   .(https://salcho.kro.kr  )",type:"error"}),{name:"home"}}return!0});const Hc=Vw(qk),tx=Mw();Hc.use(tx);Hc.use(VE);const DE=qc();DE.init?.();Hc.config.globalProperties.$auth=DE;Hc.mount("#app");export{nx as $,jc as A,l1 as B,fn as C,Lt as D,wu as E,pt as F,Ks as G,xE as H,qc as I,Zr as J,ux as K,WI as L,dx as M,fx as N,lx as O,hx as P,Cw as Q,Yt as R,sx as S,fw as T,ax as U,Eo as V,ix as W,cx as X,px as Y,_o as Z,NE as _,ug as a,Pu as a0,Pe as b,Xe as c,Vr as d,Q as e,Qv as f,Jr as g,Sa as h,ht as i,De as j,$t as k,zI as l,mx as m,Ys as n,vo as o,gx as p,ge as q,Dt as r,u1 as s,Le as t,de as u,rx as v,gr as w,Ms as x,ec as y,is as z};
