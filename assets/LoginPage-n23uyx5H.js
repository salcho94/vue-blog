import{D as h,E as _,Q as A,S as L,G as V,T as N,U as R,V as U,d as C,r as i,I as D,H as G,b as p,e as a,g as T,f,v as g,t as B,i as m,j as K,k as P,u as S,R as q,l as I,L as M,q as b}from"./index-BJiIzkR_.js";async function E(e){if(!e.email)return;const l=h(_,"users",e.uid);if(!(await A(l)).exists()){const s={uid:e.uid,email:e.email,displayName:e.displayName||void 0,photoURL:e.photoURL||void 0,role:"user",createdAt:V()};await L(l,s)}}const W=new R;async function j(){const e=await N(U,W);return await E(e.user),e.user}const H={class:"max-w-sm mx-auto space-y-4"},O={class:"space-y-2 text-[11px]"},Q=["disabled"],z=["disabled"],F={key:0,class:"text-[10px] text-red-400"},J={class:"text-[10px] text-slate-500"},Y=C({__name:"LoginPage",setup(e){const l=i(""),n=i(""),s=i(!1),r=i(""),v=D(),u=M(),c=I(),x=G(),y=()=>typeof navigator>"u"?!1:/KAKAOTALK/i.test(navigator.userAgent),w=async()=>{s.value=!0,r.value="";try{await v.login(l.value,n.value);const o=c.query.redirect||"/";u.push(o)}catch(o){r.value=o.message||"로그인 실패"}finally{s.value=!1}},k=async()=>{if(y()){x.alert({title:"브라우저 안내",message:`카카오톡 내 브라우저에서는 구글 로그인이 지원되지 않습니다.
오른쪽 상단 ••• 메뉴에서 "기본 브라우저로 열기"를 선택한 뒤 다시 접속해 주세요.`,type:"info"});return}s.value=!0,r.value="";try{await j();const o=c.query.redirect||"/";u.push(o)}catch(o){r.value=o.message||"구글 로그인 실패"}finally{s.value=!1}};return(o,t)=>(b(),p("div",H,[t[4]||(t[4]=a("h1",{class:"text-lg font-semibold text-slate-900 dark:text-slate-100"}," login ",-1)),a("div",O,[f(a("input",{"onUpdate:modelValue":t[0]||(t[0]=d=>l.value=d),type:"email",placeholder:"email",class:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-950 px-2 py-1"},null,512),[[g,l.value]]),f(a("input",{"onUpdate:modelValue":t[1]||(t[1]=d=>n.value=d),type:"password",placeholder:"password",class:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-950 px-2 py-1"},null,512),[[g,n.value]]),a("button",{onClick:w,disabled:s.value,class:"w-full mt-1 rounded-md py-1.5 text-[12px] font-semibold bg-slate-900 text-white hover:bg-slate-800 dark:bg-yellow-400 dark:text-slate-900 dark:hover:bg-yellow-300 disabled:opacity-60 disabled:cursor-not-allowed transition-colors duration-150 focus:outline-none focus:ring-2 focus:ring-slate-900 focus:ring-offset-1 dark:focus:ring-yellow-300 dark:focus:ring-offset-slate-900"}," 로그인 ",8,Q),a("button",{onClick:k,disabled:s.value,class:"w-full mt-1 rounded-md py-1.5 text-[12px] font-semibold bg-slate-900 text-white hover:bg-slate-800 dark:bg-yellow-400 dark:text-slate-900 dark:hover:bg-yellow-300 disabled:opacity-60 disabled:cursor-not-allowed transition-colors duration-150 focus:outline-none focus:ring-2 focus:ring-slate-900 focus:ring-offset-1 dark:focus:ring-yellow-300 dark:focus:ring-offset-slate-900"}," Google 로그인 ",8,z)]),r.value?(b(),p("p",F,B(r.value),1)):T("",!0),a("p",J,[t[3]||(t[3]=m(" 계정이 없나요? ",-1)),K(S(q),{to:"/signup",class:"ml-1 inline-flex items-center px-1.5 py-0.5 rounded text-[10px] font-semibold text-slate-900 hover:bg-slate-100 dark:text-yellow-300 dark:hover:bg-slate-800 transition-colors"},{default:P(()=>[...t[2]||(t[2]=[m(" 회원가입 ",-1)])]),_:1})])]))}});export{Y as default};
