import{D as h,E as w,P as k,Q as _,G as N,S as R,T as U,U as V,d as C,r as n,H as D,b as p,e as o,g as G,f as m,v,t as L,i as y,j as P,k as T,u as q,R as A,l as B,K as S,q as b}from"./index-CqFP1vA1.js";async function E(e){if(!e.email)return;const l=h(w,"users",e.uid);if(!(await k(l)).exists()){const a={uid:e.uid,email:e.email,displayName:e.displayName||void 0,photoURL:e.photoURL||void 0,role:"user",createdAt:N()};await _(l,a)}}const M=new U;async function W(){const e=await R(V,M);return await E(e.user),e.user}const j={class:"max-w-sm mx-auto space-y-4"},H={class:"space-y-2 text-[11px]"},I=["disabled"],K=["disabled"],Q={key:0,class:"text-[10px] text-red-400"},z={class:"text-[10px] text-slate-500"},J=C({__name:"LoginPage",setup(e){const l=n(""),d=n(""),a=n(!1),r=n(""),f=D(),u=S(),c=B(),g=async()=>{a.value=!0,r.value="";try{await f.login(l.value,d.value);const s=c.query.redirect||"/";u.push(s)}catch(s){r.value=s.message||"로그인 실패"}finally{a.value=!1}},x=async()=>{a.value=!0,r.value="";try{await W();const s=c.query.redirect||"/";u.push(s)}catch(s){r.value=s.message||"구글 로그인 실패"}finally{a.value=!1}};return(s,t)=>(b(),p("div",j,[t[4]||(t[4]=o("h1",{class:"text-lg font-semibold text-slate-900 dark:text-slate-100"}," login ",-1)),o("div",H,[m(o("input",{"onUpdate:modelValue":t[0]||(t[0]=i=>l.value=i),type:"email",placeholder:"email",class:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-950 px-2 py-1"},null,512),[[v,l.value]]),m(o("input",{"onUpdate:modelValue":t[1]||(t[1]=i=>d.value=i),type:"password",placeholder:"password",class:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-950 px-2 py-1"},null,512),[[v,d.value]]),o("button",{onClick:g,disabled:a.value,class:"w-full mt-1 rounded-md bg-cyan-400 text-slate-950 py-1 font-semibold hover:bg-cyan-300 disabled:opacity-60"}," 로그인 ",8,I),o("button",{onClick:x,disabled:a.value,class:"w-full rounded-md border border-slate-300 dark:border-slate-700 py-1 text-slate-700 dark:text-slate-200 hover:border-cyan-400 hover:text-cyan-400 disabled:opacity-60"}," Google 로그인 ",8,K)]),r.value?(b(),p("p",Q,L(r.value),1)):G("",!0),o("p",z,[t[3]||(t[3]=y(" 계정이 없나요? ",-1)),P(q(A),{to:"/signup",class:"text-cyan-400"},{default:T(()=>[...t[2]||(t[2]=[y("회원가입",-1)])]),_:1})])]))}});export{J as default};
