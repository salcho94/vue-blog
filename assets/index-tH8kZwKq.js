(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function $l(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Oe={},vs=[],vn=()=>{},Ip=()=>!1,xa=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),ql=t=>t.startsWith("onUpdate:"),At=Object.assign,Hl=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},ov=Object.prototype.hasOwnProperty,ke=(t,e)=>ov.call(t,e),he=Array.isArray,Es=t=>ka(t)==="[object Map]",Ap=t=>ka(t)==="[object Set]",pe=t=>typeof t=="function",Ze=t=>typeof t=="string",Rr=t=>typeof t=="symbol",je=t=>t!==null&&typeof t=="object",bp=t=>(je(t)||pe(t))&&pe(t.then)&&pe(t.catch),Rp=Object.prototype.toString,ka=t=>Rp.call(t),av=t=>ka(t).slice(8,-1),Sp=t=>ka(t)==="[object Object]",Gl=t=>Ze(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,yi=$l(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Na=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},cv=/-\w/g,_r=Na(t=>t.replace(cv,e=>e.slice(1).toUpperCase())),lv=/\B([A-Z])/g,es=Na(t=>t.replace(lv,"-$1").toLowerCase()),Pp=Na(t=>t.charAt(0).toUpperCase()+t.slice(1)),Sc=Na(t=>t?`on${Pp(t)}`:""),cr=(t,e)=>!Object.is(t,e),Uo=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},Cp=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},Wl=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Xh;const Va=()=>Xh||(Xh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function zl(t){if(he(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=Ze(r)?dv(r):zl(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(Ze(t)||je(t))return t}const uv=/;(?![^(]*\))/g,hv=/:([^]+)/,fv=/\/\*[^]*?\*\//g;function dv(t){const e={};return t.replace(fv,"").split(uv).forEach(n=>{if(n){const r=n.split(hv);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Da(t){let e="";if(Ze(t))e=t;else if(he(t))for(let n=0;n<t.length;n++){const r=Da(t[n]);r&&(e+=r+" ")}else if(je(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const pv="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",mv=$l(pv);function xp(t){return!!t||t===""}const kp=t=>!!(t&&t.__v_isRef===!0),Ce=t=>Ze(t)?t:t==null?"":he(t)||je(t)&&(t.toString===Rp||!pe(t.toString))?kp(t)?Ce(t.value):JSON.stringify(t,Np,2):String(t),Np=(t,e)=>kp(e)?Np(t,e.value):Es(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[Pc(r,i)+" =>"]=s,n),{})}:Ap(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Pc(n))}:Rr(e)?Pc(e):je(e)&&!he(e)&&!Sp(e)?String(e):e,Pc=(t,e="")=>{var n;return Rr(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let wt;class Vp{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=wt,!e&&wt&&(this.index=(wt.scopes||(wt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=wt;try{return wt=this,e()}finally{wt=n}}}on(){++this._on===1&&(this.prevScope=wt,wt=this)}off(){this._on>0&&--this._on===0&&(wt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function Dp(t){return new Vp(t)}function Op(){return wt}function gv(t,e=!1){wt&&wt.cleanups.push(t)}let Le;const Cc=new WeakSet;class Mp{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,wt&&wt.active&&wt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Cc.has(this)&&(Cc.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Fp(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Zh(this),Up(this);const e=Le,n=sn;Le=this,sn=!0;try{return this.fn()}finally{Bp(this),Le=e,sn=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Yl(e);this.deps=this.depsTail=void 0,Zh(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Cc.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){el(this)&&this.run()}get dirty(){return el(this)}}let Lp=0,vi,Ei;function Fp(t,e=!1){if(t.flags|=8,e){t.next=Ei,Ei=t;return}t.next=vi,vi=t}function Kl(){Lp++}function Ql(){if(--Lp>0)return;if(Ei){let e=Ei;for(Ei=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;vi;){let e=vi;for(vi=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function Up(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Bp(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),Yl(r),_v(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function el(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(jp(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function jp(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Di)||(t.globalVersion=Di,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!el(t))))return;t.flags|=2;const e=t.dep,n=Le,r=sn;Le=t,sn=!0;try{Up(t);const s=t.fn(t._value);(e.version===0||cr(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{Le=n,sn=r,Bp(t),t.flags&=-3}}function Yl(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Yl(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function _v(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let sn=!0;const $p=[];function Fn(){$p.push(sn),sn=!1}function Un(){const t=$p.pop();sn=t===void 0?!0:t}function Zh(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Le;Le=void 0;try{e()}finally{Le=n}}}let Di=0;class yv{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Jl{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Le||!sn||Le===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Le)n=this.activeLink=new yv(Le,this),Le.deps?(n.prevDep=Le.depsTail,Le.depsTail.nextDep=n,Le.depsTail=n):Le.deps=Le.depsTail=n,qp(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=Le.depsTail,n.nextDep=void 0,Le.depsTail.nextDep=n,Le.depsTail=n,Le.deps===n&&(Le.deps=r)}return n}trigger(e){this.version++,Di++,this.notify(e)}notify(e){Kl();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Ql()}}}function qp(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)qp(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const ea=new WeakMap,Wr=Symbol(""),tl=Symbol(""),Oi=Symbol("");function It(t,e,n){if(sn&&Le){let r=ea.get(t);r||ea.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new Jl),s.map=r,s.key=n),s.track()}}function Vn(t,e,n,r,s,i){const o=ea.get(t);if(!o){Di++;return}const c=l=>{l&&l.trigger()};if(Kl(),e==="clear")o.forEach(c);else{const l=he(t),u=l&&Gl(n);if(l&&n==="length"){const f=Number(r);o.forEach((p,m)=>{(m==="length"||m===Oi||!Rr(m)&&m>=f)&&c(p)})}else switch((n!==void 0||o.has(void 0))&&c(o.get(n)),u&&c(o.get(Oi)),e){case"add":l?u&&c(o.get("length")):(c(o.get(Wr)),Es(t)&&c(o.get(tl)));break;case"delete":l||(c(o.get(Wr)),Es(t)&&c(o.get(tl)));break;case"set":Es(t)&&c(o.get(Wr));break}}Ql()}function vv(t,e){const n=ea.get(t);return n&&n.get(e)}function cs(t){const e=Pe(t);return e===t?e:(It(e,"iterate",Oi),Qt(t)?e:e.map(ht))}function Oa(t){return It(t=Pe(t),"iterate",Oi),t}const Ev={__proto__:null,[Symbol.iterator](){return xc(this,Symbol.iterator,ht)},concat(...t){return cs(this).concat(...t.map(e=>he(e)?cs(e):e))},entries(){return xc(this,"entries",t=>(t[1]=ht(t[1]),t))},every(t,e){return xn(this,"every",t,e,void 0,arguments)},filter(t,e){return xn(this,"filter",t,e,n=>n.map(ht),arguments)},find(t,e){return xn(this,"find",t,e,ht,arguments)},findIndex(t,e){return xn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return xn(this,"findLast",t,e,ht,arguments)},findLastIndex(t,e){return xn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return xn(this,"forEach",t,e,void 0,arguments)},includes(...t){return kc(this,"includes",t)},indexOf(...t){return kc(this,"indexOf",t)},join(t){return cs(this).join(t)},lastIndexOf(...t){return kc(this,"lastIndexOf",t)},map(t,e){return xn(this,"map",t,e,void 0,arguments)},pop(){return ci(this,"pop")},push(...t){return ci(this,"push",t)},reduce(t,...e){return ef(this,"reduce",t,e)},reduceRight(t,...e){return ef(this,"reduceRight",t,e)},shift(){return ci(this,"shift")},some(t,e){return xn(this,"some",t,e,void 0,arguments)},splice(...t){return ci(this,"splice",t)},toReversed(){return cs(this).toReversed()},toSorted(t){return cs(this).toSorted(t)},toSpliced(...t){return cs(this).toSpliced(...t)},unshift(...t){return ci(this,"unshift",t)},values(){return xc(this,"values",ht)}};function xc(t,e,n){const r=Oa(t),s=r[e]();return r!==t&&!Qt(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.done||(i.value=n(i.value)),i}),s}const wv=Array.prototype;function xn(t,e,n,r,s,i){const o=Oa(t),c=o!==t&&!Qt(t),l=o[e];if(l!==wv[e]){const p=l.apply(t,i);return c?ht(p):p}let u=n;o!==t&&(c?u=function(p,m){return n.call(this,ht(p),m,t)}:n.length>2&&(u=function(p,m){return n.call(this,p,m,t)}));const f=l.call(o,u,r);return c&&s?s(f):f}function ef(t,e,n,r){const s=Oa(t);let i=n;return s!==t&&(Qt(t)?n.length>3&&(i=function(o,c,l){return n.call(this,o,c,l,t)}):i=function(o,c,l){return n.call(this,o,ht(c),l,t)}),s[e](i,...r)}function kc(t,e,n){const r=Pe(t);It(r,"iterate",Oi);const s=r[e](...n);return(s===-1||s===!1)&&eu(n[0])?(n[0]=Pe(n[0]),r[e](...n)):s}function ci(t,e,n=[]){Fn(),Kl();const r=Pe(t)[e].apply(t,n);return Ql(),Un(),r}const Tv=$l("__proto__,__v_isRef,__isVue"),Hp=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Rr));function Iv(t){Rr(t)||(t=String(t));const e=Pe(this);return It(e,"has",t),e.hasOwnProperty(t)}class Gp{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?Vv:Qp:i?Kp:zp).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=he(e);if(!s){let l;if(o&&(l=Ev[n]))return l;if(n==="hasOwnProperty")return Iv}const c=Reflect.get(e,n,Qe(e)?e:r);if((Rr(n)?Hp.has(n):Tv(n))||(s||It(e,"get",n),i))return c;if(Qe(c)){const l=o&&Gl(n)?c:c.value;return s&&je(l)?rl(l):l}return je(c)?s?rl(c):Zi(c):c}}class Wp extends Gp{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];if(!this._isShallow){const l=yr(i);if(!Qt(r)&&!yr(r)&&(i=Pe(i),r=Pe(r)),!he(e)&&Qe(i)&&!Qe(r))return l||(i.value=r),!0}const o=he(e)&&Gl(n)?Number(n)<e.length:ke(e,n),c=Reflect.set(e,n,r,Qe(e)?e:s);return e===Pe(s)&&(o?cr(r,i)&&Vn(e,"set",n,r):Vn(e,"add",n,r)),c}deleteProperty(e,n){const r=ke(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&Vn(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!Rr(n)||!Hp.has(n))&&It(e,"has",n),r}ownKeys(e){return It(e,"iterate",he(e)?"length":Wr),Reflect.ownKeys(e)}}class Av extends Gp{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const bv=new Wp,Rv=new Av,Sv=new Wp(!0);const nl=t=>t,xo=t=>Reflect.getPrototypeOf(t);function Pv(t,e,n){return function(...r){const s=this.__v_raw,i=Pe(s),o=Es(i),c=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=s[t](...r),f=n?nl:e?ta:ht;return!e&&It(i,"iterate",l?tl:Wr),{next(){const{value:p,done:m}=u.next();return m?{value:p,done:m}:{value:c?[f(p[0]),f(p[1])]:f(p),done:m}},[Symbol.iterator](){return this}}}}function ko(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Cv(t,e){const n={get(s){const i=this.__v_raw,o=Pe(i),c=Pe(s);t||(cr(s,c)&&It(o,"get",s),It(o,"get",c));const{has:l}=xo(o),u=e?nl:t?ta:ht;if(l.call(o,s))return u(i.get(s));if(l.call(o,c))return u(i.get(c));i!==o&&i.get(s)},get size(){const s=this.__v_raw;return!t&&It(Pe(s),"iterate",Wr),s.size},has(s){const i=this.__v_raw,o=Pe(i),c=Pe(s);return t||(cr(s,c)&&It(o,"has",s),It(o,"has",c)),s===c?i.has(s):i.has(s)||i.has(c)},forEach(s,i){const o=this,c=o.__v_raw,l=Pe(c),u=e?nl:t?ta:ht;return!t&&It(l,"iterate",Wr),c.forEach((f,p)=>s.call(i,u(f),u(p),o))}};return At(n,t?{add:ko("add"),set:ko("set"),delete:ko("delete"),clear:ko("clear")}:{add(s){!e&&!Qt(s)&&!yr(s)&&(s=Pe(s));const i=Pe(this);return xo(i).has.call(i,s)||(i.add(s),Vn(i,"add",s,s)),this},set(s,i){!e&&!Qt(i)&&!yr(i)&&(i=Pe(i));const o=Pe(this),{has:c,get:l}=xo(o);let u=c.call(o,s);u||(s=Pe(s),u=c.call(o,s));const f=l.call(o,s);return o.set(s,i),u?cr(i,f)&&Vn(o,"set",s,i):Vn(o,"add",s,i),this},delete(s){const i=Pe(this),{has:o,get:c}=xo(i);let l=o.call(i,s);l||(s=Pe(s),l=o.call(i,s)),c&&c.call(i,s);const u=i.delete(s);return l&&Vn(i,"delete",s,void 0),u},clear(){const s=Pe(this),i=s.size!==0,o=s.clear();return i&&Vn(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=Pv(s,t,e)}),n}function Xl(t,e){const n=Cv(t,e);return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(ke(n,s)&&s in r?n:r,s,i)}const xv={get:Xl(!1,!1)},kv={get:Xl(!1,!0)},Nv={get:Xl(!0,!1)};const zp=new WeakMap,Kp=new WeakMap,Qp=new WeakMap,Vv=new WeakMap;function Dv(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ov(t){return t.__v_skip||!Object.isExtensible(t)?0:Dv(av(t))}function Zi(t){return yr(t)?t:Zl(t,!1,bv,xv,zp)}function Yp(t){return Zl(t,!1,Sv,kv,Kp)}function rl(t){return Zl(t,!0,Rv,Nv,Qp)}function Zl(t,e,n,r,s){if(!je(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=Ov(t);if(i===0)return t;const o=s.get(t);if(o)return o;const c=new Proxy(t,i===2?r:n);return s.set(t,c),c}function lr(t){return yr(t)?lr(t.__v_raw):!!(t&&t.__v_isReactive)}function yr(t){return!!(t&&t.__v_isReadonly)}function Qt(t){return!!(t&&t.__v_isShallow)}function eu(t){return t?!!t.__v_raw:!1}function Pe(t){const e=t&&t.__v_raw;return e?Pe(e):t}function tu(t){return!ke(t,"__v_skip")&&Object.isExtensible(t)&&Cp(t,"__v_skip",!0),t}const ht=t=>je(t)?Zi(t):t,ta=t=>je(t)?rl(t):t;function Qe(t){return t?t.__v_isRef===!0:!1}function ye(t){return Jp(t,!1)}function Mv(t){return Jp(t,!0)}function Jp(t,e){return Qe(t)?t:new Lv(t,e)}class Lv{constructor(e,n){this.dep=new Jl,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Pe(e),this._value=n?e:ht(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||Qt(e)||yr(e);e=r?e:Pe(e),cr(e,n)&&(this._rawValue=e,this._value=r?e:ht(e),this.dep.trigger())}}function be(t){return Qe(t)?t.value:t}const Fv={get:(t,e,n)=>e==="__v_raw"?t:be(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return Qe(s)&&!Qe(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function Xp(t){return lr(t)?t:new Proxy(t,Fv)}function Uv(t){const e=he(t)?new Array(t.length):{};for(const n in t)e[n]=jv(t,n);return e}class Bv{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return vv(Pe(this._object),this._key)}}function jv(t,e,n){const r=t[e];return Qe(r)?r:new Bv(t,e,n)}class $v{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Jl(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Di-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Le!==this)return Fp(this,!0),!0}get value(){const e=this.dep.track();return jp(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function qv(t,e,n=!1){let r,s;return pe(t)?r=t:(r=t.get,s=t.set),new $v(r,s,n)}const No={},na=new WeakMap;let jr;function Hv(t,e=!1,n=jr){if(n){let r=na.get(n);r||na.set(n,r=[]),r.push(t)}}function Gv(t,e,n=Oe){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:c,call:l}=n,u=Q=>s?Q:Qt(Q)||s===!1||s===0?Dn(Q,1):Dn(Q);let f,p,m,y,x=!1,k=!1;if(Qe(t)?(p=()=>t.value,x=Qt(t)):lr(t)?(p=()=>u(t),x=!0):he(t)?(k=!0,x=t.some(Q=>lr(Q)||Qt(Q)),p=()=>t.map(Q=>{if(Qe(Q))return Q.value;if(lr(Q))return u(Q);if(pe(Q))return l?l(Q,2):Q()})):pe(t)?e?p=l?()=>l(t,2):t:p=()=>{if(m){Fn();try{m()}finally{Un()}}const Q=jr;jr=f;try{return l?l(t,3,[y]):t(y)}finally{jr=Q}}:p=vn,e&&s){const Q=p,se=s===!0?1/0:s;p=()=>Dn(Q(),se)}const R=Op(),V=()=>{f.stop(),R&&R.active&&Hl(R.effects,f)};if(i&&e){const Q=e;e=(...se)=>{Q(...se),V()}}let B=k?new Array(t.length).fill(No):No;const G=Q=>{if(!(!(f.flags&1)||!f.dirty&&!Q))if(e){const se=f.run();if(s||x||(k?se.some((ge,I)=>cr(ge,B[I])):cr(se,B))){m&&m();const ge=jr;jr=f;try{const I=[se,B===No?void 0:k&&B[0]===No?[]:B,y];B=se,l?l(e,3,I):e(...I)}finally{jr=ge}}}else f.run()};return c&&c(G),f=new Mp(p),f.scheduler=o?()=>o(G,!1):G,y=Q=>Hv(Q,!1,f),m=f.onStop=()=>{const Q=na.get(f);if(Q){if(l)l(Q,4);else for(const se of Q)se();na.delete(f)}},e?r?G(!0):B=f.run():o?o(G.bind(null,!0),!0):f.run(),V.pause=f.pause.bind(f),V.resume=f.resume.bind(f),V.stop=V,V}function Dn(t,e=1/0,n){if(e<=0||!je(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,Qe(t))Dn(t.value,e,n);else if(he(t))for(let r=0;r<t.length;r++)Dn(t[r],e,n);else if(Ap(t)||Es(t))t.forEach(r=>{Dn(r,e,n)});else if(Sp(t)){for(const r in t)Dn(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Dn(t[r],e,n)}return t}function eo(t,e,n,r){try{return r?t(...r):t()}catch(s){Ma(s,e,n)}}function bn(t,e,n,r){if(pe(t)){const s=eo(t,e,n,r);return s&&bp(s)&&s.catch(i=>{Ma(i,e,n)}),s}if(he(t)){const s=[];for(let i=0;i<t.length;i++)s.push(bn(t[i],e,n,r));return s}}function Ma(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Oe;if(e){let c=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;c;){const f=c.ec;if(f){for(let p=0;p<f.length;p++)if(f[p](t,l,u)===!1)return}c=c.parent}if(i){Fn(),eo(i,null,10,[t,l,u]),Un();return}}Wv(t,n,s,r,o)}function Wv(t,e,n,r=!0,s=!1){if(s)throw t;console.error(t)}const kt=[];let mn=-1;const ws=[];let tr=null,us=0;const Zp=Promise.resolve();let ra=null;function nu(t){const e=ra||Zp;return t?e.then(this?t.bind(this):t):e}function zv(t){let e=mn+1,n=kt.length;for(;e<n;){const r=e+n>>>1,s=kt[r],i=Mi(s);i<t||i===t&&s.flags&2?e=r+1:n=r}return e}function ru(t){if(!(t.flags&1)){const e=Mi(t),n=kt[kt.length-1];!n||!(t.flags&2)&&e>=Mi(n)?kt.push(t):kt.splice(zv(e),0,t),t.flags|=1,em()}}function em(){ra||(ra=Zp.then(nm))}function Kv(t){he(t)?ws.push(...t):tr&&t.id===-1?tr.splice(us+1,0,t):t.flags&1||(ws.push(t),t.flags|=1),em()}function tf(t,e,n=mn+1){for(;n<kt.length;n++){const r=kt[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;kt.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function tm(t){if(ws.length){const e=[...new Set(ws)].sort((n,r)=>Mi(n)-Mi(r));if(ws.length=0,tr){tr.push(...e);return}for(tr=e,us=0;us<tr.length;us++){const n=tr[us];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}tr=null,us=0}}const Mi=t=>t.id==null?t.flags&2?-1:1/0:t.id;function nm(t){try{for(mn=0;mn<kt.length;mn++){const e=kt[mn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),eo(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;mn<kt.length;mn++){const e=kt[mn];e&&(e.flags&=-2)}mn=-1,kt.length=0,tm(),ra=null,(kt.length||ws.length)&&nm()}}let Kt=null,rm=null;function sa(t){const e=Kt;return Kt=t,rm=t&&t.type.__scopeId||null,e}function Ct(t,e=Kt,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&aa(-1);const i=sa(e);let o;try{o=t(...s)}finally{sa(i),r._d&&aa(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function on(t,e){if(Kt===null)return t;const n=Ba(Kt),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,c,l=Oe]=e[s];i&&(pe(i)&&(i={mounted:i,updated:i}),i.deep&&Dn(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:c,modifiers:l}))}return t}function Ur(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const c=s[o];i&&(c.oldValue=i[o].value);let l=c.dir[r];l&&(Fn(),bn(l,n,8,[t.el,c,t,e]),Un())}}const Qv=Symbol("_vte"),Yv=t=>t.__isTeleport,Jv=Symbol("_leaveCb");function su(t,e){t.shapeFlag&6&&t.component?(t.transition=e,su(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Pn(t,e){return pe(t)?At({name:t.name},e,{setup:t}):t}function sm(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const ia=new WeakMap;function wi(t,e,n,r,s=!1){if(he(t)){t.forEach((x,k)=>wi(x,e&&(he(e)?e[k]:e),n,r,s));return}if(Ti(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&wi(t,e,n,r.component.subTree);return}const i=r.shapeFlag&4?Ba(r.component):r.el,o=s?null:i,{i:c,r:l}=t,u=e&&e.r,f=c.refs===Oe?c.refs={}:c.refs,p=c.setupState,m=Pe(p),y=p===Oe?Ip:x=>ke(m,x);if(u!=null&&u!==l){if(nf(e),Ze(u))f[u]=null,y(u)&&(p[u]=null);else if(Qe(u)){u.value=null;const x=e;x.k&&(f[x.k]=null)}}if(pe(l))eo(l,c,12,[o,f]);else{const x=Ze(l),k=Qe(l);if(x||k){const R=()=>{if(t.f){const V=x?y(l)?p[l]:f[l]:l.value;if(s)he(V)&&Hl(V,i);else if(he(V))V.includes(i)||V.push(i);else if(x)f[l]=[i],y(l)&&(p[l]=f[l]);else{const B=[i];l.value=B,t.k&&(f[t.k]=B)}}else x?(f[l]=o,y(l)&&(p[l]=o)):k&&(l.value=o,t.k&&(f[t.k]=o))};if(o){const V=()=>{R(),ia.delete(t)};V.id=-1,ia.set(t,V),jt(V,n)}else nf(t),R()}}}function nf(t){const e=ia.get(t);e&&(e.flags|=8,ia.delete(t))}Va().requestIdleCallback;Va().cancelIdleCallback;const Ti=t=>!!t.type.__asyncLoader,im=t=>t.type.__isKeepAlive;function Xv(t,e){om(t,"a",e)}function Zv(t,e){om(t,"da",e)}function om(t,e,n=Nt){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(La(e,r,n),n){let s=n.parent;for(;s&&s.parent;)im(s.parent.vnode)&&eE(r,e,n,s),s=s.parent}}function eE(t,e,n,r){const s=La(e,t,r,!0);am(()=>{Hl(r[e],s)},n)}function La(t,e,n=Nt,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Fn();const c=no(n),l=bn(e,n,t,o);return c(),Un(),l});return r?s.unshift(i):s.push(i),i}}const Hn=t=>(e,n=Nt)=>{(!Ui||t==="sp")&&La(t,(...r)=>e(...r),n)},tE=Hn("bm"),to=Hn("m"),nE=Hn("bu"),rE=Hn("u"),sE=Hn("bum"),am=Hn("um"),iE=Hn("sp"),oE=Hn("rtg"),aE=Hn("rtc");function cE(t,e=Nt){La("ec",t,e)}const lE=Symbol.for("v-ndc");function Li(t,e,n,r){let s;const i=n,o=he(t);if(o||Ze(t)){const c=o&&lr(t);let l=!1,u=!1;c&&(l=!Qt(t),u=yr(t),t=Oa(t)),s=new Array(t.length);for(let f=0,p=t.length;f<p;f++)s[f]=e(l?u?ta(ht(t[f])):ht(t[f]):t[f],f,void 0,i)}else if(typeof t=="number"){s=new Array(t);for(let c=0;c<t;c++)s[c]=e(c+1,c,void 0,i)}else if(je(t))if(t[Symbol.iterator])s=Array.from(t,(c,l)=>e(c,l,void 0,i));else{const c=Object.keys(t);s=new Array(c.length);for(let l=0,u=c.length;l<u;l++){const f=c[l];s[l]=e(t[f],f,l,i)}}else s=[];return s}const sl=t=>t?Pm(t)?Ba(t):sl(t.parent):null,Ii=At(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>sl(t.parent),$root:t=>sl(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>lm(t),$forceUpdate:t=>t.f||(t.f=()=>{ru(t.update)}),$nextTick:t=>t.n||(t.n=nu.bind(t.proxy)),$watch:t=>kE.bind(t)}),Nc=(t,e)=>t!==Oe&&!t.__isScriptSetup&&ke(t,e),uE={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:c,appContext:l}=t;let u;if(e[0]!=="$"){const y=o[e];if(y!==void 0)switch(y){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(Nc(r,e))return o[e]=1,r[e];if(s!==Oe&&ke(s,e))return o[e]=2,s[e];if((u=t.propsOptions[0])&&ke(u,e))return o[e]=3,i[e];if(n!==Oe&&ke(n,e))return o[e]=4,n[e];il&&(o[e]=0)}}const f=Ii[e];let p,m;if(f)return e==="$attrs"&&It(t.attrs,"get",""),f(t);if((p=c.__cssModules)&&(p=p[e]))return p;if(n!==Oe&&ke(n,e))return o[e]=4,n[e];if(m=l.config.globalProperties,ke(m,e))return m[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return Nc(s,e)?(s[e]=n,!0):r!==Oe&&ke(r,e)?(r[e]=n,!0):ke(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:i,type:o}},c){let l,u;return!!(n[c]||t!==Oe&&c[0]!=="$"&&ke(t,c)||Nc(e,c)||(l=i[0])&&ke(l,c)||ke(r,c)||ke(Ii,c)||ke(s.config.globalProperties,c)||(u=o.__cssModules)&&u[c])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:ke(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function rf(t){return he(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let il=!0;function hE(t){const e=lm(t),n=t.proxy,r=t.ctx;il=!1,e.beforeCreate&&sf(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:c,provide:l,inject:u,created:f,beforeMount:p,mounted:m,beforeUpdate:y,updated:x,activated:k,deactivated:R,beforeDestroy:V,beforeUnmount:B,destroyed:G,unmounted:Q,render:se,renderTracked:ge,renderTriggered:I,errorCaptured:_,serverPrefetch:v,expose:b,inheritAttrs:A,components:S,directives:w,filters:qe}=e;if(u&&fE(u,r,null),o)for(const de in o){const Ie=o[de];pe(Ie)&&(r[de]=Ie.bind(n))}if(s){const de=s.call(n,n);je(de)&&(t.data=Zi(de))}if(il=!0,i)for(const de in i){const Ie=i[de],Dt=pe(Ie)?Ie.bind(n,n):pe(Ie.get)?Ie.get.bind(n,n):vn,hn=!pe(Ie)&&pe(Ie.set)?Ie.set.bind(n):vn,Lt=ft({get:Dt,set:hn});Object.defineProperty(r,de,{enumerable:!0,configurable:!0,get:()=>Lt.value,set:ct=>Lt.value=ct})}if(c)for(const de in c)cm(c[de],r,n,de);if(l){const de=pe(l)?l.call(n):l;Reflect.ownKeys(de).forEach(Ie=>{Bo(Ie,de[Ie])})}f&&sf(f,t,"c");function Me(de,Ie){he(Ie)?Ie.forEach(Dt=>de(Dt.bind(n))):Ie&&de(Ie.bind(n))}if(Me(tE,p),Me(to,m),Me(nE,y),Me(rE,x),Me(Xv,k),Me(Zv,R),Me(cE,_),Me(aE,ge),Me(oE,I),Me(sE,B),Me(am,Q),Me(iE,v),he(b))if(b.length){const de=t.exposed||(t.exposed={});b.forEach(Ie=>{Object.defineProperty(de,Ie,{get:()=>n[Ie],set:Dt=>n[Ie]=Dt,enumerable:!0})})}else t.exposed||(t.exposed={});se&&t.render===vn&&(t.render=se),A!=null&&(t.inheritAttrs=A),S&&(t.components=S),w&&(t.directives=w),v&&sm(t)}function fE(t,e,n=vn){he(t)&&(t=ol(t));for(const r in t){const s=t[r];let i;je(s)?"default"in s?i=Yt(s.from||r,s.default,!0):i=Yt(s.from||r):i=Yt(s),Qe(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function sf(t,e,n){bn(he(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function cm(t,e,n,r){let s=r.includes(".")?Tm(n,r):()=>n[r];if(Ze(t)){const i=e[t];pe(i)&&ur(s,i)}else if(pe(t))ur(s,t.bind(n));else if(je(t))if(he(t))t.forEach(i=>cm(i,e,n,r));else{const i=pe(t.handler)?t.handler.bind(n):e[t.handler];pe(i)&&ur(s,i,t)}}function lm(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,c=i.get(e);let l;return c?l=c:!s.length&&!n&&!r?l=e:(l={},s.length&&s.forEach(u=>oa(l,u,o,!0)),oa(l,e,o)),je(e)&&i.set(e,l),l}function oa(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&oa(t,i,n,!0),s&&s.forEach(o=>oa(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const c=dE[o]||n&&n[o];t[o]=c?c(t[o],e[o]):e[o]}return t}const dE={data:of,props:af,emits:af,methods:hi,computed:hi,beforeCreate:St,created:St,beforeMount:St,mounted:St,beforeUpdate:St,updated:St,beforeDestroy:St,beforeUnmount:St,destroyed:St,unmounted:St,activated:St,deactivated:St,errorCaptured:St,serverPrefetch:St,components:hi,directives:hi,watch:mE,provide:of,inject:pE};function of(t,e){return e?t?function(){return At(pe(t)?t.call(this,this):t,pe(e)?e.call(this,this):e)}:e:t}function pE(t,e){return hi(ol(t),ol(e))}function ol(t){if(he(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function St(t,e){return t?[...new Set([].concat(t,e))]:e}function hi(t,e){return t?At(Object.create(null),t,e):e}function af(t,e){return t?he(t)&&he(e)?[...new Set([...t,...e])]:At(Object.create(null),rf(t),rf(e??{})):e}function mE(t,e){if(!t)return e;if(!e)return t;const n=At(Object.create(null),t);for(const r in e)n[r]=St(t[r],e[r]);return n}function um(){return{app:null,config:{isNativeTag:Ip,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let gE=0;function _E(t,e){return function(r,s=null){pe(r)||(r=At({},r)),s!=null&&!je(s)&&(s=null);const i=um(),o=new WeakSet,c=[];let l=!1;const u=i.app={_uid:gE++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:ZE,get config(){return i.config},set config(f){},use(f,...p){return o.has(f)||(f&&pe(f.install)?(o.add(f),f.install(u,...p)):pe(f)&&(o.add(f),f(u,...p))),u},mixin(f){return i.mixins.includes(f)||i.mixins.push(f),u},component(f,p){return p?(i.components[f]=p,u):i.components[f]},directive(f,p){return p?(i.directives[f]=p,u):i.directives[f]},mount(f,p,m){if(!l){const y=u._ceVNode||Fe(r,s);return y.appContext=i,m===!0?m="svg":m===!1&&(m=void 0),t(y,f,m),l=!0,u._container=f,f.__vue_app__=u,Ba(y.component)}},onUnmount(f){c.push(f)},unmount(){l&&(bn(c,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(f,p){return i.provides[f]=p,u},runWithContext(f){const p=zr;zr=u;try{return f()}finally{zr=p}}};return u}}let zr=null;function Bo(t,e){if(Nt){let n=Nt.provides;const r=Nt.parent&&Nt.parent.provides;r===n&&(n=Nt.provides=Object.create(r)),n[t]=e}}function Yt(t,e,n=!1){const r=Sm();if(r||zr){let s=zr?zr._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&pe(e)?e.call(r&&r.proxy):e}}function yE(){return!!(Sm()||zr)}const hm={},fm=()=>Object.create(hm),dm=t=>Object.getPrototypeOf(t)===hm;function vE(t,e,n,r=!1){const s={},i=fm();t.propsDefaults=Object.create(null),pm(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:Yp(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function EE(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,c=Pe(s),[l]=t.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const f=t.vnode.dynamicProps;for(let p=0;p<f.length;p++){let m=f[p];if(Fa(t.emitsOptions,m))continue;const y=e[m];if(l)if(ke(i,m))y!==i[m]&&(i[m]=y,u=!0);else{const x=_r(m);s[x]=al(l,c,x,y,t,!1)}else y!==i[m]&&(i[m]=y,u=!0)}}}else{pm(t,e,s,i)&&(u=!0);let f;for(const p in c)(!e||!ke(e,p)&&((f=es(p))===p||!ke(e,f)))&&(l?n&&(n[p]!==void 0||n[f]!==void 0)&&(s[p]=al(l,c,p,void 0,t,!0)):delete s[p]);if(i!==c)for(const p in i)(!e||!ke(e,p))&&(delete i[p],u=!0)}u&&Vn(t.attrs,"set","")}function pm(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,c;if(e)for(let l in e){if(yi(l))continue;const u=e[l];let f;s&&ke(s,f=_r(l))?!i||!i.includes(f)?n[f]=u:(c||(c={}))[f]=u:Fa(t.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,o=!0)}if(i){const l=Pe(n),u=c||Oe;for(let f=0;f<i.length;f++){const p=i[f];n[p]=al(s,l,p,u[p],t,!ke(u,p))}}return o}function al(t,e,n,r,s,i){const o=t[n];if(o!=null){const c=ke(o,"default");if(c&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&pe(l)){const{propsDefaults:u}=s;if(n in u)r=u[n];else{const f=no(s);r=u[n]=l.call(null,e),f()}}else r=l;s.ce&&s.ce._setProp(n,r)}o[0]&&(i&&!c?r=!1:o[1]&&(r===""||r===es(n))&&(r=!0))}return r}const wE=new WeakMap;function mm(t,e,n=!1){const r=n?wE:e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},c=[];let l=!1;if(!pe(t)){const f=p=>{l=!0;const[m,y]=mm(p,e,!0);At(o,m),y&&c.push(...y)};!n&&e.mixins.length&&e.mixins.forEach(f),t.extends&&f(t.extends),t.mixins&&t.mixins.forEach(f)}if(!i&&!l)return je(t)&&r.set(t,vs),vs;if(he(i))for(let f=0;f<i.length;f++){const p=_r(i[f]);cf(p)&&(o[p]=Oe)}else if(i)for(const f in i){const p=_r(f);if(cf(p)){const m=i[f],y=o[p]=he(m)||pe(m)?{type:m}:At({},m),x=y.type;let k=!1,R=!0;if(he(x))for(let V=0;V<x.length;++V){const B=x[V],G=pe(B)&&B.name;if(G==="Boolean"){k=!0;break}else G==="String"&&(R=!1)}else k=pe(x)&&x.name==="Boolean";y[0]=k,y[1]=R,(k||ke(y,"default"))&&c.push(p)}}const u=[o,c];return je(t)&&r.set(t,u),u}function cf(t){return t[0]!=="$"&&!yi(t)}const iu=t=>t==="_"||t==="_ctx"||t==="$stable",ou=t=>he(t)?t.map(_n):[_n(t)],TE=(t,e,n)=>{if(e._n)return e;const r=Ct((...s)=>ou(e(...s)),n);return r._c=!1,r},gm=(t,e,n)=>{const r=t._ctx;for(const s in t){if(iu(s))continue;const i=t[s];if(pe(i))e[s]=TE(s,i,r);else if(i!=null){const o=ou(i);e[s]=()=>o}}},_m=(t,e)=>{const n=ou(e);t.slots.default=()=>n},ym=(t,e,n)=>{for(const r in e)(n||!iu(r))&&(t[r]=e[r])},IE=(t,e,n)=>{const r=t.slots=fm();if(t.vnode.shapeFlag&32){const s=e._;s?(ym(r,e,n),n&&Cp(r,"_",s,!0)):gm(e,r)}else e&&_m(t,e)},AE=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=Oe;if(r.shapeFlag&32){const c=e._;c?n&&c===1?i=!1:ym(s,e,n):(i=!e.$stable,gm(e,s)),o=e}else e&&(_m(t,e),o={default:1});if(i)for(const c in s)!iu(c)&&o[c]==null&&delete s[c]},jt=UE;function bE(t){return RE(t)}function RE(t,e){const n=Va();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:c,createComment:l,setText:u,setElementText:f,parentNode:p,nextSibling:m,setScopeId:y=vn,insertStaticContent:x}=t,k=(E,T,P,L=null,U=null,O=null,K=void 0,H=null,$=!!T.dynamicChildren)=>{if(E===T)return;E&&!li(E,T)&&(L=M(E),ct(E,U,O,!0),E=null),T.patchFlag===-2&&($=!1,T.dynamicChildren=null);const{type:j,ref:ae,shapeFlag:J}=T;switch(j){case Ua:R(E,T,P,L);break;case vr:V(E,T,P,L);break;case jo:E==null&&B(T,P,L,K);break;case Mt:S(E,T,P,L,U,O,K,H,$);break;default:J&1?se(E,T,P,L,U,O,K,H,$):J&6?w(E,T,P,L,U,O,K,H,$):(J&64||J&128)&&j.process(E,T,P,L,U,O,K,H,$,ne)}ae!=null&&U?wi(ae,E&&E.ref,O,T||E,!T):ae==null&&E&&E.ref!=null&&wi(E.ref,null,O,E,!0)},R=(E,T,P,L)=>{if(E==null)r(T.el=c(T.children),P,L);else{const U=T.el=E.el;T.children!==E.children&&u(U,T.children)}},V=(E,T,P,L)=>{E==null?r(T.el=l(T.children||""),P,L):T.el=E.el},B=(E,T,P,L)=>{[E.el,E.anchor]=x(E.children,T,P,L,E.el,E.anchor)},G=({el:E,anchor:T},P,L)=>{let U;for(;E&&E!==T;)U=m(E),r(E,P,L),E=U;r(T,P,L)},Q=({el:E,anchor:T})=>{let P;for(;E&&E!==T;)P=m(E),s(E),E=P;s(T)},se=(E,T,P,L,U,O,K,H,$)=>{if(T.type==="svg"?K="svg":T.type==="math"&&(K="mathml"),E==null)ge(T,P,L,U,O,K,H,$);else{const j=E.el&&E.el._isVueCE?E.el:null;try{j&&j._beginPatch(),v(E,T,U,O,K,H,$)}finally{j&&j._endPatch()}}},ge=(E,T,P,L,U,O,K,H)=>{let $,j;const{props:ae,shapeFlag:J,transition:re,dirs:ce}=E;if($=E.el=o(E.type,O,ae&&ae.is,ae),J&8?f($,E.children):J&16&&_(E.children,$,null,L,U,Vc(E,O),K,H),ce&&Ur(E,null,L,"created"),I($,E,E.scopeId,K,L),ae){for(const Ne in ae)Ne!=="value"&&!yi(Ne)&&i($,Ne,null,ae[Ne],O,L);"value"in ae&&i($,"value",null,ae.value,O),(j=ae.onVnodeBeforeMount)&&pn(j,L,E)}ce&&Ur(E,null,L,"beforeMount");const _e=SE(U,re);_e&&re.beforeEnter($),r($,T,P),((j=ae&&ae.onVnodeMounted)||_e||ce)&&jt(()=>{j&&pn(j,L,E),_e&&re.enter($),ce&&Ur(E,null,L,"mounted")},U)},I=(E,T,P,L,U)=>{if(P&&y(E,P),L)for(let O=0;O<L.length;O++)y(E,L[O]);if(U){let O=U.subTree;if(T===O||Am(O.type)&&(O.ssContent===T||O.ssFallback===T)){const K=U.vnode;I(E,K,K.scopeId,K.slotScopeIds,U.parent)}}},_=(E,T,P,L,U,O,K,H,$=0)=>{for(let j=$;j<E.length;j++){const ae=E[j]=H?nr(E[j]):_n(E[j]);k(null,ae,T,P,L,U,O,K,H)}},v=(E,T,P,L,U,O,K)=>{const H=T.el=E.el;let{patchFlag:$,dynamicChildren:j,dirs:ae}=T;$|=E.patchFlag&16;const J=E.props||Oe,re=T.props||Oe;let ce;if(P&&Br(P,!1),(ce=re.onVnodeBeforeUpdate)&&pn(ce,P,T,E),ae&&Ur(T,E,P,"beforeUpdate"),P&&Br(P,!0),(J.innerHTML&&re.innerHTML==null||J.textContent&&re.textContent==null)&&f(H,""),j?b(E.dynamicChildren,j,H,P,L,Vc(T,U),O):K||Ie(E,T,H,null,P,L,Vc(T,U),O,!1),$>0){if($&16)A(H,J,re,P,U);else if($&2&&J.class!==re.class&&i(H,"class",null,re.class,U),$&4&&i(H,"style",J.style,re.style,U),$&8){const _e=T.dynamicProps;for(let Ne=0;Ne<_e.length;Ne++){const Se=_e[Ne],yt=J[Se],vt=re[Se];(vt!==yt||Se==="value")&&i(H,Se,yt,vt,U,P)}}$&1&&E.children!==T.children&&f(H,T.children)}else!K&&j==null&&A(H,J,re,P,U);((ce=re.onVnodeUpdated)||ae)&&jt(()=>{ce&&pn(ce,P,T,E),ae&&Ur(T,E,P,"updated")},L)},b=(E,T,P,L,U,O,K)=>{for(let H=0;H<T.length;H++){const $=E[H],j=T[H],ae=$.el&&($.type===Mt||!li($,j)||$.shapeFlag&198)?p($.el):P;k($,j,ae,null,L,U,O,K,!0)}},A=(E,T,P,L,U)=>{if(T!==P){if(T!==Oe)for(const O in T)!yi(O)&&!(O in P)&&i(E,O,T[O],null,U,L);for(const O in P){if(yi(O))continue;const K=P[O],H=T[O];K!==H&&O!=="value"&&i(E,O,H,K,U,L)}"value"in P&&i(E,"value",T.value,P.value,U)}},S=(E,T,P,L,U,O,K,H,$)=>{const j=T.el=E?E.el:c(""),ae=T.anchor=E?E.anchor:c("");let{patchFlag:J,dynamicChildren:re,slotScopeIds:ce}=T;ce&&(H=H?H.concat(ce):ce),E==null?(r(j,P,L),r(ae,P,L),_(T.children||[],P,ae,U,O,K,H,$)):J>0&&J&64&&re&&E.dynamicChildren?(b(E.dynamicChildren,re,P,U,O,K,H),(T.key!=null||U&&T===U.subTree)&&vm(E,T,!0)):Ie(E,T,P,ae,U,O,K,H,$)},w=(E,T,P,L,U,O,K,H,$)=>{T.slotScopeIds=H,E==null?T.shapeFlag&512?U.ctx.activate(T,P,L,K,$):qe(T,P,L,U,O,K,$):gt(E,T,$)},qe=(E,T,P,L,U,O,K)=>{const H=E.component=zE(E,L,U);if(im(E)&&(H.ctx.renderer=ne),KE(H,!1,K),H.asyncDep){if(U&&U.registerDep(H,Me,K),!E.el){const $=H.subTree=Fe(vr);V(null,$,T,P),E.placeholder=$.el}}else Me(H,E,T,P,U,O,K)},gt=(E,T,P)=>{const L=T.component=E.component;if(LE(E,T,P))if(L.asyncDep&&!L.asyncResolved){de(L,T,P);return}else L.next=T,L.update();else T.el=E.el,L.vnode=T},Me=(E,T,P,L,U,O,K)=>{const H=()=>{if(E.isMounted){let{next:J,bu:re,u:ce,parent:_e,vnode:Ne}=E;{const Ut=Em(E);if(Ut){J&&(J.el=Ne.el,de(E,J,K)),Ut.asyncDep.then(()=>{E.isUnmounted||H()});return}}let Se=J,yt;Br(E,!1),J?(J.el=Ne.el,de(E,J,K)):J=Ne,re&&Uo(re),(yt=J.props&&J.props.onVnodeBeforeUpdate)&&pn(yt,_e,J,Ne),Br(E,!0);const vt=uf(E),Ft=E.subTree;E.subTree=vt,k(Ft,vt,p(Ft.el),M(Ft),E,U,O),J.el=vt.el,Se===null&&FE(E,vt.el),ce&&jt(ce,U),(yt=J.props&&J.props.onVnodeUpdated)&&jt(()=>pn(yt,_e,J,Ne),U)}else{let J;const{el:re,props:ce}=T,{bm:_e,m:Ne,parent:Se,root:yt,type:vt}=E,Ft=Ti(T);Br(E,!1),_e&&Uo(_e),!Ft&&(J=ce&&ce.onVnodeBeforeMount)&&pn(J,Se,T),Br(E,!0);{yt.ce&&yt.ce._def.shadowRoot!==!1&&yt.ce._injectChildStyle(vt);const Ut=E.subTree=uf(E);k(null,Ut,P,L,E,U,O),T.el=Ut.el}if(Ne&&jt(Ne,U),!Ft&&(J=ce&&ce.onVnodeMounted)){const Ut=T;jt(()=>pn(J,Se,Ut),U)}(T.shapeFlag&256||Se&&Ti(Se.vnode)&&Se.vnode.shapeFlag&256)&&E.a&&jt(E.a,U),E.isMounted=!0,T=P=L=null}};E.scope.on();const $=E.effect=new Mp(H);E.scope.off();const j=E.update=$.run.bind($),ae=E.job=$.runIfDirty.bind($);ae.i=E,ae.id=E.uid,$.scheduler=()=>ru(ae),Br(E,!0),j()},de=(E,T,P)=>{T.component=E;const L=E.vnode.props;E.vnode=T,E.next=null,EE(E,T.props,L,P),AE(E,T.children,P),Fn(),tf(E),Un()},Ie=(E,T,P,L,U,O,K,H,$=!1)=>{const j=E&&E.children,ae=E?E.shapeFlag:0,J=T.children,{patchFlag:re,shapeFlag:ce}=T;if(re>0){if(re&128){hn(j,J,P,L,U,O,K,H,$);return}else if(re&256){Dt(j,J,P,L,U,O,K,H,$);return}}ce&8?(ae&16&&_t(j,U,O),J!==j&&f(P,J)):ae&16?ce&16?hn(j,J,P,L,U,O,K,H,$):_t(j,U,O,!0):(ae&8&&f(P,""),ce&16&&_(J,P,L,U,O,K,H,$))},Dt=(E,T,P,L,U,O,K,H,$)=>{E=E||vs,T=T||vs;const j=E.length,ae=T.length,J=Math.min(j,ae);let re;for(re=0;re<J;re++){const ce=T[re]=$?nr(T[re]):_n(T[re]);k(E[re],ce,P,null,U,O,K,H,$)}j>ae?_t(E,U,O,!0,!1,J):_(T,P,L,U,O,K,H,$,J)},hn=(E,T,P,L,U,O,K,H,$)=>{let j=0;const ae=T.length;let J=E.length-1,re=ae-1;for(;j<=J&&j<=re;){const ce=E[j],_e=T[j]=$?nr(T[j]):_n(T[j]);if(li(ce,_e))k(ce,_e,P,null,U,O,K,H,$);else break;j++}for(;j<=J&&j<=re;){const ce=E[J],_e=T[re]=$?nr(T[re]):_n(T[re]);if(li(ce,_e))k(ce,_e,P,null,U,O,K,H,$);else break;J--,re--}if(j>J){if(j<=re){const ce=re+1,_e=ce<ae?T[ce].el:L;for(;j<=re;)k(null,T[j]=$?nr(T[j]):_n(T[j]),P,_e,U,O,K,H,$),j++}}else if(j>re)for(;j<=J;)ct(E[j],U,O,!0),j++;else{const ce=j,_e=j,Ne=new Map;for(j=_e;j<=re;j++){const lt=T[j]=$?nr(T[j]):_n(T[j]);lt.key!=null&&Ne.set(lt.key,j)}let Se,yt=0;const vt=re-_e+1;let Ft=!1,Ut=0;const nn=new Array(vt);for(j=0;j<vt;j++)nn[j]=0;for(j=ce;j<=J;j++){const lt=E[j];if(yt>=vt){ct(lt,U,O,!0);continue}let st;if(lt.key!=null)st=Ne.get(lt.key);else for(Se=_e;Se<=re;Se++)if(nn[Se-_e]===0&&li(lt,T[Se])){st=Se;break}st===void 0?ct(lt,U,O,!0):(nn[st-_e]=j+1,st>=Ut?Ut=st:Ft=!0,k(lt,T[st],P,null,U,O,K,H,$),yt++)}const ss=Ft?PE(nn):vs;for(Se=ss.length-1,j=vt-1;j>=0;j--){const lt=_e+j,st=T[lt],zs=T[lt+1],Dr=lt+1<ae?zs.el||zs.placeholder:L;nn[j]===0?k(null,st,P,Dr,U,O,K,H,$):Ft&&(Se<0||j!==ss[Se]?Lt(st,P,Dr,2):Se--)}}},Lt=(E,T,P,L,U=null)=>{const{el:O,type:K,transition:H,children:$,shapeFlag:j}=E;if(j&6){Lt(E.component.subTree,T,P,L);return}if(j&128){E.suspense.move(T,P,L);return}if(j&64){K.move(E,T,P,ne);return}if(K===Mt){r(O,T,P);for(let J=0;J<$.length;J++)Lt($[J],T,P,L);r(E.anchor,T,P);return}if(K===jo){G(E,T,P);return}if(L!==2&&j&1&&H)if(L===0)H.beforeEnter(O),r(O,T,P),jt(()=>H.enter(O),U);else{const{leave:J,delayLeave:re,afterLeave:ce}=H,_e=()=>{E.ctx.isUnmounted?s(O):r(O,T,P)},Ne=()=>{O._isLeaving&&O[Jv](!0),J(O,()=>{_e(),ce&&ce()})};re?re(O,_e,Ne):Ne()}else r(O,T,P)},ct=(E,T,P,L=!1,U=!1)=>{const{type:O,props:K,ref:H,children:$,dynamicChildren:j,shapeFlag:ae,patchFlag:J,dirs:re,cacheIndex:ce}=E;if(J===-2&&(U=!1),H!=null&&(Fn(),wi(H,null,P,E,!0),Un()),ce!=null&&(T.renderCache[ce]=void 0),ae&256){T.ctx.deactivate(E);return}const _e=ae&1&&re,Ne=!Ti(E);let Se;if(Ne&&(Se=K&&K.onVnodeBeforeUnmount)&&pn(Se,T,E),ae&6)tn(E.component,P,L);else{if(ae&128){E.suspense.unmount(P,L);return}_e&&Ur(E,null,T,"beforeUnmount"),ae&64?E.type.remove(E,T,P,ne,L):j&&!j.hasOnce&&(O!==Mt||J>0&&J&64)?_t(j,T,P,!1,!0):(O===Mt&&J&384||!U&&ae&16)&&_t($,T,P),L&&Cn(E)}(Ne&&(Se=K&&K.onVnodeUnmounted)||_e)&&jt(()=>{Se&&pn(Se,T,E),_e&&Ur(E,null,T,"unmounted")},P)},Cn=E=>{const{type:T,el:P,anchor:L,transition:U}=E;if(T===Mt){en(P,L);return}if(T===jo){Q(E);return}const O=()=>{s(P),U&&!U.persisted&&U.afterLeave&&U.afterLeave()};if(E.shapeFlag&1&&U&&!U.persisted){const{leave:K,delayLeave:H}=U,$=()=>K(P,O);H?H(E.el,O,$):$()}else O()},en=(E,T)=>{let P;for(;E!==T;)P=m(E),s(E),E=P;s(T)},tn=(E,T,P)=>{const{bum:L,scope:U,job:O,subTree:K,um:H,m:$,a:j}=E;lf($),lf(j),L&&Uo(L),U.stop(),O&&(O.flags|=8,ct(K,E,T,P)),H&&jt(H,T),jt(()=>{E.isUnmounted=!0},T)},_t=(E,T,P,L=!1,U=!1,O=0)=>{for(let K=O;K<E.length;K++)ct(E[K],T,P,L,U)},M=E=>{if(E.shapeFlag&6)return M(E.component.subTree);if(E.shapeFlag&128)return E.suspense.next();const T=m(E.anchor||E.el),P=T&&T[Qv];return P?m(P):T};let X=!1;const Y=(E,T,P)=>{E==null?T._vnode&&ct(T._vnode,null,null,!0):k(T._vnode||null,E,T,null,null,null,P),T._vnode=E,X||(X=!0,tf(),tm(),X=!1)},ne={p:k,um:ct,m:Lt,r:Cn,mt:qe,mc:_,pc:Ie,pbc:b,n:M,o:t};return{render:Y,hydrate:void 0,createApp:_E(Y)}}function Vc({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Br({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function SE(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function vm(t,e,n=!1){const r=t.children,s=e.children;if(he(r)&&he(s))for(let i=0;i<r.length;i++){const o=r[i];let c=s[i];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=s[i]=nr(s[i]),c.el=o.el),!n&&c.patchFlag!==-2&&vm(o,c)),c.type===Ua&&c.patchFlag!==-1&&(c.el=o.el),c.type===vr&&!c.el&&(c.el=o.el)}}function PE(t){const e=t.slice(),n=[0];let r,s,i,o,c;const l=t.length;for(r=0;r<l;r++){const u=t[r];if(u!==0){if(s=n[n.length-1],t[s]<u){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)c=i+o>>1,t[n[c]]<u?i=c+1:o=c;u<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function Em(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Em(e)}function lf(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const CE=Symbol.for("v-scx"),xE=()=>Yt(CE);function ur(t,e,n){return wm(t,e,n)}function wm(t,e,n=Oe){const{immediate:r,deep:s,flush:i,once:o}=n,c=At({},n),l=e&&r||!e&&i!=="post";let u;if(Ui){if(i==="sync"){const y=xE();u=y.__watcherHandles||(y.__watcherHandles=[])}else if(!l){const y=()=>{};return y.stop=vn,y.resume=vn,y.pause=vn,y}}const f=Nt;c.call=(y,x,k)=>bn(y,f,x,k);let p=!1;i==="post"?c.scheduler=y=>{jt(y,f&&f.suspense)}:i!=="sync"&&(p=!0,c.scheduler=(y,x)=>{x?y():ru(y)}),c.augmentJob=y=>{e&&(y.flags|=4),p&&(y.flags|=2,f&&(y.id=f.uid,y.i=f))};const m=Gv(t,e,c);return Ui&&(u?u.push(m):l&&m()),m}function kE(t,e,n){const r=this.proxy,s=Ze(t)?t.includes(".")?Tm(r,t):()=>r[t]:t.bind(r,r);let i;pe(e)?i=e:(i=e.handler,n=e);const o=no(this),c=wm(s,i.bind(r),n);return o(),c}function Tm(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const NE=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${_r(e)}Modifiers`]||t[`${es(e)}Modifiers`];function VE(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Oe;let s=n;const i=e.startsWith("update:"),o=i&&NE(r,e.slice(7));o&&(o.trim&&(s=n.map(f=>Ze(f)?f.trim():f)),o.number&&(s=n.map(Wl)));let c,l=r[c=Sc(e)]||r[c=Sc(_r(e))];!l&&i&&(l=r[c=Sc(es(e))]),l&&bn(l,t,6,s);const u=r[c+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[c])return;t.emitted[c]=!0,bn(u,t,6,s)}}const DE=new WeakMap;function Im(t,e,n=!1){const r=n?DE:e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},c=!1;if(!pe(t)){const l=u=>{const f=Im(u,e,!0);f&&(c=!0,At(o,f))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!c?(je(t)&&r.set(t,null),null):(he(i)?i.forEach(l=>o[l]=null):At(o,i),je(t)&&r.set(t,o),o)}function Fa(t,e){return!t||!xa(e)?!1:(e=e.slice(2).replace(/Once$/,""),ke(t,e[0].toLowerCase()+e.slice(1))||ke(t,es(e))||ke(t,e))}function uf(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:c,emit:l,render:u,renderCache:f,props:p,data:m,setupState:y,ctx:x,inheritAttrs:k}=t,R=sa(t);let V,B;try{if(n.shapeFlag&4){const Q=s||r,se=Q;V=_n(u.call(se,Q,f,p,y,m,x)),B=c}else{const Q=e;V=_n(Q.length>1?Q(p,{attrs:c,slots:o,emit:l}):Q(p,null)),B=e.props?c:OE(c)}}catch(Q){Ai.length=0,Ma(Q,t,1),V=Fe(vr)}let G=V;if(B&&k!==!1){const Q=Object.keys(B),{shapeFlag:se}=G;Q.length&&se&7&&(i&&Q.some(ql)&&(B=ME(B,i)),G=Ss(G,B,!1,!0))}return n.dirs&&(G=Ss(G,null,!1,!0),G.dirs=G.dirs?G.dirs.concat(n.dirs):n.dirs),n.transition&&su(G,n.transition),V=G,sa(R),V}const OE=t=>{let e;for(const n in t)(n==="class"||n==="style"||xa(n))&&((e||(e={}))[n]=t[n]);return e},ME=(t,e)=>{const n={};for(const r in t)(!ql(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function LE(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:c,patchFlag:l}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?hf(r,o,u):!!o;if(l&8){const f=e.dynamicProps;for(let p=0;p<f.length;p++){const m=f[p];if(o[m]!==r[m]&&!Fa(u,m))return!0}}}else return(s||c)&&(!c||!c.$stable)?!0:r===o?!1:r?o?hf(r,o,u):!0:!!o;return!1}function hf(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!Fa(n,i))return!0}return!1}function FE({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const Am=t=>t.__isSuspense;function UE(t,e){e&&e.pendingBranch?he(t)?e.effects.push(...t):e.effects.push(t):Kv(t)}const Mt=Symbol.for("v-fgt"),Ua=Symbol.for("v-txt"),vr=Symbol.for("v-cmt"),jo=Symbol.for("v-stc"),Ai=[];let Ht=null;function ee(t=!1){Ai.push(Ht=t?null:[])}function BE(){Ai.pop(),Ht=Ai[Ai.length-1]||null}let Fi=1;function aa(t,e=!1){Fi+=t,t<0&&Ht&&e&&(Ht.hasOnce=!0)}function bm(t){return t.dynamicChildren=Fi>0?Ht||vs:null,BE(),Fi>0&&Ht&&Ht.push(t),t}function ie(t,e,n,r,s,i){return bm(q(t,e,n,r,s,i,!0))}function ca(t,e,n,r,s){return bm(Fe(t,e,n,r,s,!0))}function la(t){return t?t.__v_isVNode===!0:!1}function li(t,e){return t.type===e.type&&t.key===e.key}const Rm=({key:t})=>t??null,$o=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Ze(t)||Qe(t)||pe(t)?{i:Kt,r:t,k:e,f:!!n}:t:null);function q(t,e=null,n=null,r=0,s=null,i=t===Mt?0:1,o=!1,c=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Rm(e),ref:e&&$o(e),scopeId:rm,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Kt};return c?(au(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=Ze(n)?8:16),Fi>0&&!o&&Ht&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Ht.push(l),l}const Fe=jE;function jE(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===lE)&&(t=vr),la(t)){const c=Ss(t,e,!0);return n&&au(c,n),Fi>0&&!i&&Ht&&(c.shapeFlag&6?Ht[Ht.indexOf(t)]=c:Ht.push(c)),c.patchFlag=-2,c}if(XE(t)&&(t=t.__vccOpts),e){e=$E(e);let{class:c,style:l}=e;c&&!Ze(c)&&(e.class=Da(c)),je(l)&&(eu(l)&&!he(l)&&(l=At({},l)),e.style=zl(l))}const o=Ze(t)?1:Am(t)?128:Yv(t)?64:je(t)?4:pe(t)?2:0;return q(t,e,n,r,s,o,i,!0)}function $E(t){return t?eu(t)||dm(t)?At({},t):t:null}function Ss(t,e,n=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:c,transition:l}=t,u=e?HE(s||{},e):s,f={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&Rm(u),ref:e&&e.ref?n&&i?he(i)?i.concat($o(e)):[i,$o(e)]:$o(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:c,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Mt?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ss(t.ssContent),ssFallback:t.ssFallback&&Ss(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&su(f,l.clone(f)),f}function ze(t=" ",e=0){return Fe(Ua,null,t,e)}function qE(t,e){const n=Fe(jo,null,t);return n.staticCount=e,n}function Gt(t="",e=!1){return e?(ee(),ca(vr,null,t)):Fe(vr,null,t)}function _n(t){return t==null||typeof t=="boolean"?Fe(vr):he(t)?Fe(Mt,null,t.slice()):la(t)?nr(t):Fe(Ua,null,String(t))}function nr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Ss(t)}function au(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(he(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),au(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!dm(e)?e._ctx=Kt:s===3&&Kt&&(Kt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else pe(e)?(e={default:e,_ctx:Kt},n=32):(e=String(e),r&64?(n=16,e=[ze(e)]):n=8);t.children=e,t.shapeFlag|=n}function HE(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=Da([e.class,r.class]));else if(s==="style")e.style=zl([e.style,r.style]);else if(xa(s)){const i=e[s],o=r[s];o&&i!==o&&!(he(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function pn(t,e,n,r=null){bn(t,e,7,[n,r])}const GE=um();let WE=0;function zE(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||GE,i={uid:WE++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Vp(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:mm(r,s),emitsOptions:Im(r,s),emit:null,emitted:null,propsDefaults:Oe,inheritAttrs:r.inheritAttrs,ctx:Oe,data:Oe,props:Oe,attrs:Oe,slots:Oe,refs:Oe,setupState:Oe,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=VE.bind(null,i),t.ce&&t.ce(i),i}let Nt=null;const Sm=()=>Nt||Kt;let ua,cl;{const t=Va(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};ua=e("__VUE_INSTANCE_SETTERS__",n=>Nt=n),cl=e("__VUE_SSR_SETTERS__",n=>Ui=n)}const no=t=>{const e=Nt;return ua(t),t.scope.on(),()=>{t.scope.off(),ua(e)}},ff=()=>{Nt&&Nt.scope.off(),ua(null)};function Pm(t){return t.vnode.shapeFlag&4}let Ui=!1;function KE(t,e=!1,n=!1){e&&cl(e);const{props:r,children:s}=t.vnode,i=Pm(t);vE(t,r,i,e),IE(t,s,n||e);const o=i?QE(t,e):void 0;return e&&cl(!1),o}function QE(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,uE);const{setup:r}=n;if(r){Fn();const s=t.setupContext=r.length>1?JE(t):null,i=no(t),o=eo(r,t,0,[t.props,s]),c=bp(o);if(Un(),i(),(c||t.sp)&&!Ti(t)&&sm(t),c){if(o.then(ff,ff),e)return o.then(l=>{df(t,l)}).catch(l=>{Ma(l,t,0)});t.asyncDep=o}else df(t,o)}else Cm(t)}function df(t,e,n){pe(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:je(e)&&(t.setupState=Xp(e)),Cm(t)}function Cm(t,e,n){const r=t.type;t.render||(t.render=r.render||vn);{const s=no(t);Fn();try{hE(t)}finally{Un(),s()}}}const YE={get(t,e){return It(t,"get",""),t[e]}};function JE(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,YE),slots:t.slots,emit:t.emit,expose:e}}function Ba(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Xp(tu(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Ii)return Ii[n](t)},has(e,n){return n in e||n in Ii}})):t.proxy}function XE(t){return pe(t)&&"__vccOpts"in t}const ft=(t,e)=>qv(t,e,Ui);function xm(t,e,n){try{aa(-1);const r=arguments.length;return r===2?je(e)&&!he(e)?la(e)?Fe(t,null,[e]):Fe(t,e):Fe(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&la(n)&&(n=[n]),Fe(t,e,n))}finally{aa(1)}}const ZE="3.5.24";let ll;const pf=typeof window<"u"&&window.trustedTypes;if(pf)try{ll=pf.createPolicy("vue",{createHTML:t=>t})}catch{}const km=ll?t=>ll.createHTML(t):t=>t,ew="http://www.w3.org/2000/svg",tw="http://www.w3.org/1998/Math/MathML",Nn=typeof document<"u"?document:null,mf=Nn&&Nn.createElement("template"),nw={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?Nn.createElementNS(ew,t):e==="mathml"?Nn.createElementNS(tw,t):n?Nn.createElement(t,{is:n}):Nn.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>Nn.createTextNode(t),createComment:t=>Nn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Nn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{mf.innerHTML=km(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const c=mf.content;if(r==="svg"||r==="mathml"){const l=c.firstChild;for(;l.firstChild;)c.appendChild(l.firstChild);c.removeChild(l)}e.insertBefore(c,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},rw=Symbol("_vtc");function sw(t,e,n){const r=t[rw];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const gf=Symbol("_vod"),iw=Symbol("_vsh"),ow=Symbol(""),aw=/(?:^|;)\s*display\s*:/;function cw(t,e,n){const r=t.style,s=Ze(n);let i=!1;if(n&&!s){if(e)if(Ze(e))for(const o of e.split(";")){const c=o.slice(0,o.indexOf(":")).trim();n[c]==null&&qo(r,c,"")}else for(const o in e)n[o]==null&&qo(r,o,"");for(const o in n)o==="display"&&(i=!0),qo(r,o,n[o])}else if(s){if(e!==n){const o=r[ow];o&&(n+=";"+o),r.cssText=n,i=aw.test(n)}}else e&&t.removeAttribute("style");gf in t&&(t[gf]=i?r.display:"",t[iw]&&(r.display="none"))}const _f=/\s*!important$/;function qo(t,e,n){if(he(n))n.forEach(r=>qo(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=lw(t,e);_f.test(n)?t.setProperty(es(r),n.replace(_f,""),"important"):t[r]=n}}const yf=["Webkit","Moz","ms"],Dc={};function lw(t,e){const n=Dc[e];if(n)return n;let r=_r(e);if(r!=="filter"&&r in t)return Dc[e]=r;r=Pp(r);for(let s=0;s<yf.length;s++){const i=yf[s]+r;if(i in t)return Dc[e]=i}return e}const vf="http://www.w3.org/1999/xlink";function Ef(t,e,n,r,s,i=mv(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(vf,e.slice(6,e.length)):t.setAttributeNS(vf,e,n):n==null||i&&!xp(n)?t.removeAttribute(e):t.setAttribute(e,i?"":Rr(n)?String(n):n)}function wf(t,e,n,r,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?km(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const c=i==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(c!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const c=typeof t[e];c==="boolean"?n=xp(n):n==null&&c==="string"?(n="",o=!0):c==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(s||e)}function hs(t,e,n,r){t.addEventListener(e,n,r)}function uw(t,e,n,r){t.removeEventListener(e,n,r)}const Tf=Symbol("_vei");function hw(t,e,n,r,s=null){const i=t[Tf]||(t[Tf]={}),o=i[e];if(r&&o)o.value=r;else{const[c,l]=fw(e);if(r){const u=i[e]=mw(r,s);hs(t,c,u,l)}else o&&(uw(t,c,o,l),i[e]=void 0)}}const If=/(?:Once|Passive|Capture)$/;function fw(t){let e;if(If.test(t)){e={};let r;for(;r=t.match(If);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):es(t.slice(2)),e]}let Oc=0;const dw=Promise.resolve(),pw=()=>Oc||(dw.then(()=>Oc=0),Oc=Date.now());function mw(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;bn(gw(r,n.value),e,5,[r])};return n.value=t,n.attached=pw(),n}function gw(t,e){if(he(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const Af=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,_w=(t,e,n,r,s,i)=>{const o=s==="svg";e==="class"?sw(t,r,o):e==="style"?cw(t,n,r):xa(e)?ql(e)||hw(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):yw(t,e,r,o))?(wf(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Ef(t,e,r,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Ze(r))?wf(t,_r(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),Ef(t,e,r,o))};function yw(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&Af(e)&&pe(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Af(e)&&Ze(n)?!1:e in t}const bf=t=>{const e=t.props["onUpdate:modelValue"]||!1;return he(e)?n=>Uo(e,n):e};function vw(t){t.target.composing=!0}function Rf(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Mc=Symbol("_assign");function Sf(t,e,n){return e&&(t=t.trim()),n&&(t=Wl(t)),t}const an={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[Mc]=bf(s);const i=r||s.props&&s.props.type==="number";hs(t,e?"change":"input",o=>{o.target.composing||t[Mc](Sf(t.value,n,i))}),(n||i)&&hs(t,"change",()=>{t.value=Sf(t.value,n,i)}),e||(hs(t,"compositionstart",vw),hs(t,"compositionend",Rf),hs(t,"change",Rf))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},o){if(t[Mc]=bf(o),t.composing)return;const c=(i||t.type==="number")&&!/^0\d/.test(t.value)?Wl(t.value):t.value,l=e??"";c!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||s&&t.value.trim()===l)||(t.value=l))}},Ew=At({patchProp:_w},nw);let Pf;function ww(){return Pf||(Pf=bE(Ew))}const Tw=((...t)=>{const e=ww().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=Aw(r);if(!s)return;const i=e._component;!pe(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,Iw(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e});function Iw(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Aw(t){return Ze(t)?document.querySelector(t):t}let Nm;const ja=t=>Nm=t,Vm=Symbol();function ul(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var bi;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(bi||(bi={}));function bw(){const t=Dp(!0),e=t.run(()=>ye({}));let n=[],r=[];const s=tu({install(i){ja(s),s._a=i,i.provide(Vm,s),i.config.globalProperties.$pinia=s,r.forEach(o=>n.push(o)),r=[]},use(i){return this._a?n.push(i):r.push(i),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return s}const Dm=()=>{};function Cf(t,e,n,r=Dm){t.add(e);const s=()=>{t.delete(e)&&r()};return!n&&Op()&&gv(s),s}function ls(t,...e){t.forEach(n=>{n(...e)})}const Rw=t=>t(),xf=Symbol(),Lc=Symbol();function hl(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,r)=>t.set(r,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],s=t[n];ul(s)&&ul(r)&&t.hasOwnProperty(n)&&!Qe(r)&&!lr(r)?t[n]=hl(s,r):t[n]=r}return t}const Sw=Symbol();function Pw(t){return!ul(t)||!Object.prototype.hasOwnProperty.call(t,Sw)}const{assign:er}=Object;function Cw(t){return!!(Qe(t)&&t.effect)}function xw(t,e,n,r){const{state:s,actions:i,getters:o}=e,c=n.state.value[t];let l;function u(){c||(n.state.value[t]=s?s():{});const f=Uv(n.state.value[t]);return er(f,i,Object.keys(o||{}).reduce((p,m)=>(p[m]=tu(ft(()=>{ja(n);const y=n._s.get(t);return o[m].call(y,y)})),p),{}))}return l=Om(t,u,e,n,r,!0),l}function Om(t,e,n={},r,s,i){let o;const c=er({actions:{}},n),l={deep:!0};let u,f,p=new Set,m=new Set,y;const x=r.state.value[t];!i&&!x&&(r.state.value[t]={}),ye({});let k;function R(_){let v;u=f=!1,typeof _=="function"?(_(r.state.value[t]),v={type:bi.patchFunction,storeId:t,events:y}):(hl(r.state.value[t],_),v={type:bi.patchObject,payload:_,storeId:t,events:y});const b=k=Symbol();nu().then(()=>{k===b&&(u=!0)}),f=!0,ls(p,v,r.state.value[t])}const V=i?function(){const{state:v}=n,b=v?v():{};this.$patch(A=>{er(A,b)})}:Dm;function B(){o.stop(),p.clear(),m.clear(),r._s.delete(t)}const G=(_,v="")=>{if(xf in _)return _[Lc]=v,_;const b=function(){ja(r);const A=Array.from(arguments),S=new Set,w=new Set;function qe(de){S.add(de)}function gt(de){w.add(de)}ls(m,{args:A,name:b[Lc],store:se,after:qe,onError:gt});let Me;try{Me=_.apply(this&&this.$id===t?this:se,A)}catch(de){throw ls(w,de),de}return Me instanceof Promise?Me.then(de=>(ls(S,de),de)).catch(de=>(ls(w,de),Promise.reject(de))):(ls(S,Me),Me)};return b[xf]=!0,b[Lc]=v,b},Q={_p:r,$id:t,$onAction:Cf.bind(null,m),$patch:R,$reset:V,$subscribe(_,v={}){const b=Cf(p,_,v.detached,()=>A()),A=o.run(()=>ur(()=>r.state.value[t],S=>{(v.flush==="sync"?f:u)&&_({storeId:t,type:bi.direct,events:y},S)},er({},l,v)));return b},$dispose:B},se=Zi(Q);r._s.set(t,se);const I=(r._a&&r._a.runWithContext||Rw)(()=>r._e.run(()=>(o=Dp()).run(()=>e({action:G}))));for(const _ in I){const v=I[_];if(Qe(v)&&!Cw(v)||lr(v))i||(x&&Pw(v)&&(Qe(v)?v.value=x[_]:hl(v,x[_])),r.state.value[t][_]=v);else if(typeof v=="function"){const b=G(v,_);I[_]=b,c.actions[_]=v}}return er(se,I),er(Pe(se),I),Object.defineProperty(se,"$state",{get:()=>r.state.value[t],set:_=>{R(v=>{er(v,_)})}}),r._p.forEach(_=>{er(se,o.run(()=>_({store:se,app:r._a,pinia:r,options:c})))}),x&&i&&n.hydrate&&n.hydrate(se.$state,x),u=!0,f=!0,se}function kw(t,e,n){let r;const s=typeof e=="function";r=s?n:e;function i(o,c){const l=yE();return o=o||(l?Yt(Vm,null):null),o&&ja(o),o=Nm,o._s.has(t)||(s?Om(t,e,r,o):xw(t,r,o)),o._s.get(t)}return i.$id=t,i}const Nw="/logo.png";const fs=typeof document<"u";function Mm(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Vw(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&Mm(t.default)}const xe=Object.assign;function Fc(t,e){const n={};for(const r in e){const s=e[r];n[r]=ln(s)?s.map(t):t(s)}return n}const Ri=()=>{},ln=Array.isArray;function kf(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}const Lm=/#/g,Dw=/&/g,Ow=/\//g,Mw=/=/g,Lw=/\?/g,Fm=/\+/g,Fw=/%5B/g,Uw=/%5D/g,Um=/%5E/g,Bw=/%60/g,Bm=/%7B/g,jw=/%7C/g,jm=/%7D/g,$w=/%20/g;function cu(t){return t==null?"":encodeURI(""+t).replace(jw,"|").replace(Fw,"[").replace(Uw,"]")}function qw(t){return cu(t).replace(Bm,"{").replace(jm,"}").replace(Um,"^")}function fl(t){return cu(t).replace(Fm,"%2B").replace($w,"+").replace(Lm,"%23").replace(Dw,"%26").replace(Bw,"`").replace(Bm,"{").replace(jm,"}").replace(Um,"^")}function Hw(t){return fl(t).replace(Mw,"%3D")}function Gw(t){return cu(t).replace(Lm,"%23").replace(Lw,"%3F")}function Ww(t){return Gw(t).replace(Ow,"%2F")}function Bi(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const zw=/\/$/,Kw=t=>t.replace(zw,"");function Uc(t,e,n="/"){let r,s={},i="",o="";const c=e.indexOf("#");let l=e.indexOf("?");return l=c>=0&&l>c?-1:l,l>=0&&(r=e.slice(0,l),i=e.slice(l,c>0?c:e.length),s=t(i.slice(1))),c>=0&&(r=r||e.slice(0,c),o=e.slice(c,e.length)),r=Xw(r??e,n),{fullPath:r+i+o,path:r,query:s,hash:Bi(o)}}function Qw(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Nf(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function Yw(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&Ps(e.matched[r],n.matched[s])&&$m(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Ps(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function $m(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!Jw(t[n],e[n]))return!1;return!0}function Jw(t,e){return ln(t)?Vf(t,e):ln(e)?Vf(e,t):t===e}function Vf(t,e){return ln(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function Xw(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,c;for(o=0;o<r.length;o++)if(c=r[o],c!==".")if(c==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const Xn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let dl=(function(t){return t.pop="pop",t.push="push",t})({}),Bc=(function(t){return t.back="back",t.forward="forward",t.unknown="",t})({});function Zw(t){if(!t)if(fs){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),Kw(t)}const eT=/^[^#]+#/;function tT(t,e){return t.replace(eT,"#")+e}function nT(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const $a=()=>({left:window.scrollX,top:window.scrollY});function rT(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=nT(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Df(t,e){return(history.state?history.state.position-e:-1)+t}const pl=new Map;function sT(t,e){pl.set(t,e)}function iT(t){const e=pl.get(t);return pl.delete(t),e}function oT(t){return typeof t=="string"||t&&typeof t=="object"}function qm(t){return typeof t=="string"||typeof t=="symbol"}let Ge=(function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t})({});const Hm=Symbol("");Ge.MATCHER_NOT_FOUND+"",Ge.NAVIGATION_GUARD_REDIRECT+"",Ge.NAVIGATION_ABORTED+"",Ge.NAVIGATION_CANCELLED+"",Ge.NAVIGATION_DUPLICATED+"";function Cs(t,e){return xe(new Error,{type:t,[Hm]:!0},e)}function kn(t,e){return t instanceof Error&&Hm in t&&(e==null||!!(t.type&e))}const aT=["params","query","hash"];function cT(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of aT)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function lT(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<n.length;++r){const s=n[r].replace(Fm," "),i=s.indexOf("="),o=Bi(i<0?s:s.slice(0,i)),c=i<0?null:Bi(s.slice(i+1));if(o in e){let l=e[o];ln(l)||(l=e[o]=[l]),l.push(c)}else e[o]=c}return e}function Of(t){let e="";for(let n in t){const r=t[n];if(n=Hw(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(ln(r)?r.map(s=>s&&fl(s)):[r&&fl(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function uT(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=ln(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const hT=Symbol(""),Mf=Symbol(""),qa=Symbol(""),lu=Symbol(""),ml=Symbol("");function ui(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function rr(t,e,n,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((c,l)=>{const u=m=>{m===!1?l(Cs(Ge.NAVIGATION_ABORTED,{from:n,to:e})):m instanceof Error?l(m):oT(m)?l(Cs(Ge.NAVIGATION_GUARD_REDIRECT,{from:e,to:m})):(o&&r.enterCallbacks[s]===o&&typeof m=="function"&&o.push(m),c())},f=i(()=>t.call(r&&r.instances[s],e,n,u));let p=Promise.resolve(f);t.length<3&&(p=p.then(u)),p.catch(m=>l(m))})}function jc(t,e,n,r,s=i=>i()){const i=[];for(const o of t)for(const c in o.components){let l=o.components[c];if(!(e!=="beforeRouteEnter"&&!o.instances[c]))if(Mm(l)){const u=(l.__vccOpts||l)[e];u&&i.push(rr(u,n,r,o,c,s))}else{let u=l();i.push(()=>u.then(f=>{if(!f)throw new Error(`Couldn't resolve component "${c}" at "${o.path}"`);const p=Vw(f)?f.default:f;o.mods[c]=f,o.components[c]=p;const m=(p.__vccOpts||p)[e];return m&&rr(m,n,r,o,c,s)()}))}}return i}function fT(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const c=e.matched[o];c&&(t.matched.find(u=>Ps(u,c))?r.push(c):n.push(c));const l=t.matched[o];l&&(e.matched.find(u=>Ps(u,l))||s.push(l))}return[n,r,s]}let dT=()=>location.protocol+"//"+location.host;function Gm(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let o=s.includes(t.slice(i))?t.slice(i).length:1,c=s.slice(o);return c[0]!=="/"&&(c="/"+c),Nf(c,"")}return Nf(n,t)+r+s}function pT(t,e,n,r){let s=[],i=[],o=null;const c=({state:m})=>{const y=Gm(t,location),x=n.value,k=e.value;let R=0;if(m){if(n.value=y,e.value=m,o&&o===x){o=null;return}R=k?m.position-k.position:0}else r(y);s.forEach(V=>{V(n.value,x,{delta:R,type:dl.pop,direction:R?R>0?Bc.forward:Bc.back:Bc.unknown})})};function l(){o=n.value}function u(m){s.push(m);const y=()=>{const x=s.indexOf(m);x>-1&&s.splice(x,1)};return i.push(y),y}function f(){if(document.visibilityState==="hidden"){const{history:m}=window;if(!m.state)return;m.replaceState(xe({},m.state,{scroll:$a()}),"")}}function p(){for(const m of i)m();i=[],window.removeEventListener("popstate",c),window.removeEventListener("pagehide",f),document.removeEventListener("visibilitychange",f)}return window.addEventListener("popstate",c),window.addEventListener("pagehide",f),document.addEventListener("visibilitychange",f),{pauseListeners:l,listen:u,destroy:p}}function Lf(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?$a():null}}function mT(t){const{history:e,location:n}=window,r={value:Gm(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,u,f){const p=t.indexOf("#"),m=p>-1?(n.host&&document.querySelector("base")?t:t.slice(p))+l:dT()+t+l;try{e[f?"replaceState":"pushState"](u,"",m),s.value=u}catch(y){console.error(y),n[f?"replace":"assign"](m)}}function o(l,u){i(l,xe({},e.state,Lf(s.value.back,l,s.value.forward,!0),u,{position:s.value.position}),!0),r.value=l}function c(l,u){const f=xe({},s.value,e.state,{forward:l,scroll:$a()});i(f.current,f,!0),i(l,xe({},Lf(r.value,l,null),{position:f.position+1},u),!1),r.value=l}return{location:r,state:s,push:c,replace:o}}function gT(t){t=Zw(t);const e=mT(t),n=pT(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=xe({location:"",base:t,go:r,createHref:tT.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}let qr=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t})({});var nt=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t})(nt||{});const _T={type:qr.Static,value:""},yT=/[a-zA-Z0-9_]/;function vT(t){if(!t)return[[]];if(t==="/")return[[_T]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(y){throw new Error(`ERR (${n})/"${u}": ${y}`)}let n=nt.Static,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let c=0,l,u="",f="";function p(){u&&(n===nt.Static?i.push({type:qr.Static,value:u}):n===nt.Param||n===nt.ParamRegExp||n===nt.ParamRegExpEnd?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:qr.Param,value:u,regexp:f,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function m(){u+=l}for(;c<t.length;){if(l=t[c++],l==="\\"&&n!==nt.ParamRegExp){r=n,n=nt.EscapeNext;continue}switch(n){case nt.Static:l==="/"?(u&&p(),o()):l===":"?(p(),n=nt.Param):m();break;case nt.EscapeNext:m(),n=r;break;case nt.Param:l==="("?n=nt.ParamRegExp:yT.test(l)?m():(p(),n=nt.Static,l!=="*"&&l!=="?"&&l!=="+"&&c--);break;case nt.ParamRegExp:l===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+l:n=nt.ParamRegExpEnd:f+=l;break;case nt.ParamRegExpEnd:p(),n=nt.Static,l!=="*"&&l!=="?"&&l!=="+"&&c--,f="";break;default:e("Unknown state");break}}return n===nt.ParamRegExp&&e(`Unfinished custom RegExp for param "${u}"`),p(),o(),s}const Ff="[^/]+?",ET={sensitive:!1,strict:!1,start:!0,end:!0};var Pt=(function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t})(Pt||{});const wT=/[.+*?^${}()[\]/\\]/g;function TT(t,e){const n=xe({},ET,e),r=[];let s=n.start?"^":"";const i=[];for(const u of t){const f=u.length?[]:[Pt.Root];n.strict&&!u.length&&(s+="/");for(let p=0;p<u.length;p++){const m=u[p];let y=Pt.Segment+(n.sensitive?Pt.BonusCaseSensitive:0);if(m.type===qr.Static)p||(s+="/"),s+=m.value.replace(wT,"\\$&"),y+=Pt.Static;else if(m.type===qr.Param){const{value:x,repeatable:k,optional:R,regexp:V}=m;i.push({name:x,repeatable:k,optional:R});const B=V||Ff;if(B!==Ff){y+=Pt.BonusCustomRegExp;try{`${B}`}catch(Q){throw new Error(`Invalid custom RegExp for param "${x}" (${B}): `+Q.message)}}let G=k?`((?:${B})(?:/(?:${B}))*)`:`(${B})`;p||(G=R&&u.length<2?`(?:/${G})`:"/"+G),R&&(G+="?"),s+=G,y+=Pt.Dynamic,R&&(y+=Pt.BonusOptional),k&&(y+=Pt.BonusRepeatable),B===".*"&&(y+=Pt.BonusWildcard)}f.push(y)}r.push(f)}if(n.strict&&n.end){const u=r.length-1;r[u][r[u].length-1]+=Pt.BonusStrict}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function c(u){const f=u.match(o),p={};if(!f)return null;for(let m=1;m<f.length;m++){const y=f[m]||"",x=i[m-1];p[x.name]=y&&x.repeatable?y.split("/"):y}return p}function l(u){let f="",p=!1;for(const m of t){(!p||!f.endsWith("/"))&&(f+="/"),p=!1;for(const y of m)if(y.type===qr.Static)f+=y.value;else if(y.type===qr.Param){const{value:x,repeatable:k,optional:R}=y,V=x in u?u[x]:"";if(ln(V)&&!k)throw new Error(`Provided param "${x}" is an array but it is not repeatable (* or + modifiers)`);const B=ln(V)?V.join("/"):V;if(!B)if(R)m.length<2&&(f.endsWith("/")?f=f.slice(0,-1):p=!0);else throw new Error(`Missing required param "${x}"`);f+=B}}return f||"/"}return{re:o,score:r,keys:i,parse:c,stringify:l}}function IT(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===Pt.Static+Pt.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===Pt.Static+Pt.Segment?1:-1:0}function Wm(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=IT(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(Uf(r))return 1;if(Uf(s))return-1}return s.length-r.length}function Uf(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const AT={strict:!1,end:!0,sensitive:!1};function bT(t,e,n){const r=TT(vT(t.path),n),s=xe(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function RT(t,e){const n=[],r=new Map;e=kf(AT,e);function s(p){return r.get(p)}function i(p,m,y){const x=!y,k=jf(p);k.aliasOf=y&&y.record;const R=kf(e,p),V=[k];if("alias"in p){const Q=typeof p.alias=="string"?[p.alias]:p.alias;for(const se of Q)V.push(jf(xe({},k,{components:y?y.record.components:k.components,path:se,aliasOf:y?y.record:k})))}let B,G;for(const Q of V){const{path:se}=Q;if(m&&se[0]!=="/"){const ge=m.record.path,I=ge[ge.length-1]==="/"?"":"/";Q.path=m.record.path+(se&&I+se)}if(B=bT(Q,m,R),y?y.alias.push(B):(G=G||B,G!==B&&G.alias.push(B),x&&p.name&&!$f(B)&&o(p.name)),zm(B)&&l(B),k.children){const ge=k.children;for(let I=0;I<ge.length;I++)i(ge[I],B,y&&y.children[I])}y=y||B}return G?()=>{o(G)}:Ri}function o(p){if(qm(p)){const m=r.get(p);m&&(r.delete(p),n.splice(n.indexOf(m),1),m.children.forEach(o),m.alias.forEach(o))}else{const m=n.indexOf(p);m>-1&&(n.splice(m,1),p.record.name&&r.delete(p.record.name),p.children.forEach(o),p.alias.forEach(o))}}function c(){return n}function l(p){const m=CT(p,n);n.splice(m,0,p),p.record.name&&!$f(p)&&r.set(p.record.name,p)}function u(p,m){let y,x={},k,R;if("name"in p&&p.name){if(y=r.get(p.name),!y)throw Cs(Ge.MATCHER_NOT_FOUND,{location:p});R=y.record.name,x=xe(Bf(m.params,y.keys.filter(G=>!G.optional).concat(y.parent?y.parent.keys.filter(G=>G.optional):[]).map(G=>G.name)),p.params&&Bf(p.params,y.keys.map(G=>G.name))),k=y.stringify(x)}else if(p.path!=null)k=p.path,y=n.find(G=>G.re.test(k)),y&&(x=y.parse(k),R=y.record.name);else{if(y=m.name?r.get(m.name):n.find(G=>G.re.test(m.path)),!y)throw Cs(Ge.MATCHER_NOT_FOUND,{location:p,currentLocation:m});R=y.record.name,x=xe({},m.params,p.params),k=y.stringify(x)}const V=[];let B=y;for(;B;)V.unshift(B.record),B=B.parent;return{name:R,path:k,params:x,matched:V,meta:PT(V)}}t.forEach(p=>i(p));function f(){n.length=0,r.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:f,getRoutes:c,getRecordMatcher:s}}function Bf(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function jf(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:ST(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function ST(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function $f(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function PT(t){return t.reduce((e,n)=>xe(e,n.meta),{})}function CT(t,e){let n=0,r=e.length;for(;n!==r;){const i=n+r>>1;Wm(t,e[i])<0?r=i:n=i+1}const s=xT(t);return s&&(r=e.lastIndexOf(s,r-1)),r}function xT(t){let e=t;for(;e=e.parent;)if(zm(e)&&Wm(t,e)===0)return e}function zm({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function qf(t){const e=Yt(qa),n=Yt(lu),r=ft(()=>{const l=be(t.to);return e.resolve(l)}),s=ft(()=>{const{matched:l}=r.value,{length:u}=l,f=l[u-1],p=n.matched;if(!f||!p.length)return-1;const m=p.findIndex(Ps.bind(null,f));if(m>-1)return m;const y=Hf(l[u-2]);return u>1&&Hf(f)===y&&p[p.length-1].path!==y?p.findIndex(Ps.bind(null,l[u-2])):m}),i=ft(()=>s.value>-1&&DT(n.params,r.value.params)),o=ft(()=>s.value>-1&&s.value===n.matched.length-1&&$m(n.params,r.value.params));function c(l={}){if(VT(l)){const u=e[be(t.replace)?"replace":"push"](be(t.to)).catch(Ri);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:r,href:ft(()=>r.value.href),isActive:i,isExactActive:o,navigate:c}}function kT(t){return t.length===1?t[0]:t}const NT=Pn({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:qf,setup(t,{slots:e}){const n=Zi(qf(t)),{options:r}=Yt(qa),s=ft(()=>({[Gf(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Gf(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&kT(e.default(n));return t.custom?i:xm("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),xt=NT;function VT(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function DT(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!ln(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function Hf(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Gf=(t,e,n)=>t??e??n,OT=Pn({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Yt(ml),s=ft(()=>t.route||r.value),i=Yt(Mf,0),o=ft(()=>{let u=be(i);const{matched:f}=s.value;let p;for(;(p=f[u])&&!p.components;)u++;return u}),c=ft(()=>s.value.matched[o.value]);Bo(Mf,ft(()=>o.value+1)),Bo(hT,c),Bo(ml,s);const l=ye();return ur(()=>[l.value,c.value,t.name],([u,f,p],[m,y,x])=>{f&&(f.instances[p]=u,y&&y!==f&&u&&u===m&&(f.leaveGuards.size||(f.leaveGuards=y.leaveGuards),f.updateGuards.size||(f.updateGuards=y.updateGuards))),u&&f&&(!y||!Ps(f,y)||!m)&&(f.enterCallbacks[p]||[]).forEach(k=>k(u))},{flush:"post"}),()=>{const u=s.value,f=t.name,p=c.value,m=p&&p.components[f];if(!m)return Wf(n.default,{Component:m,route:u});const y=p.props[f],x=y?y===!0?u.params:typeof y=="function"?y(u):y:null,R=xm(m,xe({},x,e,{onVnodeUnmounted:V=>{V.component.isUnmounted&&(p.instances[f]=null)},ref:l}));return Wf(n.default,{Component:R,route:u})||R}}});function Wf(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const Km=OT;function MT(t){const e=RT(t.routes,t),n=t.parseQuery||lT,r=t.stringifyQuery||Of,s=t.history,i=ui(),o=ui(),c=ui(),l=Mv(Xn);let u=Xn;fs&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=Fc.bind(null,M=>""+M),p=Fc.bind(null,Ww),m=Fc.bind(null,Bi);function y(M,X){let Y,ne;return qm(M)?(Y=e.getRecordMatcher(M),ne=X):ne=M,e.addRoute(ne,Y)}function x(M){const X=e.getRecordMatcher(M);X&&e.removeRoute(X)}function k(){return e.getRoutes().map(M=>M.record)}function R(M){return!!e.getRecordMatcher(M)}function V(M,X){if(X=xe({},X||l.value),typeof M=="string"){const P=Uc(n,M,X.path),L=e.resolve({path:P.path},X),U=s.createHref(P.fullPath);return xe(P,L,{params:m(L.params),hash:Bi(P.hash),redirectedFrom:void 0,href:U})}let Y;if(M.path!=null)Y=xe({},M,{path:Uc(n,M.path,X.path).path});else{const P=xe({},M.params);for(const L in P)P[L]==null&&delete P[L];Y=xe({},M,{params:p(P)}),X.params=p(X.params)}const ne=e.resolve(Y,X),ve=M.hash||"";ne.params=f(m(ne.params));const E=Qw(r,xe({},M,{hash:qw(ve),path:ne.path})),T=s.createHref(E);return xe({fullPath:E,hash:ve,query:r===Of?uT(M.query):M.query||{}},ne,{redirectedFrom:void 0,href:T})}function B(M){return typeof M=="string"?Uc(n,M,l.value.path):xe({},M)}function G(M,X){if(u!==M)return Cs(Ge.NAVIGATION_CANCELLED,{from:X,to:M})}function Q(M){return I(M)}function se(M){return Q(xe(B(M),{replace:!0}))}function ge(M,X){const Y=M.matched[M.matched.length-1];if(Y&&Y.redirect){const{redirect:ne}=Y;let ve=typeof ne=="function"?ne(M,X):ne;return typeof ve=="string"&&(ve=ve.includes("?")||ve.includes("#")?ve=B(ve):{path:ve},ve.params={}),xe({query:M.query,hash:M.hash,params:ve.path!=null?{}:M.params},ve)}}function I(M,X){const Y=u=V(M),ne=l.value,ve=M.state,E=M.force,T=M.replace===!0,P=ge(Y,ne);if(P)return I(xe(B(P),{state:typeof P=="object"?xe({},ve,P.state):ve,force:E,replace:T}),X||Y);const L=Y;L.redirectedFrom=X;let U;return!E&&Yw(r,ne,Y)&&(U=Cs(Ge.NAVIGATION_DUPLICATED,{to:L,from:ne}),Lt(ne,ne,!0,!1)),(U?Promise.resolve(U):b(L,ne)).catch(O=>kn(O)?kn(O,Ge.NAVIGATION_GUARD_REDIRECT)?O:hn(O):Ie(O,L,ne)).then(O=>{if(O){if(kn(O,Ge.NAVIGATION_GUARD_REDIRECT))return I(xe({replace:T},B(O.to),{state:typeof O.to=="object"?xe({},ve,O.to.state):ve,force:E}),X||L)}else O=S(L,ne,!0,T,ve);return A(L,ne,O),O})}function _(M,X){const Y=G(M,X);return Y?Promise.reject(Y):Promise.resolve()}function v(M){const X=en.values().next().value;return X&&typeof X.runWithContext=="function"?X.runWithContext(M):M()}function b(M,X){let Y;const[ne,ve,E]=fT(M,X);Y=jc(ne.reverse(),"beforeRouteLeave",M,X);for(const P of ne)P.leaveGuards.forEach(L=>{Y.push(rr(L,M,X))});const T=_.bind(null,M,X);return Y.push(T),_t(Y).then(()=>{Y=[];for(const P of i.list())Y.push(rr(P,M,X));return Y.push(T),_t(Y)}).then(()=>{Y=jc(ve,"beforeRouteUpdate",M,X);for(const P of ve)P.updateGuards.forEach(L=>{Y.push(rr(L,M,X))});return Y.push(T),_t(Y)}).then(()=>{Y=[];for(const P of E)if(P.beforeEnter)if(ln(P.beforeEnter))for(const L of P.beforeEnter)Y.push(rr(L,M,X));else Y.push(rr(P.beforeEnter,M,X));return Y.push(T),_t(Y)}).then(()=>(M.matched.forEach(P=>P.enterCallbacks={}),Y=jc(E,"beforeRouteEnter",M,X,v),Y.push(T),_t(Y))).then(()=>{Y=[];for(const P of o.list())Y.push(rr(P,M,X));return Y.push(T),_t(Y)}).catch(P=>kn(P,Ge.NAVIGATION_CANCELLED)?P:Promise.reject(P))}function A(M,X,Y){c.list().forEach(ne=>v(()=>ne(M,X,Y)))}function S(M,X,Y,ne,ve){const E=G(M,X);if(E)return E;const T=X===Xn,P=fs?history.state:{};Y&&(ne||T?s.replace(M.fullPath,xe({scroll:T&&P&&P.scroll},ve)):s.push(M.fullPath,ve)),l.value=M,Lt(M,X,Y,T),hn()}let w;function qe(){w||(w=s.listen((M,X,Y)=>{if(!tn.listening)return;const ne=V(M),ve=ge(ne,tn.currentRoute.value);if(ve){I(xe(ve,{replace:!0,force:!0}),ne).catch(Ri);return}u=ne;const E=l.value;fs&&sT(Df(E.fullPath,Y.delta),$a()),b(ne,E).catch(T=>kn(T,Ge.NAVIGATION_ABORTED|Ge.NAVIGATION_CANCELLED)?T:kn(T,Ge.NAVIGATION_GUARD_REDIRECT)?(I(xe(B(T.to),{force:!0}),ne).then(P=>{kn(P,Ge.NAVIGATION_ABORTED|Ge.NAVIGATION_DUPLICATED)&&!Y.delta&&Y.type===dl.pop&&s.go(-1,!1)}).catch(Ri),Promise.reject()):(Y.delta&&s.go(-Y.delta,!1),Ie(T,ne,E))).then(T=>{T=T||S(ne,E,!1),T&&(Y.delta&&!kn(T,Ge.NAVIGATION_CANCELLED)?s.go(-Y.delta,!1):Y.type===dl.pop&&kn(T,Ge.NAVIGATION_ABORTED|Ge.NAVIGATION_DUPLICATED)&&s.go(-1,!1)),A(ne,E,T)}).catch(Ri)}))}let gt=ui(),Me=ui(),de;function Ie(M,X,Y){hn(M);const ne=Me.list();return ne.length?ne.forEach(ve=>ve(M,X,Y)):console.error(M),Promise.reject(M)}function Dt(){return de&&l.value!==Xn?Promise.resolve():new Promise((M,X)=>{gt.add([M,X])})}function hn(M){return de||(de=!M,qe(),gt.list().forEach(([X,Y])=>M?Y(M):X()),gt.reset()),M}function Lt(M,X,Y,ne){const{scrollBehavior:ve}=t;if(!fs||!ve)return Promise.resolve();const E=!Y&&iT(Df(M.fullPath,0))||(ne||!Y)&&history.state&&history.state.scroll||null;return nu().then(()=>ve(M,X,E)).then(T=>T&&rT(T)).catch(T=>Ie(T,M,X))}const ct=M=>s.go(M);let Cn;const en=new Set,tn={currentRoute:l,listening:!0,addRoute:y,removeRoute:x,clearRoutes:e.clearRoutes,hasRoute:R,getRoutes:k,resolve:V,options:t,push:Q,replace:se,go:ct,back:()=>ct(-1),forward:()=>ct(1),beforeEach:i.add,beforeResolve:o.add,afterEach:c.add,onError:Me.add,isReady:Dt,install(M){M.component("RouterLink",xt),M.component("RouterView",Km),M.config.globalProperties.$router=tn,Object.defineProperty(M.config.globalProperties,"$route",{enumerable:!0,get:()=>be(l)}),fs&&!Cn&&l.value===Xn&&(Cn=!0,Q(s.location).catch(ne=>{}));const X={};for(const ne in Xn)Object.defineProperty(X,ne,{get:()=>l.value[ne],enumerable:!0});M.provide(qa,tn),M.provide(lu,Yp(X)),M.provide(ml,l);const Y=M.unmount;en.add(M),M.unmount=function(){en.delete(M),en.size<1&&(u=Xn,w&&w(),w=null,l.value=Xn,Cn=!1,de=!1),Y()}}};function _t(M){return M.reduce((X,Y)=>X.then(()=>v(Y)),Promise.resolve())}return tn}function Fs(){return Yt(qa)}function Ha(t){return Yt(lu)}const LT=()=>{};var zf={};const Qm=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},FT=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],c=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Ym={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,c=o?t[s+1]:0,l=s+2<t.length,u=l?t[s+2]:0,f=i>>2,p=(i&3)<<4|c>>4;let m=(c&15)<<2|u>>6,y=u&63;l||(y=64,o||(m=64)),r.push(n[f],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Qm(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):FT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||u==null||p==null)throw new UT;const m=i<<2|c>>4;if(r.push(m),u!==64){const y=c<<4&240|u>>2;if(r.push(y),p!==64){const x=u<<6&192|p;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class UT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const BT=function(t){const e=Qm(t);return Ym.encodeByteArray(e,!0)},ha=function(t){return BT(t).replace(/\./g,"")},Jm=function(t){try{return Ym.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function jT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const $T=()=>jT().__FIREBASE_DEFAULTS__,qT=()=>{if(typeof process>"u"||typeof zf>"u")return;const t=zf.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},HT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Jm(t[1]);return e&&JSON.parse(e)},Ga=()=>{try{return LT()||$T()||qT()||HT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Xm=t=>Ga()?.emulatorHosts?.[t],GT=t=>{const e=Xm(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Zm=()=>Ga()?.config,eg=t=>Ga()?.[`_${t}`];class WT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function Us(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function tg(t){return(await fetch(t,{credentials:"include"})).ok}function zT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[ha(JSON.stringify(n)),ha(JSON.stringify(o)),""].join(".")}const Si={};function KT(){const t={prod:[],emulator:[]};for(const e of Object.keys(Si))Si[e]?t.emulator.push(e):t.prod.push(e);return t}function QT(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Kf=!1;function ng(t,e){if(typeof window>"u"||typeof document>"u"||!Us(window.location.host)||Si[t]===e||Si[t]||Kf)return;Si[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",i=KT().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function c(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function l(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{Kf=!0,o()},m}function f(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=QT(r),y=n("text"),x=document.getElementById(y)||document.createElement("span"),k=n("learnmore"),R=document.getElementById(k)||document.createElement("a"),V=n("preprendIcon"),B=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const G=m.element;c(G),f(R,k);const Q=u();l(B,V),G.append(B,x,R,Q),document.body.appendChild(G)}i?(x.innerText="Preview backend disconnected.",B.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(B.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function bt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function YT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(bt())}function JT(){const t=Ga()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function XT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ZT(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function eI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function tI(){const t=bt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function nI(){return!JT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rI(){try{return typeof indexedDB=="object"}catch{return!1}}function sI(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(n){e(n)}})}const iI="FirebaseError";class Gn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=iI,Object.setPrototypeOf(this,Gn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ro.prototype.create)}}class ro{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?oI(i,r):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new Gn(s,c,r)}}function oI(t,e){return t.replace(aI,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const aI=/\{\$([^}]+)}/g;function cI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Kr(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Qf(i)&&Qf(o)){if(!Kr(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Qf(t){return t!==null&&typeof t=="object"}function so(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function fi(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function di(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function lI(t,e){const n=new uI(t,e);return n.subscribe.bind(n)}class uI{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");hI(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=$c),s.error===void 0&&(s.error=$c),s.complete===void 0&&(s.complete=$c);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function hI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function $c(){}function et(t){return t&&t._delegate?t._delegate:t}class Qr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const $r="[DEFAULT]";class fI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new WT;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(pI(e))try{this.getOrInitializeService({instanceIdentifier:$r})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=$r){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$r){return this.instances.has(e)}getOptions(e=$r){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:dI(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=$r){return this.component?this.component.multipleInstances?e:$r:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function dI(t){return t===$r?void 0:t}function pI(t){return t.instantiationMode==="EAGER"}class mI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new fI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Ee;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ee||(Ee={}));const gI={debug:Ee.DEBUG,verbose:Ee.VERBOSE,info:Ee.INFO,warn:Ee.WARN,error:Ee.ERROR,silent:Ee.SILENT},_I=Ee.INFO,yI={[Ee.DEBUG]:"log",[Ee.VERBOSE]:"log",[Ee.INFO]:"info",[Ee.WARN]:"warn",[Ee.ERROR]:"error"},vI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=yI[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class uu{constructor(e){this.name=e,this._logLevel=_I,this._logHandler=vI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?gI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ee.DEBUG,...e),this._logHandler(this,Ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ee.VERBOSE,...e),this._logHandler(this,Ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ee.INFO,...e),this._logHandler(this,Ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ee.WARN,...e),this._logHandler(this,Ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ee.ERROR,...e),this._logHandler(this,Ee.ERROR,...e)}}const EI=(t,e)=>e.some(n=>t instanceof n);let Yf,Jf;function wI(){return Yf||(Yf=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function TI(){return Jf||(Jf=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const rg=new WeakMap,gl=new WeakMap,sg=new WeakMap,qc=new WeakMap,hu=new WeakMap;function II(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(hr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&rg.set(n,t)}).catch(()=>{}),hu.set(e,t),e}function AI(t){if(gl.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});gl.set(t,e)}let _l={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return gl.get(t);if(e==="objectStoreNames")return t.objectStoreNames||sg.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return hr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function bI(t){_l=t(_l)}function RI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Hc(this),e,...n);return sg.set(r,e.sort?e.sort():[e]),hr(r)}:TI().includes(t)?function(...e){return t.apply(Hc(this),e),hr(rg.get(this))}:function(...e){return hr(t.apply(Hc(this),e))}}function SI(t){return typeof t=="function"?RI(t):(t instanceof IDBTransaction&&AI(t),EI(t,wI())?new Proxy(t,_l):t)}function hr(t){if(t instanceof IDBRequest)return II(t);if(qc.has(t))return qc.get(t);const e=SI(t);return e!==t&&(qc.set(t,e),hu.set(e,t)),e}const Hc=t=>hu.get(t);function PI(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),c=hr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(hr(o.result),l.oldVersion,l.newVersion,hr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),c.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),c}const CI=["get","getKey","getAll","getAllKeys","count"],xI=["put","add","delete","clear"],Gc=new Map;function Xf(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Gc.get(e))return Gc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=xI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||CI.includes(n)))return;const i=async function(o,...c){const l=this.transaction(o,s?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(c.shift())),(await Promise.all([u[n](...c),s&&l.done]))[0]};return Gc.set(e,i),i}bI(t=>({...t,get:(e,n,r)=>Xf(e,n)||t.get(e,n,r),has:(e,n)=>!!Xf(e,n)||t.has(e,n)}));class kI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(NI(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function NI(t){return t.getComponent()?.type==="VERSION"}const yl="@firebase/app",Zf="0.14.5";const Bn=new uu("@firebase/app"),VI="@firebase/app-compat",DI="@firebase/analytics-compat",OI="@firebase/analytics",MI="@firebase/app-check-compat",LI="@firebase/app-check",FI="@firebase/auth",UI="@firebase/auth-compat",BI="@firebase/database",jI="@firebase/data-connect",$I="@firebase/database-compat",qI="@firebase/functions",HI="@firebase/functions-compat",GI="@firebase/installations",WI="@firebase/installations-compat",zI="@firebase/messaging",KI="@firebase/messaging-compat",QI="@firebase/performance",YI="@firebase/performance-compat",JI="@firebase/remote-config",XI="@firebase/remote-config-compat",ZI="@firebase/storage",eA="@firebase/storage-compat",tA="@firebase/firestore",nA="@firebase/ai",rA="@firebase/firestore-compat",sA="firebase",iA="12.5.0";const vl="[DEFAULT]",oA={[yl]:"fire-core",[VI]:"fire-core-compat",[OI]:"fire-analytics",[DI]:"fire-analytics-compat",[LI]:"fire-app-check",[MI]:"fire-app-check-compat",[FI]:"fire-auth",[UI]:"fire-auth-compat",[BI]:"fire-rtdb",[jI]:"fire-data-connect",[$I]:"fire-rtdb-compat",[qI]:"fire-fn",[HI]:"fire-fn-compat",[GI]:"fire-iid",[WI]:"fire-iid-compat",[zI]:"fire-fcm",[KI]:"fire-fcm-compat",[QI]:"fire-perf",[YI]:"fire-perf-compat",[JI]:"fire-rc",[XI]:"fire-rc-compat",[ZI]:"fire-gcs",[eA]:"fire-gcs-compat",[tA]:"fire-fst",[rA]:"fire-fst-compat",[nA]:"fire-vertex","fire-js":"fire-js",[sA]:"fire-js-all"};const fa=new Map,aA=new Map,El=new Map;function ed(t,e){try{t.container.addComponent(e)}catch(n){Bn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function xs(t){const e=t.name;if(El.has(e))return Bn.debug(`There were multiple attempts to register component ${e}.`),!1;El.set(e,t);for(const n of fa.values())ed(n,t);for(const n of aA.values())ed(n,t);return!0}function fu(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function $t(t){return t==null?!1:t.settings!==void 0}const cA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fr=new ro("app","Firebase",cA);class lA{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Qr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fr.create("app-deleted",{appName:this._name})}}const Bs=iA;function ig(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:vl,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw fr.create("bad-app-name",{appName:String(s)});if(n||(n=Zm()),!n)throw fr.create("no-options");const i=fa.get(s);if(i){if(Kr(n,i.options)&&Kr(r,i.config))return i;throw fr.create("duplicate-app",{appName:s})}const o=new mI(s);for(const l of El.values())o.addComponent(l);const c=new lA(n,r,o);return fa.set(s,c),c}function og(t=vl){const e=fa.get(t);if(!e&&t===vl&&Zm())return ig();if(!e)throw fr.create("no-app",{appName:t});return e}function dr(t,e,n){let r=oA[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Bn.warn(o.join(" "));return}xs(new Qr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const uA="firebase-heartbeat-database",hA=1,ji="firebase-heartbeat-store";let Wc=null;function ag(){return Wc||(Wc=PI(uA,hA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ji)}catch(n){console.warn(n)}}}}).catch(t=>{throw fr.create("idb-open",{originalErrorMessage:t.message})})),Wc}async function fA(t){try{const n=(await ag()).transaction(ji),r=await n.objectStore(ji).get(cg(t));return await n.done,r}catch(e){if(e instanceof Gn)Bn.warn(e.message);else{const n=fr.create("idb-get",{originalErrorMessage:e?.message});Bn.warn(n.message)}}}async function td(t,e){try{const r=(await ag()).transaction(ji,"readwrite");await r.objectStore(ji).put(e,cg(t)),await r.done}catch(n){if(n instanceof Gn)Bn.warn(n.message);else{const r=fr.create("idb-set",{originalErrorMessage:n?.message});Bn.warn(r.message)}}}function cg(t){return`${t.name}!${t.options.appId}`}const dA=1024,pA=30;class mA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new _A(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=nd();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>pA){const s=yA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Bn.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=nd(),{heartbeatsToSend:n,unsentEntries:r}=gA(this._heartbeatsCache.heartbeats),s=ha(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return Bn.warn(e),""}}}function nd(){return new Date().toISOString().substring(0,10)}function gA(t,e=dA){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),rd(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),rd(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class _A{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rI()?sI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await fA(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return td(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return td(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function rd(t){return ha(JSON.stringify({version:2,heartbeats:t})).length}function yA(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function vA(t){xs(new Qr("platform-logger",e=>new kI(e),"PRIVATE")),xs(new Qr("heartbeat",e=>new mA(e),"PRIVATE")),dr(yl,Zf,t),dr(yl,Zf,"esm2020"),dr("fire-js","")}vA("");function lg(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const EA=lg,ug=new ro("auth","Firebase",lg());const da=new uu("@firebase/auth");function wA(t,...e){da.logLevel<=Ee.WARN&&da.warn(`Auth (${Bs}): ${t}`,...e)}function Ho(t,...e){da.logLevel<=Ee.ERROR&&da.error(`Auth (${Bs}): ${t}`,...e)}function Xt(t,...e){throw pu(t,...e)}function cn(t,...e){return pu(t,...e)}function du(t,e,n){const r={...EA(),[e]:n};return new ro("auth","Firebase",r).create(e,{appName:t.name})}function Ln(t){return du(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function TA(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Xt(t,"argument-error"),du(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function pu(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return ug.create(t,...e)}function ue(t,e,...n){if(!t)throw pu(e,...n)}function On(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ho(e),new Error(e)}function jn(t,e){t||On(e)}function wl(){return typeof self<"u"&&self.location?.href||""}function IA(){return sd()==="http:"||sd()==="https:"}function sd(){return typeof self<"u"&&self.location?.protocol||null}function AA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(IA()||ZT()||"connection"in navigator)?navigator.onLine:!0}function bA(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class io{constructor(e,n){this.shortDelay=e,this.longDelay=n,jn(n>e,"Short delay should be less than long delay!"),this.isMobile=YT()||eI()}get(){return AA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function mu(t,e){jn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class hg{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;On("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;On("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;On("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const RA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const SA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],PA=new io(3e4,6e4);function Sr(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Pr(t,e,n,r,s={}){return fg(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const c=so({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...i};return XT()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Us(t.emulatorConfig.host)&&(u.credentials="include"),hg.fetch()(await dg(t,t.config.apiHost,n,c),u)})}async function fg(t,e,n){t._canInitEmulator=!1;const r={...RA,...e};try{const s=new xA(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Vo(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const c=i.ok?o.errorMessage:o.error.message,[l,u]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vo(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Vo(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Vo(t,"user-disabled",o);const f=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw du(t,f,u);Xt(t,f)}}catch(s){if(s instanceof Gn)throw s;Xt(t,"network-request-failed",{message:String(s)})}}async function oo(t,e,n,r,s={}){const i=await Pr(t,e,n,r,s);return"mfaPendingCredential"in i&&Xt(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function dg(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?mu(t.config,s):`${t.config.apiScheme}://${s}`;return SA.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function CA(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class xA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(cn(this.auth,"network-request-failed")),PA.get())})}}function Vo(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=cn(t,e,r);return s.customData._tokenResponse=n,s}function id(t){return t!==void 0&&t.enterprise!==void 0}class kA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return CA(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function NA(t,e){return Pr(t,"GET","/v2/recaptchaConfig",Sr(t,e))}async function VA(t,e){return Pr(t,"POST","/v1/accounts:delete",e)}async function pa(t,e){return Pr(t,"POST","/v1/accounts:lookup",e)}function Pi(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function DA(t,e=!1){const n=et(t),r=await n.getIdToken(e),s=gu(r);ue(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i?.sign_in_provider;return{claims:s,token:r,authTime:Pi(zc(s.auth_time)),issuedAtTime:Pi(zc(s.iat)),expirationTime:Pi(zc(s.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function zc(t){return Number(t)*1e3}function gu(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ho("JWT malformed, contained fewer than 3 sections"),null;try{const s=Jm(n);return s?JSON.parse(s):(Ho("Failed to decode base64 JWT payload"),null)}catch(s){return Ho("Caught error parsing JWT payload as JSON",s?.toString()),null}}function od(t){const e=gu(t);return ue(e,"internal-error"),ue(typeof e.exp<"u","internal-error"),ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function $i(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Gn&&OA(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function OA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class MA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Tl{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pi(this.lastLoginAt),this.creationTime=Pi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ma(t){const e=t.auth,n=await t.getIdToken(),r=await $i(t,pa(e,{idToken:n}));ue(r?.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=s.providerUserInfo?.length?pg(s.providerUserInfo):[],o=FA(t.providerData,i),c=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!o?.length,u=c?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Tl(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,f)}async function LA(t){const e=et(t);await ma(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function FA(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function pg(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function UA(t,e){const n=await fg(t,{},async()=>{const r=so({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await dg(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:c,body:r};return t.emulatorConfig&&Us(t.emulatorConfig.host)&&(l.credentials="include"),hg.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function BA(t,e){return Pr(t,"POST","/v2/accounts:revokeToken",Sr(t,e))}class Ts{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ue(e.idToken,"internal-error"),ue(typeof e.idToken<"u","internal-error"),ue(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):od(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ue(e.length!==0,"internal-error");const n=od(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await UA(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Ts;return r&&(ue(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ue(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ue(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ts,this.toJSON())}_performRefresh(){return On("not implemented")}}function Zn(t,e){ue(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class rn{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new MA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Tl(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await $i(this,this.stsTokenManager.getToken(this.auth,e));return ue(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return DA(this,e)}reload(){return LA(this)}_assign(e){this!==e&&(ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new rn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await ma(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if($t(this.auth.app))return Promise.reject(Ln(this.auth));const e=await this.getIdToken();return await $i(this,VA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,c=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:p,emailVerified:m,isAnonymous:y,providerData:x,stsTokenManager:k}=n;ue(p&&k,e,"internal-error");const R=Ts.fromJSON(this.name,k);ue(typeof p=="string",e,"internal-error"),Zn(r,e.name),Zn(s,e.name),ue(typeof m=="boolean",e,"internal-error"),ue(typeof y=="boolean",e,"internal-error"),Zn(i,e.name),Zn(o,e.name),Zn(c,e.name),Zn(l,e.name),Zn(u,e.name),Zn(f,e.name);const V=new rn({uid:p,auth:e,email:s,emailVerified:m,displayName:r,isAnonymous:y,photoURL:o,phoneNumber:i,tenantId:c,stsTokenManager:R,createdAt:u,lastLoginAt:f});return x&&Array.isArray(x)&&(V.providerData=x.map(B=>({...B}))),l&&(V._redirectEventId=l),V}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ts;s.updateFromServerResponse(n);const i=new rn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await ma(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ue(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?pg(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!i?.length,c=new Ts;c.updateFromIdToken(r);const l=new rn({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Tl(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!i?.length};return Object.assign(l,u),l}}const ad=new Map;function Mn(t){jn(t instanceof Function,"Expected a class definition");let e=ad.get(t);return e?(jn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ad.set(t,e),e)}class mg{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}mg.type="NONE";const cd=mg;function Go(t,e,n){return`firebase:${t}:${e}:${n}`}class Is{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Go(this.userKey,s.apiKey,i),this.fullPersistenceKey=Go("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await pa(this.auth,{idToken:e}).catch(()=>{});return n?rn._fromGetAccountInfoResponse(this.auth,n,e):null}return rn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Is(Mn(cd),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||Mn(cd);const o=Go(r,e.config.apiKey,e.name);let c=null;for(const u of n)try{const f=await u._get(o);if(f){let p;if(typeof f=="string"){const m=await pa(e,{idToken:f}).catch(()=>{});if(!m)break;p=await rn._fromGetAccountInfoResponse(e,m,f)}else p=rn._fromJSON(e,f);u!==i&&(c=p),i=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Is(i,e,r):(i=l[0],c&&await i._set(o,c.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Is(i,e,r))}}function ld(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(vg(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gg(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(wg(e))return"Blackberry";if(Tg(e))return"Webos";if(_g(e))return"Safari";if((e.includes("chrome/")||yg(e))&&!e.includes("edge/"))return"Chrome";if(Eg(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function gg(t=bt()){return/firefox\//i.test(t)}function _g(t=bt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function yg(t=bt()){return/crios\//i.test(t)}function vg(t=bt()){return/iemobile/i.test(t)}function Eg(t=bt()){return/android/i.test(t)}function wg(t=bt()){return/blackberry/i.test(t)}function Tg(t=bt()){return/webos/i.test(t)}function _u(t=bt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function jA(t=bt()){return _u(t)&&!!window.navigator?.standalone}function $A(){return tI()&&document.documentMode===10}function Ig(t=bt()){return _u(t)||Eg(t)||Tg(t)||wg(t)||/windows phone/i.test(t)||vg(t)}function Ag(t,e=[]){let n;switch(t){case"Browser":n=ld(bt());break;case"Worker":n=`${ld(bt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Bs}/${r}`}class qA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,c)=>{try{const l=e(i);o(l)}catch(l){c(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function HA(t,e={}){return Pr(t,"GET","/v2/passwordPolicy",Sr(t,e))}const GA=6;class WA{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??GA,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class zA{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ud(this),this.idTokenSubscription=new ud(this),this.beforeStateQueue=new qA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ug,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Mn(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Is.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await pa(this,{idToken:e}),r=await rn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if($t(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=r?._redirectEventId,c=await this.tryRedirectSignIn(e);(!i||i===o)&&c?.user&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(i){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ma(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=bA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if($t(this.app))return Promise.reject(Ln(this));const n=e?et(e):null;return n&&ue(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return $t(this.app)?Promise.reject(Ln(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return $t(this.app)?Promise.reject(Ln(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Mn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await HA(this),n=new WA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ro("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await BA(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Mn(e)||this._popupRedirectResolver;ue(n,this,"argument-error"),this.redirectPersistenceManager=await Is.create(this,[Mn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ue(c,this,"internal-error"),c.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ag(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if($t(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&wA(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Cr(t){return et(t)}class ud{constructor(e){this.auth=e,this.observer=null,this.addObserver=lI(n=>this.observer=n)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Wa={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function KA(t){Wa=t}function bg(t){return Wa.loadJS(t)}function QA(){return Wa.recaptchaEnterpriseScript}function YA(){return Wa.gapiScript}function JA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class XA{constructor(){this.enterprise=new ZA}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class ZA{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const e0="recaptcha-enterprise",Rg="NO_RECAPTCHA";class t0{constructor(e){this.type=e0,this.auth=Cr(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,c)=>{NA(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const u=new kA(l);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(l=>{c(l)})})}function s(i,o,c){const l=window.grecaptcha;id(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(Rg)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new XA().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(c=>{if(!n&&id(window.grecaptcha))s(c,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=QA();l.length!==0&&(l+=c),bg(l).then(()=>{s(c,i,o)}).catch(u=>{o(u)})}}).catch(c=>{o(c)})})}}async function hd(t,e,n,r=!1,s=!1){const i=new t0(t);let o;if(s)o=Rg;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const c={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const l=c.phoneEnrollmentInfo.phoneNumber,u=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const l=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function Il(t,e,n,r,s){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await hd(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await hd(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}function n0(t,e){const n=fu(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Kr(i,e??{}))return s;Xt(s,"already-initialized")}return n.initialize({options:e})}function r0(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Mn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function s0(t,e,n){const r=Cr(t);ue(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=Sg(e),{host:o,port:c}=i0(e),l=c===null?"":`:${c}`,u={url:`${i}//${o}${l}/`},f=Object.freeze({host:o,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ue(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ue(Kr(u,r.config.emulator)&&Kr(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,Us(o)?(tg(`${i}//${o}${l}`),ng("Auth",!0)):o0()}function Sg(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function i0(t){const e=Sg(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:fd(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:fd(o)}}}function fd(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function o0(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class yu{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return On("not implemented")}_getIdTokenResponse(e){return On("not implemented")}_linkToIdToken(e,n){return On("not implemented")}_getReauthenticationResolver(e){return On("not implemented")}}async function a0(t,e){return Pr(t,"POST","/v1/accounts:signUp",e)}async function c0(t,e){return oo(t,"POST","/v1/accounts:signInWithPassword",Sr(t,e))}async function l0(t,e){return oo(t,"POST","/v1/accounts:signInWithEmailLink",Sr(t,e))}async function u0(t,e){return oo(t,"POST","/v1/accounts:signInWithEmailLink",Sr(t,e))}class qi extends yu{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new qi(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new qi(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Il(e,n,"signInWithPassword",c0);case"emailLink":return l0(e,{email:this._email,oobCode:this._password});default:Xt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Il(e,r,"signUpPassword",a0);case"emailLink":return u0(e,{idToken:n,email:this._email,oobCode:this._password});default:Xt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function As(t,e){return oo(t,"POST","/v1/accounts:signInWithIdp",Sr(t,e))}const h0="http://localhost";class Yr extends yu{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Yr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Xt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new Yr(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return As(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,As(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,As(e,n)}buildRequest(){const e={requestUri:h0,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=so(n)}return e}}function f0(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function d0(t){const e=fi(di(t)).link,n=e?fi(di(e)).deep_link_id:null,r=fi(di(t)).deep_link_id;return(r?fi(di(r)).link:null)||r||n||e||t}class vu{constructor(e){const n=fi(di(e)),r=n.apiKey??null,s=n.oobCode??null,i=f0(n.mode??null);ue(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=d0(e);try{return new vu(n)}catch{return null}}}class js{constructor(){this.providerId=js.PROVIDER_ID}static credential(e,n){return qi._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=vu.parseLink(n);return ue(r,"argument-error"),qi._fromEmailAndCode(e,r.code,r.tenantId)}}js.PROVIDER_ID="password";js.EMAIL_PASSWORD_SIGN_IN_METHOD="password";js.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Eu{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ao extends Eu{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class sr extends ao{constructor(){super("facebook.com")}static credential(e){return Yr._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return sr.credentialFromTaggedObject(e)}static credentialFromError(e){return sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return sr.credential(e.oauthAccessToken)}catch{return null}}}sr.FACEBOOK_SIGN_IN_METHOD="facebook.com";sr.PROVIDER_ID="facebook.com";class yn extends ao{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Yr._fromParams({providerId:yn.PROVIDER_ID,signInMethod:yn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return yn.credentialFromTaggedObject(e)}static credentialFromError(e){return yn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return yn.credential(n,r)}catch{return null}}}yn.GOOGLE_SIGN_IN_METHOD="google.com";yn.PROVIDER_ID="google.com";class ir extends ao{constructor(){super("github.com")}static credential(e){return Yr._fromParams({providerId:ir.PROVIDER_ID,signInMethod:ir.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ir.credentialFromTaggedObject(e)}static credentialFromError(e){return ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ir.credential(e.oauthAccessToken)}catch{return null}}}ir.GITHUB_SIGN_IN_METHOD="github.com";ir.PROVIDER_ID="github.com";class or extends ao{constructor(){super("twitter.com")}static credential(e,n){return Yr._fromParams({providerId:or.PROVIDER_ID,signInMethod:or.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return or.credentialFromTaggedObject(e)}static credentialFromError(e){return or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return or.credential(n,r)}catch{return null}}}or.TWITTER_SIGN_IN_METHOD="twitter.com";or.PROVIDER_ID="twitter.com";async function p0(t,e){return oo(t,"POST","/v1/accounts:signUp",Sr(t,e))}class Jr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await rn._fromIdTokenResponse(e,r,s),o=dd(r);return new Jr({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=dd(r);return new Jr({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function dd(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class ga extends Gn{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,ga.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new ga(e,n,r,s)}}function Pg(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?ga._fromErrorAndOperation(t,i,e,r):i})}async function m0(t,e,n=!1){const r=await $i(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Jr._forOperation(t,"link",r)}async function g0(t,e,n=!1){const{auth:r}=t;if($t(r.app))return Promise.reject(Ln(r));const s="reauthenticate";try{const i=await $i(t,Pg(r,s,e,t),n);ue(i.idToken,r,"internal-error");const o=gu(i.idToken);ue(o,r,"internal-error");const{sub:c}=o;return ue(t.uid===c,r,"user-mismatch"),Jr._forOperation(t,s,i)}catch(i){throw i?.code==="auth/user-not-found"&&Xt(r,"user-mismatch"),i}}async function Cg(t,e,n=!1){if($t(t.app))return Promise.reject(Ln(t));const r="signIn",s=await Pg(t,r,e),i=await Jr._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function _0(t,e){return Cg(Cr(t),e)}async function xg(t){const e=Cr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function y0(t,e,n){if($t(t.app))return Promise.reject(Ln(t));const r=Cr(t),o=await Il(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",p0).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&xg(t),l}),c=await Jr._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(c.user),c}function v0(t,e,n){return $t(t.app)?Promise.reject(Ln(t)):_0(et(t),js.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&xg(t),r})}function E0(t,e,n,r){return et(t).onIdTokenChanged(e,n,r)}function w0(t,e,n){return et(t).beforeAuthStateChanged(e,n)}function T0(t,e,n,r){return et(t).onAuthStateChanged(e,n,r)}function I0(t){return et(t).signOut()}const _a="__sak";class kg{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(_a,"1"),this.storage.removeItem(_a),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const A0=1e3,b0=10;class Ng extends kg{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ig(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);$A()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,b0):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},A0)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ng.type="LOCAL";const R0=Ng;class Vg extends kg{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Vg.type="SESSION";const Dg=Vg;function S0(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class za{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new za(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(o).map(async u=>u(n.origin,i)),l=await S0(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}za.receivers=[];function wu(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class P0{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((c,l)=>{const u=wu("",20);s.port1.start();const f=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(p){const m=p;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(m.data.response);break;default:clearTimeout(f),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function En(){return window}function C0(t){En().location.href=t}function Og(){return typeof En().WorkerGlobalScope<"u"&&typeof En().importScripts=="function"}async function x0(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function k0(){return navigator?.serviceWorker?.controller||null}function N0(){return Og()?self:null}const Mg="firebaseLocalStorageDb",V0=1,ya="firebaseLocalStorage",Lg="fbase_key";class co{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ka(t,e){return t.transaction([ya],e?"readwrite":"readonly").objectStore(ya)}function D0(){const t=indexedDB.deleteDatabase(Mg);return new co(t).toPromise()}function Al(){const t=indexedDB.open(Mg,V0);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(ya,{keyPath:Lg})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(ya)?e(r):(r.close(),await D0(),e(await Al()))})})}async function pd(t,e,n){const r=Ka(t,!0).put({[Lg]:e,value:n});return new co(r).toPromise()}async function O0(t,e){const n=Ka(t,!1).get(e),r=await new co(n).toPromise();return r===void 0?null:r.value}function md(t,e){const n=Ka(t,!0).delete(e);return new co(n).toPromise()}const M0=800,L0=3;class Fg{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Al(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>L0)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Og()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=za._getInstance(N0()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await x0(),!this.activeServiceWorker)return;this.sender=new P0(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||k0()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Al();return await pd(e,_a,"1"),await md(e,_a),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>pd(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>O0(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>md(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Ka(s,!1).getAll();return new co(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),M0)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Fg.type="LOCAL";const F0=Fg;new io(3e4,6e4);function Ug(t,e){return e?Mn(e):(ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class Tu extends yu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return As(e,this._buildIdpRequest())}_linkToIdToken(e,n){return As(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return As(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function U0(t){return Cg(t.auth,new Tu(t),t.bypassAuthState)}function B0(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),g0(n,new Tu(t),t.bypassAuthState)}async function j0(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),m0(n,new Tu(t),t.bypassAuthState)}class Bg{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:c}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return U0;case"linkViaPopup":case"linkViaRedirect":return j0;case"reauthViaPopup":case"reauthViaRedirect":return B0;default:Xt(this.auth,"internal-error")}}resolve(e){jn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){jn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const $0=new io(2e3,1e4);async function jg(t,e,n){if($t(t.app))return Promise.reject(cn(t,"operation-not-supported-in-this-environment"));const r=Cr(t);TA(t,e,Eu);const s=Ug(r,n);return new Hr(r,"signInViaPopup",e,s).executeNotNull()}class Hr extends Bg{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Hr.currentPopupAction&&Hr.currentPopupAction.cancel(),Hr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ue(e,this.auth,"internal-error"),e}async onExecution(){jn(this.filter.length===1,"Popup operations only handle one event");const e=wu();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(cn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(cn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Hr.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(cn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,$0.get())};e()}}Hr.currentPopupAction=null;const q0="pendingRedirect",Wo=new Map;class H0 extends Bg{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Wo.get(this.auth._key());if(!e){try{const r=await G0(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Wo.set(this.auth._key(),e)}return this.bypassAuthState||Wo.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function G0(t,e){const n=K0(e),r=z0(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function W0(t,e){Wo.set(t._key(),e)}function z0(t){return Mn(t._redirectPersistence)}function K0(t){return Go(q0,t.config.apiKey,t.name)}async function Q0(t,e,n=!1){if($t(t.app))return Promise.reject(Ln(t));const r=Cr(t),s=Ug(r,e),o=await new H0(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}const Y0=600*1e3;class J0{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!X0(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!$g(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(cn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Y0&&this.cachedEventUids.clear(),this.cachedEventUids.has(gd(e))}saveEventToCache(e){this.cachedEventUids.add(gd(e)),this.lastProcessedEventTime=Date.now()}}function gd(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function $g({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function X0(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $g(t);default:return!1}}async function Z0(t,e={}){return Pr(t,"GET","/v1/projects",e)}const eb=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tb=/^https?/;async function nb(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Z0(t);for(const n of e)try{if(rb(n))return}catch{}Xt(t,"unauthorized-domain")}function rb(t){const e=wl(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!tb.test(n))return!1;if(eb.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const sb=new io(3e4,6e4);function _d(){const t=En().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function ib(t){return new Promise((e,n)=>{function r(){_d(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{_d(),n(cn(t,"network-request-failed"))},timeout:sb.get()})}if(En().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(En().gapi?.load)r();else{const s=JA("iframefcb");return En()[s]=()=>{gapi.load?r():n(cn(t,"network-request-failed"))},bg(`${YA()}?onload=${s}`).catch(i=>n(i))}}).catch(e=>{throw zo=null,e})}let zo=null;function ob(t){return zo=zo||ib(t),zo}const ab=new io(5e3,15e3),cb="__/auth/iframe",lb="emulator/auth/iframe",ub={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hb=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fb(t){const e=t.config;ue(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?mu(e,lb):`https://${t.config.authDomain}/${cb}`,r={apiKey:e.apiKey,appName:t.name,v:Bs},s=hb.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${so(r).slice(1)}`}async function db(t){const e=await ob(t),n=En().gapi;return ue(n,t,"internal-error"),e.open({where:document.body,url:fb(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ub,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=cn(t,"network-request-failed"),c=En().setTimeout(()=>{i(o)},ab.get());function l(){En().clearTimeout(c),s(r)}r.ping(l).then(l,()=>{i(o)})}))}const pb={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},mb=500,gb=600,_b="_blank",yb="http://localhost";class yd{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function vb(t,e,n,r=mb,s=gb){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const l={...pb,width:r.toString(),height:s.toString(),top:i,left:o},u=bt().toLowerCase();n&&(c=yg(u)?_b:n),gg(u)&&(e=e||yb,l.scrollbars="yes");const f=Object.entries(l).reduce((m,[y,x])=>`${m}${y}=${x},`,"");if(jA(u)&&c!=="_self")return Eb(e||"",c),new yd(null);const p=window.open(e||"",c,f);ue(p,t,"popup-blocked");try{p.focus()}catch{}return new yd(p)}function Eb(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const wb="__/auth/handler",Tb="emulator/auth/handler",Ib=encodeURIComponent("fac");async function vd(t,e,n,r,s,i){ue(t.config.authDomain,t,"auth-domain-config-required"),ue(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Bs,eventId:s};if(e instanceof Eu){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",cI(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))o[f]=p}if(e instanceof ao){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const l=await t._getAppCheckToken(),u=l?`#${Ib}=${encodeURIComponent(l)}`:"";return`${Ab(t)}?${so(c).slice(1)}${u}`}function Ab({config:t}){return t.emulator?mu(t,Tb):`https://${t.authDomain}/${wb}`}const Kc="webStorageSupport";class bb{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Dg,this._completeRedirectFn=Q0,this._overrideRedirectResult=W0}async _openPopup(e,n,r,s){jn(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await vd(e,n,r,wl(),s);return vb(e,i,wu())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await vd(e,n,r,wl(),s);return C0(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(jn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await db(e),r=new J0(e);return n.register("authEvent",s=>(ue(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Kc,{type:Kc},s=>{const i=s?.[0]?.[Kc];i!==void 0&&n(!!i),Xt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=nb(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Ig()||_g()||_u()}}const Rb=bb;var Ed="@firebase/auth",wd="1.11.1";class Sb{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Pb(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Cb(t){xs(new Qr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;ue(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ag(t)},u=new zA(r,s,i,l);return r0(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),xs(new Qr("auth-internal",e=>{const n=Cr(e.getProvider("auth").getImmediate());return(r=>new Sb(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),dr(Ed,wd,Pb(t)),dr(Ed,wd,"esm2020")}const xb=300,kb=eg("authIdTokenMaxAge")||xb;let Td=null;const Nb=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>kb)return;const s=n?.token;Td!==s&&(Td=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Vb(t=og()){const e=fu(t,"auth");if(e.isInitialized())return e.getImmediate();const n=n0(t,{popupRedirectResolver:Rb,persistence:[F0,R0,Dg]}),r=eg("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=Nb(i.toString());w0(n,o,()=>o(n.currentUser)),E0(n,c=>o(c))}}const s=Xm("auth");return s&&s0(n,`http://${s}`),n}function Db(){return document.getElementsByTagName("head")?.[0]??document}KA({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=cn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",Db().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Cb("Browser");var Ob="firebase",Mb="12.5.0";dr(Ob,Mb,"app");var Id=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var pr,qg;(function(){var t;function e(I,_){function v(){}v.prototype=_.prototype,I.F=_.prototype,I.prototype=new v,I.prototype.constructor=I,I.D=function(b,A,S){for(var w=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)w[qe-2]=arguments[qe];return _.prototype[A].apply(b,w)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,_,v){v||(v=0);const b=Array(16);if(typeof _=="string")for(var A=0;A<16;++A)b[A]=_.charCodeAt(v++)|_.charCodeAt(v++)<<8|_.charCodeAt(v++)<<16|_.charCodeAt(v++)<<24;else for(A=0;A<16;++A)b[A]=_[v++]|_[v++]<<8|_[v++]<<16|_[v++]<<24;_=I.g[0],v=I.g[1],A=I.g[2];let S=I.g[3],w;w=_+(S^v&(A^S))+b[0]+3614090360&4294967295,_=v+(w<<7&4294967295|w>>>25),w=S+(A^_&(v^A))+b[1]+3905402710&4294967295,S=_+(w<<12&4294967295|w>>>20),w=A+(v^S&(_^v))+b[2]+606105819&4294967295,A=S+(w<<17&4294967295|w>>>15),w=v+(_^A&(S^_))+b[3]+3250441966&4294967295,v=A+(w<<22&4294967295|w>>>10),w=_+(S^v&(A^S))+b[4]+4118548399&4294967295,_=v+(w<<7&4294967295|w>>>25),w=S+(A^_&(v^A))+b[5]+1200080426&4294967295,S=_+(w<<12&4294967295|w>>>20),w=A+(v^S&(_^v))+b[6]+2821735955&4294967295,A=S+(w<<17&4294967295|w>>>15),w=v+(_^A&(S^_))+b[7]+4249261313&4294967295,v=A+(w<<22&4294967295|w>>>10),w=_+(S^v&(A^S))+b[8]+1770035416&4294967295,_=v+(w<<7&4294967295|w>>>25),w=S+(A^_&(v^A))+b[9]+2336552879&4294967295,S=_+(w<<12&4294967295|w>>>20),w=A+(v^S&(_^v))+b[10]+4294925233&4294967295,A=S+(w<<17&4294967295|w>>>15),w=v+(_^A&(S^_))+b[11]+2304563134&4294967295,v=A+(w<<22&4294967295|w>>>10),w=_+(S^v&(A^S))+b[12]+1804603682&4294967295,_=v+(w<<7&4294967295|w>>>25),w=S+(A^_&(v^A))+b[13]+4254626195&4294967295,S=_+(w<<12&4294967295|w>>>20),w=A+(v^S&(_^v))+b[14]+2792965006&4294967295,A=S+(w<<17&4294967295|w>>>15),w=v+(_^A&(S^_))+b[15]+1236535329&4294967295,v=A+(w<<22&4294967295|w>>>10),w=_+(A^S&(v^A))+b[1]+4129170786&4294967295,_=v+(w<<5&4294967295|w>>>27),w=S+(v^A&(_^v))+b[6]+3225465664&4294967295,S=_+(w<<9&4294967295|w>>>23),w=A+(_^v&(S^_))+b[11]+643717713&4294967295,A=S+(w<<14&4294967295|w>>>18),w=v+(S^_&(A^S))+b[0]+3921069994&4294967295,v=A+(w<<20&4294967295|w>>>12),w=_+(A^S&(v^A))+b[5]+3593408605&4294967295,_=v+(w<<5&4294967295|w>>>27),w=S+(v^A&(_^v))+b[10]+38016083&4294967295,S=_+(w<<9&4294967295|w>>>23),w=A+(_^v&(S^_))+b[15]+3634488961&4294967295,A=S+(w<<14&4294967295|w>>>18),w=v+(S^_&(A^S))+b[4]+3889429448&4294967295,v=A+(w<<20&4294967295|w>>>12),w=_+(A^S&(v^A))+b[9]+568446438&4294967295,_=v+(w<<5&4294967295|w>>>27),w=S+(v^A&(_^v))+b[14]+3275163606&4294967295,S=_+(w<<9&4294967295|w>>>23),w=A+(_^v&(S^_))+b[3]+4107603335&4294967295,A=S+(w<<14&4294967295|w>>>18),w=v+(S^_&(A^S))+b[8]+1163531501&4294967295,v=A+(w<<20&4294967295|w>>>12),w=_+(A^S&(v^A))+b[13]+2850285829&4294967295,_=v+(w<<5&4294967295|w>>>27),w=S+(v^A&(_^v))+b[2]+4243563512&4294967295,S=_+(w<<9&4294967295|w>>>23),w=A+(_^v&(S^_))+b[7]+1735328473&4294967295,A=S+(w<<14&4294967295|w>>>18),w=v+(S^_&(A^S))+b[12]+2368359562&4294967295,v=A+(w<<20&4294967295|w>>>12),w=_+(v^A^S)+b[5]+4294588738&4294967295,_=v+(w<<4&4294967295|w>>>28),w=S+(_^v^A)+b[8]+2272392833&4294967295,S=_+(w<<11&4294967295|w>>>21),w=A+(S^_^v)+b[11]+1839030562&4294967295,A=S+(w<<16&4294967295|w>>>16),w=v+(A^S^_)+b[14]+4259657740&4294967295,v=A+(w<<23&4294967295|w>>>9),w=_+(v^A^S)+b[1]+2763975236&4294967295,_=v+(w<<4&4294967295|w>>>28),w=S+(_^v^A)+b[4]+1272893353&4294967295,S=_+(w<<11&4294967295|w>>>21),w=A+(S^_^v)+b[7]+4139469664&4294967295,A=S+(w<<16&4294967295|w>>>16),w=v+(A^S^_)+b[10]+3200236656&4294967295,v=A+(w<<23&4294967295|w>>>9),w=_+(v^A^S)+b[13]+681279174&4294967295,_=v+(w<<4&4294967295|w>>>28),w=S+(_^v^A)+b[0]+3936430074&4294967295,S=_+(w<<11&4294967295|w>>>21),w=A+(S^_^v)+b[3]+3572445317&4294967295,A=S+(w<<16&4294967295|w>>>16),w=v+(A^S^_)+b[6]+76029189&4294967295,v=A+(w<<23&4294967295|w>>>9),w=_+(v^A^S)+b[9]+3654602809&4294967295,_=v+(w<<4&4294967295|w>>>28),w=S+(_^v^A)+b[12]+3873151461&4294967295,S=_+(w<<11&4294967295|w>>>21),w=A+(S^_^v)+b[15]+530742520&4294967295,A=S+(w<<16&4294967295|w>>>16),w=v+(A^S^_)+b[2]+3299628645&4294967295,v=A+(w<<23&4294967295|w>>>9),w=_+(A^(v|~S))+b[0]+4096336452&4294967295,_=v+(w<<6&4294967295|w>>>26),w=S+(v^(_|~A))+b[7]+1126891415&4294967295,S=_+(w<<10&4294967295|w>>>22),w=A+(_^(S|~v))+b[14]+2878612391&4294967295,A=S+(w<<15&4294967295|w>>>17),w=v+(S^(A|~_))+b[5]+4237533241&4294967295,v=A+(w<<21&4294967295|w>>>11),w=_+(A^(v|~S))+b[12]+1700485571&4294967295,_=v+(w<<6&4294967295|w>>>26),w=S+(v^(_|~A))+b[3]+2399980690&4294967295,S=_+(w<<10&4294967295|w>>>22),w=A+(_^(S|~v))+b[10]+4293915773&4294967295,A=S+(w<<15&4294967295|w>>>17),w=v+(S^(A|~_))+b[1]+2240044497&4294967295,v=A+(w<<21&4294967295|w>>>11),w=_+(A^(v|~S))+b[8]+1873313359&4294967295,_=v+(w<<6&4294967295|w>>>26),w=S+(v^(_|~A))+b[15]+4264355552&4294967295,S=_+(w<<10&4294967295|w>>>22),w=A+(_^(S|~v))+b[6]+2734768916&4294967295,A=S+(w<<15&4294967295|w>>>17),w=v+(S^(A|~_))+b[13]+1309151649&4294967295,v=A+(w<<21&4294967295|w>>>11),w=_+(A^(v|~S))+b[4]+4149444226&4294967295,_=v+(w<<6&4294967295|w>>>26),w=S+(v^(_|~A))+b[11]+3174756917&4294967295,S=_+(w<<10&4294967295|w>>>22),w=A+(_^(S|~v))+b[2]+718787259&4294967295,A=S+(w<<15&4294967295|w>>>17),w=v+(S^(A|~_))+b[9]+3951481745&4294967295,I.g[0]=I.g[0]+_&4294967295,I.g[1]=I.g[1]+(A+(w<<21&4294967295|w>>>11))&4294967295,I.g[2]=I.g[2]+A&4294967295,I.g[3]=I.g[3]+S&4294967295}r.prototype.v=function(I,_){_===void 0&&(_=I.length);const v=_-this.blockSize,b=this.C;let A=this.h,S=0;for(;S<_;){if(A==0)for(;S<=v;)s(this,I,S),S+=this.blockSize;if(typeof I=="string"){for(;S<_;)if(b[A++]=I.charCodeAt(S++),A==this.blockSize){s(this,b),A=0;break}}else for(;S<_;)if(b[A++]=I[S++],A==this.blockSize){s(this,b),A=0;break}}this.h=A,this.o+=_},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var _=1;_<I.length-8;++_)I[_]=0;_=this.o*8;for(var v=I.length-8;v<I.length;++v)I[v]=_&255,_/=256;for(this.v(I),I=Array(16),_=0,v=0;v<4;++v)for(let b=0;b<32;b+=8)I[_++]=this.g[v]>>>b&255;return I};function i(I,_){var v=c;return Object.prototype.hasOwnProperty.call(v,I)?v[I]:v[I]=_(I)}function o(I,_){this.h=_;const v=[];let b=!0;for(let A=I.length-1;A>=0;A--){const S=I[A]|0;b&&S==_||(v[A]=S,b=!1)}this.g=v}var c={};function l(I){return-128<=I&&I<128?i(I,function(_){return new o([_|0],_<0?-1:0)}):new o([I|0],I<0?-1:0)}function u(I){if(isNaN(I)||!isFinite(I))return p;if(I<0)return R(u(-I));const _=[];let v=1;for(let b=0;I>=v;b++)_[b]=I/v|0,v*=4294967296;return new o(_,0)}function f(I,_){if(I.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(I.charAt(0)=="-")return R(f(I.substring(1),_));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const v=u(Math.pow(_,8));let b=p;for(let S=0;S<I.length;S+=8){var A=Math.min(8,I.length-S);const w=parseInt(I.substring(S,S+A),_);A<8?(A=u(Math.pow(_,A)),b=b.j(A).add(u(w))):(b=b.j(v),b=b.add(u(w)))}return b}var p=l(0),m=l(1),y=l(16777216);t=o.prototype,t.m=function(){if(k(this))return-R(this).m();let I=0,_=1;for(let v=0;v<this.g.length;v++){const b=this.i(v);I+=(b>=0?b:4294967296+b)*_,_*=4294967296}return I},t.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(x(this))return"0";if(k(this))return"-"+R(this).toString(I);const _=u(Math.pow(I,6));var v=this;let b="";for(;;){const A=Q(v,_).g;v=V(v,A.j(_));let S=((v.g.length>0?v.g[0]:v.h)>>>0).toString(I);if(v=A,x(v))return S+b;for(;S.length<6;)S="0"+S;b=S+b}},t.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function x(I){if(I.h!=0)return!1;for(let _=0;_<I.g.length;_++)if(I.g[_]!=0)return!1;return!0}function k(I){return I.h==-1}t.l=function(I){return I=V(this,I),k(I)?-1:x(I)?0:1};function R(I){const _=I.g.length,v=[];for(let b=0;b<_;b++)v[b]=~I.g[b];return new o(v,~I.h).add(m)}t.abs=function(){return k(this)?R(this):this},t.add=function(I){const _=Math.max(this.g.length,I.g.length),v=[];let b=0;for(let A=0;A<=_;A++){let S=b+(this.i(A)&65535)+(I.i(A)&65535),w=(S>>>16)+(this.i(A)>>>16)+(I.i(A)>>>16);b=w>>>16,S&=65535,w&=65535,v[A]=w<<16|S}return new o(v,v[v.length-1]&-2147483648?-1:0)};function V(I,_){return I.add(R(_))}t.j=function(I){if(x(this)||x(I))return p;if(k(this))return k(I)?R(this).j(R(I)):R(R(this).j(I));if(k(I))return R(this.j(R(I)));if(this.l(y)<0&&I.l(y)<0)return u(this.m()*I.m());const _=this.g.length+I.g.length,v=[];for(var b=0;b<2*_;b++)v[b]=0;for(b=0;b<this.g.length;b++)for(let A=0;A<I.g.length;A++){const S=this.i(b)>>>16,w=this.i(b)&65535,qe=I.i(A)>>>16,gt=I.i(A)&65535;v[2*b+2*A]+=w*gt,B(v,2*b+2*A),v[2*b+2*A+1]+=S*gt,B(v,2*b+2*A+1),v[2*b+2*A+1]+=w*qe,B(v,2*b+2*A+1),v[2*b+2*A+2]+=S*qe,B(v,2*b+2*A+2)}for(I=0;I<_;I++)v[I]=v[2*I+1]<<16|v[2*I];for(I=_;I<2*_;I++)v[I]=0;return new o(v,0)};function B(I,_){for(;(I[_]&65535)!=I[_];)I[_+1]+=I[_]>>>16,I[_]&=65535,_++}function G(I,_){this.g=I,this.h=_}function Q(I,_){if(x(_))throw Error("division by zero");if(x(I))return new G(p,p);if(k(I))return _=Q(R(I),_),new G(R(_.g),R(_.h));if(k(_))return _=Q(I,R(_)),new G(R(_.g),_.h);if(I.g.length>30){if(k(I)||k(_))throw Error("slowDivide_ only works with positive integers.");for(var v=m,b=_;b.l(I)<=0;)v=se(v),b=se(b);var A=ge(v,1),S=ge(b,1);for(b=ge(b,2),v=ge(v,2);!x(b);){var w=S.add(b);w.l(I)<=0&&(A=A.add(v),S=w),b=ge(b,1),v=ge(v,1)}return _=V(I,A.j(_)),new G(A,_)}for(A=p;I.l(_)>=0;){for(v=Math.max(1,Math.floor(I.m()/_.m())),b=Math.ceil(Math.log(v)/Math.LN2),b=b<=48?1:Math.pow(2,b-48),S=u(v),w=S.j(_);k(w)||w.l(I)>0;)v-=b,S=u(v),w=S.j(_);x(S)&&(S=m),A=A.add(S),I=V(I,w)}return new G(A,I)}t.B=function(I){return Q(this,I).h},t.and=function(I){const _=Math.max(this.g.length,I.g.length),v=[];for(let b=0;b<_;b++)v[b]=this.i(b)&I.i(b);return new o(v,this.h&I.h)},t.or=function(I){const _=Math.max(this.g.length,I.g.length),v=[];for(let b=0;b<_;b++)v[b]=this.i(b)|I.i(b);return new o(v,this.h|I.h)},t.xor=function(I){const _=Math.max(this.g.length,I.g.length),v=[];for(let b=0;b<_;b++)v[b]=this.i(b)^I.i(b);return new o(v,this.h^I.h)};function se(I){const _=I.g.length+1,v=[];for(let b=0;b<_;b++)v[b]=I.i(b)<<1|I.i(b-1)>>>31;return new o(v,I.h)}function ge(I,_){const v=_>>5;_%=32;const b=I.g.length-v,A=[];for(let S=0;S<b;S++)A[S]=_>0?I.i(S+v)>>>_|I.i(S+v+1)<<32-_:I.i(S+v);return new o(A,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,qg=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=f,pr=o}).apply(typeof Id<"u"?Id:typeof self<"u"?self:typeof window<"u"?window:{});var Do=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Hg,pi,Gg,Ko,bl,Wg,zg,Kg;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Do=="object"&&Do];for(var h=0;h<a.length;++h){var d=a[h];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var d=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var C=a[g];if(!(C in d))break e;d=d[C]}a=a[a.length-1],g=d[a],h=h(g),h!=g&&h!=null&&e(d,a,{configurable:!0,writable:!0,value:h})}}s("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(a){return a||function(h){var d=[],g;for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&d.push([g,h[g]]);return d}});var i=i||{},o=this||self;function c(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function l(a,h,d){return a.call.apply(a.bind,arguments)}function u(a,h,d){return u=l,u.apply(null,arguments)}function f(a,h){var d=Array.prototype.slice.call(arguments,1);return function(){var g=d.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function p(a,h){function d(){}d.prototype=h.prototype,a.Z=h.prototype,a.prototype=new d,a.prototype.constructor=a,a.Ob=function(g,C,N){for(var W=Array(arguments.length-2),me=2;me<arguments.length;me++)W[me-2]=arguments[me];return h.prototype[C].apply(g,W)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function y(a){const h=a.length;if(h>0){const d=Array(h);for(let g=0;g<h;g++)d[g]=a[g];return d}return[]}function x(a,h){for(let g=1;g<arguments.length;g++){const C=arguments[g];var d=typeof C;if(d=d!="object"?d:C?Array.isArray(C)?"array":d:"null",d=="array"||d=="object"&&typeof C.length=="number"){d=a.length||0;const N=C.length||0;a.length=d+N;for(let W=0;W<N;W++)a[d+W]=C[W]}else a.push(C)}}class k{constructor(h,d){this.i=h,this.j=d,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function R(a){o.setTimeout(()=>{throw a},0)}function V(){var a=I;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class B{constructor(){this.h=this.g=null}add(h,d){const g=G.get();g.set(h,d),this.h?this.h.next=g:this.g=g,this.h=g}}var G=new k(()=>new Q,a=>a.reset());class Q{constructor(){this.next=this.g=this.h=null}set(h,d){this.h=h,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let se,ge=!1,I=new B,_=()=>{const a=Promise.resolve(void 0);se=()=>{a.then(v)}};function v(){for(var a;a=V();){try{a.h.call(a.g)}catch(d){R(d)}var h=G;h.j(a),h.h<100&&(h.h++,a.next=h.g,h.g=a)}ge=!1}function b(){this.u=this.u,this.C=this.C}b.prototype.u=!1,b.prototype.dispose=function(){this.u||(this.u=!0,this.N())},b.prototype[Symbol.dispose]=function(){this.dispose()},b.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var S=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const d=()=>{};o.addEventListener("test",d,h),o.removeEventListener("test",d,h)}catch{}return a})();function w(a){return/^[\s\xa0]*$/.test(a)}function qe(a,h){A.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,h)}p(qe,A),qe.prototype.init=function(a,h){const d=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget,h||(d=="mouseover"?h=a.fromElement:d=="mouseout"&&(h=a.toElement)),this.relatedTarget=h,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&qe.Z.h.call(this)},qe.prototype.h=function(){qe.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var gt="closure_listenable_"+(Math.random()*1e6|0),Me=0;function de(a,h,d,g,C){this.listener=a,this.proxy=null,this.src=h,this.type=d,this.capture=!!g,this.ha=C,this.key=++Me,this.da=this.fa=!1}function Ie(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Dt(a,h,d){for(const g in a)h.call(d,a[g],g,a)}function hn(a,h){for(const d in a)h.call(void 0,a[d],d,a)}function Lt(a){const h={};for(const d in a)h[d]=a[d];return h}const ct="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Cn(a,h){let d,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(d in g)a[d]=g[d];for(let N=0;N<ct.length;N++)d=ct[N],Object.prototype.hasOwnProperty.call(g,d)&&(a[d]=g[d])}}function en(a){this.src=a,this.g={},this.h=0}en.prototype.add=function(a,h,d,g,C){const N=a.toString();a=this.g[N],a||(a=this.g[N]=[],this.h++);const W=_t(a,h,g,C);return W>-1?(h=a[W],d||(h.fa=!1)):(h=new de(h,this.src,N,!!g,C),h.fa=d,a.push(h)),h};function tn(a,h){const d=h.type;if(d in a.g){var g=a.g[d],C=Array.prototype.indexOf.call(g,h,void 0),N;(N=C>=0)&&Array.prototype.splice.call(g,C,1),N&&(Ie(h),a.g[d].length==0&&(delete a.g[d],a.h--))}}function _t(a,h,d,g){for(let C=0;C<a.length;++C){const N=a[C];if(!N.da&&N.listener==h&&N.capture==!!d&&N.ha==g)return C}return-1}var M="closure_lm_"+(Math.random()*1e6|0),X={};function Y(a,h,d,g,C){if(Array.isArray(h)){for(let N=0;N<h.length;N++)Y(a,h[N],d,g,C);return null}return d=K(d),a&&a[gt]?a.J(h,d,c(g)?!!g.capture:!1,C):ne(a,h,d,!1,g,C)}function ne(a,h,d,g,C,N){if(!h)throw Error("Invalid event type");const W=c(C)?!!C.capture:!!C;let me=U(a);if(me||(a[M]=me=new en(a)),d=me.add(h,d,g,W,N),d.proxy)return d;if(g=ve(),d.proxy=g,g.src=a,g.listener=d,a.addEventListener)S||(C=W),C===void 0&&(C=!1),a.addEventListener(h.toString(),g,C);else if(a.attachEvent)a.attachEvent(P(h.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return d}function ve(){function a(d){return h.call(a.src,a.listener,d)}const h=L;return a}function E(a,h,d,g,C){if(Array.isArray(h))for(var N=0;N<h.length;N++)E(a,h[N],d,g,C);else g=c(g)?!!g.capture:!!g,d=K(d),a&&a[gt]?(a=a.i,N=String(h).toString(),N in a.g&&(h=a.g[N],d=_t(h,d,g,C),d>-1&&(Ie(h[d]),Array.prototype.splice.call(h,d,1),h.length==0&&(delete a.g[N],a.h--)))):a&&(a=U(a))&&(h=a.g[h.toString()],a=-1,h&&(a=_t(h,d,g,C)),(d=a>-1?h[a]:null)&&T(d))}function T(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[gt])tn(h.i,a);else{var d=a.type,g=a.proxy;h.removeEventListener?h.removeEventListener(d,g,a.capture):h.detachEvent?h.detachEvent(P(d),g):h.addListener&&h.removeListener&&h.removeListener(g),(d=U(h))?(tn(d,a),d.h==0&&(d.src=null,h[M]=null)):Ie(a)}}}function P(a){return a in X?X[a]:X[a]="on"+a}function L(a,h){if(a.da)a=!0;else{h=new qe(h,this);const d=a.listener,g=a.ha||a.src;a.fa&&T(a),a=d.call(g,h)}return a}function U(a){return a=a[M],a instanceof en?a:null}var O="__closure_events_fn_"+(Math.random()*1e9>>>0);function K(a){return typeof a=="function"?a:(a[O]||(a[O]=function(h){return a.handleEvent(h)}),a[O])}function H(){b.call(this),this.i=new en(this),this.M=this,this.G=null}p(H,b),H.prototype[gt]=!0,H.prototype.removeEventListener=function(a,h,d,g){E(this,a,h,d,g)};function $(a,h){var d,g=a.G;if(g)for(d=[];g;g=g.G)d.push(g);if(a=a.M,g=h.type||h,typeof h=="string")h=new A(h,a);else if(h instanceof A)h.target=h.target||a;else{var C=h;h=new A(g,a),Cn(h,C)}C=!0;let N,W;if(d)for(W=d.length-1;W>=0;W--)N=h.g=d[W],C=j(N,g,!0,h)&&C;if(N=h.g=a,C=j(N,g,!0,h)&&C,C=j(N,g,!1,h)&&C,d)for(W=0;W<d.length;W++)N=h.g=d[W],C=j(N,g,!1,h)&&C}H.prototype.N=function(){if(H.Z.N.call(this),this.i){var a=this.i;for(const h in a.g){const d=a.g[h];for(let g=0;g<d.length;g++)Ie(d[g]);delete a.g[h],a.h--}}this.G=null},H.prototype.J=function(a,h,d,g){return this.i.add(String(a),h,!1,d,g)},H.prototype.K=function(a,h,d,g){return this.i.add(String(a),h,!0,d,g)};function j(a,h,d,g){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();let C=!0;for(let N=0;N<h.length;++N){const W=h[N];if(W&&!W.da&&W.capture==d){const me=W.listener,tt=W.ha||W.src;W.fa&&tn(a.i,W),C=me.call(tt,g)!==!1&&C}}return C&&!g.defaultPrevented}function ae(a,h){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=u(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:o.setTimeout(a,h||0)}function J(a){a.g=ae(()=>{a.g=null,a.i&&(a.i=!1,J(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class re extends b{constructor(h,d){super(),this.m=h,this.l=d,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:J(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ce(a){b.call(this),this.h=a,this.g={}}p(ce,b);var _e=[];function Ne(a){Dt(a.g,function(h,d){this.g.hasOwnProperty(d)&&T(h)},a),a.g={}}ce.prototype.N=function(){ce.Z.N.call(this),Ne(this)},ce.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Se=o.JSON.stringify,yt=o.JSON.parse,vt=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function Ft(){}function Ut(){}var nn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ss(){A.call(this,"d")}p(ss,A);function lt(){A.call(this,"c")}p(lt,A);var st={},zs=null;function Dr(){return zs=zs||new H}st.Ia="serverreachability";function uh(a){A.call(this,st.Ia,a)}p(uh,A);function Ks(a){const h=Dr();$(h,new uh(h))}st.STAT_EVENT="statevent";function hh(a,h){A.call(this,st.STAT_EVENT,a),this.stat=h}p(hh,A);function Rt(a){const h=Dr();$(h,new hh(h,a))}st.Ja="timingevent";function fh(a,h){A.call(this,st.Ja,a),this.size=h}p(fh,A);function Qs(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},h)}function Ys(){this.g=!0}Ys.prototype.ua=function(){this.g=!1};function Fy(a,h,d,g,C,N){a.info(function(){if(a.g)if(N){var W="",me=N.split("&");for(let De=0;De<me.length;De++){var tt=me[De].split("=");if(tt.length>1){const it=tt[0];tt=tt[1];const dn=it.split("_");W=dn.length>=2&&dn[1]=="type"?W+(it+"="+tt+"&"):W+(it+"=redacted&")}}}else W=null;else W=N;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+h+`
`+d+`
`+W})}function Uy(a,h,d,g,C,N,W){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+h+`
`+d+`
`+N+" "+W})}function is(a,h,d,g){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+jy(a,d)+(g?" "+g:"")})}function By(a,h){a.info(function(){return"TIMEOUT: "+h})}Ys.prototype.info=function(){};function jy(a,h){if(!a.g)return h;if(!h)return null;try{const N=JSON.parse(h);if(N){for(a=0;a<N.length;a++)if(Array.isArray(N[a])){var d=N[a];if(!(d.length<2)){var g=d[1];if(Array.isArray(g)&&!(g.length<1)){var C=g[0];if(C!="noop"&&C!="stop"&&C!="close")for(let W=1;W<g.length;W++)g[W]=""}}}}return Se(N)}catch{return h}}var Eo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},dh={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ph;function dc(){}p(dc,Ft),dc.prototype.g=function(){return new XMLHttpRequest},ph=new dc;function Js(a){return encodeURIComponent(String(a))}function $y(a){var h=1;a=a.split(":");const d=[];for(;h>0&&a.length;)d.push(a.shift()),h--;return a.length&&d.push(a.join(":")),d}function Wn(a,h,d,g){this.j=a,this.i=h,this.l=d,this.S=g||1,this.V=new ce(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new mh}function mh(){this.i=null,this.g="",this.h=!1}var gh={},pc={};function mc(a,h,d){a.M=1,a.A=To(fn(h)),a.u=d,a.R=!0,_h(a,null)}function _h(a,h){a.F=Date.now(),wo(a),a.B=fn(a.A);var d=a.B,g=a.S;Array.isArray(g)||(g=[String(g)]),xh(d.i,"t",g),a.C=0,d=a.j.L,a.h=new mh,a.g=Kh(a.j,d?h:null,!a.u),a.P>0&&(a.O=new re(u(a.Y,a,a.g),a.P)),h=a.V,d=a.g,g=a.ba;var C="readystatechange";Array.isArray(C)||(C&&(_e[0]=C.toString()),C=_e);for(let N=0;N<C.length;N++){const W=Y(d,C[N],g||h.handleEvent,!1,h.h||h);if(!W)break;h.g[W.key]=W}h=a.J?Lt(a.J):{},a.u?(a.v||(a.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,h)):(a.v="GET",a.g.ea(a.B,a.v,null,h)),Ks(),Fy(a.i,a.v,a.B,a.l,a.S,a.u)}Wn.prototype.ba=function(a){a=a.target;const h=this.O;h&&Qn(a)==3?h.j():this.Y(a)},Wn.prototype.Y=function(a){try{if(a==this.g)e:{const me=Qn(this.g),tt=this.g.ya(),De=this.g.ca();if(!(me<3)&&(me!=3||this.g&&(this.h.h||this.g.la()||Lh(this.g)))){this.K||me!=4||tt==7||(tt==8||De<=0?Ks(3):Ks(2)),gc(this);var h=this.g.ca();this.X=h;var d=qy(this);if(this.o=h==200,Uy(this.i,this.v,this.B,this.l,this.S,me,h),this.o){if(this.U&&!this.L){t:{if(this.g){var g,C=this.g;if((g=C.g?C.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(g)){var N=g;break t}}N=null}if(a=N)is(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,_c(this,a);else{this.o=!1,this.m=3,Rt(12),Or(this),Xs(this);break e}}if(this.R){a=!0;let it;for(;!this.K&&this.C<d.length;)if(it=Hy(this,d),it==pc){me==4&&(this.m=4,Rt(14),a=!1),is(this.i,this.l,null,"[Incomplete Response]");break}else if(it==gh){this.m=4,Rt(15),is(this.i,this.l,d,"[Invalid Chunk]"),a=!1;break}else is(this.i,this.l,it,null),_c(this,it);if(yh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),me!=4||d.length!=0||this.h.h||(this.m=1,Rt(16),a=!1),this.o=this.o&&a,!a)is(this.i,this.l,d,"[Invalid Chunked Response]"),Or(this),Xs(this);else if(d.length>0&&!this.W){this.W=!0;var W=this.j;W.g==this&&W.aa&&!W.P&&(W.j.info("Great, no buffering proxy detected. Bytes received: "+d.length),bc(W),W.P=!0,Rt(11))}}else is(this.i,this.l,d,null),_c(this,d);me==4&&Or(this),this.o&&!this.K&&(me==4?Hh(this.j,this):(this.o=!1,wo(this)))}else sv(this.g),h==400&&d.indexOf("Unknown SID")>0?(this.m=3,Rt(12)):(this.m=0,Rt(13)),Or(this),Xs(this)}}}catch{}finally{}};function qy(a){if(!yh(a))return a.g.la();const h=Lh(a.g);if(h==="")return"";let d="";const g=h.length,C=Qn(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return Or(a),Xs(a),"";a.h.i=new o.TextDecoder}for(let N=0;N<g;N++)a.h.h=!0,d+=a.h.i.decode(h[N],{stream:!(C&&N==g-1)});return h.length=0,a.h.g+=d,a.C=0,a.h.g}function yh(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function Hy(a,h){var d=a.C,g=h.indexOf(`
`,d);return g==-1?pc:(d=Number(h.substring(d,g)),isNaN(d)?gh:(g+=1,g+d>h.length?pc:(h=h.slice(g,g+d),a.C=g+d,h)))}Wn.prototype.cancel=function(){this.K=!0,Or(this)};function wo(a){a.T=Date.now()+a.H,vh(a,a.H)}function vh(a,h){if(a.D!=null)throw Error("WatchDog timer not null");a.D=Qs(u(a.aa,a),h)}function gc(a){a.D&&(o.clearTimeout(a.D),a.D=null)}Wn.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(By(this.i,this.B),this.M!=2&&(Ks(),Rt(17)),Or(this),this.m=2,Xs(this)):vh(this,this.T-a)};function Xs(a){a.j.I==0||a.K||Hh(a.j,a)}function Or(a){gc(a);var h=a.O;h&&typeof h.dispose=="function"&&h.dispose(),a.O=null,Ne(a.V),a.g&&(h=a.g,a.g=null,h.abort(),h.dispose())}function _c(a,h){try{var d=a.j;if(d.I!=0&&(d.g==a||yc(d.h,a))){if(!a.L&&yc(d.h,a)&&d.I==3){try{var g=d.Ba.g.parse(h)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){e:if(!d.v){if(d.g)if(d.g.F+3e3<a.F)So(d),bo(d);else break e;Ac(d),Rt(18)}}else d.xa=C[1],0<d.xa-d.K&&C[2]<37500&&d.F&&d.A==0&&!d.C&&(d.C=Qs(u(d.Va,d),6e3));Th(d.h)<=1&&d.ta&&(d.ta=void 0)}else Lr(d,11)}else if((a.L||d.g==a)&&So(d),!w(h))for(C=d.Ba.g.parse(h),h=0;h<C.length;h++){let De=C[h];const it=De[0];if(!(it<=d.K))if(d.K=it,De=De[1],d.I==2)if(De[0]=="c"){d.M=De[1],d.ba=De[2];const dn=De[3];dn!=null&&(d.ka=dn,d.j.info("VER="+d.ka));const Fr=De[4];Fr!=null&&(d.za=Fr,d.j.info("SVER="+d.za));const Yn=De[5];Yn!=null&&typeof Yn=="number"&&Yn>0&&(g=1.5*Yn,d.O=g,d.j.info("backChannelRequestTimeoutMs_="+g)),g=d;const Jn=a.g;if(Jn){const Co=Jn.g?Jn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Co){var N=g.h;N.g||Co.indexOf("spdy")==-1&&Co.indexOf("quic")==-1&&Co.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(vc(N,N.h),N.h=null))}if(g.G){const Rc=Jn.g?Jn.g.getResponseHeader("X-HTTP-Session-Id"):null;Rc&&(g.wa=Rc,Ue(g.J,g.G,Rc))}}d.I=3,d.l&&d.l.ra(),d.aa&&(d.T=Date.now()-a.F,d.j.info("Handshake RTT: "+d.T+"ms")),g=d;var W=a;if(g.na=zh(g,g.L?g.ba:null,g.W),W.L){Ih(g.h,W);var me=W,tt=g.O;tt&&(me.H=tt),me.D&&(gc(me),wo(me)),g.g=W}else $h(g);d.i.length>0&&Ro(d)}else De[0]!="stop"&&De[0]!="close"||Lr(d,7);else d.I==3&&(De[0]=="stop"||De[0]=="close"?De[0]=="stop"?Lr(d,7):Ic(d):De[0]!="noop"&&d.l&&d.l.qa(De),d.A=0)}}Ks(4)}catch{}}var Gy=class{constructor(a,h){this.g=a,this.map=h}};function Eh(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function wh(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Th(a){return a.h?1:a.g?a.g.size:0}function yc(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function vc(a,h){a.g?a.g.add(h):a.h=h}function Ih(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}Eh.prototype.cancel=function(){if(this.i=Ah(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Ah(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const d of a.g.values())h=h.concat(d.G);return h}return y(a.i)}var bh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Wy(a,h){if(a){a=a.split("&");for(let d=0;d<a.length;d++){const g=a[d].indexOf("=");let C,N=null;g>=0?(C=a[d].substring(0,g),N=a[d].substring(g+1)):C=a[d],h(C,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function zn(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;a instanceof zn?(this.l=a.l,Zs(this,a.j),this.o=a.o,this.g=a.g,ei(this,a.u),this.h=a.h,Ec(this,kh(a.i)),this.m=a.m):a&&(h=String(a).match(bh))?(this.l=!1,Zs(this,h[1]||"",!0),this.o=ti(h[2]||""),this.g=ti(h[3]||"",!0),ei(this,h[4]),this.h=ti(h[5]||"",!0),Ec(this,h[6]||"",!0),this.m=ti(h[7]||"")):(this.l=!1,this.i=new ri(null,this.l))}zn.prototype.toString=function(){const a=[];var h=this.j;h&&a.push(ni(h,Rh,!0),":");var d=this.g;return(d||h=="file")&&(a.push("//"),(h=this.o)&&a.push(ni(h,Rh,!0),"@"),a.push(Js(d).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.u,d!=null&&a.push(":",String(d))),(d=this.h)&&(this.g&&d.charAt(0)!="/"&&a.push("/"),a.push(ni(d,d.charAt(0)=="/"?Qy:Ky,!0))),(d=this.i.toString())&&a.push("?",d),(d=this.m)&&a.push("#",ni(d,Jy)),a.join("")},zn.prototype.resolve=function(a){const h=fn(this);let d=!!a.j;d?Zs(h,a.j):d=!!a.o,d?h.o=a.o:d=!!a.g,d?h.g=a.g:d=a.u!=null;var g=a.h;if(d)ei(h,a.u);else if(d=!!a.h){if(g.charAt(0)!="/")if(this.g&&!this.h)g="/"+g;else{var C=h.h.lastIndexOf("/");C!=-1&&(g=h.h.slice(0,C+1)+g)}if(C=g,C==".."||C==".")g="";else if(C.indexOf("./")!=-1||C.indexOf("/.")!=-1){g=C.lastIndexOf("/",0)==0,C=C.split("/");const N=[];for(let W=0;W<C.length;){const me=C[W++];me=="."?g&&W==C.length&&N.push(""):me==".."?((N.length>1||N.length==1&&N[0]!="")&&N.pop(),g&&W==C.length&&N.push("")):(N.push(me),g=!0)}g=N.join("/")}else g=C}return d?h.h=g:d=a.i.toString()!=="",d?Ec(h,kh(a.i)):d=!!a.m,d&&(h.m=a.m),h};function fn(a){return new zn(a)}function Zs(a,h,d){a.j=d?ti(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function ei(a,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);a.u=h}else a.u=null}function Ec(a,h,d){h instanceof ri?(a.i=h,Xy(a.i,a.l)):(d||(h=ni(h,Yy)),a.i=new ri(h,a.l))}function Ue(a,h,d){a.i.set(h,d)}function To(a){return Ue(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function ti(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function ni(a,h,d){return typeof a=="string"?(a=encodeURI(a).replace(h,zy),d&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function zy(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Rh=/[#\/\?@]/g,Ky=/[#\?:]/g,Qy=/[#\?]/g,Yy=/[#\?@]/g,Jy=/#/g;function ri(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function Mr(a){a.g||(a.g=new Map,a.h=0,a.i&&Wy(a.i,function(h,d){a.add(decodeURIComponent(h.replace(/\+/g," ")),d)}))}t=ri.prototype,t.add=function(a,h){Mr(this),this.i=null,a=os(this,a);let d=this.g.get(a);return d||this.g.set(a,d=[]),d.push(h),this.h+=1,this};function Sh(a,h){Mr(a),h=os(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function Ph(a,h){return Mr(a),h=os(a,h),a.g.has(h)}t.forEach=function(a,h){Mr(this),this.g.forEach(function(d,g){d.forEach(function(C){a.call(h,C,g,this)},this)},this)};function Ch(a,h){Mr(a);let d=[];if(typeof h=="string")Ph(a,h)&&(d=d.concat(a.g.get(os(a,h))));else for(a=Array.from(a.g.values()),h=0;h<a.length;h++)d=d.concat(a[h]);return d}t.set=function(a,h){return Mr(this),this.i=null,a=os(this,a),Ph(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=Ch(this,a),a.length>0?String(a[0]):h):h};function xh(a,h,d){Sh(a,h),d.length>0&&(a.i=null,a.g.set(os(a,h),y(d)),a.h+=d.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(let g=0;g<h.length;g++){var d=h[g];const C=Js(d);d=Ch(this,d);for(let N=0;N<d.length;N++){let W=C;d[N]!==""&&(W+="="+Js(d[N])),a.push(W)}}return this.i=a.join("&")};function kh(a){const h=new ri;return h.i=a.i,a.g&&(h.g=new Map(a.g),h.h=a.h),h}function os(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function Xy(a,h){h&&!a.j&&(Mr(a),a.i=null,a.g.forEach(function(d,g){const C=g.toLowerCase();g!=C&&(Sh(this,g),xh(this,C,d))},a)),a.j=h}function Zy(a,h){const d=new Ys;if(o.Image){const g=new Image;g.onload=f(Kn,d,"TestLoadImage: loaded",!0,h,g),g.onerror=f(Kn,d,"TestLoadImage: error",!1,h,g),g.onabort=f(Kn,d,"TestLoadImage: abort",!1,h,g),g.ontimeout=f(Kn,d,"TestLoadImage: timeout",!1,h,g),o.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else h(!1)}function ev(a,h){const d=new Ys,g=new AbortController,C=setTimeout(()=>{g.abort(),Kn(d,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:g.signal}).then(N=>{clearTimeout(C),N.ok?Kn(d,"TestPingServer: ok",!0,h):Kn(d,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(C),Kn(d,"TestPingServer: error",!1,h)})}function Kn(a,h,d,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(d)}catch{}}function tv(){this.g=new vt}function wc(a){this.i=a.Sb||null,this.h=a.ab||!1}p(wc,Ft),wc.prototype.g=function(){return new Io(this.i,this.h)};function Io(a,h){H.call(this),this.H=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Io,H),t=Io.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=h,this.readyState=1,ii(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(h.body=a),(this.H||o).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,si(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ii(this)),this.g&&(this.readyState=3,ii(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Nh(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function Nh(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?si(this):ii(this),this.readyState==3&&Nh(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,si(this))},t.Na=function(a){this.g&&(this.response=a,si(this))},t.ga=function(){this.g&&si(this)};function si(a){a.readyState=4,a.l=null,a.j=null,a.B=null,ii(a)}t.setRequestHeader=function(a,h){this.A.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var d=h.next();!d.done;)d=d.value,a.push(d[0]+": "+d[1]),d=h.next();return a.join(`\r
`)};function ii(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Io.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Vh(a){let h="";return Dt(a,function(d,g){h+=g,h+=":",h+=d,h+=`\r
`}),h}function Tc(a,h,d){e:{for(g in d){var g=!1;break e}g=!0}g||(d=Vh(d),typeof a=="string"?d!=null&&Js(d):Ue(a,h,d))}function He(a){H.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(He,H);var nv=/^https?$/i,rv=["POST","PUT"];t=He.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,h,d,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ph.g(),this.g.onreadystatechange=m(u(this.Ca,this));try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(N){Dh(this,N);return}if(a=d||"",d=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)d.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const N of g.keys())d.set(N,g.get(N));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(d.keys()).find(N=>N.toLowerCase()=="content-type"),C=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(rv,h,void 0)>=0)||g||C||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[N,W]of d)this.g.setRequestHeader(N,W);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(N){Dh(this,N)}};function Dh(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.o=5,Oh(a),Ao(a)}function Oh(a){a.A||(a.A=!0,$(a,"complete"),$(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,$(this,"complete"),$(this,"abort"),Ao(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ao(this,!0)),He.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Mh(this):this.Xa())},t.Xa=function(){Mh(this)};function Mh(a){if(a.h&&typeof i<"u"){if(a.v&&Qn(a)==4)setTimeout(a.Ca.bind(a),0);else if($(a,"readystatechange"),Qn(a)==4){a.h=!1;try{const N=a.ca();e:switch(N){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var d;if(!(d=h)){var g;if(g=N===0){let W=String(a.D).match(bh)[1]||null;!W&&o.self&&o.self.location&&(W=o.self.location.protocol.slice(0,-1)),g=!nv.test(W?W.toLowerCase():"")}d=g}if(d)$(a,"complete"),$(a,"success");else{a.o=6;try{var C=Qn(a)>2?a.g.statusText:""}catch{C=""}a.l=C+" ["+a.ca()+"]",Oh(a)}}finally{Ao(a)}}}}function Ao(a,h){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const d=a.g;a.g=null,h||$(a,"ready");try{d.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Qn(a){return a.g?a.g.readyState:0}t.ca=function(){try{return Qn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),yt(h)}};function Lh(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function sv(a){const h={};a=(a.g&&Qn(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(w(a[g]))continue;var d=$y(a[g]);const C=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const N=h[C]||[];h[C]=N,N.push(d)}hn(h,function(g){return g.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function oi(a,h,d){return d&&d.internalChannelParams&&d.internalChannelParams[a]||h}function Fh(a){this.za=0,this.i=[],this.j=new Ys,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=oi("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=oi("baseRetryDelayMs",5e3,a),this.Za=oi("retryDelaySeedMs",1e4,a),this.Ta=oi("forwardChannelMaxRetries",2,a),this.va=oi("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new Eh(a&&a.concurrentRequestLimit),this.Ba=new tv,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Fh.prototype,t.ka=8,t.I=1,t.connect=function(a,h,d,g){Rt(0),this.W=a,this.H=h||{},d&&g!==void 0&&(this.H.OSID=d,this.H.OAID=g),this.F=this.X,this.J=zh(this,null,this.W),Ro(this)};function Ic(a){if(Uh(a),a.I==3){var h=a.V++,d=fn(a.J);if(Ue(d,"SID",a.M),Ue(d,"RID",h),Ue(d,"TYPE","terminate"),ai(a,d),h=new Wn(a,a.j,h),h.M=2,h.A=To(fn(d)),d=!1,o.navigator&&o.navigator.sendBeacon)try{d=o.navigator.sendBeacon(h.A.toString(),"")}catch{}!d&&o.Image&&(new Image().src=h.A,d=!0),d||(h.g=Kh(h.j,null),h.g.ea(h.A)),h.F=Date.now(),wo(h)}Wh(a)}function bo(a){a.g&&(bc(a),a.g.cancel(),a.g=null)}function Uh(a){bo(a),a.v&&(o.clearTimeout(a.v),a.v=null),So(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function Ro(a){if(!wh(a.h)&&!a.m){a.m=!0;var h=a.Ea;se||_(),ge||(se(),ge=!0),I.add(h,a),a.D=0}}function iv(a,h){return Th(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=h.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=Qs(u(a.Ea,a,h),Gh(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const C=new Wn(this,this.j,a);let N=this.o;if(this.U&&(N?(N=Lt(N),Cn(N,this.U)):N=this.U),this.u!==null||this.R||(C.J=N,N=null),this.S)e:{for(var h=0,d=0;d<this.i.length;d++){t:{var g=this.i[d];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(h+=g,h>4096){h=d;break e}if(h===4096||d===this.i.length-1){h=d+1;break e}}h=1e3}else h=1e3;h=jh(this,C,h),d=fn(this.J),Ue(d,"RID",a),Ue(d,"CVER",22),this.G&&Ue(d,"X-HTTP-Session-Id",this.G),ai(this,d),N&&(this.R?h="headers="+Js(Vh(N))+"&"+h:this.u&&Tc(d,this.u,N)),vc(this.h,C),this.Ra&&Ue(d,"TYPE","init"),this.S?(Ue(d,"$req",h),Ue(d,"SID","null"),C.U=!0,mc(C,d,null)):mc(C,d,h),this.I=2}}else this.I==3&&(a?Bh(this,a):this.i.length==0||wh(this.h)||Bh(this))};function Bh(a,h){var d;h?d=h.l:d=a.V++;const g=fn(a.J);Ue(g,"SID",a.M),Ue(g,"RID",d),Ue(g,"AID",a.K),ai(a,g),a.u&&a.o&&Tc(g,a.u,a.o),d=new Wn(a,a.j,d,a.D+1),a.u===null&&(d.J=a.o),h&&(a.i=h.G.concat(a.i)),h=jh(a,d,1e3),d.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),vc(a.h,d),mc(d,g,h)}function ai(a,h){a.H&&Dt(a.H,function(d,g){Ue(h,g,d)}),a.l&&Dt({},function(d,g){Ue(h,g,d)})}function jh(a,h,d){d=Math.min(a.i.length,d);const g=a.l?u(a.l.Ka,a.l,a):null;e:{var C=a.i;let me=-1;for(;;){const tt=["count="+d];me==-1?d>0?(me=C[0].g,tt.push("ofs="+me)):me=0:tt.push("ofs="+me);let De=!0;for(let it=0;it<d;it++){var N=C[it].g;const dn=C[it].map;if(N-=me,N<0)me=Math.max(0,C[it].g-100),De=!1;else try{N="req"+N+"_"||"";try{var W=dn instanceof Map?dn:Object.entries(dn);for(const[Fr,Yn]of W){let Jn=Yn;c(Yn)&&(Jn=Se(Yn)),tt.push(N+Fr+"="+encodeURIComponent(Jn))}}catch(Fr){throw tt.push(N+"type="+encodeURIComponent("_badmap")),Fr}}catch{g&&g(dn)}}if(De){W=tt.join("&");break e}}W=void 0}return a=a.i.splice(0,d),h.G=a,W}function $h(a){if(!a.g&&!a.v){a.Y=1;var h=a.Da;se||_(),ge||(se(),ge=!0),I.add(h,a),a.A=0}}function Ac(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=Qs(u(a.Da,a),Gh(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,qh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=Qs(u(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Rt(10),bo(this),qh(this))};function bc(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function qh(a){a.g=new Wn(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var h=fn(a.na);Ue(h,"RID","rpc"),Ue(h,"SID",a.M),Ue(h,"AID",a.K),Ue(h,"CI",a.F?"0":"1"),!a.F&&a.ia&&Ue(h,"TO",a.ia),Ue(h,"TYPE","xmlhttp"),ai(a,h),a.u&&a.o&&Tc(h,a.u,a.o),a.O&&(a.g.H=a.O);var d=a.g;a=a.ba,d.M=1,d.A=To(fn(h)),d.u=null,d.R=!0,_h(d,a)}t.Va=function(){this.C!=null&&(this.C=null,bo(this),Ac(this),Rt(19))};function So(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function Hh(a,h){var d=null;if(a.g==h){So(a),bc(a),a.g=null;var g=2}else if(yc(a.h,h))d=h.G,Ih(a.h,h),g=1;else return;if(a.I!=0){if(h.o)if(g==1){d=h.u?h.u.length:0,h=Date.now()-h.F;var C=a.D;g=Dr(),$(g,new fh(g,d)),Ro(a)}else $h(a);else if(C=h.m,C==3||C==0&&h.X>0||!(g==1&&iv(a,h)||g==2&&Ac(a)))switch(d&&d.length>0&&(h=a.h,h.i=h.i.concat(d)),C){case 1:Lr(a,5);break;case 4:Lr(a,10);break;case 3:Lr(a,6);break;default:Lr(a,2)}}}function Gh(a,h){let d=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(d*=2),d*h}function Lr(a,h){if(a.j.info("Error code "+h),h==2){var d=u(a.bb,a),g=a.Ua;const C=!g;g=new zn(g||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Zs(g,"https"),To(g),C?Zy(g.toString(),d):ev(g.toString(),d)}else Rt(2);a.I=0,a.l&&a.l.pa(h),Wh(a),Uh(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))};function Wh(a){if(a.I=0,a.ja=[],a.l){const h=Ah(a.h);(h.length!=0||a.i.length!=0)&&(x(a.ja,h),x(a.ja,a.i),a.h.i.length=0,y(a.i),a.i.length=0),a.l.oa()}}function zh(a,h,d){var g=d instanceof zn?fn(d):new zn(d);if(g.g!="")h&&(g.g=h+"."+g.g),ei(g,g.u);else{var C=o.location;g=C.protocol,h=h?h+"."+C.hostname:C.hostname,C=+C.port;const N=new zn(null);g&&Zs(N,g),h&&(N.g=h),C&&ei(N,C),d&&(N.h=d),g=N}return d=a.G,h=a.wa,d&&h&&Ue(g,d,h),Ue(g,"VER",a.ka),ai(a,g),g}function Kh(a,h,d){if(h&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Aa&&!a.ma?new He(new wc({ab:d})):new He(a.ma),h.Fa(a.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Qh(){}t=Qh.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Po(){}Po.prototype.g=function(a,h){return new Bt(a,h)};function Bt(a,h){H.call(this),this.g=new Fh(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(a?a["X-WebChannel-Client-Profile"]=h.sa:a={"X-WebChannel-Client-Profile":h.sa}),this.g.U=a,(a=h&&h.Qb)&&!w(a)&&(this.g.u=a),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!w(h)&&(this.g.G=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new as(this)}p(Bt,H),Bt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Bt.prototype.close=function(){Ic(this.g)},Bt.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var d={};d.__data__=a,a=d}else this.v&&(d={},d.__data__=Se(a),a=d);h.i.push(new Gy(h.Ya++,a)),h.I==3&&Ro(h)},Bt.prototype.N=function(){this.g.l=null,delete this.j,Ic(this.g),delete this.g,Bt.Z.N.call(this)};function Yh(a){ss.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const d in h){a=d;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}p(Yh,ss);function Jh(){lt.call(this),this.status=1}p(Jh,lt);function as(a){this.g=a}p(as,Qh),as.prototype.ra=function(){$(this.g,"a")},as.prototype.qa=function(a){$(this.g,new Yh(a))},as.prototype.pa=function(a){$(this.g,new Jh)},as.prototype.oa=function(){$(this.g,"b")},Po.prototype.createWebChannel=Po.prototype.g,Bt.prototype.send=Bt.prototype.o,Bt.prototype.open=Bt.prototype.m,Bt.prototype.close=Bt.prototype.close,Kg=function(){return new Po},zg=function(){return Dr()},Wg=st,bl={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Eo.NO_ERROR=0,Eo.TIMEOUT=8,Eo.HTTP_ERROR=6,Ko=Eo,dh.COMPLETE="complete",Gg=dh,Ut.EventType=nn,nn.OPEN="a",nn.CLOSE="b",nn.ERROR="c",nn.MESSAGE="d",H.prototype.listen=H.prototype.J,pi=Ut,He.prototype.listenOnce=He.prototype.K,He.prototype.getLastError=He.prototype.Ha,He.prototype.getLastErrorCode=He.prototype.ya,He.prototype.getStatus=He.prototype.ca,He.prototype.getResponseJson=He.prototype.La,He.prototype.getResponseText=He.prototype.la,He.prototype.send=He.prototype.ea,He.prototype.setWithCredentials=He.prototype.Fa,Hg=He}).apply(typeof Do<"u"?Do:typeof self<"u"?self:typeof window<"u"?window:{});const Ad="@firebase/firestore",bd="4.9.2";class Tt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Tt.UNAUTHENTICATED=new Tt(null),Tt.GOOGLE_CREDENTIALS=new Tt("google-credentials-uid"),Tt.FIRST_PARTY=new Tt("first-party-uid"),Tt.MOCK_USER=new Tt("mock-user");let $s="12.3.0";const Xr=new uu("@firebase/firestore");function ds(){return Xr.logLevel}function Z(t,...e){if(Xr.logLevel<=Ee.DEBUG){const n=e.map(Iu);Xr.debug(`Firestore (${$s}): ${t}`,...n)}}function $n(t,...e){if(Xr.logLevel<=Ee.ERROR){const n=e.map(Iu);Xr.error(`Firestore (${$s}): ${t}`,...n)}}function ks(t,...e){if(Xr.logLevel<=Ee.WARN){const n=e.map(Iu);Xr.warn(`Firestore (${$s}): ${t}`,...n)}}function Iu(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function oe(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Qg(t,r,n)}function Qg(t,e,n){let r=`FIRESTORE (${$s}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw $n(r),new Error(r)}function Re(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||Qg(e,s,r)}function fe(t,e){return t}const D={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class z extends Gn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class wn{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class Yg{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Lb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Tt.UNAUTHENTICATED)))}shutdown(){}}class Fb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class Ub{constructor(e){this.t=e,this.currentUser=Tt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Re(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new wn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new wn,e.enqueueRetryable((()=>s(this.currentUser)))};const o=()=>{const l=i;e.enqueueRetryable((async()=>{await l.promise,await s(this.currentUser)}))},c=l=>{Z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((l=>c(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?c(l):(Z("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new wn)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(Z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Re(typeof r.accessToken=="string",31837,{l:r}),new Yg(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Re(e===null||typeof e=="string",2055,{h:e}),new Tt(e)}}class Bb{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Tt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class jb{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Bb(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Tt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Rd{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $b{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,$t(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Re(this.o===void 0,3512);const r=i=>{i.error!=null&&Z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,Z("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>r(i)))};const s=i=>{Z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>s(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):Z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Rd(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Re(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Rd(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function qb(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class Au{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=qb(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function we(t,e){return t<e?-1:t>e?1:0}function Rl(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Qc(s)===Qc(i)?we(s,i):Qc(s)?1:-1}return we(t.length,e.length)}const Hb=55296,Gb=57343;function Qc(t){const e=t.charCodeAt(0);return e>=Hb&&e<=Gb}function Ns(t,e,n){return t.length===e.length&&t.every(((r,s)=>n(r,e[s])))}const Sd="__name__";class gn{constructor(e,n,r){n===void 0?n=0:n>e.length&&oe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&oe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return gn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof gn?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=gn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return we(e.length,n.length)}static compareSegments(e,n){const r=gn.isNumericId(e),s=gn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?gn.extractNumericId(e).compare(gn.extractNumericId(n)):Rl(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return pr.fromString(e.substring(4,e.length-2))}}class Ve extends gn{construct(e,n,r){return new Ve(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new z(D.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new Ve(n)}static emptyPath(){return new Ve([])}}const Wb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dt extends gn{construct(e,n,r){return new dt(e,n,r)}static isValidIdentifier(e){return Wb.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Sd}static keyField(){return new dt([Sd])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new z(D.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new z(D.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new z(D.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(r+=c,s++):(i(),s++)}if(i(),o)throw new z(D.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dt(n)}static emptyPath(){return new dt([])}}class te{constructor(e){this.path=e}static fromPath(e){return new te(Ve.fromString(e))}static fromName(e){return new te(Ve.fromString(e).popFirst(5))}static empty(){return new te(Ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ve.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new Ve(e.slice()))}}function Jg(t,e,n){if(!n)throw new z(D.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function zb(t,e,n,r){if(e===!0&&r===!0)throw new z(D.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Pd(t){if(!te.isDocumentKey(t))throw new z(D.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Cd(t){if(te.isDocumentKey(t))throw new z(D.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Xg(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Qa(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":oe(12329,{type:typeof t})}function Zt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new z(D.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Qa(t);throw new z(D.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Xe(t,e){const n={typeString:t};return e&&(n.value=e),n}function lo(t,e){if(!Xg(t))throw new z(D.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new z(D.INVALID_ARGUMENT,n);return!0}const xd=-62135596800,kd=1e6;class Be{static now(){return Be.fromMillis(Date.now())}static fromDate(e){return Be.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*kd);return new Be(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new z(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new z(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<xd)throw new z(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new z(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/kd}_compareTo(e){return this.seconds===e.seconds?we(this.nanoseconds,e.nanoseconds):we(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Be._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(lo(e,Be._jsonSchema))return new Be(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-xd;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Be._jsonSchemaVersion="firestore/timestamp/1.0",Be._jsonSchema={type:Xe("string",Be._jsonSchemaVersion),seconds:Xe("number"),nanoseconds:Xe("number")};class le{static fromTimestamp(e){return new le(e)}static min(){return new le(new Be(0,0))}static max(){return new le(new Be(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Hi=-1;function Kb(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=le.fromTimestamp(r===1e9?new Be(n+1,0):new Be(n,r));return new Er(s,te.empty(),e)}function Qb(t){return new Er(t.readTime,t.key,Hi)}class Er{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Er(le.min(),te.empty(),Hi)}static max(){return new Er(le.max(),te.empty(),Hi)}}function Yb(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=te.comparator(t.documentKey,e.documentKey),n!==0?n:we(t.largestBatchId,e.largestBatchId))}const Jb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Xb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function qs(t){if(t.code!==D.FAILED_PRECONDITION||t.message!==Jb)throw t;Z("LocalStore","Unexpectedly lost primary lease")}class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&oe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F(((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):F.reject(n)}static resolve(e){return new F(((n,r)=>{n(e)}))}static reject(e){return new F(((n,r)=>{r(e)}))}static waitFor(e){return new F(((n,r)=>{let s=0,i=0,o=!1;e.forEach((c=>{++s,c.next((()=>{++i,o&&i===s&&n()}),(l=>r(l)))})),o=!0,i===s&&n()}))}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next((s=>s?F.resolve(s):r()));return n}static forEach(e,n){const r=[];return e.forEach(((s,i)=>{r.push(n.call(this,s,i))})),this.waitFor(r)}static mapArray(e,n){return new F(((r,s)=>{const i=e.length,o=new Array(i);let c=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next((f=>{o[u]=f,++c,c===i&&r(o)}),(f=>s(f)))}}))}static doWhile(e,n){return new F(((r,s)=>{const i=()=>{e()===!0?n().next((()=>{i()}),s):r()};i()}))}}function Zb(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Hs(t){return t.name==="IndexedDbTransactionError"}class Ya{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ya.ce=-1;const bu=-1;function uo(t){return t==null}function va(t){return t===0&&1/t==-1/0}function eR(t){return typeof t=="number"&&Number.isInteger(t)&&!va(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const Zg="";function tR(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Nd(e)),e=nR(t.get(n),e);return Nd(e)}function nR(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case Zg:n+="";break;default:n+=i}}return n}function Nd(t){return t+Zg+""}function Vd(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function xr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function e_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class $e{constructor(e,n){this.comparator=e,this.root=n||ut.EMPTY}insert(e,n){return new $e(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ut.BLACK,null,null))}remove(e){return new $e(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ut.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Oo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Oo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Oo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Oo(this.root,e,this.comparator,!0)}}class Oo{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ut{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??ut.RED,this.left=s??ut.EMPTY,this.right=i??ut.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new ut(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ut.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return ut.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ut.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ut.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw oe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw oe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw oe(27949);return e+(this.isRed()?0:1)}}ut.EMPTY=null,ut.RED=!0,ut.BLACK=!1;ut.EMPTY=new class{constructor(){this.size=0}get key(){throw oe(57766)}get value(){throw oe(16141)}get color(){throw oe(16727)}get left(){throw oe(29726)}get right(){throw oe(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new ut(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class rt{constructor(e){this.comparator=e,this.data=new $e(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Dd(this.data.getIterator())}getIteratorFrom(e){return new Dd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof rt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new rt(this.comparator);return n.data=e,n}}class Dd{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Wt{constructor(e){this.fields=e,e.sort(dt.comparator)}static empty(){return new Wt([])}unionWith(e){let n=new rt(dt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Wt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ns(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class t_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class mt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new t_("Invalid base64 string: "+i):i}})(e);return new mt(n)}static fromUint8Array(e){const n=(function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i})(e);return new mt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return we(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mt.EMPTY_BYTE_STRING=new mt("");const rR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wr(t){if(Re(!!t,39018),typeof t=="string"){let e=0;const n=rR.exec(t);if(Re(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ke(t.seconds),nanos:Ke(t.nanos)}}function Ke(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Tr(t){return typeof t=="string"?mt.fromBase64String(t):mt.fromUint8Array(t)}const n_="server_timestamp",r_="__type__",s_="__previous_value__",i_="__local_write_time__";function Ru(t){return(t?.mapValue?.fields||{})[r_]?.stringValue===n_}function Ja(t){const e=t.mapValue.fields[s_];return Ru(e)?Ja(e):e}function Gi(t){const e=wr(t.mapValue.fields[i_].timestampValue);return new Be(e.seconds,e.nanos)}class sR{constructor(e,n,r,s,i,o,c,l,u,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=f}}const Ea="(default)";class Wi{constructor(e,n){this.projectId=e,this.database=n||Ea}static empty(){return new Wi("","")}get isDefaultDatabase(){return this.database===Ea}isEqual(e){return e instanceof Wi&&e.projectId===this.projectId&&e.database===this.database}}const o_="__type__",iR="__max__",Mo={mapValue:{}},a_="__vector__",wa="value";function Ir(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ru(t)?4:aR(t)?9007199254740991:oR(t)?10:11:oe(28295,{value:t})}function Rn(t,e){if(t===e)return!0;const n=Ir(t);if(n!==Ir(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Gi(t).isEqual(Gi(e));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=wr(s.timestampValue),c=wr(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,i){return Tr(s.bytesValue).isEqual(Tr(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,i){return Ke(s.geoPointValue.latitude)===Ke(i.geoPointValue.latitude)&&Ke(s.geoPointValue.longitude)===Ke(i.geoPointValue.longitude)})(t,e);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return Ke(s.integerValue)===Ke(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ke(s.doubleValue),c=Ke(i.doubleValue);return o===c?va(o)===va(c):isNaN(o)&&isNaN(c)}return!1})(t,e);case 9:return Ns(t.arrayValue.values||[],e.arrayValue.values||[],Rn);case 10:case 11:return(function(s,i){const o=s.mapValue.fields||{},c=i.mapValue.fields||{};if(Vd(o)!==Vd(c))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(c[l]===void 0||!Rn(o[l],c[l])))return!1;return!0})(t,e);default:return oe(52216,{left:t})}}function zi(t,e){return(t.values||[]).find((n=>Rn(n,e)))!==void 0}function Vs(t,e){if(t===e)return 0;const n=Ir(t),r=Ir(e);if(n!==r)return we(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return we(t.booleanValue,e.booleanValue);case 2:return(function(i,o){const c=Ke(i.integerValue||i.doubleValue),l=Ke(o.integerValue||o.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1})(t,e);case 3:return Od(t.timestampValue,e.timestampValue);case 4:return Od(Gi(t),Gi(e));case 5:return Rl(t.stringValue,e.stringValue);case 6:return(function(i,o){const c=Tr(i),l=Tr(o);return c.compareTo(l)})(t.bytesValue,e.bytesValue);case 7:return(function(i,o){const c=i.split("/"),l=o.split("/");for(let u=0;u<c.length&&u<l.length;u++){const f=we(c[u],l[u]);if(f!==0)return f}return we(c.length,l.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,o){const c=we(Ke(i.latitude),Ke(o.latitude));return c!==0?c:we(Ke(i.longitude),Ke(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return Md(t.arrayValue,e.arrayValue);case 10:return(function(i,o){const c=i.fields||{},l=o.fields||{},u=c[wa]?.arrayValue,f=l[wa]?.arrayValue,p=we(u?.values?.length||0,f?.values?.length||0);return p!==0?p:Md(u,f)})(t.mapValue,e.mapValue);case 11:return(function(i,o){if(i===Mo.mapValue&&o===Mo.mapValue)return 0;if(i===Mo.mapValue)return 1;if(o===Mo.mapValue)return-1;const c=i.fields||{},l=Object.keys(c),u=o.fields||{},f=Object.keys(u);l.sort(),f.sort();for(let p=0;p<l.length&&p<f.length;++p){const m=Rl(l[p],f[p]);if(m!==0)return m;const y=Vs(c[l[p]],u[f[p]]);if(y!==0)return y}return we(l.length,f.length)})(t.mapValue,e.mapValue);default:throw oe(23264,{he:n})}}function Od(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return we(t,e);const n=wr(t),r=wr(e),s=we(n.seconds,r.seconds);return s!==0?s:we(n.nanos,r.nanos)}function Md(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Vs(n[s],r[s]);if(i)return i}return we(n.length,r.length)}function Ds(t){return Sl(t)}function Sl(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=wr(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Tr(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return te.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Sl(i);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Sl(n.fields[o])}`;return s+"}"})(t.mapValue):oe(61005,{value:t})}function Qo(t){switch(Ir(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ja(t);return e?16+Qo(e):16;case 5:return 2*t.stringValue.length;case 6:return Tr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,i)=>s+Qo(i)),0)})(t.arrayValue);case 10:case 11:return(function(r){let s=0;return xr(r.fields,((i,o)=>{s+=i.length+Qo(o)})),s})(t.mapValue);default:throw oe(13486,{value:t})}}function Ld(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Pl(t){return!!t&&"integerValue"in t}function Su(t){return!!t&&"arrayValue"in t}function Fd(t){return!!t&&"nullValue"in t}function Ud(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Yo(t){return!!t&&"mapValue"in t}function oR(t){return(t?.mapValue?.fields||{})[o_]?.stringValue===a_}function Ci(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return xr(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Ci(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ci(t.arrayValue.values[n]);return e}return{...t}}function aR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===iR}class Vt{constructor(e){this.value=e}static empty(){return new Vt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Yo(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ci(n)}setAll(e){let n=dt.emptyPath(),r={},s=[];e.forEach(((o,c)=>{if(!n.isImmediateParentOf(c)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=c.popLast()}o?r[c.lastSegment()]=Ci(o):s.push(c.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Yo(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Rn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Yo(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){xr(n,((s,i)=>e[s]=i));for(const s of r)delete e[s]}clone(){return new Vt(Ci(this.value))}}function c_(t){const e=[];return xr(t.fields,((n,r)=>{const s=new dt([n]);if(Yo(r)){const i=c_(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)})),new Wt(e)}class at{constructor(e,n,r,s,i,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=c}static newInvalidDocument(e){return new at(e,0,le.min(),le.min(),le.min(),Vt.empty(),0)}static newFoundDocument(e,n,r,s){return new at(e,1,n,le.min(),r,s,0)}static newNoDocument(e,n){return new at(e,2,n,le.min(),le.min(),Vt.empty(),0)}static newUnknownDocument(e,n){return new at(e,3,n,le.min(),le.min(),Vt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof at&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new at(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ta{constructor(e,n){this.position=e,this.inclusive=n}}function Bd(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=te.comparator(te.fromName(o.referenceValue),n.key):r=Vs(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function jd(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Rn(t.position[n],e.position[n]))return!1;return!0}class Ki{constructor(e,n="asc"){this.field=e,this.dir=n}}function cR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class l_{}class Je extends l_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new uR(e,n,r):n==="array-contains"?new dR(e,r):n==="in"?new pR(e,r):n==="not-in"?new mR(e,r):n==="array-contains-any"?new gR(e,r):new Je(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new hR(e,r):new fR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Vs(n,this.value)):n!==null&&Ir(this.value)===Ir(n)&&this.matchesComparison(Vs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return oe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class un extends l_{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new un(e,n)}matches(e){return u_(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function u_(t){return t.op==="and"}function h_(t){return lR(t)&&u_(t)}function lR(t){for(const e of t.filters)if(e instanceof un)return!1;return!0}function Cl(t){if(t instanceof Je)return t.field.canonicalString()+t.op.toString()+Ds(t.value);if(h_(t))return t.filters.map((e=>Cl(e))).join(",");{const e=t.filters.map((n=>Cl(n))).join(",");return`${t.op}(${e})`}}function f_(t,e){return t instanceof Je?(function(r,s){return s instanceof Je&&r.op===s.op&&r.field.isEqual(s.field)&&Rn(r.value,s.value)})(t,e):t instanceof un?(function(r,s){return s instanceof un&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((i,o,c)=>i&&f_(o,s.filters[c])),!0):!1})(t,e):void oe(19439)}function d_(t){return t instanceof Je?(function(n){return`${n.field.canonicalString()} ${n.op} ${Ds(n.value)}`})(t):t instanceof un?(function(n){return n.op.toString()+" {"+n.getFilters().map(d_).join(" ,")+"}"})(t):"Filter"}class uR extends Je{constructor(e,n,r){super(e,n,r),this.key=te.fromName(r.referenceValue)}matches(e){const n=te.comparator(e.key,this.key);return this.matchesComparison(n)}}class hR extends Je{constructor(e,n){super(e,"in",n),this.keys=p_("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class fR extends Je{constructor(e,n){super(e,"not-in",n),this.keys=p_("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function p_(t,e){return(e.arrayValue?.values||[]).map((n=>te.fromName(n.referenceValue)))}class dR extends Je{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Su(n)&&zi(n.arrayValue,this.value)}}class pR extends Je{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&zi(this.value.arrayValue,n)}}class mR extends Je{constructor(e,n){super(e,"not-in",n)}matches(e){if(zi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!zi(this.value.arrayValue,n)}}class gR extends Je{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Su(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>zi(this.value.arrayValue,r)))}}class _R{constructor(e,n=null,r=[],s=[],i=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=c,this.Te=null}}function $d(t,e=null,n=[],r=[],s=null,i=null,o=null){return new _R(t,e,n,r,s,i,o)}function Pu(t){const e=fe(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>Cl(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(i){return i.field.canonicalString()+i.dir})(r))).join(","),uo(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Ds(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Ds(r))).join(",")),e.Te=n}return e.Te}function Cu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!cR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!f_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!jd(t.startAt,e.startAt)&&jd(t.endAt,e.endAt)}function xl(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class Gs{constructor(e,n=null,r=[],s=[],i=null,o="F",c=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function yR(t,e,n,r,s,i,o,c){return new Gs(t,e,n,r,s,i,o,c)}function xu(t){return new Gs(t)}function qd(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function m_(t){return t.collectionGroup!==null}function xi(t){const e=fe(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new rt(dt.comparator);return o.filters.forEach((l=>{l.getFlattenedFilters().forEach((u=>{u.isInequality()&&(c=c.add(u.field))}))})),c})(e).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Ki(i,r))})),n.has(dt.keyField().canonicalString())||e.Ie.push(new Ki(dt.keyField(),r))}return e.Ie}function Tn(t){const e=fe(t);return e.Ee||(e.Ee=vR(e,xi(t))),e.Ee}function vR(t,e){if(t.limitType==="F")return $d(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const i=s.dir==="desc"?"asc":"desc";return new Ki(s.field,i)}));const n=t.endAt?new Ta(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ta(t.startAt.position,t.startAt.inclusive):null;return $d(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function kl(t,e){const n=t.filters.concat([e]);return new Gs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Nl(t,e,n){return new Gs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Xa(t,e){return Cu(Tn(t),Tn(e))&&t.limitType===e.limitType}function g_(t){return`${Pu(Tn(t))}|lt:${t.limitType}`}function ps(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>d_(s))).join(", ")}]`),uo(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>Ds(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>Ds(s))).join(",")),`Target(${r})`})(Tn(t))}; limitType=${t.limitType})`}function Za(t,e){return e.isFoundDocument()&&(function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):te.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)})(t,e)&&(function(r,s){for(const i of xi(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0})(t,e)&&(function(r,s){return!(r.startAt&&!(function(o,c,l){const u=Bd(o,c,l);return o.inclusive?u<=0:u<0})(r.startAt,xi(r),s)||r.endAt&&!(function(o,c,l){const u=Bd(o,c,l);return o.inclusive?u>=0:u>0})(r.endAt,xi(r),s))})(t,e)}function ER(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function __(t){return(e,n)=>{let r=!1;for(const s of xi(t)){const i=wR(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function wR(t,e,n){const r=t.field.isKeyField()?te.comparator(e.key,n.key):(function(i,o,c){const l=o.data.field(i),u=c.data.field(i);return l!==null&&u!==null?Vs(l,u):oe(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return oe(19790,{direction:t.dir})}}class ts{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){xr(this.inner,((n,r)=>{for(const[s,i]of r)e(s,i)}))}isEmpty(){return e_(this.inner)}size(){return this.innerSize}}const TR=new $e(te.comparator);function qn(){return TR}const y_=new $e(te.comparator);function mi(...t){let e=y_;for(const n of t)e=e.insert(n.key,n);return e}function v_(t){let e=y_;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Gr(){return ki()}function E_(){return ki()}function ki(){return new ts((t=>t.toString()),((t,e)=>t.isEqual(e)))}const IR=new $e(te.comparator),AR=new rt(te.comparator);function Te(...t){let e=AR;for(const n of t)e=e.add(n);return e}const bR=new rt(we);function RR(){return bR}function ku(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:va(e)?"-0":e}}function w_(t){return{integerValue:""+t}}function T_(t,e){return eR(e)?w_(e):ku(t,e)}class ec{constructor(){this._=void 0}}function SR(t,e,n){return t instanceof Qi?(function(s,i){const o={fields:{[r_]:{stringValue:n_},[i_]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Ru(i)&&(i=Ja(i)),i&&(o.fields[s_]=i),{mapValue:o}})(n,e):t instanceof Yi?A_(t,e):t instanceof Ji?b_(t,e):(function(s,i){const o=I_(s,i),c=Hd(o)+Hd(s.Ae);return Pl(o)&&Pl(s.Ae)?w_(c):ku(s.serializer,c)})(t,e)}function PR(t,e,n){return t instanceof Yi?A_(t,e):t instanceof Ji?b_(t,e):n}function I_(t,e){return t instanceof Xi?(function(r){return Pl(r)||(function(i){return!!i&&"doubleValue"in i})(r)})(e)?e:{integerValue:0}:null}class Qi extends ec{}class Yi extends ec{constructor(e){super(),this.elements=e}}function A_(t,e){const n=R_(e);for(const r of t.elements)n.some((s=>Rn(s,r)))||n.push(r);return{arrayValue:{values:n}}}class Ji extends ec{constructor(e){super(),this.elements=e}}function b_(t,e){let n=R_(e);for(const r of t.elements)n=n.filter((s=>!Rn(s,r)));return{arrayValue:{values:n}}}class Xi extends ec{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Hd(t){return Ke(t.integerValue||t.doubleValue)}function R_(t){return Su(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class S_{constructor(e,n){this.field=e,this.transform=n}}function CR(t,e){return t.field.isEqual(e.field)&&(function(r,s){return r instanceof Yi&&s instanceof Yi||r instanceof Ji&&s instanceof Ji?Ns(r.elements,s.elements,Rn):r instanceof Xi&&s instanceof Xi?Rn(r.Ae,s.Ae):r instanceof Qi&&s instanceof Qi})(t.transform,e.transform)}class xR{constructor(e,n){this.version=e,this.transformResults=n}}class pt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new pt}static exists(e){return new pt(void 0,e)}static updateTime(e){return new pt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Jo(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class tc{}function P_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new nc(t.key,pt.none()):new ho(t.key,t.data,pt.none());{const n=t.data,r=Vt.empty();let s=new rt(dt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new kr(t.key,r,new Wt(s.toArray()),pt.none())}}function kR(t,e,n){t instanceof ho?(function(s,i,o){const c=s.value.clone(),l=Wd(s.fieldTransforms,i,o.transformResults);c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,n):t instanceof kr?(function(s,i,o){if(!Jo(s.precondition,i))return void i.convertToUnknownDocument(o.version);const c=Wd(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(C_(s)),l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(t,e,n):(function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function Ni(t,e,n,r){return t instanceof ho?(function(i,o,c,l){if(!Jo(i.precondition,o))return c;const u=i.value.clone(),f=zd(i.fieldTransforms,l,o);return u.setAll(f),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null})(t,e,n,r):t instanceof kr?(function(i,o,c,l){if(!Jo(i.precondition,o))return c;const u=zd(i.fieldTransforms,l,o),f=o.data;return f.setAll(C_(i)),f.setAll(u),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((p=>p.field)))})(t,e,n,r):(function(i,o,c){return Jo(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c})(t,e,n)}function NR(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=I_(r.transform,s||null);i!=null&&(n===null&&(n=Vt.empty()),n.set(r.field,i))}return n||null}function Gd(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ns(r,s,((i,o)=>CR(i,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ho extends tc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class kr extends tc{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function C_(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function Wd(t,e,n){const r=new Map;Re(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,c=e.data.field(i.field);r.set(i.field,PR(o,c,n[s]))}return r}function zd(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,SR(i,o,e))}return r}class nc extends tc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class x_ extends tc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class VR{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&kR(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ni(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ni(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=E_();return this.mutations.forEach((s=>{const i=e.get(s.key),o=i.overlayedDocument;let c=this.applyToLocalView(o,i.mutatedFields);c=n.has(s.key)?null:c;const l=P_(o,c);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(le.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Te())}isEqual(e){return this.batchId===e.batchId&&Ns(this.mutations,e.mutations,((n,r)=>Gd(n,r)))&&Ns(this.baseMutations,e.baseMutations,((n,r)=>Gd(n,r)))}}class Nu{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Re(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return IR})();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Nu(e,n,r,s)}}class DR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class OR{constructor(e,n){this.count=e,this.unchangedNames=n}}var Ye,Ae;function k_(t){switch(t){case D.OK:return oe(64938);case D.CANCELLED:case D.UNKNOWN:case D.DEADLINE_EXCEEDED:case D.RESOURCE_EXHAUSTED:case D.INTERNAL:case D.UNAVAILABLE:case D.UNAUTHENTICATED:return!1;case D.INVALID_ARGUMENT:case D.NOT_FOUND:case D.ALREADY_EXISTS:case D.PERMISSION_DENIED:case D.FAILED_PRECONDITION:case D.ABORTED:case D.OUT_OF_RANGE:case D.UNIMPLEMENTED:case D.DATA_LOSS:return!0;default:return oe(15467,{code:t})}}function N_(t){if(t===void 0)return $n("GRPC error has no .code"),D.UNKNOWN;switch(t){case Ye.OK:return D.OK;case Ye.CANCELLED:return D.CANCELLED;case Ye.UNKNOWN:return D.UNKNOWN;case Ye.DEADLINE_EXCEEDED:return D.DEADLINE_EXCEEDED;case Ye.RESOURCE_EXHAUSTED:return D.RESOURCE_EXHAUSTED;case Ye.INTERNAL:return D.INTERNAL;case Ye.UNAVAILABLE:return D.UNAVAILABLE;case Ye.UNAUTHENTICATED:return D.UNAUTHENTICATED;case Ye.INVALID_ARGUMENT:return D.INVALID_ARGUMENT;case Ye.NOT_FOUND:return D.NOT_FOUND;case Ye.ALREADY_EXISTS:return D.ALREADY_EXISTS;case Ye.PERMISSION_DENIED:return D.PERMISSION_DENIED;case Ye.FAILED_PRECONDITION:return D.FAILED_PRECONDITION;case Ye.ABORTED:return D.ABORTED;case Ye.OUT_OF_RANGE:return D.OUT_OF_RANGE;case Ye.UNIMPLEMENTED:return D.UNIMPLEMENTED;case Ye.DATA_LOSS:return D.DATA_LOSS;default:return oe(39323,{code:t})}}(Ae=Ye||(Ye={}))[Ae.OK=0]="OK",Ae[Ae.CANCELLED=1]="CANCELLED",Ae[Ae.UNKNOWN=2]="UNKNOWN",Ae[Ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ae[Ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ae[Ae.NOT_FOUND=5]="NOT_FOUND",Ae[Ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ae[Ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ae[Ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ae[Ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ae[Ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ae[Ae.ABORTED=10]="ABORTED",Ae[Ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ae[Ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ae[Ae.INTERNAL=13]="INTERNAL",Ae[Ae.UNAVAILABLE=14]="UNAVAILABLE",Ae[Ae.DATA_LOSS=15]="DATA_LOSS";function MR(){return new TextEncoder}const LR=new pr([4294967295,4294967295],0);function Kd(t){const e=MR().encode(t),n=new qg;return n.update(e),new Uint8Array(n.digest())}function Qd(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new pr([n,r],0),new pr([s,i],0)]}class Vu{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new gi(`Invalid padding: ${n}`);if(r<0)throw new gi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new gi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new gi(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=pr.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(pr.fromNumber(r)));return s.compare(LR)===1&&(s=new pr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Kd(e),[r,s]=Qd(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Vu(i,s,n);return r.forEach((c=>o.insert(c))),o}insert(e){if(this.ge===0)return;const n=Kd(e),[r,s]=Qd(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class gi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class rc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,fo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new rc(le.min(),s,new $e(we),qn(),Te())}}class fo{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new fo(r,n,Te(),Te(),Te())}}class Xo{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class V_{constructor(e,n){this.targetId=e,this.Ce=n}}class D_{constructor(e,n,r=mt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Yd{constructor(){this.ve=0,this.Fe=Jd(),this.Me=mt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Te(),n=Te(),r=Te();return this.Fe.forEach(((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:oe(38017,{changeType:i})}})),new fo(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Jd()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Re(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class FR{constructor(e){this.Ge=e,this.ze=new Map,this.je=qn(),this.Je=Lo(),this.He=Lo(),this.Ye=new $e(we)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:oe(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,s)=>{this.rt(s)&&n(s)}))}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(xl(i))if(r===0){const o=new te(i.path);this.et(n,o,at.newNoDocument(o,le.min()))}else Re(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const c=this.ut(e),l=c?this.ct(c,e,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,c;try{o=Tr(r).toUint8Array()}catch(l){if(l instanceof t_)return ks("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new Vu(o,s,i)}catch(l){return ks(l instanceof gi?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach((i=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.et(n,i,null),s++)})),s}Tt(e){const n=new Map;this.ze.forEach(((i,o)=>{const c=this.ot(o);if(c){if(i.current&&xl(c.target)){const l=new te(c.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,at.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}}));let r=Te();this.He.forEach(((i,o)=>{let c=!0;o.forEachWhile((l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(r=r.add(i))})),this.je.forEach(((i,o)=>o.setReadTime(e)));const s=new rc(e,n,this.Ye,this.je,r);return this.je=qn(),this.Je=Lo(),this.He=Lo(),this.Ye=new $e(we),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Yd,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new rt(we),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new rt(we),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Z("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Yd),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Lo(){return new $e(te.comparator)}function Jd(){return new $e(te.comparator)}const UR={asc:"ASCENDING",desc:"DESCENDING"},BR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},jR={and:"AND",or:"OR"};class $R{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Vl(t,e){return t.useProto3Json||uo(e)?e:{value:e}}function Ia(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function O_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function qR(t,e){return Ia(t,e.toTimestamp())}function zt(t){return Re(!!t,49232),le.fromTimestamp((function(n){const r=wr(n);return new Be(r.seconds,r.nanos)})(t))}function Du(t,e){return Dl(t,e).canonicalString()}function Dl(t,e){const n=(function(s){return new Ve(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function M_(t){const e=Ve.fromString(t);return Re($_(e),10190,{key:e.toString()}),e}function Aa(t,e){return Du(t.databaseId,e.path)}function Vi(t,e){const n=M_(e);if(n.get(1)!==t.databaseId.projectId)throw new z(D.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new z(D.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new te(F_(n))}function L_(t,e){return Du(t.databaseId,e)}function HR(t){const e=M_(t);return e.length===4?Ve.emptyPath():F_(e)}function Ol(t){return new Ve(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function F_(t){return Re(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Xd(t,e,n){return{name:Aa(t,e),fields:n.value.mapValue.fields}}function GR(t,e){return"found"in e?(function(r,s){Re(!!s.found,43571),s.found.name,s.found.updateTime;const i=Vi(r,s.found.name),o=zt(s.found.updateTime),c=s.found.createTime?zt(s.found.createTime):le.min(),l=new Vt({mapValue:{fields:s.found.fields}});return at.newFoundDocument(i,o,c,l)})(t,e):"missing"in e?(function(r,s){Re(!!s.missing,3894),Re(!!s.readTime,22933);const i=Vi(r,s.missing),o=zt(s.readTime);return at.newNoDocument(i,o)})(t,e):oe(7234,{result:e})}function WR(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:oe(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=(function(u,f){return u.useProto3Json?(Re(f===void 0||typeof f=="string",58123),mt.fromBase64String(f||"")):(Re(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),mt.fromUint8Array(f||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&(function(u){const f=u.code===void 0?D.UNKNOWN:N_(u.code);return new z(f,u.message||"")})(o);n=new D_(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Vi(t,r.document.name),i=zt(r.document.updateTime),o=r.document.createTime?zt(r.document.createTime):le.min(),c=new Vt({mapValue:{fields:r.document.fields}}),l=at.newFoundDocument(s,i,o,c),u=r.targetIds||[],f=r.removedTargetIds||[];n=new Xo(u,f,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Vi(t,r.document),i=r.readTime?zt(r.readTime):le.min(),o=at.newNoDocument(s,i),c=r.removedTargetIds||[];n=new Xo([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Vi(t,r.document),i=r.removedTargetIds||[];n=new Xo([],i,s,null)}else{if(!("filter"in e))return oe(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new OR(s,i),c=r.targetId;n=new V_(c,o)}}return n}function U_(t,e){let n;if(e instanceof ho)n={update:Xd(t,e.key,e.value)};else if(e instanceof nc)n={delete:Aa(t,e.key)};else if(e instanceof kr)n={update:Xd(t,e.key,e.data),updateMask:tS(e.fieldMask)};else{if(!(e instanceof x_))return oe(16599,{Vt:e.type});n={verify:Aa(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(i,o){const c=o.transform;if(c instanceof Qi)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Yi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Ji)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Xi)return{fieldPath:o.field.canonicalString(),increment:c.Ae};throw oe(20930,{transform:o.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:qR(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:oe(27497)})(t,e.precondition)),n}function zR(t,e){return t&&t.length>0?(Re(e!==void 0,14353),t.map((n=>(function(s,i){let o=s.updateTime?zt(s.updateTime):zt(i);return o.isEqual(le.min())&&(o=zt(i)),new xR(o,s.transformResults||[])})(n,e)))):[]}function KR(t,e){return{documents:[L_(t,e.path)]}}function QR(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=L_(t,s);const i=(function(u){if(u.length!==0)return j_(un.create(u,"and"))})(e.filters);i&&(n.structuredQuery.where=i);const o=(function(u){if(u.length!==0)return u.map((f=>(function(m){return{field:ms(m.field),direction:XR(m.dir)}})(f)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=Vl(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:n,parent:s}}function YR(t){let e=HR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Re(r===1,65062);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=(function(p){const m=B_(p);return m instanceof un&&h_(m)?m.getFilters():[m]})(n.where));let o=[];n.orderBy&&(o=(function(p){return p.map((m=>(function(x){return new Ki(gs(x.field),(function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(x.direction))})(m)))})(n.orderBy));let c=null;n.limit&&(c=(function(p){let m;return m=typeof p=="object"?p.value:p,uo(m)?null:m})(n.limit));let l=null;n.startAt&&(l=(function(p){const m=!!p.before,y=p.values||[];return new Ta(y,m)})(n.startAt));let u=null;return n.endAt&&(u=(function(p){const m=!p.before,y=p.values||[];return new Ta(y,m)})(n.endAt)),yR(e,s,o,i,c,"F",l,u)}function JR(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return oe(28987,{purpose:s})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function B_(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=gs(n.unaryFilter.field);return Je.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=gs(n.unaryFilter.field);return Je.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=gs(n.unaryFilter.field);return Je.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=gs(n.unaryFilter.field);return Je.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return oe(61313);default:return oe(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Je.create(gs(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return oe(58110);default:return oe(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return un.create(n.compositeFilter.filters.map((r=>B_(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return oe(1026)}})(n.compositeFilter.op))})(t):oe(30097,{filter:t})}function XR(t){return UR[t]}function ZR(t){return BR[t]}function eS(t){return jR[t]}function ms(t){return{fieldPath:t.canonicalString()}}function gs(t){return dt.fromServerFormat(t.fieldPath)}function j_(t){return t instanceof Je?(function(n){if(n.op==="=="){if(Ud(n.value))return{unaryFilter:{field:ms(n.field),op:"IS_NAN"}};if(Fd(n.value))return{unaryFilter:{field:ms(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ud(n.value))return{unaryFilter:{field:ms(n.field),op:"IS_NOT_NAN"}};if(Fd(n.value))return{unaryFilter:{field:ms(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ms(n.field),op:ZR(n.op),value:n.value}}})(t):t instanceof un?(function(n){const r=n.getFilters().map((s=>j_(s)));return r.length===1?r[0]:{compositeFilter:{op:eS(n.op),filters:r}}})(t):oe(54877,{filter:t})}function tS(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function $_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class ar{constructor(e,n,r,s,i=le.min(),o=le.min(),c=mt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new ar(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ar(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ar(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ar(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class nS{constructor(e){this.yt=e}}function rS(t){const e=YR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Nl(e,e.limit,"L"):e}class sS{constructor(){this.Cn=new iS}addToCollectionParentIndex(e,n){return this.Cn.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(Er.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(Er.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class iS{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new rt(Ve.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new rt(Ve.comparator)).toArray()}}const Zd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},q_=41943040;class Ot{static withCacheSize(e){return new Ot(e,Ot.DEFAULT_COLLECTION_PERCENTILE,Ot.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}Ot.DEFAULT_COLLECTION_PERCENTILE=10,Ot.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ot.DEFAULT=new Ot(q_,Ot.DEFAULT_COLLECTION_PERCENTILE,Ot.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ot.DISABLED=new Ot(-1,0,0);class Os{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Os(0)}static cr(){return new Os(-1)}}const ep="LruGarbageCollector",oS=1048576;function tp([t,e],[n,r]){const s=we(t,n);return s===0?we(e,r):s}class aS{constructor(e){this.Ir=e,this.buffer=new rt(tp),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();tp(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class cS{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Z(ep,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Hs(n)?Z(ep,"Ignoring IndexedDB error during garbage collection: ",n):await qs(n)}await this.Vr(3e5)}))}}class lS{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return F.resolve(Ya.ce);const r=new aS(n);return this.mr.forEachTarget(e,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Z("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(Zd)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Z("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Zd):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,c,l,u;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((p=>(p>this.params.maximumSequenceNumbersToCollect?(Z("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,o=Date.now(),this.nthSequenceNumber(e,s)))).next((p=>(r=p,c=Date.now(),this.removeTargets(e,r,n)))).next((p=>(i=p,l=Date.now(),this.removeOrphanedDocuments(e,r)))).next((p=>(u=Date.now(),ds()<=Ee.DEBUG&&Z("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${s} in `+(c-o)+`ms
	Removed ${i} targets in `+(l-c)+`ms
	Removed ${p} documents in `+(u-l)+`ms
Total Duration: ${u-f}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p}))))}}function uS(t,e){return new lS(t,e)}class hS{constructor(){this.changes=new ts((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,at.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class fS{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class dS{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(r!==null&&Ni(r.mutation,s,Wt.empty(),Be.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Te()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Te()){const s=Gr();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,r).next((i=>{let o=mi();return i.forEach(((c,l)=>{o=o.insert(c,l.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const r=Gr();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Te())))}populateOverlays(e,n,r){const s=[];return r.forEach((i=>{n.has(i)||s.push(i)})),this.documentOverlayCache.getOverlays(e,s).next((i=>{i.forEach(((o,c)=>{n.set(o,c)}))}))}computeViews(e,n,r,s){let i=qn();const o=ki(),c=(function(){return ki()})();return n.forEach(((l,u)=>{const f=r.get(u.key);s.has(u.key)&&(f===void 0||f.mutation instanceof kr)?i=i.insert(u.key,u):f!==void 0?(o.set(u.key,f.mutation.getFieldMask()),Ni(f.mutation,u,f.mutation.getFieldMask(),Be.now())):o.set(u.key,Wt.empty())})),this.recalculateAndSaveOverlays(e,i).next((l=>(l.forEach(((u,f)=>o.set(u,f))),n.forEach(((u,f)=>c.set(u,new fS(f,o.get(u)??null)))),c)))}recalculateAndSaveOverlays(e,n){const r=ki();let s=new $e(((o,c)=>o-c)),i=Te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const c of o)c.keys().forEach((l=>{const u=n.get(l);if(u===null)return;let f=r.get(l)||Wt.empty();f=c.applyToLocalView(u,f),r.set(l,f);const p=(s.get(c.batchId)||Te()).add(l);s=s.insert(c.batchId,p)}))})).next((()=>{const o=[],c=s.getReverseIterator();for(;c.hasNext();){const l=c.getNext(),u=l.key,f=l.value,p=E_();f.forEach((m=>{if(!i.has(m)){const y=P_(n.get(m),r.get(m));y!==null&&p.set(m,y),i=i.add(m)}})),o.push(this.documentOverlayCache.saveOverlays(e,u,p))}return F.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,s){return(function(o){return te.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):m_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next((i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):F.resolve(Gr());let c=Hi,l=i;return o.next((u=>F.forEach(u,((f,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),i.get(f)?F.resolve():this.remoteDocumentCache.getEntry(e,f).next((m=>{l=l.insert(f,m)}))))).next((()=>this.populateOverlays(e,u,i))).next((()=>this.computeViews(e,l,u,Te()))).next((f=>({batchId:c,changes:v_(f)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new te(n)).next((r=>{let s=mi();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=mi();return this.indexManager.getCollectionParents(e,i).next((c=>F.forEach(c,(l=>{const u=(function(p,m){return new Gs(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next((f=>{f.forEach(((p,m)=>{o=o.insert(p,m)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s)))).next((o=>{i.forEach(((l,u)=>{const f=u.getKey();o.get(f)===null&&(o=o.insert(f,at.newInvalidDocument(f)))}));let c=mi();return o.forEach(((l,u)=>{const f=i.get(l);f!==void 0&&Ni(f.mutation,u,Wt.empty(),Be.now()),Za(n,u)&&(c=c.insert(l,u))})),c}))}}class pS{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return F.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:zt(s.createTime)}})(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(s){return{name:s.name,query:rS(s.bundledQuery),readTime:zt(s.readTime)}})(n)),F.resolve()}}class mS{constructor(){this.overlays=new $e(te.comparator),this.qr=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Gr();return F.forEach(n,(s=>this.getOverlay(e,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((s,i)=>{this.St(e,n,i)})),F.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((i=>this.overlays=this.overlays.remove(i))),this.qr.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const s=Gr(),i=n.length+1,o=new te(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const l=c.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return F.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new $e(((u,f)=>u-f));const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let f=i.get(u.largestBatchId);f===null&&(f=Gr(),i=i.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}const c=Gr(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((u,f)=>c.set(u,f))),!(c.size()>=s)););return F.resolve(c)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new DR(n,r));let i=this.qr.get(n);i===void 0&&(i=Te(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}class gS{constructor(){this.sessionToken=mt.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}class Ou{constructor(){this.Qr=new rt(ot.$r),this.Ur=new rt(ot.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new ot(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new ot(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new te(new Ve([])),r=new ot(n,e),s=new ot(n,e+1),i=[];return this.Ur.forEachInRange([r,s],(o=>{this.Gr(o),i.push(o.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new te(new Ve([])),r=new ot(n,e),s=new ot(n,e+1);let i=Te();return this.Ur.forEachInRange([r,s],(o=>{i=i.add(o.key)})),i}containsKey(e){const n=new ot(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ot{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return te.comparator(e.key,n.key)||we(e.Yr,n.Yr)}static Kr(e,n){return we(e.Yr,n.Yr)||te.comparator(e.key,n.key)}}class _S{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new rt(ot.$r)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new VR(i,n,r,s);this.mutationQueue.push(o);for(const c of s)this.Zr=this.Zr.add(new ot(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?bu:this.tr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ot(n,0),s=new ot(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],(o=>{const c=this.Xr(o.Yr);i.push(c)})),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new rt(we);return n.forEach((s=>{const i=new ot(s,0),o=new ot(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],(c=>{r=r.add(c.Yr)}))})),F.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;te.isDocumentKey(i)||(i=i.child(""));const o=new ot(new te(i),0);let c=new rt(we);return this.Zr.forEachWhile((l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(c=c.add(l.Yr)),!0)}),o),F.resolve(this.ti(c))}ti(e){const n=[];return e.forEach((r=>{const s=this.Xr(r);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){Re(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return F.forEach(n.mutations,(s=>{const i=new ot(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new ot(n,0),s=this.Zr.firstAfterOrEqual(r);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class yS{constructor(e){this.ri=e,this.docs=(function(){return new $e(te.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():at.newInvalidDocument(n))}getEntries(e,n){let r=qn();return n.forEach((s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():at.newInvalidDocument(s))})),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=qn();const o=n.path,c=new te(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){const{key:u,value:{document:f}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||Yb(Qb(f),r)<=0||(s.has(f.key)||Za(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,n,r,s){oe(9500)}ii(e,n){return F.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new vS(this)}getSize(e){return F.resolve(this.size)}}class vS extends hS{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)})),F.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class ES{constructor(e){this.persistence=e,this.si=new ts((n=>Pu(n)),Cu),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.oi=0,this._i=new Ou,this.targetCount=0,this.ai=Os.ur()}forEachTarget(e,n){return this.si.forEach(((r,s)=>n(s))),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),F.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Os(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Pr(n),F.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach(((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)})),F.waitFor(i).next((()=>s))}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach((o=>{i.push(s.markPotentiallyOrphaned(e,o))})),F.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this._i.containsKey(n))}}class H_{constructor(e,n){this.ui={},this.overlays={},this.ci=new Ya(0),this.li=!1,this.li=!0,this.hi=new gS,this.referenceDelegate=e(this),this.Pi=new ES(this),this.indexManager=new sS,this.remoteDocumentCache=(function(s){return new yS(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new nS(n),this.Ii=new pS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new mS,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new _S(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Z("MemoryPersistence","Starting transaction:",e);const s=new wS(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((i=>this.referenceDelegate.di(s).next((()=>i)))).toPromise().then((i=>(s.raiseOnCommittedEvent(),i)))}Ai(e,n){return F.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class wS extends Xb{constructor(e){super(),this.currentSequenceNumber=e}}class Mu{constructor(e){this.persistence=e,this.Ri=new Ou,this.Vi=null}static mi(e){return new Mu(e)}get fi(){if(this.Vi)return this.Vi;throw oe(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),F.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((i=>this.fi.add(i.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.fi,(r=>{const s=te.fromPath(r);return this.gi(e,s).next((i=>{i||n.removeEntry(s,le.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return F.or([()=>F.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class ba{constructor(e,n){this.persistence=e,this.pi=new ts((r=>tR(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=uS(this,n)}static mi(e,n){return new ba(e,n)}Ei(){}di(e){return F.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((s=>r+s))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return F.forEach(this.pi,((r,s)=>this.br(e,r,s).next((i=>i?F.resolve():n(s)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,(o=>this.br(e,o,n).next((c=>{c||(r++,i.removeEntry(o,le.min()))})))).next((()=>i.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),F.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),F.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),F.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Qo(e.data.value)),n}br(e,n,r){return F.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return F.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Lu{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Te(),s=Te();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Lu(e,n.fromCache,r,s)}}class TS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class IS{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return nI()?8:Zb(bt())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.ws(e,n,s,r).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new TS;return this.Ss(e,n,o).next((c=>{if(i.result=c,this.Vs)return this.bs(e,n,o,c.size)}))})).next((()=>i.result))}bs(e,n,r,s){return r.documentReadCount<this.fs?(ds()<=Ee.DEBUG&&Z("QueryEngine","SDK will not create cache indexes for query:",ps(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),F.resolve()):(ds()<=Ee.DEBUG&&Z("QueryEngine","Query:",ps(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(ds()<=Ee.DEBUG&&Z("QueryEngine","The SDK decides to create cache indexes for query:",ps(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Tn(n))):F.resolve())}ys(e,n){if(qd(n))return F.resolve(null);let r=Tn(n);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=Nl(n,null,"F"),r=Tn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((i=>{const o=Te(...i);return this.ps.getDocuments(e,o).next((c=>this.indexManager.getMinOffset(e,r).next((l=>{const u=this.Ds(n,c);return this.Cs(n,u,o,l.readTime)?this.ys(e,Nl(n,null,"F")):this.vs(e,u,n,l)}))))})))))}ws(e,n,r,s){return qd(n)||s.isEqual(le.min())?F.resolve(null):this.ps.getDocuments(e,r).next((i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?F.resolve(null):(ds()<=Ee.DEBUG&&Z("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ps(n)),this.vs(e,o,n,Kb(s,Hi)).next((c=>c)))}))}Ds(e,n){let r=new rt(__(e));return n.forEach(((s,i)=>{Za(e,i)&&(r=r.add(i))})),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return ds()<=Ee.DEBUG&&Z("QueryEngine","Using full collection scan to execute query:",ps(n)),this.ps.getDocumentsMatchingQuery(e,n,Er.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next((i=>(n.forEach((o=>{i=i.insert(o.key,o)})),i)))}}const Fu="LocalStore",AS=3e8;class bS{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new $e(we),this.xs=new ts((i=>Pu(i)),Cu),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new dS(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function RS(t,e,n,r){return new bS(t,e,n,r)}async function G_(t,e){const n=fe(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((i=>{const o=[],c=[];let l=Te();for(const u of s){o.push(u.batchId);for(const f of u.mutations)l=l.add(f.key)}for(const u of i){c.push(u.batchId);for(const f of u.mutations)l=l.add(f.key)}return n.localDocuments.getDocuments(r,l).next((u=>({Ls:u,removedBatchIds:o,addedBatchIds:c})))}))}))}function SS(t,e){const n=fe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,l,u,f){const p=u.batch,m=p.keys();let y=F.resolve();return m.forEach((x=>{y=y.next((()=>f.getEntry(l,x))).next((k=>{const R=u.docVersions.get(x);Re(R!==null,48541),k.version.compareTo(R)<0&&(p.applyToRemoteDocument(k,u),k.isValidDocument()&&(k.setReadTime(u.commitVersion),f.addEntry(k)))}))})),y.next((()=>c.mutationQueue.removeMutationBatch(l,p)))})(n,r,e,i).next((()=>i.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let l=Te();for(let u=0;u<c.mutationResults.length;++u)c.mutationResults[u].transformResults.length>0&&(l=l.add(c.batch.mutations[u].key));return l})(e)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function W_(t){const e=fe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function PS(t,e){const n=fe(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const c=[];e.targetChanges.forEach(((f,p)=>{const m=s.get(p);if(!m)return;c.push(n.Pi.removeMatchingKeys(i,f.removedDocuments,p).next((()=>n.Pi.addMatchingKeys(i,f.addedDocuments,p))));let y=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(mt.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):f.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(f.resumeToken,r)),s=s.insert(p,y),(function(k,R,V){return k.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=AS?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0})(m,y,f)&&c.push(n.Pi.updateTargetData(i,y))}));let l=qn(),u=Te();if(e.documentUpdates.forEach((f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))})),c.push(CS(i,o,e.documentUpdates).next((f=>{l=f.ks,u=f.qs}))),!r.isEqual(le.min())){const f=n.Pi.getLastRemoteSnapshotVersion(i).next((p=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r)));c.push(f)}return F.waitFor(c).next((()=>o.apply(i))).next((()=>n.localDocuments.getLocalViewOfDocuments(i,l,u))).next((()=>l))})).then((i=>(n.Ms=s,i)))}function CS(t,e,n){let r=Te(),s=Te();return n.forEach((i=>r=r.add(i))),e.getEntries(t,r).next((i=>{let o=qn();return n.forEach(((c,l)=>{const u=i.get(c);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(c)),l.isNoDocument()&&l.version.isEqual(le.min())?(e.removeEntry(c,l.readTime),o=o.insert(c,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(c,l)):Z(Fu,"Ignoring outdated watch update for ",c,". Current version:",u.version," Watch version:",l.version)})),{ks:o,qs:s}}))}function xS(t,e){const n=fe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=bu),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function kS(t,e){const n=fe(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.Pi.getTargetData(r,e).next((i=>i?(s=i,F.resolve(s)):n.Pi.allocateTargetId(r).next((o=>(s=new ar(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function Ml(t,e,n){const r=fe(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,(o=>r.persistence.referenceDelegate.removeTarget(o,s)))}catch(o){if(!Hs(o))throw o;Z(Fu,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function np(t,e,n){const r=fe(t);let s=le.min(),i=Te();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(l,u,f){const p=fe(l),m=p.xs.get(f);return m!==void 0?F.resolve(p.Ms.get(m)):p.Pi.getTargetData(u,f)})(r,o,Tn(e)).next((c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,c.targetId).next((l=>{i=l}))})).next((()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:le.min(),n?i:Te()))).next((c=>(NS(r,ER(e),c),{documents:c,Qs:i})))))}function NS(t,e,n){let r=t.Os.get(e)||le.min();n.forEach(((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)})),t.Os.set(e,r)}class rp{constructor(){this.activeTargetIds=RR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class VS{constructor(){this.Mo=new rp,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new rp,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class DS{Oo(e){}shutdown(){}}const sp="ConnectivityMonitor";class ip{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Z(sp,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Z(sp,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Fo=null;function Ll(){return Fo===null?Fo=(function(){return 268435456+Math.round(2147483648*Math.random())})():Fo++,"0x"+Fo.toString(16)}const Yc="RestConnection",OS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class MS{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Ea?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=Ll(),c=this.zo(e,n.toUriEncodedString());Z(Yc,`Sending RPC '${e}' ${o}:`,c,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,i);const{host:u}=new URL(c),f=Us(u);return this.Jo(e,c,l,r,f).then((p=>(Z(Yc,`Received RPC '${e}' ${o}: `,p),p)),(p=>{throw ks(Yc,`RPC '${e}' ${o} failed with error: `,p,"url: ",c,"request:",r),p}))}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+$s})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,i)=>e[i]=s)),r&&r.headers.forEach(((s,i)=>e[i]=s))}zo(e,n){const r=OS[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}class LS{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Et="WebChannelConnection";class FS extends MS{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=Ll();return new Promise(((c,l)=>{const u=new Hg;u.setWithCredentials(!0),u.listenOnce(Gg.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case Ko.NO_ERROR:const p=u.getResponseJson();Z(Et,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),c(p);break;case Ko.TIMEOUT:Z(Et,`RPC '${e}' ${o} timed out`),l(new z(D.DEADLINE_EXCEEDED,"Request time out"));break;case Ko.HTTP_ERROR:const m=u.getStatus();if(Z(Et,`RPC '${e}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const x=y?.error;if(x&&x.status&&x.message){const k=(function(V){const B=V.toLowerCase().replace(/_/g,"-");return Object.values(D).indexOf(B)>=0?B:D.UNKNOWN})(x.status);l(new z(k,x.message))}else l(new z(D.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new z(D.UNAVAILABLE,"Connection failed."));break;default:oe(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{Z(Et,`RPC '${e}' ${o} completed.`)}}));const f=JSON.stringify(s);Z(Et,`RPC '${e}' ${o} sending request:`,s),u.send(n,"POST",f,r,15)}))}T_(e,n,r){const s=Ll(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Kg(),c=zg(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const f=i.join("");Z(Et,`Creating RPC '${e}' stream ${s}: ${f}`,l);const p=o.createWebChannel(f,l);this.I_(p);let m=!1,y=!1;const x=new LS({Yo:R=>{y?Z(Et,`Not sending because RPC '${e}' stream ${s} is closed:`,R):(m||(Z(Et,`Opening RPC '${e}' stream ${s} transport.`),p.open(),m=!0),Z(Et,`RPC '${e}' stream ${s} sending:`,R),p.send(R))},Zo:()=>p.close()}),k=(R,V,B)=>{R.listen(V,(G=>{try{B(G)}catch(Q){setTimeout((()=>{throw Q}),0)}}))};return k(p,pi.EventType.OPEN,(()=>{y||(Z(Et,`RPC '${e}' stream ${s} transport opened.`),x.o_())})),k(p,pi.EventType.CLOSE,(()=>{y||(y=!0,Z(Et,`RPC '${e}' stream ${s} transport closed`),x.a_(),this.E_(p))})),k(p,pi.EventType.ERROR,(R=>{y||(y=!0,ks(Et,`RPC '${e}' stream ${s} transport errored. Name:`,R.name,"Message:",R.message),x.a_(new z(D.UNAVAILABLE,"The operation could not be completed")))})),k(p,pi.EventType.MESSAGE,(R=>{if(!y){const V=R.data[0];Re(!!V,16349);const B=V,G=B?.error||B[0]?.error;if(G){Z(Et,`RPC '${e}' stream ${s} received error:`,G);const Q=G.status;let se=(function(_){const v=Ye[_];if(v!==void 0)return N_(v)})(Q),ge=G.message;se===void 0&&(se=D.INTERNAL,ge="Unknown error status: "+Q+" with message "+G.message),y=!0,x.a_(new z(se,ge)),p.close()}else Z(Et,`RPC '${e}' stream ${s} received:`,V),x.u_(V)}})),k(c,Wg.STAT_EVENT,(R=>{R.stat===bl.PROXY?Z(Et,`RPC '${e}' stream ${s} detected buffering proxy`):R.stat===bl.NOPROXY&&Z(Et,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{x.__()}),0),x}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Jc(){return typeof document<"u"?document:null}function sc(t){return new $R(t,!0)}class Uu{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&Z("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const op="PersistentStream";class z_{constructor(e,n,r,s,i,o,c,l){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Uu(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===D.RESOURCE_EXHAUSTED?($n(n.toString()),$n("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===D.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===n&&this.G_(r,s)}),(r=>{e((()=>{const s=new z(D.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Z(op,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Z(op,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class US extends z_{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=WR(this.serializer,e),r=(function(i){if(!("targetChange"in i))return le.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?le.min():o.readTime?zt(o.readTime):le.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Ol(this.serializer),n.addTarget=(function(i,o){let c;const l=o.target;if(c=xl(l)?{documents:KR(i,l)}:{query:QR(i,l).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=O_(i,o.resumeToken);const u=Vl(i,o.expectedCount);u!==null&&(c.expectedCount=u)}else if(o.snapshotVersion.compareTo(le.min())>0){c.readTime=Ia(i,o.snapshotVersion.toTimestamp());const u=Vl(i,o.expectedCount);u!==null&&(c.expectedCount=u)}return c})(this.serializer,e);const r=JR(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Ol(this.serializer),n.removeTarget=e,this.q_(n)}}class BS extends z_{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Re(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Re(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Re(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=zR(e.writeResults,e.commitTime),r=zt(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Ol(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>U_(this.serializer,r)))};this.q_(n)}}class jS{}class $S extends jS{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new z(D.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Go(e,Dl(n,r),s,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new z(D.UNKNOWN,i.toString())}))}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Ho(e,Dl(n,r),s,o,c,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new z(D.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class qS{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?($n(n),this.aa=!1):Z("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Zr="RemoteStore";class HS{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((o=>{r.enqueueAndForget((async()=>{ns(this)&&(Z(Zr,"Restarting streams for network reachability change."),await(async function(l){const u=fe(l);u.Ea.add(4),await po(u),u.Ra.set("Unknown"),u.Ea.delete(4),await ic(u)})(this))}))})),this.Ra=new qS(r,s)}}async function ic(t){if(ns(t))for(const e of t.da)await e(!0)}async function po(t){for(const e of t.da)await e(!1)}function K_(t,e){const n=fe(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),qu(n)?$u(n):Ws(n).O_()&&ju(n,e))}function Bu(t,e){const n=fe(t),r=Ws(n);n.Ia.delete(e),r.O_()&&Q_(n,e),n.Ia.size===0&&(r.O_()?r.L_():ns(n)&&n.Ra.set("Unknown"))}function ju(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ws(t).Y_(e)}function Q_(t,e){t.Va.Ue(e),Ws(t).Z_(e)}function $u(t){t.Va=new FR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ws(t).start(),t.Ra.ua()}function qu(t){return ns(t)&&!Ws(t).x_()&&t.Ia.size>0}function ns(t){return fe(t).Ea.size===0}function Y_(t){t.Va=void 0}async function GS(t){t.Ra.set("Online")}async function WS(t){t.Ia.forEach(((e,n)=>{ju(t,e)}))}async function zS(t,e){Y_(t),qu(t)?(t.Ra.ha(e),$u(t)):t.Ra.set("Unknown")}async function KS(t,e,n){if(t.Ra.set("Online"),e instanceof D_&&e.state===2&&e.cause)try{await(async function(s,i){const o=i.cause;for(const c of i.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,o),s.Ia.delete(c),s.Va.removeTarget(c))})(t,e)}catch(r){Z(Zr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ra(t,r)}else if(e instanceof Xo?t.Va.Ze(e):e instanceof V_?t.Va.st(e):t.Va.tt(e),!n.isEqual(le.min()))try{const r=await W_(t.localStore);n.compareTo(r)>=0&&await(function(i,o){const c=i.Va.Tt(o);return c.targetChanges.forEach(((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const f=i.Ia.get(u);f&&i.Ia.set(u,f.withResumeToken(l.resumeToken,o))}})),c.targetMismatches.forEach(((l,u)=>{const f=i.Ia.get(l);if(!f)return;i.Ia.set(l,f.withResumeToken(mt.EMPTY_BYTE_STRING,f.snapshotVersion)),Q_(i,l);const p=new ar(f.target,l,u,f.sequenceNumber);ju(i,p)})),i.remoteSyncer.applyRemoteEvent(c)})(t,n)}catch(r){Z(Zr,"Failed to raise snapshot:",r),await Ra(t,r)}}async function Ra(t,e,n){if(!Hs(e))throw e;t.Ea.add(1),await po(t),t.Ra.set("Offline"),n||(n=()=>W_(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Z(Zr,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await ic(t)}))}function J_(t,e){return e().catch((n=>Ra(t,n,e)))}async function oc(t){const e=fe(t),n=Ar(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:bu;for(;QS(e);)try{const s=await xS(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,YS(e,s)}catch(s){await Ra(e,s)}X_(e)&&Z_(e)}function QS(t){return ns(t)&&t.Ta.length<10}function YS(t,e){t.Ta.push(e);const n=Ar(t);n.O_()&&n.X_&&n.ea(e.mutations)}function X_(t){return ns(t)&&!Ar(t).x_()&&t.Ta.length>0}function Z_(t){Ar(t).start()}async function JS(t){Ar(t).ra()}async function XS(t){const e=Ar(t);for(const n of t.Ta)e.ea(n.mutations)}async function ZS(t,e,n){const r=t.Ta.shift(),s=Nu.from(r,e,n);await J_(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await oc(t)}async function eP(t,e){e&&Ar(t).X_&&await(async function(r,s){if((function(o){return k_(o)&&o!==D.ABORTED})(s.code)){const i=r.Ta.shift();Ar(r).B_(),await J_(r,(()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s))),await oc(r)}})(t,e),X_(t)&&Z_(t)}async function ap(t,e){const n=fe(t);n.asyncQueue.verifyOperationInProgress(),Z(Zr,"RemoteStore received new credentials");const r=ns(n);n.Ea.add(3),await po(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await ic(n)}async function tP(t,e){const n=fe(t);e?(n.Ea.delete(2),await ic(n)):e||(n.Ea.add(2),await po(n),n.Ra.set("Unknown"))}function Ws(t){return t.ma||(t.ma=(function(n,r,s){const i=fe(n);return i.sa(),new US(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Xo:GS.bind(null,t),t_:WS.bind(null,t),r_:zS.bind(null,t),H_:KS.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),qu(t)?$u(t):t.Ra.set("Unknown")):(await t.ma.stop(),Y_(t))}))),t.ma}function Ar(t){return t.fa||(t.fa=(function(n,r,s){const i=fe(n);return i.sa(),new BS(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:JS.bind(null,t),r_:eP.bind(null,t),ta:XS.bind(null,t),na:ZS.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await oc(t)):(await t.fa.stop(),t.Ta.length>0&&(Z(Zr,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class Hu{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new wn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,c=new Hu(e,n,o,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(D.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gu(t,e){if($n("AsyncQueue",`${e}: ${t}`),Hs(t))return new z(D.UNAVAILABLE,`${e}: ${t}`);throw t}class bs{static emptySet(e){return new bs(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||te.comparator(n.key,r.key):(n,r)=>te.comparator(n.key,r.key),this.keyedMap=mi(),this.sortedSet=new $e(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof bs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new bs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class cp{constructor(){this.ga=new $e(te.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):oe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Ms{constructor(e,n,r,s,i,o,c,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach((c=>{o.push({type:0,doc:c})})),new Ms(e,n,bs.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xa(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}class nP{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class rP{constructor(){this.queries=lp(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=fe(n),i=s.queries;s.queries=lp(),i.forEach(((o,c)=>{for(const l of c.Sa)l.onError(r)}))})(this,new z(D.ABORTED,"Firestore shutting down"))}}function lp(){return new ts((t=>g_(t)),Xa)}async function ey(t,e){const n=fe(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new nP,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const c=Gu(o,`Initialization of query '${ps(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Wu(n)}async function ty(t,e){const n=fe(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function sP(t,e){const n=fe(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const c of o.Sa)c.Fa(s)&&(r=!0);o.wa=s}}r&&Wu(n)}function iP(t,e,n){const r=fe(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function Wu(t){t.Ca.forEach((e=>{e.next()}))}var Fl,up;(up=Fl||(Fl={})).Ma="default",up.Cache="cache";class ny{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ms(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ms.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Fl.Cache}}class ry{constructor(e){this.key=e}}class sy{constructor(e){this.key=e}}class oP{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Te(),this.mutatedKeys=Te(),this.eu=__(e),this.tu=new bs(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new cp,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,c=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((f,p)=>{const m=s.get(f),y=Za(this.query,p)?p:null,x=!!m&&this.mutatedKeys.has(m.key),k=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let R=!1;m&&y?m.data.isEqual(y.data)?x!==k&&(r.track({type:3,doc:y}),R=!0):this.su(m,y)||(r.track({type:2,doc:y}),R=!0,(l&&this.eu(y,l)>0||u&&this.eu(y,u)<0)&&(c=!0)):!m&&y?(r.track({type:0,doc:y}),R=!0):m&&!y&&(r.track({type:1,doc:m}),R=!0,(l||u)&&(c=!0)),R&&(y?(o=o.add(y),i=k?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{tu:o,iu:r,Cs:c,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((f,p)=>(function(y,x){const k=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return oe(20277,{Rt:R})}};return k(y)-k(x)})(f.type,p.type)||this.eu(f.doc,p.doc))),this.ou(r),s=s??!1;const c=n&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new Ms(this.query,e.tu,i,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new cp,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Te(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new sy(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new ry(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=Te();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ms.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const zu="SyncEngine";class aP{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class cP{constructor(e){this.key=e,this.hu=!1}}class lP{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new ts((c=>g_(c)),Xa),this.Iu=new Map,this.Eu=new Set,this.du=new $e(te.comparator),this.Au=new Map,this.Ru=new Ou,this.Vu={},this.mu=new Map,this.fu=Os.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function uP(t,e,n=!0){const r=uy(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await iy(r,e,n,!0),s}async function hP(t,e){const n=uy(t);await iy(n,e,!0,!1)}async function iy(t,e,n,r){const s=await kS(t.localStore,Tn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let c;return r&&(c=await fP(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&K_(t.remoteStore,s),c}async function fP(t,e,n,r,s){t.pu=(p,m,y)=>(async function(k,R,V,B){let G=R.view.ru(V);G.Cs&&(G=await np(k.localStore,R.query,!1).then((({documents:I})=>R.view.ru(I,G))));const Q=B&&B.targetChanges.get(R.targetId),se=B&&B.targetMismatches.get(R.targetId)!=null,ge=R.view.applyChanges(G,k.isPrimaryClient,Q,se);return fp(k,R.targetId,ge.au),ge.snapshot})(t,p,m,y);const i=await np(t.localStore,e,!0),o=new oP(e,i.Qs),c=o.ru(i.documents),l=fo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(c,t.isPrimaryClient,l);fp(t,n,u.au);const f=new aP(e,n,o);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function dP(t,e,n){const r=fe(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter((o=>!Xa(o,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Ml(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Bu(r.remoteStore,s.targetId),Ul(r,s.targetId)})).catch(qs)):(Ul(r,s.targetId),await Ml(r.localStore,s.targetId,!0))}async function pP(t,e){const n=fe(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Bu(n.remoteStore,r.targetId))}async function mP(t,e,n){const r=TP(t);try{const s=await(function(o,c){const l=fe(o),u=Be.now(),f=c.reduce(((y,x)=>y.add(x.key)),Te());let p,m;return l.persistence.runTransaction("Locally write mutations","readwrite",(y=>{let x=qn(),k=Te();return l.Ns.getEntries(y,f).next((R=>{x=R,x.forEach(((V,B)=>{B.isValidDocument()||(k=k.add(V))}))})).next((()=>l.localDocuments.getOverlayedDocuments(y,x))).next((R=>{p=R;const V=[];for(const B of c){const G=NR(B,p.get(B.key).overlayedDocument);G!=null&&V.push(new kr(B.key,G,c_(G.value.mapValue),pt.exists(!0)))}return l.mutationQueue.addMutationBatch(y,u,V,c)})).next((R=>{m=R;const V=R.applyToLocalDocumentSet(p,k);return l.documentOverlayCache.saveOverlays(y,R.batchId,V)}))})).then((()=>({batchId:m.batchId,changes:v_(p)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(o,c,l){let u=o.Vu[o.currentUser.toKey()];u||(u=new $e(we)),u=u.insert(c,l),o.Vu[o.currentUser.toKey()]=u})(r,s.batchId,n),await mo(r,s.changes),await oc(r.remoteStore)}catch(s){const i=Gu(s,"Failed to persist write");n.reject(i)}}async function oy(t,e){const n=fe(t);try{const r=await PS(n.localStore,e);e.targetChanges.forEach(((s,i)=>{const o=n.Au.get(i);o&&(Re(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?Re(o.hu,14607):s.removedDocuments.size>0&&(Re(o.hu,42227),o.hu=!1))})),await mo(n,r,e)}catch(r){await qs(r)}}function hp(t,e,n){const r=fe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach(((i,o)=>{const c=o.view.va(e);c.snapshot&&s.push(c.snapshot)})),(function(o,c){const l=fe(o);l.onlineState=c;let u=!1;l.queries.forEach(((f,p)=>{for(const m of p.Sa)m.va(c)&&(u=!0)})),u&&Wu(l)})(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function gP(t,e,n){const r=fe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new $e(te.comparator);o=o.insert(i,at.newNoDocument(i,le.min()));const c=Te().add(i),l=new rc(le.min(),new Map,new $e(we),o,c);await oy(r,l),r.du=r.du.remove(i),r.Au.delete(e),Ku(r)}else await Ml(r.localStore,e,!1).then((()=>Ul(r,e,n))).catch(qs)}async function _P(t,e){const n=fe(t),r=e.batch.batchId;try{const s=await SS(n.localStore,e);cy(n,r,null),ay(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await mo(n,s)}catch(s){await qs(s)}}async function yP(t,e,n){const r=fe(t);try{const s=await(function(o,c){const l=fe(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let f;return l.mutationQueue.lookupMutationBatch(u,c).next((p=>(Re(p!==null,37113),f=p.keys(),l.mutationQueue.removeMutationBatch(u,p)))).next((()=>l.mutationQueue.performConsistencyCheck(u))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(u,f,c))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f))).next((()=>l.localDocuments.getDocuments(u,f)))}))})(r.localStore,e);cy(r,e,n),ay(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await mo(r,s)}catch(s){await qs(s)}}function ay(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function cy(t,e,n){const r=fe(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Ul(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||ly(t,r)}))}function ly(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Bu(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Ku(t))}function fp(t,e,n){for(const r of n)r instanceof ry?(t.Ru.addReference(r.key,e),vP(t,r)):r instanceof sy?(Z(zu,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||ly(t,r.key)):oe(19791,{wu:r})}function vP(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Z(zu,"New document in limbo: "+n),t.Eu.add(r),Ku(t))}function Ku(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new te(Ve.fromString(e)),r=t.fu.next();t.Au.set(r,new cP(n)),t.du=t.du.insert(n,r),K_(t.remoteStore,new ar(Tn(xu(n.path)),r,"TargetPurposeLimboResolution",Ya.ce))}}async function mo(t,e,n){const r=fe(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((c,l)=>{o.push(r.pu(l,e,n).then((u=>{if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:n?.targetChanges.get(l.targetId)?.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){s.push(u);const f=Lu.As(l.targetId,u);i.push(f)}})))})),await Promise.all(o),r.Pu.H_(s),await(async function(l,u){const f=fe(l);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>F.forEach(u,(m=>F.forEach(m.Es,(y=>f.persistence.referenceDelegate.addReference(p,m.targetId,y))).next((()=>F.forEach(m.ds,(y=>f.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))))))}catch(p){if(!Hs(p))throw p;Z(Fu,"Failed to update sequence numbers: "+p)}for(const p of u){const m=p.targetId;if(!p.fromCache){const y=f.Ms.get(m),x=y.snapshotVersion,k=y.withLastLimboFreeSnapshotVersion(x);f.Ms=f.Ms.insert(m,k)}}})(r.localStore,i))}async function EP(t,e){const n=fe(t);if(!n.currentUser.isEqual(e)){Z(zu,"User change. New user:",e.toKey());const r=await G_(n.localStore,e);n.currentUser=e,(function(i,o){i.mu.forEach((c=>{c.forEach((l=>{l.reject(new z(D.CANCELLED,o))}))})),i.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await mo(n,r.Ls)}}function wP(t,e){const n=fe(t),r=n.Au.get(e);if(r&&r.hu)return Te().add(r.key);{let s=Te();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const c=n.Tu.get(o);s=s.unionWith(c.view.nu)}return s}}function uy(t){const e=fe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=oy.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=gP.bind(null,e),e.Pu.H_=sP.bind(null,e.eventManager),e.Pu.yu=iP.bind(null,e.eventManager),e}function TP(t){const e=fe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_P.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=yP.bind(null,e),e}class Sa{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=sc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return RS(this.persistence,new IS,e.initialUser,this.serializer)}Cu(e){return new H_(Mu.mi,this.serializer)}Du(e){return new VS}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Sa.provider={build:()=>new Sa};class IP extends Sa{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Re(this.persistence.referenceDelegate instanceof ba,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new cS(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Ot.withCacheSize(this.cacheSizeBytes):Ot.DEFAULT;return new H_((r=>ba.mi(r,n)),this.serializer)}}class Bl{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>hp(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=EP.bind(null,this.syncEngine),await tP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new rP})()}createDatastore(e){const n=sc(e.databaseInfo.databaseId),r=(function(i){return new FS(i)})(e.databaseInfo);return(function(i,o,c,l){return new $S(i,o,c,l)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,s,i,o,c){return new HS(r,s,i,o,c)})(this.localStore,this.datastore,e.asyncQueue,(n=>hp(this.syncEngine,n,0)),(function(){return ip.v()?new ip:new DS})())}createSyncEngine(e,n){return(function(s,i,o,c,l,u,f){const p=new lP(s,i,o,c,l,u);return f&&(p.gu=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=fe(n);Z(Zr,"RemoteStore shutting down."),r.Ea.add(5),await po(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Bl.provider={build:()=>new Bl};class hy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):$n("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}class AP{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new z(D.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await(async function(s,i){const o=fe(s),c={documents:i.map((p=>Aa(o.serializer,p)))},l=await o.Ho("BatchGetDocuments",o.serializer.databaseId,Ve.emptyPath(),c,i.length),u=new Map;l.forEach((p=>{const m=GR(o.serializer,p);u.set(m.key.toString(),m)}));const f=[];return i.forEach((p=>{const m=u.get(p.toString());Re(!!m,55234,{key:p}),f.push(m)})),f})(this.datastore,e);return n.forEach((r=>this.recordVersion(r))),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new nc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((n=>{e.delete(n.key.toString())})),e.forEach(((n,r)=>{const s=te.fromPath(r);this.mutations.push(new x_(s,this.precondition(s)))})),await(async function(r,s){const i=fe(r),o={writes:s.map((c=>U_(i.serializer,c)))};await i.Go("Commit",i.serializer.databaseId,Ve.emptyPath(),o)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw oe(50498,{Gu:e.constructor.name});n=le.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new z(D.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(le.min())?pt.exists(!1):pt.updateTime(n):pt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(le.min()))throw new z(D.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return pt.updateTime(n)}return pt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class bP{constructor(e,n,r,s,i){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=s,this.deferred=i,this.zu=r.maxAttempts,this.M_=new Uu(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new AP(this.datastore),n=this.Hu(e);n&&n.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((s=>{this.Yu(s)}))))})).catch((r=>{this.Yu(r)}))}))}Hu(e){try{const n=this.updateFunction(e);return!uo(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!k_(n)}return!1}}const br="FirestoreClient";class RP{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Tt.UNAUTHENTICATED,this.clientId=Au.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,(async o=>{Z(br,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(Z(br,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new wn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Gu(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Xc(t,e){t.asyncQueue.verifyOperationInProgress(),Z(br,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async s=>{r.isEqual(s)||(await G_(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function dp(t,e){t.asyncQueue.verifyOperationInProgress();const n=await SP(t);Z(br,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>ap(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,s)=>ap(e.remoteStore,s))),t._onlineComponents=e}async function SP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Z(br,"Using user provided OfflineComponentProvider");try{await Xc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===D.FAILED_PRECONDITION||s.code===D.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;ks("Error using user provided cache. Falling back to memory cache: "+n),await Xc(t,new Sa)}}else Z(br,"Using default OfflineComponentProvider"),await Xc(t,new IP(void 0));return t._offlineComponents}async function Qu(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Z(br,"Using user provided OnlineComponentProvider"),await dp(t,t._uninitializedComponentsProvider._online)):(Z(br,"Using default OnlineComponentProvider"),await dp(t,new Bl))),t._onlineComponents}function PP(t){return Qu(t).then((e=>e.syncEngine))}function CP(t){return Qu(t).then((e=>e.datastore))}async function fy(t){const e=await Qu(t),n=e.eventManager;return n.onListen=uP.bind(null,e.syncEngine),n.onUnlisten=dP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=hP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=pP.bind(null,e.syncEngine),n}function xP(t,e,n={}){const r=new wn;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,c,l,u){const f=new hy({next:m=>{f.Nu(),o.enqueueAndForget((()=>ty(i,p)));const y=m.docs.has(c);!y&&m.fromCache?u.reject(new z(D.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&l&&l.source==="server"?u.reject(new z(D.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),p=new ny(xu(c.path),f,{includeMetadataChanges:!0,qa:!0});return ey(i,p)})(await fy(t),t.asyncQueue,e,n,r))),r.promise}function kP(t,e,n={}){const r=new wn;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,c,l,u){const f=new hy({next:m=>{f.Nu(),o.enqueueAndForget((()=>ty(i,p))),m.fromCache&&l.source==="server"?u.reject(new z(D.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),p=new ny(c,f,{includeMetadataChanges:!0,qa:!0});return ey(i,p)})(await fy(t),t.asyncQueue,e,n,r))),r.promise}function dy(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const pp=new Map;const py="firestore.googleapis.com",mp=!0;class gp{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new z(D.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=py,this.ssl=mp}else this.host=e.host,this.ssl=e.ssl??mp;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=q_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<oS)throw new z(D.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}zb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dy(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new z(D.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new z(D.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new z(D.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ac{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gp({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new z(D.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new z(D.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gp(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Lb;switch(r.type){case"firstParty":return new jb(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new z(D.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=pp.get(n);r&&(Z("ComponentProvider","Removing Datastore"),pp.delete(n),r.terminate())})(this),Promise.resolve()}}function NP(t,e,n,r={}){t=Zt(t,ac);const s=Us(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;s&&(tg(`https://${c}`),ng("Firestore",!0)),i.host!==py&&i.host!==c&&ks("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:c,ssl:s,emulatorOptions:r};if(!Kr(l,o)&&(t._setSettings(l),r.mockUserToken)){let u,f;if(typeof r.mockUserToken=="string")u=r.mockUserToken,f=Tt.MOCK_USER;else{u=zT(r.mockUserToken,t._app?.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new z(D.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Tt(p)}t._authCredentials=new Fb(new Yg(u,f))}}class rs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new rs(this.firestore,e,this._query)}}class We{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new We(this.firestore,e,this._key)}toJSON(){return{type:We._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(lo(n,We._jsonSchema))return new We(e,r||null,new te(Ve.fromString(n.referencePath)))}}We._jsonSchemaVersion="firestore/documentReference/1.0",We._jsonSchema={type:Xe("string",We._jsonSchemaVersion),referencePath:Xe("string")};class mr extends rs{constructor(e,n,r){super(e,n,xu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new We(this.firestore,null,new te(e))}withConverter(e){return new mr(this.firestore,e,this._path)}}function my(t,e,...n){if(t=et(t),Jg("collection","path",e),t instanceof ac){const r=Ve.fromString(e,...n);return Cd(r),new mr(t,null,r)}{if(!(t instanceof We||t instanceof mr))throw new z(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ve.fromString(e,...n));return Cd(r),new mr(t.firestore,null,r)}}function Sn(t,e,...n){if(t=et(t),arguments.length===1&&(e=Au.newId()),Jg("doc","path",e),t instanceof ac){const r=Ve.fromString(e,...n);return Pd(r),new We(t,null,new te(r))}{if(!(t instanceof We||t instanceof mr))throw new z(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ve.fromString(e,...n));return Pd(r),new We(t.firestore,t instanceof mr?t.converter:null,new te(r))}}const _p="AsyncQueue";class yp{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Uu(this,"async_queue_retry"),this._c=()=>{const r=Jc();r&&Z(_p,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Jc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Jc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new wn;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Hs(e))throw e;Z(_p,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,$n("INTERNAL UNHANDLED ERROR: ",vp(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Hu.createAndSchedule(this,e,n,r,(i=>this.hc(i)));return this.tc.push(s),s}uc(){this.nc&&oe(47125,{Pc:vp(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function vp(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Nr extends ac{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new yp,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new yp(e),this._firestoreClient=void 0,await e}}}function VP(t,e){const n=typeof t=="object"?t:og(),r=typeof t=="string"?t:Ea,s=fu(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=GT("firestore");i&&NP(s,...i)}return s}function cc(t){if(t._terminated)throw new z(D.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||DP(t),t._firestoreClient}function DP(t){const e=t._freezeSettings(),n=(function(s,i,o,c){return new sR(s,i,o,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,dy(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new RP(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(s){const i=s?._online.build();return{_offline:s?._offline.build(i),_online:i}})(t._componentsProvider))}class qt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qt(mt.fromBase64String(e))}catch(n){throw new z(D.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new qt(mt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:qt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(lo(e,qt._jsonSchema))return qt.fromBase64String(e.bytes)}}qt._jsonSchemaVersion="firestore/bytes/1.0",qt._jsonSchema={type:Xe("string",qt._jsonSchemaVersion),bytes:Xe("string")};class go{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new z(D.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class _o{constructor(e){this._methodName=e}}class In{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new z(D.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new z(D.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return we(this._lat,e._lat)||we(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:In._jsonSchemaVersion}}static fromJSON(e){if(lo(e,In._jsonSchema))return new In(e.latitude,e.longitude)}}In._jsonSchemaVersion="firestore/geoPoint/1.0",In._jsonSchema={type:Xe("string",In._jsonSchemaVersion),latitude:Xe("number"),longitude:Xe("number")};class An{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:An._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(lo(e,An._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new An(e.vectorValues);throw new z(D.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}An._jsonSchemaVersion="firestore/vectorValue/1.0",An._jsonSchema={type:Xe("string",An._jsonSchemaVersion),vectorValues:Xe("object")};const OP=/^__.*__$/;class MP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new kr(e,this.data,this.fieldMask,n,this.fieldTransforms):new ho(e,this.data,n,this.fieldTransforms)}}class gy{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new kr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function _y(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oe(40011,{Ac:t})}}class Yu{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Yu({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Pa(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(_y(this.Ac)&&OP.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class LP{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||sc(e)}Cc(e,n,r,s=!1){return new Yu({Ac:e,methodName:n,Dc:r,path:dt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yo(t){const e=t._freezeSettings(),n=sc(t._databaseId);return new LP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ju(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);eh("Data must be an object, but it was:",o,r);const c=Ey(r,o);let l,u;if(i.merge)l=new Wt(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const p of i.mergeFields){const m=jl(e,p,n);if(!o.contains(m))throw new z(D.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Ty(f,m)||f.push(m)}l=new Wt(f),u=o.fieldTransforms.filter((p=>l.covers(p.field)))}else l=null,u=o.fieldTransforms;return new MP(new Vt(c),l,u)}class lc extends _o{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof lc}}class Xu extends _o{_toFieldTransform(e){return new S_(e.path,new Qi)}isEqual(e){return e instanceof Xu}}class Zu extends _o{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new Xi(e.serializer,T_(e.serializer,this.Fc));return new S_(e.path,n)}isEqual(e){return e instanceof Zu&&this.Fc===e.Fc}}function yy(t,e,n,r){const s=t.Cc(1,e,n);eh("Data must be an object, but it was:",s,r);const i=[],o=Vt.empty();xr(r,((l,u)=>{const f=th(e,l,n);u=et(u);const p=s.yc(f);if(u instanceof lc)i.push(f);else{const m=vo(u,p);m!=null&&(i.push(f),o.set(f,m))}}));const c=new Wt(i);return new gy(o,c,s.fieldTransforms)}function vy(t,e,n,r,s,i){const o=t.Cc(1,e,n),c=[jl(e,r,n)],l=[s];if(i.length%2!=0)throw new z(D.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)c.push(jl(e,i[m])),l.push(i[m+1]);const u=[],f=Vt.empty();for(let m=c.length-1;m>=0;--m)if(!Ty(u,c[m])){const y=c[m];let x=l[m];x=et(x);const k=o.yc(y);if(x instanceof lc)u.push(y);else{const R=vo(x,k);R!=null&&(u.push(y),f.set(y,R))}}const p=new Wt(u);return new gy(f,p,o.fieldTransforms)}function FP(t,e,n,r=!1){return vo(n,t.Cc(r?4:3,e))}function vo(t,e){if(wy(t=et(t)))return eh("Unsupported field value:",e,t),Ey(t,e);if(t instanceof _o)return(function(r,s){if(!_y(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,s){const i=[];let o=0;for(const c of r){let l=vo(c,s.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}})(t,e)}return(function(r,s){if((r=et(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return T_(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Be.fromDate(r);return{timestampValue:Ia(s.serializer,i)}}if(r instanceof Be){const i=new Be(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ia(s.serializer,i)}}if(r instanceof In)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof qt)return{bytesValue:O_(s.serializer,r._byteString)};if(r instanceof We){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Du(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof An)return(function(o,c){return{mapValue:{fields:{[o_]:{stringValue:a_},[wa]:{arrayValue:{values:o.toArray().map((u=>{if(typeof u!="number")throw c.Sc("VectorValues must only contain numeric values.");return ku(c.serializer,u)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${Qa(r)}`)})(t,e)}function Ey(t,e){const n={};return e_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xr(t,((r,s)=>{const i=vo(s,e.mc(r));i!=null&&(n[r]=i)})),{mapValue:{fields:n}}}function wy(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Be||t instanceof In||t instanceof qt||t instanceof We||t instanceof _o||t instanceof An)}function eh(t,e,n){if(!wy(n)||!Xg(n)){const r=Qa(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function jl(t,e,n){if((e=et(e))instanceof go)return e._internalPath;if(typeof e=="string")return th(t,e);throw Pa("Field path arguments must be of type string or ",t,!1,void 0,n)}const UP=new RegExp("[~\\*/\\[\\]]");function th(t,e,n){if(e.search(UP)>=0)throw Pa(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new go(...e.split("."))._internalPath}catch{throw Pa(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Pa(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new z(D.INVALID_ARGUMENT,c+t+l)}function Ty(t,e){return t.some((n=>n.isEqual(e)))}class Ca{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new We(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new BP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(uc("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class BP extends Ca{data(){return super.data()}}function uc(t,e){return typeof e=="string"?th(t,e):e instanceof go?e._internalPath:e._delegate._internalPath}function jP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new z(D.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nh{}class Iy extends nh{}function Ay(t,e,...n){let r=[];e instanceof nh&&r.push(e),r=r.concat(n),(function(i){const o=i.filter((l=>l instanceof rh)).length,c=i.filter((l=>l instanceof hc)).length;if(o>1||o>0&&c>0)throw new z(D.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)t=s._apply(t);return t}class hc extends Iy{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new hc(e,n,r)}_apply(e){const n=this._parse(e);return Sy(e._query,n),new rs(e.firestore,e.converter,kl(e._query,n))}_parse(e){const n=yo(e.firestore);return(function(i,o,c,l,u,f,p){let m;if(u.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new z(D.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){wp(p,f);const x=[];for(const k of p)x.push(Ep(l,i,k));m={arrayValue:{values:x}}}else m=Ep(l,i,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||wp(p,f),m=FP(c,o,p,f==="in"||f==="not-in");return Je.create(u,f,m)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function by(t,e,n){const r=e,s=uc("where",t);return hc._create(s,r,n)}class rh extends nh{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new rh(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:un.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(s,i){let o=s;const c=i.getFlattenedFilters();for(const l of c)Sy(o,l),o=kl(o,l)})(e._query,n),new rs(e.firestore,e.converter,kl(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class sh extends Iy{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new sh(e,n)}_apply(e){const n=(function(s,i,o){if(s.startAt!==null)throw new z(D.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new z(D.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ki(i,o)})(e._query,this._field,this._direction);return new rs(e.firestore,e.converter,(function(s,i){const o=s.explicitOrderBy.concat([i]);return new Gs(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,n))}}function Ry(t,e="asc"){const n=e,r=uc("orderBy",t);return sh._create(r,n)}function Ep(t,e,n){if(typeof(n=et(n))=="string"){if(n==="")throw new z(D.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!m_(e)&&n.indexOf("/")!==-1)throw new z(D.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ve.fromString(n));if(!te.isDocumentKey(r))throw new z(D.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ld(t,new te(r))}if(n instanceof We)return Ld(t,n._key);throw new z(D.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Qa(n)}.`)}function wp(t,e){if(!Array.isArray(t)||t.length===0)throw new z(D.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Sy(t,e){const n=(function(s,i){for(const o of s)for(const c of o.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new z(D.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new z(D.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Py{convertValue(e,n="none"){switch(Ir(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ke(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Tr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw oe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return xr(e,((s,i)=>{r[s]=this.convertValue(i,n)})),r}convertVectorValue(e){const n=e.fields?.[wa].arrayValue?.values?.map((r=>Ke(r.doubleValue)));return new An(n)}convertGeoPoint(e){return new In(Ke(e.latitude),Ke(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Ja(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Gi(e));default:return null}}convertTimestamp(e){const n=wr(e);return new Be(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ve.fromString(e);Re($_(r),9688,{name:e});const s=new Wi(r.get(1),r.get(3)),i=new te(r.popFirst(5));return s.isEqual(n)||$n(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}function ih(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class $P extends Py{constructor(e){super(),this.firestore=e}convertBytes(e){return new qt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new We(this.firestore,null,n)}}class ys{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class gr extends Ca{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Zo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(uc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new z(D.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=gr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}gr._jsonSchemaVersion="firestore/documentSnapshot/1.0",gr._jsonSchema={type:Xe("string",gr._jsonSchemaVersion),bundleSource:Xe("string","DocumentSnapshot"),bundleName:Xe("string"),bundle:Xe("string")};class Zo extends gr{data(e={}){return super.data(e)}}class Rs{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ys(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Zo(this._firestore,this._userDataWriter,r.key,r,new ys(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new z(D.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map((c=>{const l=new Zo(s._firestore,s._userDataWriter,c.doc.key,c.doc,new ys(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}}))}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((c=>i||c.type!==3)).map((c=>{const l=new Zo(s._firestore,s._userDataWriter,c.doc.key,c.doc,new ys(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,f=-1;return c.type!==0&&(u=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:qP(c.type),doc:l,oldIndex:u,newIndex:f}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new z(D.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Rs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Au.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach((i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function qP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return oe(61501,{type:t})}}function oh(t){t=Zt(t,We);const e=Zt(t.firestore,Nr);return xP(cc(e),t._key).then((n=>GP(e,t,n)))}Rs._jsonSchemaVersion="firestore/querySnapshot/1.0",Rs._jsonSchema={type:Xe("string",Rs._jsonSchemaVersion),bundleSource:Xe("string","QuerySnapshot"),bundleName:Xe("string"),bundle:Xe("string")};class ah extends Py{constructor(e){super(),this.firestore=e}convertBytes(e){return new qt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new We(this.firestore,null,n)}}function Cy(t){t=Zt(t,rs);const e=Zt(t.firestore,Nr),n=cc(e),r=new ah(e);return jP(t._query),kP(n,t._query).then((s=>new Rs(e,r,t,s)))}function HP(t,e,n){t=Zt(t,We);const r=Zt(t.firestore,Nr),s=ih(t.converter,e,n);return fc(r,[Ju(yo(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,pt.none())])}function xy(t,e,n,...r){t=Zt(t,We);const s=Zt(t.firestore,Nr),i=yo(s);let o;return o=typeof(e=et(e))=="string"||e instanceof go?vy(i,"updateDoc",t._key,e,n,r):yy(i,"updateDoc",t._key,e),fc(s,[o.toMutation(t._key,pt.exists(!0))])}function ky(t){return fc(Zt(t.firestore,Nr),[new nc(t._key,pt.none())])}function Ny(t,e){const n=Zt(t.firestore,Nr),r=Sn(t),s=ih(t.converter,e);return fc(n,[Ju(yo(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,pt.exists(!1))]).then((()=>r))}function fc(t,e){return(function(r,s){const i=new wn;return r.asyncQueue.enqueueAndForget((async()=>mP(await PP(r),s,i))),i.promise})(cc(t),e)}function GP(t,e,n){const r=n.docs.get(e._key),s=new ah(t);return new gr(t,s,e._key,r,new ys(n.hasPendingWrites,n.fromCache),e.converter)}const WP={maxAttempts:5};function _i(t,e){if((t=et(t)).firestore!==e)throw new z(D.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}class zP{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=yo(e)}get(e){const n=_i(e,this._firestore),r=new $P(this._firestore);return this._transaction.lookup([n._key]).then((s=>{if(!s||s.length!==1)return oe(24041);const i=s[0];if(i.isFoundDocument())return new Ca(this._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Ca(this._firestore,r,n._key,null,n.converter);throw oe(18433,{doc:i})}))}set(e,n,r){const s=_i(e,this._firestore),i=ih(s.converter,n,r),o=Ju(this._dataReader,"Transaction.set",s._key,i,s.converter!==null,r);return this._transaction.set(s._key,o),this}update(e,n,r,...s){const i=_i(e,this._firestore);let o;return o=typeof(n=et(n))=="string"||n instanceof go?vy(this._dataReader,"Transaction.update",i._key,n,r,s):yy(this._dataReader,"Transaction.update",i._key,n),this._transaction.update(i._key,o),this}delete(e){const n=_i(e,this._firestore);return this._transaction.delete(n._key),this}}class KP extends zP{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=_i(e,this._firestore),r=new ah(this._firestore);return super.get(e).then((s=>new gr(this._firestore,r,n._key,s._document,new ys(!1,!1),n.converter)))}}function QP(t,e,n){t=Zt(t,Nr);const r={...WP,...n};return(function(i){if(i.maxAttempts<1)throw new z(D.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(i,o,c){const l=new wn;return i.asyncQueue.enqueueAndForget((async()=>{const u=await CP(i);new bP(i.asyncQueue,u,c,o,l).ju()})),l.promise})(cc(t),(s=>e(new KP(t,s))),r)}function Ls(){return new Xu("serverTimestamp")}function YP(t){return new Zu("increment",t)}(function(e,n=!0){(function(s){$s=s})(Bs),xs(new Qr("firestore",((r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),c=new Nr(new Ub(r.getProvider("auth-internal")),new $b(o,r.getProvider("app-check-internal")),(function(u,f){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new z(D.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wi(u.options.projectId,f)})(o,s),o);return i={useFetchStreams:n,...i},c._setSettings(i),c}),"PUBLIC").setMultipleInstances(!0)),dr(Ad,bd,e),dr(Ad,bd,"esm2020")})();const JP={apiKey:"AIzaSyBxWCMO2jovFoO2p0bRtjObLG6Wm_BUh3A",authDomain:"vue-blog-501c8.firebaseapp.com",projectId:"vue-blog-501c8",storageBucket:"vue-blog-501c8.firebasestorage.app",messagingSenderId:"453986197221",appId:"1:453986197221:web:822f170abbea04e29c7e0c"},Vy=ig(JP),_s=Vb(Vy),Jt=VP(Vy),Vr=kw("auth",{state:()=>({user:null,initialized:!1}),actions:{init(){this.initialized||T0(_s,t=>{this.user=t,this.initialized=!0})},async login(t,e){const{user:n}=await v0(_s,t,e);this.user=n},async signup(t,e){const{user:n}=await y0(_s,t,e);this.user=n},async loginWithGoogle(){const t=new yn,{user:e}=await jg(_s,t);this.user=e},async logout(){await I0(_s),this.user=null}}}),Dy=my(Jt,"posts");async function XP(t){return(await Ny(Dy,{...t,tags:t.tags||[],views:0,likes:0,isPublished:t.isPublished??!0,createdAt:Ls(),updatedAt:Ls()})).id}async function ZP(t,e){const n=Sn(Jt,"posts",t);await xy(n,{...e,updatedAt:Ls()})}async function ch(){const t=Ay(Dy,by("isPublished","==",!0),Ry("createdAt","desc"));return(await Cy(t)).docs.map(n=>({id:n.id,...n.data()}))}async function Oy(t){const e=Sn(Jt,"posts",t),n=await oh(e);return n.exists()?{id:n.id,...n.data()}:null}async function eC(t){await ky(Sn(Jt,"posts",t))}const tC=eC;async function nC(t){const e=Sn(Jt,"posts",t);await xy(e,{views:YP(1)})}async function Tp(t,e){if(!t||!e)return!1;const n=Sn(Jt,"posts",t,"likes",e);return(await oh(n)).exists()}async function rC(t,e){if(!t||!e)throw new Error("invalid postId or userId");const n=Sn(Jt,"posts",t),r=Sn(Jt,"posts",t,"likes",e);return QP(Jt,async s=>{const i=await s.get(n);if(!i.exists())throw new Error("Post not found");const o=i.data(),c=Number(o.likes||0);if((await s.get(r)).exists()){s.delete(r);const u=Math.max(c-1,0);return s.update(n,{likes:u}),{liked:!1,likes:u}}else{s.set(r,{createdAt:Ls()});const u=c+1;return s.update(n,{likes:u}),{liked:!0,likes:u}}})}const sC={class:"min-h-screen bg-white text-slate-900 dark:bg-slate-950 dark:text-slate-100 font-[system-ui] text-[14px] md:text-[15px] transition-colors duration-300"},iC={class:"sticky top-0 z-40 border-b border-slate-200 dark:border-slate-800 bg-white/90 dark:bg-slate-950/95 backdrop-blur-xl"},oC={class:"mx-auto max-w-6xl px-4 py-3 flex items-center justify-between gap-3"},aC={class:"flex items-center gap-3"},cC={class:"hidden md:flex items-center gap-2 text-[12px] md:text-[13px]"},lC={class:"flex items-center gap-2"},uC={key:0},hC={key:1},fC={key:0,class:"hidden md:flex items-center gap-2 text-[11px] md:text-[12px]"},dC={class:"max-w-[160px] truncate rounded bg-slate-100 dark:bg-slate-900 px-2 py-1 border border-slate-300 dark:border-slate-700 text-slate-700 dark:text-slate-300"},pC={key:1,class:"hidden md:flex items-center gap-2 text-[11px] md:text-[12px]"},mC={key:0},gC={key:1},_C={key:0,class:"md:hidden border-t border-slate-200 dark:border-slate-800 bg-white/98 dark:bg-slate-950/98"},yC={class:"mx-auto max-w-6xl px-4 py-2 flex flex-col gap-1 text-[12px]"},vC={key:1,class:"flex items-center justify-between px-2 pt-1"},EC={class:"text-slate-500 text-[11px] truncate"},wC={key:2,class:"flex gap-2 px-2 pt-1"},TC={class:"mx-auto max-w-6xl px-4 py-4 flex flex-col gap-4 md:flex-row"},IC={class:"hidden md:flex w-64 flex-col gap-2 rounded-2xl border border-slate-200 dark:border-slate-800 bg-white/95 dark:bg-slate-950/95 p-3 text-[11px] text-slate-600 dark:text-slate-400"},AC={class:"pl-1 space-y-1 max-h-72 overflow-y-auto"},bC={key:0,class:"text-[10px] text-slate-400"},RC={key:1,class:"text-[10px] text-red-400"},SC={key:2},PC=["onClick"],CC={class:"truncate"},xC={class:"text-[9px] text-slate-400"},kC={class:"mt-3 pt-2 border-t border-slate-200 dark:border-slate-800 text-[10px] text-slate-500 dark:text-slate-600"},NC={class:"font-semibold text-black dark:text-yellow-400"},VC={class:"flex-1 rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-950 p-4 transition-colors duration-300"},DC={class:"mb-3 md:hidden"},OC=["value"],MC={class:"mb-3 flex items-center gap-2 border-b border-slate-200 dark:border-slate-800 pb-2 text-[10px] text-slate-500 dark:text-slate-600"},LC={class:"flex items-center gap-1 rounded-md bg-slate-100 dark:bg-slate-900 px-2 py-1 text-black dark:text-yellow-400"},FC={key:0},UC={class:"ml-2 text-[10px] text-slate-500 dark:text-slate-400"},BC={key:1},jC={class:"leading-relaxed"},$C=Pn({__name:"App",setup(t){const e=ye(!1),n=Vr(),r=Fs(),s=Ha(),i=ye(!0),o=ye([]),c=ye(!1),l=ye(""),u=()=>{const k=document.documentElement;i.value?(k.classList.add("dark"),localStorage.setItem("theme","dark")):(k.classList.remove("dark"),localStorage.setItem("theme","light"))};to(async()=>{n.init?.();const k=localStorage.getItem("theme");k==="dark"?i.value=!0:k==="light"&&(i.value=!1),u(),c.value=!0;try{o.value=await ch()}catch(R){l.value=R?.message||"   ."}finally{c.value=!1}}),ur(i,u),ft(()=>s.name==="post-detail");const f=ft(()=>s.name==="post-detail"&&typeof s.params.id=="string"?s.params.id:null),p=ft(()=>{if(s.name==="post-detail"&&typeof s.params.id=="string"){const k=o.value.find(R=>String(R.id)===s.params.id);if(k){const R=k.createdAt?.toDate?.().toLocaleDateString?.("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit"})||"";return{title:k.title||"untitled.md",author:k.authorName||"",createdAt:R}}}return null}),m=k=>{k?.id&&r.push({name:"post-detail",params:{id:String(k.id)}})},y=k=>{const V=k.target.value;if(!V){r.push({name:"home"});return}r.push({name:"post-detail",params:{id:V}})},x=async()=>{await n.logout(),r.push({name:"home"})};return(k,R)=>(ee(),ie("div",sC,[q("header",iC,[q("div",oC,[q("div",aC,[Fe(be(xt),{to:{name:"home"},class:"flex items-center gap-2"},{default:Ct(()=>[...R[7]||(R[7]=[q("img",{src:Nw,alt:"SALCHO",class:"h-8 w-auto object-contain dark:invert dark:brightness-200"},null,-1)])]),_:1}),q("nav",cC,[Fe(be(xt),{to:{name:"home"},class:"rounded-t-md px-3 py-1.5 border border-transparent hover:bg-slate-100 dark:hover:bg-slate-900/70 hover:text-black dark:hover:text-yellow-400 transition-colors","active-class":"bg-slate-200 dark:bg-slate-900 text-black dark:text-yellow-400"},{default:Ct(()=>[...R[8]||(R[8]=[ze("  ",-1)])]),_:1}),be(n).user?(ee(),ca(be(xt),{key:0,to:{name:"new-post"},class:"rounded-t-md px-3 py-1.5 hover:bg-slate-100 dark:hover:bg-slate-900/70 hover:text-black dark:hover:text-yellow-400 transition-colors","active-class":"bg-slate-200 dark:bg-slate-900 text-black dark:text-yellow-400"},{default:Ct(()=>[...R[9]||(R[9]=[ze("   ",-1)])]),_:1})):Gt("",!0)])]),q("div",lC,[q("button",{onClick:R[0]||(R[0]=V=>i.value=!i.value),class:"flex h-8 w-8 items-center justify-center rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-950 text-[15px] hover:border-black hover:text-black dark:hover:border-yellow-400 dark:hover:text-yellow-400 transition-colors"},[i.value?(ee(),ie("span",uC,"")):(ee(),ie("span",hC,""))]),be(n).user?(ee(),ie("div",fC,[q("span",dC,Ce(be(n).user.email),1),q("button",{onClick:x,class:"rounded px-3 py-1.5 text-[11px] font-semibold bg-black text-white hover:bg-slate-800 dark:bg-yellow-400 dark:text-black dark:hover:bg-yellow-300 transition-colors"}," logout ")])):(ee(),ie("div",pC,[Fe(be(xt),{to:{name:"login"},class:"rounded px-3 py-1.5 border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-950 hover:border-black hover:text-black dark:hover:border-yellow-400 dark:hover:text-yellow-400 transition-colors"},{default:Ct(()=>[...R[10]||(R[10]=[ze(" login ",-1)])]),_:1}),Fe(be(xt),{to:{name:"signup"},class:"rounded px-3 py-1.5 font-semibold bg-black text-white hover:bg-slate-800 dark:bg-yellow-400 dark:text-black dark:hover:bg-yellow-300 transition-colors"},{default:Ct(()=>[...R[11]||(R[11]=[ze(" sign up ",-1)])]),_:1})])),q("button",{class:"md:hidden flex h-8 w-8 items-center justify-center rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-950 text-[16px]",onClick:R[1]||(R[1]=V=>e.value=!e.value)},[e.value?(ee(),ie("span",mC,"")):(ee(),ie("span",gC,""))])])]),e.value?(ee(),ie("div",_C,[q("div",yC,[Fe(be(xt),{to:{name:"home"},class:"px-2 py-1 rounded-md hover:bg-slate-100 dark:hover:bg-slate-900 transition-colors",onClick:R[2]||(R[2]=V=>e.value=!1)},{default:Ct(()=>[...R[12]||(R[12]=[ze("  ",-1)])]),_:1}),be(n).user?(ee(),ca(be(xt),{key:0,to:{name:"new-post"},class:"px-2 py-1 rounded-md hover:bg-slate-100 dark:hover:bg-slate-900 transition-colors",onClick:R[3]||(R[3]=V=>e.value=!1)},{default:Ct(()=>[...R[13]||(R[13]=[ze("   ",-1)])]),_:1})):Gt("",!0),be(n).user?(ee(),ie("div",vC,[q("span",EC,Ce(be(n).user.email),1),q("button",{onClick:R[4]||(R[4]=V=>{x(),e.value=!1}),class:"text-[11px] px-2 py-1 rounded bg-black text-white dark:bg-yellow-400 dark:text-black"}," logout ")])):(ee(),ie("div",wC,[Fe(be(xt),{to:{name:"login"},class:"flex-1 text-center text-[11px] px-2 py-1 rounded border border-slate-300 dark:border-slate-700 hover:border-black dark:hover:border-yellow-400",onClick:R[5]||(R[5]=V=>e.value=!1)},{default:Ct(()=>[...R[14]||(R[14]=[ze(" login ",-1)])]),_:1}),Fe(be(xt),{to:{name:"signup"},class:"flex-1 text-center text-[11px] px-2 py-1 rounded bg-black text-white dark:bg-yellow-400 dark:text-black",onClick:R[6]||(R[6]=V=>e.value=!1)},{default:Ct(()=>[...R[15]||(R[15]=[ze(" sign up ",-1)])]),_:1})]))])])):Gt("",!0)]),q("div",TC,[q("aside",IC,[R[18]||(R[18]=q("div",{class:"flex items-center justify-between mb-1"},[q("span",{class:"text-[10px] uppercase tracking-[0.14em]"},"explorer"),q("span",{class:"text-slate-500"},"")],-1)),R[19]||(R[19]=q("p",{class:"text-[10px] mb-1 text-slate-400 dark:text-slate-500"},"",-1)),q("div",AC,[c.value?(ee(),ie("div",bC," loading posts... ")):l.value?(ee(),ie("div",RC,Ce(l.value),1)):(ee(),ie("div",SC,[(ee(!0),ie(Mt,null,Li(o.value,V=>(ee(),ie("button",{key:V.id,onClick:B=>m(V),class:Da(["flex w-full items-center justify-between gap-2 rounded-md px-2 py-1.5 text-left transition-colors",f.value===String(V.id)?"bg-slate-200 text-black dark:bg-slate-800 dark:text-yellow-400":"hover:bg-slate-100 hover:text-black dark:hover:bg-slate-900 dark:hover:text-yellow-300"])},[q("span",CC,Ce(V.title||"untitled.md"),1),q("span",xC,Ce(V.views??0)+"v ",1)],10,PC))),128))]))]),q("div",kC,[q("p",null,[R[16]||(R[16]=ze(" auth: ",-1)),q("span",NC,Ce(be(n).user?be(n).user.email:"guest"),1)]),R[17]||(R[17]=q("p",null,[ze("env: "),q("span",null,"firebase")],-1))])]),q("main",VC,[q("div",DC,[R[21]||(R[21]=q("label",{class:"block text-[11px] text-slate-500 dark:text-slate-400 mb-1"}," select post ",-1)),q("select",{class:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-950 px-2 py-1.5 text-[12px]",onChange:y},[R[20]||(R[20]=q("option",{value:""},"router-view.tsx ( )",-1)),(ee(!0),ie(Mt,null,Li(o.value,V=>(ee(),ie("option",{key:V.id,value:V.id},Ce(V.title||"untitled.md"),9,OC))),128))],32)]),q("div",MC,[q("div",LC,[R[22]||(R[22]=q("span",{class:"h-1.5 w-1.5 rounded-full bg-black dark:bg-yellow-400"},null,-1)),p.value?(ee(),ie("span",FC,[ze(Ce(p.value.title)+" ",1),q("span",UC,"  "+Ce(p.value.author)+"  "+Ce(p.value.createdAt),1)])):(ee(),ie("span",BC,"router-view.tsx"))]),R[23]||(R[23]=q("div",{class:"flex-1 text-right text-[9px]"}," Vue 3  Firebase  Tailwind ",-1))]),q("div",jC,[Fe(be(Km))])])]),R[24]||(R[24]=qE('<footer class="mt-2 border-t border-slate-200 dark:border-slate-800 bg-white/95 dark:bg-slate-950/95 text-[10px] text-slate-500 dark:text-slate-600"><div class="mx-auto flex max-w-6xl items-center justify-between px-4 py-2 gap-4"><div class="flex items-center gap-2"><span class="h-1.5 w-1.5 rounded-full bg-black dark:bg-yellow-400"></span><span>connected: salcho-blog</span></div><div class="flex items-center gap-3"><span>Ln 42, Col 7</span><span>UTF-8</span><span>Spaces: 2</span><span>TS</span></div></div></footer>',1))]))}}),qC={class:"space-y-6"},HC={key:0,class:"text-xs text-slate-500"},GC={key:1,class:"text-xs text-slate-500"},WC={class:"space-y-2"},zC={class:"text-[10px] text-slate-500"},KC=Pn({__name:"HomePage",setup(t){const e=ye([]),n=ye(!1);return to(async()=>{n.value=!0;try{e.value=await ch()}finally{n.value=!1}}),(r,s)=>(ee(),ie("div",qC,[s[1]||(s[1]=q("section",null,[q("h1",{class:"text-2xl font-semibold text-slate-900 dark:text-slate-100"},[ze(" salcho-blog "),q("span",{class:"text-cyan-400"},"/ Developer")]),q("p",{class:"mt-2 text-sm text-slate-500 dark:text-slate-400"}," IDE    . ")],-1)),q("section",null,[s[0]||(s[0]=q("h2",{class:"text-sm font-medium text-slate-600 dark:text-cyan-400 mb-2"},"   ",-1)),n.value?(ee(),ie("div",HC,"loading...")):e.value.length?Gt("",!0):(ee(),ie("div",GC,"    . ")),q("ul",WC,[(ee(!0),ie(Mt,null,Li(e.value.slice(0,5),i=>(ee(),ie("li",{key:i.id,class:"flex items-center justify-between text-xs"},[Fe(be(xt),{to:`/posts/${i.id}`,class:"text-slate-800 dark:text-slate-200 hover:text-cyan-400"},{default:Ct(()=>[ze(Ce(i.title),1)]),_:2},1032,["to"]),q("span",zC,Ce(i.views??0)+" views ",1)]))),128))])])]))}}),QC={class:"space-y-4"},YC={class:"flex items-center justify-between gap-3"},JC={key:0,class:"text-xs text-slate-500"},XC={key:1,class:"text-xs text-red-400"},ZC={key:2,class:"text-xs text-slate-500"},e1={class:"space-y-2"},t1={class:"text-[10px] text-slate-500"},n1={class:"flex items-center gap-3 text-[9px] text-slate-500"},r1=Pn({__name:"PostsPage",setup(t){const e=ye([]),n=ye(!1),r=ye(""),s=ye("");to(async()=>{n.value=!0;try{e.value=await ch()}catch(o){r.value=o.message||" "}finally{n.value=!1}});const i=computed(()=>e.value.filter(o=>(o.title||"").toLowerCase().includes(s.value.toLowerCase())));return(o,c)=>(ee(),ie("div",QC,[q("div",YC,[c[1]||(c[1]=q("h1",{class:"text-lg font-semibold text-slate-900 dark:text-slate-100"}," posts.ts ",-1)),on(q("input",{"onUpdate:modelValue":c[0]||(c[0]=l=>s.value=l),placeholder:"...",class:"w-40 rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-950 px-2 py-1 text-[11px] text-slate-700 dark:text-slate-200"},null,512),[[an,s.value]])]),n.value?(ee(),ie("div",JC,"loading...")):r.value?(ee(),ie("div",XC,Ce(r.value),1)):be(i).length?Gt("",!0):(ee(),ie("div",ZC,"  . ")),q("ul",e1,[(ee(!0),ie(Mt,null,Li(be(i),l=>(ee(),ie("li",{key:l.id,class:"rounded-lg border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-950 px-3 py-2 flex flex-col gap-1"},[Fe(be(xt),{to:`/posts/${l.id}`,class:"text-sm text-slate-900 dark:text-slate-100 font-medium hover:text-cyan-400"},{default:Ct(()=>[ze(Ce(l.title),1)]),_:2},1032,["to"]),q("p",t1,Ce(l.summary||(l.content||"").slice(0,80)+"..."),1),q("div",n1,[q("span",null,Ce(l.views??0)+" views",1),q("span",null,Ce(l.likes??0)+" likes",1)])]))),128))])]))}}),My=my(Jt,"comments");async function s1(t){await Ny(My,{...t,createdAt:Ls()})}async function Zc(t){const e=Ay(My,by("postId","==",t),Ry("createdAt","asc"));return(await Cy(e)).docs.map(r=>({id:r.id,...r.data()}))}async function i1(t){await ky(Sn(Jt,"comments",t))}const o1={class:"max-w-3xl mx-auto space-y-4"},a1={key:0,class:"text-xs text-slate-500"},c1={key:1,class:"text-xs text-red-400"},l1={key:2,class:"space-y-5"},u1={class:"flex items-center justify-between gap-3"},h1={class:"text-2xl font-semibold text-slate-900 dark:text-slate-100"},f1={class:"flex flex-wrap items-center gap-2 text-[9px] text-slate-500"},d1={class:"text-xs"},p1={class:"whitespace-pre-wrap text-[14px] leading-relaxed text-slate-800 dark:text-slate-100 bg-slate-50 dark:bg-slate-900/90 rounded-2xl p-4"},m1={class:"space-y-3"},g1={class:"text-sm font-medium text-slate-800 dark:text-slate-100 flex items-center gap-2"},_1={class:"text-[9px] text-slate-500"},y1={key:0,class:"flex gap-2 items-start"},v1={key:1,class:"text-[10px] text-slate-500"},E1={key:2,class:"space-y-1.5"},w1={class:"space-y-0.5"},T1={class:"font-medium text-slate-700 dark:text-slate-300"},I1={class:"text-slate-700 dark:text-slate-100"},A1=["onClick"],b1={key:3,class:"text-[10px] text-slate-500"},R1=Pn({__name:"PostDetailPage",setup(t){const e=Ha();Fs();const n=Vr(),r=ye(null),s=ye([]),i=ye(!0),o=ye(""),c=ye(""),l=ye(!1),u=ft(()=>e.params.id),f=async R=>{if(!R){o.value="  ID.",r.value=null,s.value=[],l.value=!1;return}i.value=!0,o.value="";try{const V=await Oy(R);if(!V){o.value="   .",r.value=null,s.value=[],l.value=!1;return}r.value=V,nC(R).catch(()=>{}),s.value=await Zc(R),n.user?l.value=await Tp(R,n.user.uid):l.value=!1}catch(V){o.value=V?.message||" ",r.value=null,s.value=[],l.value=!1}finally{i.value=!1}};ur(u,R=>{R&&f(R)},{immediate:!0}),ur(()=>n.user,async R=>{r.value&&R?l.value=await Tp(u.value,R.uid):l.value=!1});const p=ft(()=>!!(n.user&&r.value&&n.user.uid===r.value.authorId)),m=async()=>{if(!n.user){alert(" .");return}const R=c.value.trim();!R||!u.value||(await s1({postId:u.value,authorId:n.user.uid,authorName:n.user.email||"user",content:R}),c.value="",s.value=await Zc(u.value))},y=async(R,V)=>{!n.user||n.user.uid!==V||(await i1(R),u.value&&(s.value=await Zc(u.value)))},x=async()=>{r.value&&confirm("  ?")&&(await tC(r.value.id),location.href="/")},k=async()=>{if(r.value){if(!n.user){alert(" .");return}try{const R=await rC(r.value.id,n.user.uid);l.value=R.liked,r.value&&(r.value.likes=R.likes)}catch(R){console.error(R),alert("    .")}}};return(R,V)=>(ee(),ie("div",o1,[i.value?(ee(),ie("div",a1," loading... ")):o.value?(ee(),ie("div",c1,Ce(o.value),1)):r.value?(ee(),ie("div",l1,[q("div",u1,[q("h1",h1,Ce(r.value.title),1),q("div",f1,[q("span",null,Ce(r.value.views??0)+" views",1),q("button",{onClick:k,class:"inline-flex items-center gap-1 px-2 py-1 rounded-md border border-slate-300/80 dark:border-slate-600/80 bg-white/90 dark:bg-slate-900/80 hover:border-cyan-400 hover:text-cyan-300 transition-colors"},[q("span",d1,Ce(l.value?"":""),1),q("span",null,Ce(r.value.likes??0),1)]),p.value?(ee(),ca(be(xt),{key:0,to:`/admin/edit/${r.value.id}`,class:"px-2 py-1 rounded-md bg-slate-900 text-slate-100 hover:bg-black dark:bg-yellow-400 dark:text-black dark:hover:bg-yellow-300 transition-colors"},{default:Ct(()=>[...V[1]||(V[1]=[ze(" edit ",-1)])]),_:1},8,["to"])):Gt("",!0),p.value?(ee(),ie("button",{key:1,onClick:x,class:"px-2 py-1 rounded-md bg-red-500 text-white hover:bg-red-400 transition-colors"}," delete ")):Gt("",!0)])]),q("article",p1,Ce(r.value.content),1),q("section",m1,[q("h2",g1,[V[2]||(V[2]=ze(" comments ",-1)),q("span",_1," ("+Ce(s.value.length)+") ",1)]),be(n).user?(ee(),ie("div",y1,[on(q("textarea",{"onUpdate:modelValue":V[0]||(V[0]=B=>c.value=B),rows:"2",class:"flex-1 rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-950 px-2 py-1.5 text-[11px] text-slate-800 dark:text-slate-100 resize-none focus:outline-none focus:ring-1 focus:ring-black dark:focus:ring-yellow-400",placeholder:" "},null,512),[[an,c.value]]),q("button",{onClick:m,class:"px-3 py-1.5 rounded-md text-[10px] font-semibold bg-black text-white hover:bg-slate-800 dark:bg-yellow-400 dark:text-black dark:hover:bg-yellow-300 transition-colors"},"  ")])):(ee(),ie("div",v1,"   . ")),s.value.length?(ee(),ie("div",E1,[(ee(!0),ie(Mt,null,Li(s.value,B=>(ee(),ie("div",{key:B.id,class:"flex items-start justify-between gap-2 rounded-md bg-slate-100 dark:bg-slate-900/80 px-2 py-1.5 text-[10px]"},[q("div",w1,[q("div",T1,Ce(B.authorName||"user"),1),q("div",I1,Ce(B.content),1)]),be(n).user&&be(n).user.uid===B.authorId?(ee(),ie("button",{key:0,onClick:G=>y(B.id,B.authorId),class:"mt-1 text-[9px] text-red-400 hover:text-red-300"},"  ",8,A1)):Gt("",!0)]))),128))])):(ee(),ie("div",b1,"   . "))])])):Gt("",!0)]))}});async function S1(t){if(!t.email)return;const e=Sn(Jt,"users",t.uid);if(!(await oh(e)).exists()){const r={uid:t.uid,email:t.email,displayName:t.displayName||void 0,photoURL:t.photoURL||void 0,role:"user",createdAt:Ls()};await HP(e,r)}}const P1=new yn;async function C1(){const t=await jg(_s,P1);return await S1(t.user),t.user}const x1={class:"max-w-sm mx-auto space-y-4"},k1={class:"space-y-2 text-[11px]"},N1=["disabled"],V1=["disabled"],D1={key:0,class:"text-[10px] text-red-400"},O1={class:"text-[10px] text-slate-500"},M1=Pn({__name:"LoginPage",setup(t){const e=ye(""),n=ye(""),r=ye(!1),s=ye(""),i=Vr(),o=Fs(),c=Ha(),l=async()=>{r.value=!0,s.value="";try{await i.login(e.value,n.value);const f=c.query.redirect||"/";o.push(f)}catch(f){s.value=f.message||" "}finally{r.value=!1}},u=async()=>{r.value=!0,s.value="";try{await C1();const f=c.query.redirect||"/";o.push(f)}catch(f){s.value=f.message||"  "}finally{r.value=!1}};return(f,p)=>(ee(),ie("div",x1,[p[4]||(p[4]=q("h1",{class:"text-lg font-semibold text-slate-900 dark:text-slate-100"}," login ",-1)),q("div",k1,[on(q("input",{"onUpdate:modelValue":p[0]||(p[0]=m=>e.value=m),type:"email",placeholder:"email",class:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-950 px-2 py-1"},null,512),[[an,e.value]]),on(q("input",{"onUpdate:modelValue":p[1]||(p[1]=m=>n.value=m),type:"password",placeholder:"password",class:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-950 px-2 py-1"},null,512),[[an,n.value]]),q("button",{onClick:l,disabled:r.value,class:"w-full mt-1 rounded-md bg-cyan-400 text-slate-950 py-1 font-semibold hover:bg-cyan-300 disabled:opacity-60"},"  ",8,N1),q("button",{onClick:u,disabled:r.value,class:"w-full rounded-md border border-slate-300 dark:border-slate-700 py-1 text-slate-700 dark:text-slate-200 hover:border-cyan-400 hover:text-cyan-400 disabled:opacity-60"}," Google  ",8,V1)]),s.value?(ee(),ie("p",D1,Ce(s.value),1)):Gt("",!0),q("p",O1,[p[3]||(p[3]=ze("  ? ",-1)),Fe(be(xt),{to:"/signup",class:"text-cyan-400"},{default:Ct(()=>[...p[2]||(p[2]=[ze("",-1)])]),_:1})])]))}}),L1={class:"max-w-sm mx-auto space-y-4"},F1={class:"space-y-2 text-[11px]"},U1=["disabled"],B1={key:0,class:"text-[10px] text-red-400"},j1={class:"text-[10px] text-slate-500"},$1=Pn({__name:"SignupPage",setup(t){const e=ye(""),n=ye(""),r=ye(!1),s=ye(""),i=Vr(),o=Fs(),c=async()=>{r.value=!0,s.value="";try{await i.signup(e.value,n.value),o.push("/")}catch(l){s.value=l.message||" "}finally{r.value=!1}};return(l,u)=>(ee(),ie("div",L1,[u[4]||(u[4]=q("h1",{class:"text-lg font-semibold text-slate-900 dark:text-slate-100"}," sign up ",-1)),q("div",F1,[on(q("input",{"onUpdate:modelValue":u[0]||(u[0]=f=>e.value=f),type:"email",placeholder:"email",class:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-950 px-2 py-1"},null,512),[[an,e.value]]),on(q("input",{"onUpdate:modelValue":u[1]||(u[1]=f=>n.value=f),type:"password",placeholder:"password (6 )",class:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-950 px-2 py-1"},null,512),[[an,n.value]]),q("button",{onClick:c,disabled:r.value,class:"w-full mt-1 rounded-md bg-cyan-400 text-slate-950 py-1 font-semibold hover:bg-cyan-300 disabled:opacity-60"},"  ",8,U1)]),s.value?(ee(),ie("p",B1,Ce(s.value),1)):Gt("",!0),q("p",j1,[u[3]||(u[3]=ze("   ? ",-1)),Fe(be(xt),{to:"/login",class:"text-cyan-400"},{default:Ct(()=>[...u[2]||(u[2]=[ze("",-1)])]),_:1})])]))}}),q1={class:"max-w-2xl mx-auto space-y-3"},H1={class:"space-y-2 text-[11px]"},G1=["disabled"],W1={key:0,class:"text-[10px] text-red-400"},z1=Pn({__name:"NewPostPage",setup(t){const e=Vr();Fs();const n=ye(""),r=ye(""),s=ye(""),i=ye(""),o=ye(!1),c=ye(""),l=async()=>{if(!e.user){c.value=" .";return}if(!n.value.trim()||!s.value.trim()){c.value="  .";return}o.value=!0,c.value="";try{const u=await XP({title:n.value.trim(),summary:r.value.trim(),content:s.value.trim(),tags:i.value.split(",").map(f=>f.trim()).filter(Boolean),authorId:e.user.uid,authorName:e.user.email||"user",isPublished:!0});location.href=`/posts/${u}`}catch(u){c.value=u.message||" "}finally{o.value=!1}};return(u,f)=>(ee(),ie("div",q1,[f[2]||(f[2]=q("h1",{class:"text-lg font-semibold text-slate-900 dark:text-slate-100"},"   ",-1)),q("div",H1,[on(q("input",{"onUpdate:modelValue":f[0]||(f[0]=p=>n.value=p),placeholder:"",class:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-950 px-2 py-1"},null,512),[[an,n.value]]),on(q("textarea",{"onUpdate:modelValue":f[1]||(f[1]=p=>s.value=p),rows:"10",placeholder:"",class:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-950 px-2 py-2 font-mono"},null,512),[[an,s.value]]),q("button",{onClick:l,disabled:o.value,class:"px-4 py-1.5 rounded-md bg-cyan-400 text-slate-950 text-[11px] font-semibold hover:bg-cyan-300 disabled:opacity-60"},"  ",8,G1),c.value?(ee(),ie("p",W1,Ce(c.value),1)):Gt("",!0)])]))}}),K1={class:"max-w-2xl mx-auto space-y-3"},Q1={key:0,class:"text-xs text-slate-500"},Y1={key:1,class:"text-xs text-red-400"},J1={key:2,class:"space-y-2 text-[11px]"},X1=["disabled"],Z1=Pn({__name:"EditPostPage",setup(t){const e=Ha(),n=Fs(),r=Vr(),s=ye(null),i=ye(!0),o=ye(""),c=e.params.id;to(async()=>{try{const u=await Oy(c);if(!u){o.value="   .";return}if(!r.user||r.user.uid!==u.authorId){o.value="  .";return}s.value=u}catch(u){o.value=u.message||" "}finally{i.value=!1}});const l=async()=>{if(s.value){i.value=!0,o.value="";try{await ZP(c,{title:s.value.title,summary:s.value.summary,content:s.value.content,tags:s.value.tags||[]}),n.push(`/posts/${c}`)}catch(u){o.value=u.message||" "}finally{i.value=!1}}};return(u,f)=>(ee(),ie("div",K1,[f[3]||(f[3]=q("h1",{class:"text-lg font-semibold text-slate-900 dark:text-slate-100"}," edit post ",-1)),i.value?(ee(),ie("div",Q1,"loading...")):o.value?(ee(),ie("div",Y1,Ce(o.value),1)):s.value?(ee(),ie("div",J1,[on(q("input",{"onUpdate:modelValue":f[0]||(f[0]=p=>s.value.title=p),class:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-950 px-2 py-1"},null,512),[[an,s.value.title]]),on(q("input",{"onUpdate:modelValue":f[1]||(f[1]=p=>s.value.summary=p),class:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-950 px-2 py-1"},null,512),[[an,s.value.summary]]),on(q("textarea",{"onUpdate:modelValue":f[2]||(f[2]=p=>s.value.content=p),rows:"10",class:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-950 px-2 py-2 font-mono"},null,512),[[an,s.value.content]]),q("button",{onClick:l,disabled:i.value,class:"px-4 py-1.5 rounded-md bg-cyan-400 text-slate-950 text-[11px] font-semibold hover:bg-cyan-300 disabled:opacity-60"},"  ",8,X1)])):Gt("",!0)]))}}),ex=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},tx={},nx={class:"space-y-2"};function rx(t,e){return ee(),ie("div",nx,[...e[0]||(e[0]=[q("h1",{class:"text-lg font-semibold text-slate-900 dark:text-slate-100"}," about ",-1),q("p",{class:"text-[12px] text-slate-600 dark:text-slate-400"}," IDE  UI   salcho  . Vue 3, Firebase, GitHub Pages, Tailwind   . ",-1)])])}const sx=ex(tx,[["render",rx]]),Ly=MT({history:gT("/"),routes:[{path:"/",name:"home",component:KC},{path:"/about",name:"about",component:sx},{path:"/posts",name:"posts",component:r1},{path:"/posts/:id",name:"post-detail",component:R1},{path:"/login",name:"login",component:M1},{path:"/signup",name:"signup",component:$1},{path:"/admin/new",name:"new-post",component:z1,meta:{requiresAuth:!0}},{path:"/admin/edit/:id",name:"edit-post",component:Z1,meta:{requiresAuth:!0}}]});Ly.beforeEach(async t=>{const e=Vr();if(!e.initialized){const s=e.init?.();s&&typeof s.then=="function"&&await s}const n=!!e.user,r=t.name;return t.meta.requiresAuth&&!n?{name:"login",query:{redirect:t.fullPath}}:n&&(r==="login"||r==="signup")?{name:"home"}:!0});const lh=Tw($C),ix=bw();lh.use(ix);lh.use(Ly);const ox=Vr();ox.init();lh.mount("#app");
